{"version":3,"file":"admin-crud.js","sources":["../../../src/Interface/Admin/Assets/js/crud.js"],"sourcesContent":["// JavaScript pour le gestionnaire CRUD\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  initCrudTable();\n  initCrudForm();\n});\n\n/**\n * Initialise les fonctionnalités du tableau CRUD\n */\nfunction initCrudTable() {\n  const sortableHeaders = document.querySelectorAll(\".crud-sortable\");\n\n  sortableHeaders.forEach((header) => {\n    header.addEventListener(\"click\", () => {\n      const column = header.dataset.column;\n      sortTable(column);\n    });\n  });\n}\n\n/**\n * Trie le tableau par colonne\n */\nfunction sortTable(column) {\n  const table = document.querySelector(\".crud-table\");\n  if (!table) return;\n\n  const tbody = table.querySelector(\"tbody\");\n  const rows = Array.from(tbody.querySelectorAll(\"tr\"));\n\n  // Déterminer l'ordre de tri actuel\n  const currentOrder = table.dataset.sortOrder || \"asc\";\n  const newOrder = currentOrder === \"asc\" ? \"desc\" : \"asc\";\n\n  // Trouver l'index de la colonne\n  const headers = table.querySelectorAll(\"th\");\n  let columnIndex = -1;\n  headers.forEach((header, index) => {\n    if (header.dataset.column === column) {\n      columnIndex = index;\n    }\n  });\n\n  if (columnIndex === -1) return;\n\n  // Trier les lignes\n  rows.sort((a, b) => {\n    const cellA = a.cells[columnIndex].textContent.trim();\n    const cellB = b.cells[columnIndex].textContent.trim();\n\n    // Essayer de comparer comme des nombres\n    const numA = parseFloat(cellA);\n    const numB = parseFloat(cellB);\n\n    if (!isNaN(numA) && !isNaN(numB)) {\n      return newOrder === \"asc\" ? numA - numB : numB - numA;\n    }\n\n    // Comparaison alphabétique\n    return newOrder === \"asc\"\n      ? cellA.localeCompare(cellB)\n      : cellB.localeCompare(cellA);\n  });\n\n  // Réinsérer les lignes triées\n  rows.forEach((row) => tbody.appendChild(row));\n\n  // Mettre à jour l'ordre de tri\n  table.dataset.sortOrder = newOrder;\n  table.dataset.sortColumn = column;\n}\n\n/**\n * Initialise les fonctionnalités du formulaire CRUD\n */\nfunction initCrudForm() {\n  const form = document.querySelector(\".crud-form\");\n  if (!form) return;\n\n  // Validation basique avant soumission\n  form.addEventListener(\"submit\", (e) => {\n    const requiredInputs = form.querySelectorAll(\"[required]\");\n    let isValid = true;\n\n    requiredInputs.forEach((input) => {\n      if (!input.value.trim()) {\n        isValid = false;\n        input.classList.add(\"is-invalid\");\n      } else {\n        input.classList.remove(\"is-invalid\");\n      }\n    });\n\n    if (!isValid) {\n      e.preventDefault();\n      alert(\"Veuillez remplir tous les champs obligatoires\");\n    }\n  });\n\n  // Retirer la classe d'erreur lors de la saisie\n  const inputs = form.querySelectorAll(\n    \".crud-form-input, .crud-form-select, .crud-form-textarea\"\n  );\n  inputs.forEach((input) => {\n    input.addEventListener(\"input\", () => {\n      input.classList.remove(\"is-invalid\");\n    });\n  });\n}\n"],"names":["initCrudTable","initCrudForm","header","column","sortTable","table","tbody","rows","newOrder","headers","columnIndex","index","a","b","cellA","cellB","numA","numB","row","form","e","requiredInputs","isValid","input"],"mappings":"AAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDA,EAAa,EACbC,EAAY,CACd,CAAC,EAKD,SAASD,GAAgB,CACC,SAAS,iBAAiB,gBAAgB,EAElD,QAASE,GAAW,CAClCA,EAAO,iBAAiB,QAAS,IAAM,CACrC,MAAMC,EAASD,EAAO,QAAQ,OAC9BE,EAAUD,CAAM,CAClB,CAAC,CACH,CAAC,CACH,CAKA,SAASC,EAAUD,EAAQ,CACzB,MAAME,EAAQ,SAAS,cAAc,aAAa,EAClD,GAAI,CAACA,EAAO,OAEZ,MAAMC,EAAQD,EAAM,cAAc,OAAO,EACnCE,EAAO,MAAM,KAAKD,EAAM,iBAAiB,IAAI,CAAC,EAI9CE,GADeH,EAAM,QAAQ,WAAa,SACd,MAAQ,OAAS,MAG7CI,EAAUJ,EAAM,iBAAiB,IAAI,EAC3C,IAAIK,EAAc,GAClBD,EAAQ,QAAQ,CAACP,EAAQS,IAAU,CAC7BT,EAAO,QAAQ,SAAWC,IAC5BO,EAAcC,EAElB,CAAC,EAEGD,IAAgB,KAGpBH,EAAK,KAAK,CAACK,EAAGC,IAAM,CAClB,MAAMC,EAAQF,EAAE,MAAMF,CAAW,EAAE,YAAY,KAAI,EAC7CK,EAAQF,EAAE,MAAMH,CAAW,EAAE,YAAY,KAAI,EAG7CM,EAAO,WAAWF,CAAK,EACvBG,EAAO,WAAWF,CAAK,EAE7B,MAAI,CAAC,MAAMC,CAAI,GAAK,CAAC,MAAMC,CAAI,EACtBT,IAAa,MAAQQ,EAAOC,EAAOA,EAAOD,EAI5CR,IAAa,MAChBM,EAAM,cAAcC,CAAK,EACzBA,EAAM,cAAcD,CAAK,CAC/B,CAAC,EAGDP,EAAK,QAASW,GAAQZ,EAAM,YAAYY,CAAG,CAAC,EAG5Cb,EAAM,QAAQ,UAAYG,EAC1BH,EAAM,QAAQ,WAAaF,EAC7B,CAKA,SAASF,GAAe,CACtB,MAAMkB,EAAO,SAAS,cAAc,YAAY,EAChD,GAAI,CAACA,EAAM,OAGXA,EAAK,iBAAiB,SAAWC,GAAM,CACrC,MAAMC,EAAiBF,EAAK,iBAAiB,YAAY,EACzD,IAAIG,EAAU,GAEdD,EAAe,QAASE,GAAU,CAC3BA,EAAM,MAAM,OAIfA,EAAM,UAAU,OAAO,YAAY,GAHnCD,EAAU,GACVC,EAAM,UAAU,IAAI,YAAY,EAIpC,CAAC,EAEID,IACHF,EAAE,eAAc,EAChB,MAAM,+CAA+C,EAEzD,CAAC,EAGcD,EAAK,iBAClB,0DACJ,EACS,QAASI,GAAU,CACxBA,EAAM,iBAAiB,QAAS,IAAM,CACpCA,EAAM,UAAU,OAAO,YAAY,CACrC,CAAC,CACH,CAAC,CACH"}