var kX=Object.defineProperty;var _X=(xn,Tn,Bn)=>Tn in xn?kX(xn,Tn,{enumerable:!0,configurable:!0,writable:!0,value:Bn}):xn[Tn]=Bn;var Ie=(xn,Tn,Bn)=>_X(xn,typeof Tn!="symbol"?Tn+"":Tn,Bn);/* empty css           */const CX=["contact","archive","login","register","logout","posts","admin"];let gY=[];function SX(){const xn=document.getElementById("menuForm");if(!xn)return;const Tn=xn.dataset.usedSlugs;Tn&&(gY=JSON.parse(Tn)),AX()}function AX(){const xn=document.getElementById("slug"),Tn=document.getElementById("type"),Bn=document.getElementById("menuForm");xn&&xn.addEventListener("input",YT),Tn&&Tn.addEventListener("change",YT),Bn&&Bn.addEventListener("submit",DX)}function OX(xn,Tn,Bn){const Ln=document.getElementById("label"),No=document.getElementById("slug"),_o=document.getElementById("type");Ln&&(Ln.value=xn),No&&(No.value=Tn),_o&&(_o.value=Bn),YT()}function YT(){const xn=document.getElementById("slug"),Tn=document.getElementById("type"),Bn=document.getElementById("slug-error"),Ln=document.getElementById("slug-warning"),No=document.getElementById("submitBtn");if(!xn||!Tn||!Bn||!Ln||!No)return;const _o=xn.value.trim(),ws=Tn.value;if(Bn.style.display="none",Ln.style.display="none",No.disabled=!1,!!_o){if(gY.includes(_o)){Bn.textContent="⚠️ Ce slug est déjà dans le menu",Bn.style.display="block",No.disabled=!0;return}if(ws!=="post"&&CX.includes(_o)){Bn.textContent="⚠️ Ce slug est réservé pour une page système",Bn.style.display="block",No.disabled=!0;return}ws==="post"&&CX.includes(_o)&&(Ln.textContent="⚠️ Attention : ce slug correspond à une page système, il y aura un conflit",Ln.style.display="block")}}function DX(xn){const Tn=document.getElementById("slug");if(!Tn)return;const Bn=Tn.value.trim();if(gY.includes(Bn))return xn.preventDefault(),alert("Ce slug est déjà dans le menu"),!1}function hY(){const xn=document.getElementById("type"),Tn=document.getElementById("categoryGroup"),Bn=document.getElementById("postsSection"),Ln=document.getElementById("categoriesSection"),No=document.getElementById("category_id");xn&&(xn.value==="archive"?(Tn&&(Tn.style.display="block"),Bn&&(Bn.style.display="none"),Ln&&(Ln.style.display="block")):(Tn&&(Tn.style.display="none"),Bn&&(Bn.style.display="block"),Ln&&(Ln.style.display="none"),No&&(No.value="")))}function RX(){const xn=document.getElementById("label"),Tn=document.getElementById("slug"),Bn=document.getElementById("type"),Ln=document.getElementById("category_id");xn&&(xn.value="Tous les articles"),Tn&&(Tn.value="posts"),Bn&&(Bn.value="archive"),Ln&&(Ln.value=""),hY(),YT()}function MX(xn,Tn,Bn){const Ln=document.getElementById("label"),No=document.getElementById("slug"),_o=document.getElementById("type"),ws=document.getElementById("category_id");Ln&&(Ln.value=xn),No&&(No.value=Tn),_o&&(_o.value="archive"),ws&&(ws.value=Bn),hY(),YT()}function BX(){const xn=document.getElementById("category_id"),Tn=document.getElementById("label"),Bn=document.getElementById("slug");if(!xn||!Tn||!Bn)return;const Ln=xn.options[xn.selectedIndex];if(Ln.value==="")Tn.value="Tous les articles",Bn.value="posts";else{const No=Ln.getAttribute("data-name"),_o=Ln.getAttribute("data-slug");Tn.value=No,Bn.value=_o}YT()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",SX):SX();window.fillForm=OX;window.toggleCategorySelect=hY;window.fillFormForAllPosts=RX;window.fillFormForCategory=MX;window.updateLabelAndSlugFromCategory=BX;function NX(xn){return xn&&xn.__esModule&&Object.prototype.hasOwnProperty.call(xn,"default")?xn.default:xn}var wX={exports:{}};(function(xn){(function(){var Tn=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Bn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Ln=function(e,t){var o=Array.prototype.slice.call(e);return o.sort(t)},No=function(e,t){return _o(function(o,r){return e.eq(t(o),t(r))})},_o=function(e){return{eq:e}},ws=_o(function(e,t){return e===t}),Et=ws,Dn=function(e){return _o(function(t,o){if(t.length!==o.length)return!1;for(var r=t.length,c=0;c<r;c++)if(!e.eq(t[c],o[c]))return!1;return!0})},ki=function(e,t){return No(Dn(e),function(o){return Ln(o,t)})},ra=function(e){return _o(function(t,o){var r=Object.keys(t),c=Object.keys(o);if(!ki(Et).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(t[b],o[b]))return!1}return!0})},sc=_o(function(e,t){if(e===t)return!0;var o=Tn(e),r=Tn(t);return o!==r?!1:Bn(o)?e===t:o==="array"?Dn(sc).eq(e,t):o==="object"?ra(sc).eq(e,t):!1});const xr=Object.getPrototypeOf,Zs=(e,t,o)=>{var r;return o(e,t.prototype)?!0:((r=e.constructor)==null?void 0:r.name)===t.name},rc=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Zs(e,String,(o,r)=>r.isPrototypeOf(o))?"string":t},oo=e=>t=>rc(t)===e,Rt=e=>t=>typeof t===e,Fa=e=>t=>e===t,ac=(e,t)=>tn(e)&&Zs(e,t,(o,r)=>xr(o)===r),Y=oo("string"),tn=oo("object"),Qc=e=>ac(e,Object),dn=oo("array"),ie=Fa(null),an=Rt("boolean"),as=Fa(void 0),gn=e=>e==null,ve=e=>!gn(e),ne=Rt("function"),pr=Rt("number"),Vn=(e,t)=>{if(dn(e)){for(let o=0,r=e.length;o<r;++o)if(!t(e[o]))return!1;return!0}return!1},Dt=()=>{},T=(e,t)=>(...o)=>e(t.apply(null,o)),Ko=(e,t)=>o=>e(t(o)),Xe=e=>()=>e,Yo=e=>e,Vt=(e,t)=>e===t;function Me(e,...t){return(...o)=>{const r=t.concat(o);return e.apply(null,r)}}const ao=e=>t=>!e(t),Qs=e=>()=>{throw new Error(e)},Io=e=>e(),hs=e=>{e()},De=Xe(!1),et=Xe(!0),Jl=class Jl{constructor(t,o){Ie(this,"tag");Ie(this,"value");this.tag=t,this.value=o}static some(t){return new Jl(!0,t)}static none(){return Jl.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?Jl.some(t(this.value)):Jl.none()}bind(t){return this.tag?t(this.value):Jl.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:Jl.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return ve(t)?Jl.some(t):Jl.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Jl,"singletonNone",new Jl(!1));let N=Jl;const Rc=Array.prototype.slice,co=Array.prototype.indexOf,cs=Array.prototype.push,So=(e,t)=>co.call(e,t),aa=(e,t)=>{const o=So(e,t);return o===-1?N.none():N.some(o)},vt=(e,t)=>So(e,t)>-1,jn=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return!0}return!1},Mt=(e,t)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=t(u,c)}return r},le=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];t(c,o)}},Bs=(e,t)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];t(r,o)}},_e=(e,t)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(t(f,c)?o:r).push(f)}return{pass:o,fail:r}},ge=(e,t)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];t(u,r)&&o.push(u)}return o},nn=(e,t)=>{if(e.length===0)return[];{let o=t(e[0]);const r=[];let c=[];for(let u=0,f=e.length;u<f;u++){const b=e[u],v=t(b);v!==o&&(r.push(c),c=[]),o=v,c.push(b)}return c.length!==0&&r.push(c),r}},yn=(e,t,o)=>(Bs(e,(r,c)=>{o=t(o,r,c)}),o),cn=(e,t,o)=>(le(e,(r,c)=>{o=t(o,r,c)}),o),Ws=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(t(u,r))return N.some(u);if(o(u,r))break}return N.none()},so=(e,t)=>Ws(e,t,De),il=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return N.some(o)}return N.none()},Lh=(e,t)=>{for(let o=e.length-1;o>=0;o--)if(t(e[o],o))return N.some(o);return N.none()},ca=e=>{const t=[];for(let o=0,r=e.length;o<r;++o){if(!dn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);cs.apply(t,e[o])}return t},Gn=(e,t)=>ca(Mt(e,t)),Ha=(e,t)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(t(c,o)!==!0)return!1}return!0},Lo=e=>{const t=Rc.call(e,0);return t.reverse(),t},is=(e,t)=>ge(e,o=>!vt(t,o)),Ku=(e,t)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=t(u,r)}return o},_i=(e,t)=>{const o=Rc.call(e,0);return o.sort(t),o},Ur=(e,t)=>t>=0&&t<e.length?N.some(e[t]):N.none(),ps=e=>Ur(e,0),js=e=>Ur(e,e.length-1),Fo=ne(Array.from)?Array.from:e=>Rc.call(e),cc=(e,t)=>{for(let o=0;o<e.length;o++){const r=t(e[o],o);if(r.isSome())return r}return N.none()},ic=(e,t)=>{const o=[],r=ne(t)?c=>jn(o,u=>t(u,c)):c=>vt(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},bt=Object.keys,$n=Object.hasOwnProperty,hn=(e,t)=>{const o=bt(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];t(f,u)}},lc=(e,t)=>pa(e,(o,r)=>({k:r,v:t(o,r)})),pa=(e,t)=>{const o={};return hn(e,(r,c)=>{const u=t(r,c);o[u.k]=u.v}),o},pt=e=>(t,o)=>{e[o]=t},ll=(e,t,o,r)=>{hn(e,(c,u)=>{(t(c,u)?o:r)(c,u)})},Qm=(e,t)=>{const o={},r={};return ll(e,t,pt(o),pt(r)),{t:o,f:r}},nu=(e,t)=>{const o={};return ll(e,t,pt(o),Dt),o},Mc=(e,t)=>{const o=[];return hn(e,(r,c)=>{o.push(t(r,c))}),o},za=e=>Mc(e,Yo),wo=(e,t)=>Yt(e,t)?N.from(e[t]):N.none(),Yt=(e,t)=>$n.call(e,t),Xo=(e,t)=>Yt(e,t)&&e[t]!==void 0&&e[t]!==null,ef=(e,t,o=sc)=>ra(o).eq(e,t),ei={generate:e=>{if(!dn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};return le(e,(r,c)=>{const u=bt(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!dn(b))throw new Error("case arguments must be an array");t.push(f),o[f]=(...v)=>{const w=v.length;if(w!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+w);return{fold:(...O)=>{if(O.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+O.length);return O[c].apply(null,v)},match:O=>{const R=bt(O);if(t.length!==R.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+R.join(","));if(!Ha(t,U=>vt(R,U)))throw new Error("Not all branches were specified when using match. Specified: "+R.join(", ")+`
Required: `+t.join(", "));return O[f].apply(null,v)},log:O=>{console.log(O,{constructors:t,constructor:f,params:v})}}}}),o}},Nt=e=>{let t=e;return{get:()=>t,set:c=>{t=c}}},ba=e=>{const t=u=>u(e),o=Xe(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:et,isError:De,map:u=>Er.value(u(e)),mapError:r,bind:t,exists:t,forall:t,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>N.some(e)};return c},ul=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:De,isError:et,map:t,mapError:r=>Er.error(r(e)),bind:t,exists:De,forall:et,getOr:Yo,or:Yo,getOrThunk:Io,orThunk:Io,getOrDie:Qs(String(e)),each:Dt,toOptional:N.none};return o},Er={value:ba,error:ul,fromOption:(e,t)=>e.fold(()=>ul(t),ba)},tf=typeof window<"u"?window:Function("return this;")(),ts=()=>{const e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},Wd=()=>{const e=ts(),t=(o,r)=>{let c="";for(let u=o;u<=r;++u){const f=e[u].toString(16).padStart(2,"0");c+=f}return c};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`},jd=(e,t,o)=>Math.min(Math.max(e,t),o),dl=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ai=0;const Ns=e=>{const o=new Date().getTime(),r=Math.floor(dl()*1e9);return Ai++,e+"_"+r+Ai+String(o)},ou=()=>window.isSecureContext?window.crypto.randomUUID():Wd(),dg=(e,t)=>t,st=(e,t)=>Qc(e)&&Qc(t)?Gd(e,t):t,Va=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<t.length;r++){const c=t[r];for(const u in c)Yt(c,u)&&(o[u]=e(o[u],c[u]))}return o},Gd=Va(st),qd=Va(dg),uo=(e,t,o=Vt)=>e.exists(r=>o(r,t)),Kd=(e,t,o=Vt)=>_s(e,t,o).getOr(e.isNone()&&t.isNone()),uc=e=>{const t=[],o=r=>{t.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return t},_s=(e,t,o)=>e.isSome()&&t.isSome()?N.some(o(e.getOrDie(),t.getOrDie())):N.none(),Oi=(e,t,o,r)=>e.isSome()&&t.isSome()&&o.isSome()?N.some(r(e.getOrDie(),t.getOrDie(),o.getOrDie())):N.none(),Yd=e=>e.bind(Yo),dc=(e,t)=>e?N.some(t):N.none(),Tr=(e,t)=>{let o=t??tf;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ti=(e,t)=>{const o=e.split(".");return Tr(o,t)};ei.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const va=e=>{const t=[],o=[];return le(e,r=>{r.fold(c=>{t.push(c)},c=>{o.push(c)})}),{errors:t,values:o}},z1=e=>{const t=Nt(N.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(N.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(N.some(b))}}},mg=e=>{const t=Nt(N.none()),o=()=>t.get().each(b=>clearInterval(b));return{clear:()=>{o(),t.set(N.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(N.some(setInterval(b,e)))}}},Bc=()=>{const e=z1(Dt);return{...e,on:o=>e.get().each(o)}},ml=(e,t)=>e.substring(t),fl=(e,t,o)=>t===""||e.length>=t.length&&e.substr(o,o+t.length)===t,fg=(e,t)=>Wt(e,t)?ml(e,t.length):e,xs=(e,t,o=0,r)=>{const c=e.indexOf(t,o);return c!==-1?as(r)?!0:c+t.length<=r:!1},Wt=(e,t)=>fl(e,t,0),Zr=(e,t)=>fl(e,t,e.length-t.length),kr=e=>t=>t.replace(e,""),ls=kr(/^\s+|\s+$/g),nf=kr(/^\s+/g),Xd=kr(/\s+$/g),Jo=e=>e.length>0,Xu=e=>!Jo(e),ni=(e,t)=>t<=0?"":new Array(t+1).join(e),Hh=(e,t=10)=>{const o=parseInt(e,t);return isNaN(o)?N.none():N.some(o)},ot=(e,t)=>{let o=null;return{cancel:()=>{ie(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ie(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},t))}}},su=(e,t)=>{let o=null;const r=()=>{ie(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},t)}}},ya=e=>{let t=!1,o;return(...r)=>(t||(t=!0,o=e.apply(null,r)),o)},Ju="\uFEFF",us=" ",zh="…",oi=e=>e===Ju,Nc=e=>e.replace(/\uFEFF/g,""),gg=e=>{const t={};return le(e,o=>{t[o]={}}),bt(t)},hg=e=>e.length!==void 0,gl=Array.isArray,pg=e=>{if(gl(e))return e;{const t=[];for(let o=0,r=e.length;o<r;o++)t[o]=e[o];return t}},Jd=(e,t,o)=>{if(!e)return!1;if(o=o||e,hg(e)){for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Yt(e,r)&&t.call(o,e[r],r,e)===!1)return!1;return!0},hl=(e,t)=>{const o=[];return Jd(e,(r,c)=>{o.push(t(r,c,e))}),o},Qu=(e,t)=>{const o=[];return Jd(e,(r,c)=>{(!t||t(r,c,e))&&o.push(r)}),o},We=(e,t)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===t)return o}return-1},Qd=(e,t,o,r)=>{let c=as(o)?e[0]:o;for(let u=0;u<e.length;u++)c=t.call(r,c,e[u],u);return c},of=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e))return r;return-1},si=e=>e[e.length-1],ru=(e,t,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),v=c||!u&&f&&r("(min-device-width:768px)"),w=u||f&&!v,k=t.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,O=!w&&!v&&!k;return{isiPad:Xe(c),isiPhone:Xe(u),isTablet:Xe(v),isPhone:Xe(w),isTouch:Xe(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Xe(k),isDesktop:Xe(O)}},em=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(t))return r}},Ca=(e,t)=>{const o=em(e,t);if(!o)return{major:0,minor:0};const r=c=>Number(t.replace(o,"$"+c));return pl(r(1),r(2))},ed=(e,t)=>{const o=String(t).toLowerCase();return e.length===0?au():Ca(e,o)},au=()=>pl(0,0),pl=(e,t)=>({major:e,minor:t}),mo={nu:pl,detect:ed,unknown:au},tm=(e,t)=>cc(t.brands,o=>{const r=o.brand.toLowerCase();return so(e,c=>{var u;return r===((u=c.brand)==null?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:mo.nu(parseInt(o.version,10),0)}))}),Wr=(e,t)=>{const o=String(t).toLowerCase();return so(e,r=>r.search(o))},B=(e,t)=>Wr(e,t).map(o=>{const r=mo.detect(o.versionRegexes,t);return{current:o.name,version:r}}),V=(e,t)=>Wr(e,t).map(o=>{const r=mo.detect(o.versionRegexes,t);return{current:o.name,version:r}}),X=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ye=e=>t=>xs(t,e),yt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>xs(e,"edge/")&&xs(e,"chrome")&&xs(e,"safari")&&xs(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,X],search:e=>xs(e,"chrome")&&!xs(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>xs(e,"msie")||xs(e,"trident")},{name:"Opera",versionRegexes:[X,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ye("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ye("firefox")},{name:"Safari",versionRegexes:[X,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(xs(e,"safari")||xs(e,"mobile/"))&&xs(e,"applewebkit")}],ln=[{name:"Windows",search:ye("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>xs(e,"iphone")||xs(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ye("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ye("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ye("linux"),versionRegexes:[]},{name:"Solaris",search:ye("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ye("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ye("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Po={browsers:Xe(yt),oses:Xe(ln)},Sa="Edge",Pc="Chromium",un="IE",$="Opera",K="Firefox",te="Safari",we=()=>Ue({current:void 0,version:mo.unknown()}),Ue=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isEdge:r(Sa),isChromium:r(Pc),isIE:r(un),isOpera:r($),isFirefox:r(K),isSafari:r(te)}},dt={unknown:we,nu:Ue},on="Windows",Jn="iOS",qn="Android",Ps="Linux",As="macOS",sf="Solaris",rf="FreeBSD",ri="ChromeOS",V1=()=>$S({current:void 0,version:mo.unknown()}),$S=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isWindows:r(on),isiOS:r(Jn),isAndroid:r(qn),isMacOS:r(As),isLinux:r(Ps),isSolaris:r(sf),isFreeBSD:r(rf),isChromeOS:r(ri)}},Iv={unknown:V1,nu:$S},XT={detect:(e,t,o)=>{const r=Po.browsers(),c=Po.oses(),u=t.bind(v=>tm(r,v)).orThunk(()=>B(r,e)).fold(dt.unknown,dt.nu),f=V(c,e).fold(Iv.unknown,Iv.nu),b=ru(f,u,e,o);return{browser:u,os:f,deviceType:b}}},JT=e=>window.matchMedia(e).matches;let QT=ya(()=>XT.detect(window.navigator.userAgent,N.from(window.navigator.userAgentData),JT));const cu=()=>QT(),e3=(e,t)=>ti(e,t),t3=(e,t)=>{const o=e3(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},Lv=Object.getPrototypeOf,Fv=e=>t3("HTMLElement",e),F5=e=>{const t=ti("ownerDocument.defaultView",e);return tn(e)&&(Fv(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Lv(e).constructor.name))},n3=window.navigator.userAgent,Hv=cu(),iu=Hv.browser,bl=Hv.os,af=Hv.deviceType,o3=n3.indexOf("Windows Phone")!==-1,Fn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:iu.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!iu.isIE(),windowsPhone:o3,browser:{current:iu.current,version:iu.version,isChromium:iu.isChromium,isEdge:iu.isEdge,isFirefox:iu.isFirefox,isIE:iu.isIE,isOpera:iu.isOpera,isSafari:iu.isSafari},os:{current:bl.current,version:bl.version,isAndroid:bl.isAndroid,isChromeOS:bl.isChromeOS,isFreeBSD:bl.isFreeBSD,isiOS:bl.isiOS,isLinux:bl.isLinux,isMacOS:bl.isMacOS,isSolaris:bl.isSolaris,isWindows:bl.isWindows},deviceType:{isDesktop:af.isDesktop,isiPad:af.isiPad,isiPhone:af.isiPhone,isPhone:af.isPhone,isTablet:af.isTablet,isTouch:af.isTouch,isWebView:af.isWebView}},s3=/^\s*|\s*$/g,zv=e=>gn(e)?"":(""+e).replace(s3,""),Es=(e,t)=>t?t==="array"&&gl(e)?!0:typeof e===t:e!==void 0,r3=(e,t,o={})=>{const r=Y(e)?e.split(t||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},U1=Yt,a3=(e,...t)=>{for(let o=0;o<t.length;o++){const r=t[o];for(const c in r)if(Yt(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Vv=function(e,t,o,r){r=r||this,e&&(o&&(e=e[o]),Jd(e,(c,u)=>t.call(r,c,u,o)===!1?!1:(Vv(c,t,o,r),!0)))},He={trim:zv,isArray:gl,is:Es,toArray:pg,makeMap:r3,each:Jd,map:hl,grep:Qu,inArray:We,hasOwn:U1,extend:a3,walk:Vv,resolve:(e,t=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(t=t[o[r]],!!t);r++);return t},explode:(e,t)=>dn(e)?e:e===""?[]:hl(e.split(t||","),zv),_addCacheSuffix:e=>{const t=Fn.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},$c=(e,t)=>{const r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Vh(r.childNodes[0])},Z1=(e,t)=>{const r=(t||document).createElement(e);return Vh(r)},Di=(e,t)=>{const r=(t||document).createTextNode(e);return Vh(r)},Vh=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},q={fromHtml:$c,fromTag:Z1,fromText:Di,fromDom:Vh,fromPoint:(e,t,o)=>N.from(e.dom.elementFromPoint(t,o)).map(Vh)},mc=(e,t)=>{t.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},nm=(e,t)=>{t.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Zv=(e,t,o)=>{const r=e.document.createRange();return mc(r,t),nm(r,o),r},vg=(e,t,o,r,c)=>{const u=e.document.createRange();return u.setStart(t.dom,o),u.setEnd(r.dom,c),u},ia=ei.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fc=(e,t,o)=>t(q.fromDom(o.startContainer),o.startOffset,q.fromDom(o.endContainer),o.endOffset),Wv=(e,t)=>t.match({domRange:o=>({ltr:Xe(o),rtl:N.none}),relative:(o,r)=>({ltr:ya(()=>Zv(e,o,r)),rtl:ya(()=>N.some(Zv(e,r,o)))}),exact:(o,r,c,u)=>({ltr:ya(()=>vg(e,o,r,c,u)),rtl:ya(()=>N.some(vg(e,c,u,o,r)))})}),jv=(e,t)=>{const o=t.ltr();return o.collapsed?t.rtl().filter(c=>c.collapsed===!1).map(c=>ia.rtl(q.fromDom(c.endContainer),c.endOffset,q.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>fc(e,ia.ltr,o)):fc(e,ia.ltr,o)},Uh=(e,t)=>{const o=Wv(e,t);return jv(e,o)};ia.ltr,ia.rtl;const Ua=8,Gv=9,lu=11,Zh=1,qv=3,Ic=(e,t)=>{const o=e.dom;if(o.nodeType!==Zh)return!1;{const r=o;if(r.matches!==void 0)return r.matches(t);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Kv=e=>e.nodeType!==Zh&&e.nodeType!==Gv&&e.nodeType!==lu||e.childElementCount===0,vl=(e,t)=>{const o=t===void 0?document:t.dom;return Kv(o)?[]:Mt(o.querySelectorAll(e),q.fromDom)},om=(e,t)=>{const o=t===void 0?document:t.dom;return Kv(o)?N.none():N.from(o.querySelector(e)).map(q.fromDom)},En=(e,t)=>e.dom===t.dom,ai=(e,t)=>{const o=e.dom,r=t.dom;return o===r?!1:o.contains(r)},W1=Ic,IS=(e,t)=>{const o=[],r=u=>(o.push(u),t(u));let c=t(e);do c=c.bind(r);while(c.isSome());return o},mn=e=>e.dom.nodeName.toLowerCase(),td=e=>e.dom.nodeType,Gs=e=>t=>td(t)===e,yl=e=>td(e)===Ua||mn(e)==="#comment",Cl=e=>bs(e)&&F5(e.dom),bs=Gs(Zh),Qn=Gs(qv),i3=Gs(Gv),l3=Gs(lu),uu=e=>t=>bs(t)&&mn(t)===e,Ri=e=>q.fromDom(e.dom.ownerDocument),Sl=e=>i3(e)?e:Ri(e),er=e=>q.fromDom(Sl(e).dom.documentElement),nd=e=>q.fromDom(Sl(e).dom.defaultView),Lc=e=>N.from(e.dom.parentNode).map(q.fromDom),Mi=e=>N.from(e.dom.parentElement).map(q.fromDom),ci=(e,t)=>{const o=ne(t)?t:De;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=q.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},eo=e=>{const t=o=>ge(o,r=>!En(e,r));return Lc(e).map(vs).map(t).getOr([])},ii=e=>N.from(e.dom.previousSibling).map(q.fromDom),du=e=>N.from(e.dom.nextSibling).map(q.fromDom),la=e=>Lo(IS(e,ii)),br=e=>IS(e,du),vs=e=>Mt(e.dom.childNodes,q.fromDom),Bi=(e,t)=>{const o=e.dom.childNodes;return N.from(o[t]).map(q.fromDom)},_r=e=>Bi(e,0),qs=e=>Bi(e,e.dom.childNodes.length-1),cf=e=>e.dom.childNodes.length,LS=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return q.fromDom(t)},Yv=e=>l3(e)&&ve(e.dom.host),Ar=e=>q.fromDom(e.dom.getRootNode()),Xv=e=>Yv(e)?e:LS(Sl(e)),FS=e=>Yv(e)?e:q.fromDom(Sl(e).dom.body),lf=e=>{const t=Ar(e);return Yv(t)?N.some(t):N.none()},Pt=e=>q.fromDom(e.dom.host),Jv=e=>{if(ve(e.target)){const t=q.fromDom(e.target);if(bs(t)&&ir(t)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return ps(o)}}return N.from(e.target)},ir=e=>ve(e.dom.shadowRoot),Or=(e,t,o,r,c,u,f)=>({target:e,x:t,y:o,stop:r,prevent:c,kill:u,raw:f}),Dr=e=>{const t=q.fromDom(Jv(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=T(r,o);return Or(t,e.clientX,e.clientY,o,r,c,e)},Ho=(e,t)=>o=>{e(o)&&t(Dr(o))},uf=(e,t,o,r,c)=>{const u=Ho(o,r);return e.dom.addEventListener(t,u,c),{unbind:Me(Ni,e,t,u,c)}},j1=(e,t,o,r)=>uf(e,t,o,r,!1),Ni=(e,t,o,r)=>{e.dom.removeEventListener(t,o,r)},wl=et,Qv=(e,t,o)=>j1(e,t,wl,o),G1=()=>q.fromDom(document),q1=(e,t=!1)=>e.dom.focus({preventScroll:t}),od=e=>{const t=Ar(e).dom;return e.dom===t.activeElement},xl=(e=G1())=>N.from(e.dom.activeElement).map(q.fromDom),u3=e=>xl(Ar(e)).filter(t=>e.dom.contains(t.dom)),Gr=(e,t)=>{Lc(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},El=(e,t)=>{du(e).fold(()=>{Lc(e).each(c=>{Hn(c,t)})},r=>{Gr(r,t)})},mu=(e,t)=>{_r(e).fold(()=>{Hn(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},Hn=(e,t)=>{e.dom.appendChild(t.dom)},Fc=(e,t)=>{Gr(e,t),Hn(t,e)},HS=(e,t)=>{le(t,o=>{Gr(e,o)})},K1=(e,t)=>{le(t,(o,r)=>{const c=r===0?e:t[r-1];El(c,o)})},li=(e,t)=>{le(t,o=>{Hn(e,o)})},Ht=(e,t,o)=>{if(Y(o)||an(o)||pr(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},ds=(e,t,o)=>{Ht(e.dom,t,o)},Rr=(e,t)=>{const o=e.dom;hn(t,(r,c)=>{Ht(o,c,r)})},zo=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},Pi=(e,t)=>N.from(zo(e,t)),Qo=(e,t)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(t):!1},Ks=(e,t)=>{e.dom.removeAttribute(t)},yg=e=>{const t=e.dom.attributes;return t==null||t.length===0},Cn=e=>cn(e.dom.attributes,(t,o)=>(t[o.name]=o.value,t),{}),$i=e=>{e.dom.textContent="",le(vs(e),t=>{Ao(t)})},Ao=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},ui=e=>{const t=vs(e);t.length>0&&K1(e,t),Ao(e)},lr=(e,t)=>q.fromDom(e.dom.cloneNode(t)),ua=e=>lr(e,!1),Wh=e=>lr(e,!0),zS=(e,t)=>{const o=q.fromTag(t),r=Cn(e);return Rr(o,r),o},jh=(e,t)=>{const o=zS(e,t);El(e,o);const r=vs(e);return li(o,r),Ao(e),o},Gh=(e,t)=>{const r=(t||document).createElement("div");return r.innerHTML=e,vs(q.fromDom(r))},df=e=>Mt(e,q.fromDom),da=e=>e.dom.innerHTML,sd=(e,t)=>{const r=Ri(e).dom,c=q.fromDom(r.createDocumentFragment()),u=Gh(t,r);li(c,u),$i(e),Hn(e,c)},d3=e=>{const t=q.fromTag("div"),o=q.fromDom(e.dom.cloneNode(!0));return Hn(t,o),da(t)},mf=e=>e.style!==void 0&&ne(e.style.getPropertyValue),fo=e=>{const t=Qn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return lf(q.fromDom(t)).fold(()=>o.body.contains(t),Ko(fo,Pt))},Y1=(e,t,o)=>{if(!Y(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);mf(e)&&e.style.setProperty(t,o)},X1=(e,t)=>{mf(e)&&e.style.removeProperty(t)},gc=(e,t,o)=>{const r=e.dom;Y1(r,t,o)},di=(e,t)=>{const o=e.dom;hn(t,(r,c)=>{Y1(o,c,r)})},Ts=(e,t)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(t);return c===""&&!fo(e)?sm(o,t):c},sm=(e,t)=>mf(e)?e.style.getPropertyValue(t):"",tr=(e,t)=>{const o=e.dom,r=sm(o,t);return N.from(r).filter(c=>c.length>0)},Cg=e=>{const t={},o=e.dom;if(mf(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);t[c]=o.style[c]}return t},J1=(e,t)=>{const o=e.dom;X1(o,t),uo(Pi(e,"style").map(ls),"")&&Ks(e,"style")},e2=e=>e.dom.offsetWidth,Tl=((e,t)=>{const o=(b,v)=>{if(!pr(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const w=b.dom;mf(w)&&(w.style[e]=v+"px")},r=b=>{const v=t(b);if(v<=0||v===null){const w=Ts(b,e);return parseFloat(w)||0}return v},c=r,u=(b,v)=>cn(v,(w,k)=>{const O=Ts(b,k),R=O===void 0?0:parseInt(O,10);return isNaN(R)?w:w+R},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,v,w)=>{const k=u(b,w);return v>k?v-k:0}}})("height",e=>{const t=e.dom;return fo(e)?t.getBoundingClientRect().height:t.offsetHeight}),m3=e=>Tl.get(e),VS=(e,t)=>({left:e,top:t,translate:(r,c)=>VS(e+r,t+c)}),kl=VS,US=e=>{const t=e.getBoundingClientRect();return kl(t.left,t.top)},Sg=(e,t)=>e!==void 0?e:t!==void 0?t:0,qh=e=>{const t=e.dom.ownerDocument,o=t.body,r=t.defaultView,c=t.documentElement;if(o===e.dom)return kl(o.offsetLeft,o.offsetTop);const u=Sg(r==null?void 0:r.pageYOffset,c.scrollTop),f=Sg(r==null?void 0:r.pageXOffset,c.scrollLeft),b=Sg(c.clientTop,o.clientTop),v=Sg(c.clientLeft,o.clientLeft);return Kh(e).translate(f-v,u-b)},Kh=e=>{const t=e.dom,r=t.ownerDocument.body;return r===t?kl(r.offsetLeft,r.offsetTop):fo(e)?US(t):kl(0,0)},t2=e=>{const t=e!==void 0?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return kl(o,r)},ZS=(e,t,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,t)},Ii=(e,t)=>{cu().browser.isSafari()&&ne(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},f3=(e,t)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+t+" value of a "+t+" node");return r(u).getOr("")},r=u=>e(u)?N.from(u.dom.nodeValue):N.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+t+" value of a "+t+" node");u.dom.nodeValue=f}}},rm=(e,t)=>{const r=document.createDocumentFragment();return le(e,c=>{r.appendChild(c.dom)}),q.fromDom(r)},io=f3(Qn,"text"),ma=e=>io.get(e),fu=e=>io.getOption(e),n2=(e,t)=>io.set(e,t),am=(e,t)=>{const o=zo(e,t);return o===void 0||o===""?[]:o.split(" ")},o2=(e,t,o)=>{const c=am(e,t).concat([o]);return ds(e,t,c.join(" ")),!0},WS=(e,t,o)=>{const r=ge(am(e,t),c=>c!==o);return r.length>0?ds(e,t,r.join(" ")):Ks(e,t),!1};var gu=(e,t,o,r,c)=>e(o,r)?N.some(o):ne(c)&&c(o)?N.none():t(o,r,c);const hu=(e,t,o)=>{let r=e.dom;const c=ne(o)?o:De;for(;r.parentNode;){r=r.parentNode;const u=q.fromDom(r);if(t(u))return N.some(u);if(c(u))break}return N.none()},bo=(e,t,o)=>gu((c,u)=>u(c),hu,e,t,o),jS=(e,t)=>{const o=e.dom;return o.parentNode?ns(q.fromDom(o.parentNode),r=>!En(e,r)&&t(r)):N.none()},ns=(e,t)=>{const o=c=>t(q.fromDom(c));return so(e.dom.childNodes,o).map(q.fromDom)},Yh=(e,t)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=q.fromDom(r.childNodes[c]);if(t(u))return N.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return N.none()};return o(e.dom)},$s=(e,t,o)=>hu(e,r=>Ic(r,t),o),pu=(e,t)=>om(t,e),qr=(e,t,o)=>gu((c,u)=>Ic(c,u),$s,e,t,o),rd=e=>e.dom.classList!==void 0,Q1=e=>am(e,"class"),GS=(e,t)=>o2(e,"class",t),s2=(e,t)=>WS(e,"class",t),g3=(e,t)=>vt(Q1(e),t)?s2(e,t):GS(e,t),Hc=(e,t)=>{rd(e)?e.dom.classList.add(t):GS(e,t)},cm=e=>{(rd(e)?e.dom.classList:Q1(e)).length===0&&Ks(e,"class")},ur=(e,t)=>{rd(e)?e.dom.classList.remove(t):s2(e,t),cm(e)},Mr=(e,t)=>{const o=rd(e)?e.dom.classList.toggle(t):g3(e,t);return cm(e),o},e0=(e,t)=>rd(e)&&e.dom.classList.contains(t),Xh=(e,t)=>{le(t,o=>{Hc(e,o)})},qS=(e,t)=>{le(t,o=>{ur(e,o)})},KS=e=>qr(e,"[contenteditable]"),Li=(e,t=!1)=>fo(e)?e.dom.isContentEditable:KS(e).fold(Xe(t),o=>z5(o)==="true"),z5=e=>e.dom.contentEditable,ff=(e,t)=>{e.dom.contentEditable=t?"true":"false"},ad=(e,t,o)=>ge(ci(e,o),t),h3=(e,t)=>ge(vs(e),t),t0=(e,t)=>{let o=[];return le(vs(e),r=>{t(r)&&(o=o.concat([r])),o=o.concat(t0(r,t))}),o},p3=(e,t,o)=>ad(e,r=>Ic(r,t),o),Br=(e,t)=>vl(t,e),wg=(e,t,o)=>hu(e,t,o).isSome(),b3=(e,t)=>jS(e,t).isSome(),xg=(e,t)=>Yh(e,t).isSome(),n0=(e,t)=>wg(e,Me(En,t)),YS=(e,t,o)=>$s(e,t,o).isSome(),r2=(e,t,o)=>qr(e,t,o).isSome(),XS=e=>ne(e)?e:De,JS=(e,t,o)=>{let r=e.dom;const c=XS(o);for(;r.parentNode;){r=r.parentNode;const u=q.fromDom(r),f=t(u);if(f.isSome())return f;if(c(u))break}return N.none()},o0=(e,t,o)=>{const r=t(e),c=XS(o);return r.orThunk(()=>c(e)?N.none():JS(e,t,c))},QS=e=>fu(e).filter(t=>t.trim().length!==0||t.indexOf(us)>-1).isSome(),Eg=e=>Cl(e)&&zo(e,"contenteditable")==="false",v3=["img","br"],a2=e=>QS(e)||vt(v3,mn(e))||Eg(e),y3=e=>Yh(e,a2),c2={create:(e,t,o,r)=>({start:e,soffset:t,finish:o,foffset:r})},i2=ei.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),S3=(e,t,o,r)=>e.fold(t,o,r),w3=e=>e.fold(Yo,Yo,Yo),x3=i2.before,s0=i2.on,E3=i2.after,Fi={before:x3,on:s0,after:E3,cata:S3,getStart:w3},Tg=ei.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),r0=e=>Tg.exact(e.start,e.soffset,e.finish,e.foffset),Jh=e=>e.match({domRange:t=>q.fromDom(t.startContainer),relative:(t,o)=>Fi.getStart(t),exact:(t,o,r,c)=>t}),T3=Tg.domRange,k3=Tg.relative,ew=Tg.exact,cd=e=>{const t=Jh(e);return nd(t)},Qh=c2.create,im={domRange:T3,relative:k3,exact:ew,exactFromRange:r0,getWin:cd,range:Qh},_3=(e,t,o)=>{var r;return N.from((r=e.caretPositionFromPoint)==null?void 0:r.call(e,t,o)).bind(c=>{if(c.offsetNode===null)return N.none();const u=e.createRange();return u.setStart(c.offsetNode,c.offset),u.collapse(),N.some(u)})},Ys=(e,t,o)=>{var r;return N.from((r=e.caretRangeFromPoint)==null?void 0:r.call(e,t,o))},Is=(e,t,o)=>e.caretPositionFromPoint?_3(e,t,o):e.caretRangeFromPoint?Ys(e,t,o):N.none(),lm=(e,t,o)=>{const r=e.document;return Is(r,t,o).map(c=>c2.create(q.fromDom(c.startContainer),c.startOffset,q.fromDom(c.endContainer),c.endOffset))},id=(e,t)=>{const o=mn(e);return o==="input"?Fi.after(e):vt(["br","img"],o)?t===0?Fi.before(e):Fi.after(e):Fi.on(e,t)},l2=(e,t)=>{const o=e.fold(Fi.before,id,Fi.after),r=t.fold(Fi.before,id,Fi.after);return im.relative(o,r)},Kr=(e,t,o,r)=>{const c=id(e,t),u=id(o,r);return im.relative(c,u)},u2=e=>e.match({domRange:t=>{const o=q.fromDom(t.startContainer),r=q.fromDom(t.endContainer);return Kr(o,t.startOffset,r,t.endOffset)},relative:l2,exact:Kr}),um=e=>{const t=im.getWin(e).dom,o=(c,u,f,b)=>vg(t,c,u,f,b),r=u2(e);return Uh(t,r).match({ltr:o,rtl:o})},a0=(e,t,o)=>lm(e,t,o),zc=e=>{const t=e===void 0?window:e;return cu().browser.isFirefox()?N.none():N.from(t.visualViewport)},d2=(e,t,o,r)=>({x:e,y:t,width:o,height:r,right:e+o,bottom:t+r}),hc=e=>{const t=e===void 0?window:e,o=t.document,r=t2(q.fromDom(o));return zc(t).fold(()=>{const c=t.document.documentElement,u=c.clientWidth,f=c.clientHeight;return d2(r.left,r.top,u,f)},c=>d2(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))};class ys{constructor(t,o){Ie(this,"rootNode");Ie(this,"node");this.node=t,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,o,r,c){if(t){if(!c&&t[o])return t[o];if(t!==this.rootNode){let u=t[r];if(u)return u;for(let f=t.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(t,o){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=t.parentNode;if(c&&c!==this.rootNode)return c}}}const c0=/^[ \t\r\n]*$/,kg=e=>c0.test(e),tw=e=>{for(const t of e)if(!oi(t))return!1;return!0},m2=e=>" \f	\v".indexOf(e)!==-1,nw=e=>e===`
`||e==="\r",ow=(e,t)=>t<e.length&&t>=0?nw(e[t]):!1,i0=(e,t=4,o=!0,r=!0)=>{const c=ni(" ",t),u=e.replace(/\t/g,c);return cn(u,(b,v)=>m2(v)||v===us?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||ow(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+us}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:nw(v),str:b.str+v},{pcIsSpace:!1,str:""}).str},_g=e=>t=>!!t&&t.nodeType===e,l0=e=>!!e&&!Object.getPrototypeOf(e),Ye=_g(1),Za=e=>Ye(e)&&Cl(q.fromDom(e)),A3=e=>Ye(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",wa=e=>{const t=e.toLowerCase();return o=>ve(o)&&o.nodeName.toLowerCase()===t},mi=e=>{const t=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return vt(t,r)}return!1}},u0=(e,t)=>{const o=t.toLowerCase().split(" ");return r=>{if(Ye(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},O3=e=>t=>Ye(t)&&t.hasAttribute(e),dm=e=>Ye(e)&&e.hasAttribute("data-mce-bogus"),D3=e=>Ye(e)&&e.getAttribute("data-mce-bogus")==="all",Wa=e=>Ye(e)&&e.tagName==="TABLE",sw=e=>t=>!!(Za(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),fi=mi(["textarea","input"]),ze=_g(3),f2=_g(4),nr=_g(7),rn=_g(8),ld=_g(9),Ag=_g(11),os=wa("br"),gi=wa("img"),ep=wa("a"),pc=sw("true"),Vo=sw("false"),ud=e=>Za(e)&&e.isContentEditable&&ve(e.parentElement)&&!e.parentElement.isContentEditable,Og=mi(["td","th"]),g2=mi(["td","th","caption"]),h2=wa("template"),hi=mi(["video","audio","object","embed"]),tp=wa("li"),np=wa("details"),R3=wa("summary"),rw="uc-video",op=e=>e.nodeName.toLowerCase()===rw,p2={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},d0=(e,t,o)=>{const r=q.fromDom(t),c=q.fromDom(e),u=o.getWhitespaceElements();return wg(c,b=>Yt(u,mn(b)),Me(En,r))},M3=e=>Ye(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),B3=(e,t)=>Ye(e)&&Yt(t.getNonEmptyElements(),e.nodeName),b2=O3("data-mce-bookmark"),N3=e=>Mi(q.fromDom(e)).exists(t=>!Li(t)),sp=(e,t,o)=>kg(e.data)&&!d0(e,t,o),V5=(e,t,o,r)=>ze(e)&&!sp(e,t,o)&&(!r.includeZwsp||!tw(e.data)),bc=(e,t,o,r)=>ne(r.isContent)&&r.isContent(t)||B3(t,e)||b2(t)||M3(t)||V5(t,o,e,r)||Vo(t)||pc(t)&&N3(t),kt=(e,t,o)=>{const r={...p2,...o};if(r.checkRootAsContent&&bc(e,t,t,r))return!1;let c=t.firstChild,u=0;if(!c)return!0;const f=new ys(c,t);do{if(r.skipBogus&&Ye(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if(rn(c)){c=f.next(!0);continue}if(os(c)){u++,c=f.next();continue}if(bc(e,c,t,r))return!1;c=f.next()}while(c);return u<=1},Cs=(e,t,o)=>kt(e,t.dom,{checkRootAsContent:!0,...o}),Dg=(e,t,o)=>bc(e,t,t,{includeZwsp:p2.includeZwsp,...o}),aw=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},gf=e=>aw(e)!=="html",Rg=e=>gf(e.nodeName),v2=e=>aw(e.nodeName),hf=["svg","math"],cw=()=>{const e=Bc(),t=()=>e.get().map(v2).getOr("html");return{track:c=>(Rg(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},bu="data-mce-block",iw=e=>ge(bt(e),t=>!/[A-Z]/.test(t)),y2=e=>Mt(iw(e),t=>{const o=CSS.escape(t);return`${o}:`+Mt(hf,r=>`not(${r} ${o})`).join(":")}).join(","),es=(e,t)=>ve(t.querySelector(e))?(t.setAttribute(bu,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(bu),!1),pi=(e,t)=>{const o=y2(e.getTransparentElements()),r=y2(e.getBlockElements());return ge(t.querySelectorAll(o),c=>es(r,c))},xa=(e,t,o)=>{var c;const r=o?"lastChild":"firstChild";for(let u=t[r];u;u=u[r])if(kt(e,u,{checkRootAsContent:!0})){(c=u.parentNode)==null||c.removeChild(u);return}},Mg=(e,t,o)=>{const r=document.createRange(),c=t.parentNode;if(c){r.setStartBefore(t),r.setEndBefore(o);const u=r.extractContents();xa(e,u,!0),r.setStartAfter(o),r.setEndAfter(t);const f=r.extractContents();xa(e,f,!1),kt(e,u,{checkRootAsContent:!0})||c.insertBefore(u,t),kt(e,o,{checkRootAsContent:!0})||c.insertBefore(o,t),kt(e,f,{checkRootAsContent:!0})||c.insertBefore(f,t),c.removeChild(t)}},Ea=(e,t,o)=>{const r=e.getBlockElements(),c=q.fromDom(t),u=b=>mn(b)in r,f=b=>En(b,c);le(df(o),b=>{hu(b,u,f).each(v=>{const w=h3(b,k=>u(k)&&!e.isValidChild(mn(v),mn(k)));if(w.length>0){const k=Mi(v);le(w,O=>{hu(O,u,f).each(R=>{Mg(e,R.dom,O.dom)})}),k.each(O=>pi(e,O.dom))}})})},pf=(e,t,o)=>{le([...o,...ms(e,t)?[t]:[]],r=>le(Br(q.fromDom(r),r.nodeName.toLowerCase()),c=>{Hi(e,c.dom)&&ui(c)}))},dr=(e,t)=>{const o=pi(e,t);Ea(e,t,o),pf(e,t,o)},Ta=(e,t)=>{if(rp(e,t)){const o=y2(e.getBlockElements());es(o,t)}},m0=(e,t,o)=>{const r=u=>En(u,q.fromDom(t)),c=ci(q.fromDom(o),r);Ur(c,c.length-2).filter(bs).fold(()=>dr(e,t),u=>dr(e,u.dom))},Be=e=>e.hasAttribute(bu),ja=(e,t)=>Yt(e.getTransparentElements(),t),rp=(e,t)=>Ye(t)&&ja(e,t.nodeName),ms=(e,t)=>rp(e,t)&&Be(t),Hi=(e,t)=>rp(e,t)&&!Be(t),vc=(e,t)=>t.type===1&&ja(e,t.name)&&Y(t.attr(bu)),P3=cu().browser,vu=e=>so(e,bs),lw=e=>P3.isFirefox()&&mn(e)==="table"?vu(vs(e)).filter(t=>mn(t)==="caption").bind(t=>vu(br(t)).map(o=>{const r=o.dom.offsetTop,c=t.dom.offsetTop,u=t.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Ga=(e,t)=>e.children&&vt(e.children,t),to=(e,t,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,t){if(o===e&&t.getBoundingClientRect&&Ts(q.fromDom(e),"position")==="static"){const b=t.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=t;for(;f&&f!==o&&f.nodeType&&!Ga(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=t.parentNode;f&&f!==o&&f.nodeType&&!Ga(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=lw(q.fromDom(t))}return{x:r,y:c}},_l=(e,t)=>{const o=t.crossOrigin;return t.contentCssCors?"anonymous":ne(o)?o(e):void 0},Bg=(e,t={})=>{let o=0;const r={},c=q.fromDom(e),u=Sl(c),f=se=>{t.referrerPolicy=se},b=se=>{t.contentCssCors=se},v=se=>{t.crossOrigin=se},w=se=>{Hn(Xv(c),se)},k=se=>{const ae=Xv(c);pu(ae,"#"+se).each(Ao)},O=se=>wo(r,se).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),R=se=>new Promise((ae,Se)=>{let Oe;const Je=He._addCacheSuffix(se),St=O(Je);r[Je]=St,St.count++;const xe=(Lt,On)=>{le(Lt,hs),St.status=On,St.passed=[],St.failed=[],Oe&&(Oe.onload=null,Oe.onerror=null,Oe=null)},me=()=>xe(St.passed,2),Ee=()=>xe(St.failed,3);if(ae&&St.passed.push(ae),Se&&St.failed.push(Se),St.status===1)return;if(St.status===2){me();return}if(St.status===3){Ee();return}St.status=1;const Qe=q.fromTag("link",u.dom);Rr(Qe,{rel:"stylesheet",type:"text/css",id:St.id});const It=_l(se,t);It!==void 0&&ds(Qe,"crossOrigin",It),t.referrerPolicy&&ds(Qe,"referrerpolicy",t.referrerPolicy),Oe=Qe.dom,Oe.onload=me,Oe.onerror=Ee,w(Qe),ds(Qe,"href",Je)}),I=(se,ae)=>{const Se=O(se);r[se]=Se,Se.count++;const Oe=q.fromTag("style",u.dom);Rr(Oe,{rel:"stylesheet",type:"text/css",id:Se.id,"data-mce-key":se}),Oe.dom.innerHTML=ae,w(Oe)},U=se=>Promise.allSettled(Mt(se,Se=>R(Se).then(Xe(Se)))).then(Se=>{const Oe=_e(Se,Je=>Je.status==="fulfilled");return Oe.fail.length>0?Promise.reject(Mt(Oe.fail,Je=>Je.reason)):Mt(Oe.pass,Je=>Je.value)}),H=se=>{const ae=He._addCacheSuffix(se);wo(r,ae).each(Se=>{--Se.count===0&&(delete r[ae],k(Se.id))})};return{load:R,loadRawCss:I,loadAll:U,unload:H,unloadRawCss:se=>{wo(r,se).each(ae=>{--ae.count===0&&(delete r[se],k(ae.id))})},unloadAll:se=>{le(se,ae=>{H(ae)})},_setReferrerPolicy:f,_setContentCssCors:b,_setCrossOrigin:v}},C2=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Ar(o).dom;return N.from(e.get(u)).getOrThunk(()=>{const f=Bg(u,r);return e.set(u,f),f})}}})(),S2=e=>e.nodeName.toLowerCase()==="span",zi=(e,t)=>ve(e)&&(Dg(t,e)||t.isInline(e.nodeName.toLowerCase())),f0=(e,t,o)=>{const r=new ys(e,t).prev(!1),c=new ys(e,t).next(!1),u=as(r)||zi(r,o),f=as(c)||zi(c,o);return u&&f},qa=e=>S2(e)&&e.getAttribute("data-mce-type")==="bookmark",$3=(e,t,o)=>ze(e)&&e.data.length>0&&f0(e,t,o),de=e=>Ye(e)?e.childNodes.length>0:!1,Vc=e=>Ag(e)||ld(e),ap=(e,t,o,r)=>{var f;const c=r||t;if(Ye(t)&&qa(t))return t;const u=t.childNodes;for(let b=u.length-1;b>=0;b--)ap(e,u[b],o,c);if(Ye(t)){const b=t.childNodes;b.length===1&&qa(b[0])&&((f=t.parentNode)==null||f.insertBefore(b[0],t))}return!Vc(t)&&!Dg(o,t)&&!de(t)&&!$3(t,c,o)&&e.remove(t),t},ss=He.makeMap,ka=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,or=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xo=/[<>&\"\']/g,uw=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,mm={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},fm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ng={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},cp=e=>{const t=q.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},w2=(e,t)=>{const o={};if(e){const r=e.split(",");t=t||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],t));if(!fm[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},x2=w2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),gm=(e,t)=>e.replace(t?ka:or,o=>fm[o]||o),Pg=e=>(""+e).replace(xo,t=>fm[t]||t),dw=(e,t)=>e.replace(t?ka:or,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":fm[o]||"&#"+o.charCodeAt(0)+";"),E2=(e,t,o)=>{const r=o||x2;return e.replace(t?ka:or,c=>fm[c]||r[c]||c)},yc={encodeRaw:gm,encodeAllRaw:Pg,encodeNumeric:dw,encodeNamed:E2,getEncodeFunc:(e,t)=>{const o=w2(t)||x2,r=(f,b)=>f.replace(b?ka:or,v=>fm[v]!==void 0?fm[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),c=(f,b)=>E2(f,b,o),u=ss(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?t?c:E2:u.numeric?dw:gm},decode:e=>e.replace(uw,(t,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):mm[o]||String.fromCharCode(o)):Ng[t]||x2[t]||cp(t))},ks=(e,t)=>(e=He.trim(e),e?e.split(t||" "):[]),hm=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),ip=e=>tn(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Ka=e=>{const t=o=>dn(o)?Mt(o,t):ip(o)?new RegExp(o.source,o.flags):tn(o)?lc(o,t):o;return t(e)},$g=e=>{const t=/^(~)?(.+)$/;return Gn(ks(e,","),o=>{const r=t.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Xs=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),g0=e=>{let t,o;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const r=[t,o].join(" ");return{blockContent:t,phrasingContent:o,flowContent:r}},Uc=e=>{const{blockContent:t,phrasingContent:o,flowContent:r}=g0(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(t),phrasingContent:c(o),flowContent:c(r)})},Vi={html4:ya(()=>Uc("html4")),html5:ya(()=>Uc("html5")),"html5-strict":ya(()=>Uc("html5-strict"))},T2=(e,t)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Vi[e]();return t==="blocks"?N.some(o):t==="phrasing"?N.some(r):t==="flow"?N.some(c):N.none()},mr=e=>{const t=Xs(e),{phrasingContent:o,flowContent:r}=g0(e),c={},u=(v,w,k)=>{c[v]={attributes:Ku(w,Xe({})),attributesOrder:w,children:Ku(k,Xe({}))}},f=(v,w="",k="")=>{const O=ks(k),R=ks(v);let I=R.length;const U=[...t,...ks(w)];for(;I--;)u(R[I],U.slice(),O)},b=(v,w)=>{const k=ks(v),O=ks(w);let R=k.length;for(;R--;){const I=c[k[R]];for(let U=0,H=O.length;U<H;U++)I.attributes[O[U]]={},I.attributesOrder.push(O[U])}};return e!=="html5-strict"&&(le(ks("acronym applet basefont big font strike tt"),k=>{f(k,"",o)}),le(ks("center dir isindex noframes"),k=>{f(k,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset property"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop controlslist disablepictureinpicture disableremoteplayback playsinline muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&le([c.video,c.audio],v=>{delete v.children.audio,delete v.children.video}),le(ks("a form meter progress dfn"),v=>{c[v]&&delete c[v].children[v]}),delete c.caption.children.table,delete c.script,c},Ig=e=>e==="-"?"remove":"add",Al=e=>{const t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return N.from(t.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},bf=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Gn(ks(e,","),o=>{const r=t.exec(o);if(r){const c=r[1],u=c?Ig(c):"replace",f=r[2],b=Gn(ks(r[3],"|"),v=>Al(v).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},vf=(e,t)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=t;return le(ks(e,"|"),f=>{const b=o.exec(f);if(b){const v={},w=b[1],k=b[2].replace(/[\\:]:/g,":"),O=b[3],R=b[4];if(w==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(k),v.required=!0),w==="-"){delete c[k],u.splice(He.inArray(u,k),1);return}if(O&&(O==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:k,value:R}),v.defaultValue=R):O==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:k,value:R}),v.forcedValue=R):O==="<"&&(v.validValues=He.makeMap(R,"?"))),r.test(k)){const I=v;t.attributePatterns=t.attributePatterns||[],I.pattern=hm(k),t.attributePatterns.push(I)}else c[k]||u.push(k),c[k]=v}})},L3=(e,t)=>{hn(e.attributes,(o,r)=>{t.attributes[r]=o}),t.attributesOrder.push(...e.attributesOrder)},h0=(e,t)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Gn(ks(t,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],v=c[4],w=c[5],k={attributes:{},attributesOrder:[]};if(e.each(O=>L3(O,k)),u==="#"?k.paddEmpty=!0:u==="-"&&(k.removeEmpty=!0),v==="!"&&(k.removeEmptyAttrs=!0),w&&vf(w,k),b&&(k.outputName=f),f==="@")if(e.isNone())e=N.some(k);else return[];return[b?{name:f,element:k,aliasName:b}:{name:f,element:k}]}else return[]})},dd={},lp=He.makeMap,Eo=He.each,mw=He.extend,md=He.explode,Lg=(e,t={})=>{const o=lp(e," ",lp(e.toUpperCase()," "));return mw(o,t)},p0=e=>Lg("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),fd=(e,t)=>{if(e){const o={};return Y(e)&&(e={"*":e}),Eo(e,(r,c)=>{o[c]=o[c.toUpperCase()]=t==="map"?lp(r,/[, ]/):md(r,/[, ]/)}),o}else return},Nr=(e={})=>{const t={},o={};let r=[];const c={},u={},f={},b=(Ft,Mn,Vs)=>{const Zo=e[Ft];if(Zo)return lp(Zo,/[, ]/,lp(Zo.toUpperCase(),/[, ]/));{let Co=dd[Ft];return Co||(Co=Lg(Mn,Vs),dd[Ft]=Co),Co}},v=e.schema??"html5",w=mr(v);e.verify_html===!1&&(e.valid_elements="*[*]");const k=fd(e.valid_styles),O=fd(e.invalid_styles,"map"),R=fd(e.valid_classes,"map"),I=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),U=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),H=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),j=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),oe="td th iframe video audio object script code",se=b("non_empty_elements",oe+" pre svg textarea summary",H),ae=b("move_caret_before_on_enter_elements",oe+" table",H),Se="h1 h2 h3 h4 h5 h6",Oe=b("text_block_elements",Se+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Je=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",Oe),St=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),xe=b("transparent_elements","a ins del canvas map"),me=b("wrap_block_elements","pre "+Se);Eo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ft=>{u[Ft]=new RegExp("</"+Ft+"[^>]*>","gi")});const Ee=Ft=>{const Mn=N.from(t["@"]),Vs=/[*?+]/;le(h0(Mn,Ft??""),({name:Zo,element:Co,aliasName:Ms})=>{if(Ms&&(t[Ms]=Co),Vs.test(Zo)){const Ti=Co;Ti.pattern=hm(Zo),r.push(Ti)}else t[Zo]=Co})},Qe=Ft=>{r=[],le(bt(t),Mn=>{delete t[Mn]}),Ee(Ft)},It=(Ft,Mn)=>{delete dd.text_block_elements,delete dd.block_elements;const Vs=Mn.extends?!oc(Mn.extends):!1,Zo=Mn.extends;if(o[Ft]=Zo?o[Zo]:{},c[Ft]=Zo??Ft,se[Ft.toUpperCase()]={},se[Ft]={},Vs||(Je[Ft.toUpperCase()]={},Je[Ft]={}),Zo&&!t[Ft]&&t[Zo]){const Co=Ka(t[Zo]);delete Co.removeEmptyAttrs,delete Co.removeEmpty,t[Ft]=Co}else t[Ft]={attributesOrder:[],attributes:{}};if(dn(Mn.attributes)){const Co=Ti=>{Ms.attributesOrder.push(Ti),Ms.attributes[Ti]={}},Ms=t[Ft]??{};delete Ms.attributesDefault,delete Ms.attributesForced,delete Ms.attributePatterns,delete Ms.attributesRequired,Ms.attributesOrder=[],Ms.attributes={},le(Mn.attributes,Ti=>{const Oc=Xs(v);Al(Ti).each(({preset:tu,name:lg})=>{tu?lg==="global"&&le(Oc,Co):Co(lg)})}),t[Ft]=Ms}if(an(Mn.padEmpty)){const Co=t[Ft]??{};Co.paddEmpty=Mn.padEmpty,t[Ft]=Co}if(dn(Mn.children)){const Co={},Ms=Oc=>{Co[Oc]={}},Ti=Oc=>{T2(v,Oc).each(tu=>{le(tu,Ms)})};le(Mn.children,Oc=>{Al(Oc).each(({preset:tu,name:lg})=>{tu?Ti(lg):Ms(lg)})}),o[Ft]=Co}Zo&&hn(o,(Co,Ms)=>{Co[Zo]&&(o[Ms]=Co=mw({},o[Ms]),Co[Ft]=Co[Zo])})},Lt=Ft=>{le($g(Ft??""),({name:Mn,cloneName:Vs})=>{It(Mn,{extends:Vs})})},On=(Ft,Mn)=>{f[Ft]=Mn},lo=Ft=>{tn(Ft)?hn(Ft,(Mn,Vs)=>{const Zo=Mn.componentUrl;Y(Zo)&&On(Vs,Zo),It(Vs,Mn)}):Y(Ft)&&Lt(Ft)},Bo=Ft=>{le(bf(Ft??""),({operation:Mn,name:Vs,validChildren:Zo})=>{const Co=Mn==="replace"?{"#comment":{}}:o[Vs],Ms=Oc=>{Mn==="remove"?delete Co[Oc]:Co[Oc]={}},Ti=Oc=>{T2(v,Oc).each(tu=>{le(tu,Ms)})};le(Zo,({preset:Oc,name:tu})=>{Oc?Ti(tu):Ms(tu)}),o[Vs]=Co})},qo=Ft=>{const Mn=t[Ft];if(Mn)return Mn;let Vs=r.length;for(;Vs--;){const Zo=r[Vs];if(Zo.pattern.test(Ft))return Zo}},zr=()=>{e.valid_elements?(Qe(e.valid_elements),Eo(w,(Ft,Mn)=>{o[Mn]=Ft.children})):(Eo(w,(Ft,Mn)=>{t[Mn]={attributes:Ft.attributes,attributesOrder:Ft.attributesOrder},o[Mn]=Ft.children}),Eo(ks("strong/b em/i"),Ft=>{const Mn=ks(Ft,"/");t[Mn[1]].outputName=Mn[0]}),Eo(St,(Ft,Mn)=>{t[Mn]&&(e.padd_empty_block_inline_children&&(t[Mn].paddInEmptyBlock=!0),t[Mn].removeEmpty=!0)}),Eo(ks("ol ul blockquote a table tbody"),Ft=>{t[Ft]&&(t[Ft].removeEmpty=!0)}),Eo(ks("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Ft=>{t[Ft]&&(t[Ft].paddEmpty=!0)}),Eo(ks("span"),Ft=>{t[Ft].removeEmptyAttrs=!0})),delete t.svg,lo(e.custom_elements),Bo(e.valid_children),Ee(e.extended_valid_elements),Bo("+ol[ul|ol],+ul[ul|ol]"),Eo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ft,Mn)=>{t[Mn]&&(t[Mn].parentsRequired=ks(Ft))}),e.invalid_elements&&Eo(md(e.invalid_elements),Ft=>{t[Ft]&&delete t[Ft]}),qo("span")||Ee("span[!data-mce-type|*]")},Ei=Xe(k),nt=Xe(O),At=Xe(R),Xn=Xe(j),Zn=Xe(Je),sa=Xe(Oe),ke=Xe(St),Ge=Xe(Object.seal(H)),ut=Xe(U),wn=Xe(se),en=Xe(ae),po=Xe(I),Ql=Xe(xe),Ac=Xe(me),eu=Xe(Object.seal(u)),rl=(Ft,Mn)=>{const Vs=o[Ft.toLowerCase()];return!!(Vs&&Vs[Mn.toLowerCase()])},Ih=(Ft,Mn)=>{const Vs=qo(Ft);if(Vs)if(Mn){if(Vs.attributes[Mn])return!0;const Zo=Vs.attributePatterns;if(Zo){let Co=Zo.length;for(;Co--;)if(Zo[Co].pattern.test(Mn))return!0}}else return!0;return!1},oc=Ft=>Yt(Zn(),Ft),Jc=Ft=>!Wt(Ft,"#")&&Ih(Ft)&&!oc(Ft),ig=Ft=>Yt(Ac(),Ft)||Jc(Ft),Nv=Xe(c),ZT=Xe(f);return zr(),{type:v,children:o,elements:t,getValidStyles:Ei,getValidClasses:At,getBlockElements:Zn,getInvalidStyles:nt,getVoidElements:Ge,getTextBlockElements:sa,getTextInlineElements:ke,getBoolAttrs:Xn,getElementRule:qo,getSelfClosingElements:ut,getNonEmptyElements:wn,getMoveCaretBeforeOnEnterElements:en,getWhitespaceElements:po,getTransparentElements:Ql,getSpecialElements:eu,getComponentUrls:ZT,isValidChild:rl,isValid:Ih,isBlock:oc,isInline:Jc,isWrapper:ig,getCustomElements:Nv,addValidElements:Ee,setValidElements:Qe,addCustomElements:lo,addValidChildren:Bo}},yf=e=>({value:Fg(e)}),Fg=e=>fg(e,"#").toUpperCase(),b0=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},v0=e=>{const t=b0(e.red)+b0(e.green)+b0(e.blue);return yf(t)},y0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,up=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,fw=(e,t,o,r)=>({red:e,green:t,blue:o,alpha:r}),k2=(e,t,o,r)=>{const c=parseInt(e,10),u=parseInt(t,10),f=parseInt(o,10),b=parseFloat(r);return fw(c,u,f,b)},_2=e=>y0.test(e)?"rgb":up.test(e)?"rgba":"other",Hg=e=>{const t=y0.exec(e);if(t!==null)return N.some(k2(t[1],t[2],t[3],"1"));const o=up.exec(e);return o!==null?N.some(k2(o[1],o[2],o[3],o[4])):N.none()},Ol=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,bi=e=>Hg(e).map(v0).map(t=>"#"+t.value).getOr(e),gd=(e={},t)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const v=Ju;t&&(f=t.getValidStyles(),b=t.getInvalidStyles());const w=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let O=0;O<w.length;O++)u[w[O]]=v+O,u[v+O]=w[O];const k={parse:O=>{const R={};let I=!1;const U=e.url_converter,H=e.url_converter_scope||k,j=(xe,me,Ee)=>{const Qe=R[xe+"-top"+me];if(!Qe)return;const It=R[xe+"-right"+me];if(!It)return;const Lt=R[xe+"-bottom"+me];if(!Lt)return;const On=R[xe+"-left"+me];if(!On)return;const lo=[Qe,It,Lt,On];let Bo=lo.length-1;for(;Bo--&&lo[Bo]===lo[Bo+1];);Bo>-1&&Ee||(R[xe+me]=Bo===-1?lo[0]:lo.join(" "),delete R[xe+"-top"+me],delete R[xe+"-right"+me],delete R[xe+"-bottom"+me],delete R[xe+"-left"+me])},oe=xe=>{const me=R[xe];if(!me)return;const Ee=me.indexOf(",")>-1?[me]:me.split(" ");let Qe=Ee.length;for(;Qe--;)if(Ee[Qe]!==Ee[0])return!1;return R[xe]=Ee[0],!0},se=(xe,me,Ee,Qe)=>{oe(me)&&oe(Ee)&&oe(Qe)&&(R[xe]=R[me]+" "+R[Ee]+" "+R[Qe],delete R[me],delete R[Ee],delete R[Qe])},ae=xe=>(I=!0,u[xe]),Se=(xe,me)=>(I&&(xe=xe.replace(/\uFEFF[0-9]/g,Ee=>u[Ee])),me||(xe=xe.replace(/\\([\'\";:])/g,"$1")),xe),Oe=xe=>String.fromCharCode(parseInt(xe.slice(1),16)),Je=xe=>xe.replace(/\\[0-9a-f]+/gi,Oe),St=(xe,me,Ee,Qe,It,Lt)=>{if(It=It||Lt,It)return It=Se(It),"'"+It.replace(/\'/g,"\\'")+"'";if(me=Se(me||Ee||Qe||""),!e.allow_script_urls){const On=me.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(On)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(On))return""}return U&&(me=U.call(H,me,"style")),"url('"+me.replace(/\'/g,"\\'")+"')"};if(O){O=O.replace(/[\u0000-\u001F]/g,""),O=O.replace(/\\[\"\';:\uFEFF]/g,ae).replace(/\"[^\"]+\"|\'[^\']+\'/g,me=>me.replace(/[;:]/g,ae));let xe;for(;xe=r.exec(O);){r.lastIndex=xe.index+xe[0].length;let me=xe[1].replace(c,"").toLowerCase(),Ee=xe[2].replace(c,"");if(me&&Ee){if(me=Je(me),Ee=Je(Ee),me.indexOf(v)!==-1||me.indexOf('"')!==-1||!e.allow_script_urls&&(me==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ee)))continue;me==="font-weight"&&Ee==="700"?Ee="bold":(me==="color"||me==="background-color")&&(Ee=Ee.toLowerCase()),_2(Ee)==="rgb"&&Hg(Ee).each(Qe=>{Ee=bi(Ol(Qe)).toLowerCase()}),Ee=Ee.replace(o,St),R[me]=I?Se(Ee,!0):Ee}}j("border","",!0),j("border","-width"),j("border","-color"),j("border","-style"),j("padding",""),j("margin",""),se("border","border-width","border-style","border-color"),R.border==="medium none"&&delete R.border,R["border-image"]==="none"&&delete R["border-image"]}return R},serialize:(O,R)=>{let I="";const U=(j,oe)=>{const se=oe[j];if(se)for(let ae=0,Se=se.length;ae<Se;ae++){const Oe=se[ae],Je=O[Oe];Je&&(I+=(I.length>0?" ":"")+Oe+": "+Je+";")}},H=(j,oe)=>{if(!b||!oe)return!0;let se=b["*"];return se&&se[j]?!1:(se=b[oe],!(se&&se[j]))};return R&&f?(U("*",f),U(R,f)):hn(O,(j,oe)=>{j&&H(oe,R)&&(I+=(I.length>0?" ":"")+oe+": "+j+";")}),I}};return k},gw={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},C0=e=>e instanceof Event||ne(e.initEvent),A2=e=>e.isDefaultPrevented===et||e.isDefaultPrevented===De,hw=e=>gn(e.preventDefault)||C0(e),O2=(e,t)=>{const o=t??{};for(const r in e)Yt(gw,r)||(o[r]=e[r]);return ve(e.composedPath)&&(o.composedPath=()=>e.composedPath()),ve(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),ve(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},S0=(e,t,o,r)=>{const c=O2(t,r);return c.type=e,gn(c.target)&&(c.target=c.srcElement??o),hw(t)&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=et,ne(t.preventDefault)&&t.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=et,ne(t.stopPropagation)&&t.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=et,c.stopPropagation()},A2(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?et:De,c.isPropagationStopped=c.cancelBubble===!0?et:De,c.isImmediatePropagationStopped=De)),c},w0="mce-data-",x0=/^(?:mouse|contextmenu)|click/,Dl=(e,t,o,r)=>{e.addEventListener(t,o,r||!1)},dp=(e,t,o,r)=>{e.removeEventListener(t,o,r||!1)},zg=e=>ve(e)&&x0.test(e.type),Cf=(e,t)=>{const o=S0(e.type,e,document,t);if(zg(e)&&as(e.pageX)&&!as(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},pw=(e,t,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){t(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{dp(e,"DOMContentLoaded",f),dp(e,"load",f),o.domLoaded||(o.domLoaded=!0,t(c)),e=null};u()?f():Dl(e,"DOMContentLoaded",f),o.domLoaded||Dl(e,"load",f)},UT=class UT{constructor(){Ie(this,"domLoaded",!1);Ie(this,"events",{});Ie(this,"expando");Ie(this,"hasFocusIn");Ie(this,"count",1);this.expando=w0+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,o,r,c){const u=this;let f;const b=window,v=R=>{u.executeHandlers(Cf(R||b.event),w)};if(!t||ze(t)||rn(t))return r;let w;t[u.expando]?w=t[u.expando]:(w=u.count++,t[u.expando]=w,u.events[w]={}),c=c||t;const k=o.split(" ");let O=k.length;for(;O--;){let R=k[O],I=v,U=!1,H=!1;if(R==="DOMContentLoaded"&&(R="ready"),u.domLoaded&&R==="ready"&&t.readyState==="complete"){r.call(c,Cf({type:R}));continue}!u.hasFocusIn&&(R==="focusin"||R==="focusout")&&(U=!0,H=R==="focusin"?"focus":"blur",I=j=>{const oe=Cf(j||b.event);oe.type=oe.type==="focus"?"focusin":"focusout",u.executeHandlers(oe,w)}),f=u.events[w][R],f?R==="ready"&&u.domLoaded?r(Cf({type:R})):f.push({func:r,scope:c}):(u.events[w][R]=f=[{func:r,scope:c}],f.fakeName=H,f.capture=U,f.nativeHandler=I,R==="ready"?pw(t,I,u):Dl(t,H||R,I,U))}return t=f=null,r}unbind(t,o,r){if(!t||ze(t)||rn(t))return this;const c=t[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const v=f[b],w=u[v];if(w){if(r){let k=w.length;for(;k--;)if(w[k].func===r){const O=w.nativeHandler,R=w.fakeName,I=w.capture,U=w.slice(0,k).concat(w.slice(k+1));U.nativeHandler=O,U.fakeName=R,U.capture=I,u[v]=U}}(!r||w.length===0)&&(delete u[v],dp(t,w.fakeName||v,w.nativeHandler,w.capture))}}}else hn(u,(f,b)=>{dp(t,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Yt(u,f))return this;delete this.events[c];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,o,r){return this.dispatch(t,o,r)}dispatch(t,o,r){if(!t||ze(t)||rn(t))return this;const c=Cf({type:o,target:t},r);do{const u=t[this.expando];u&&this.executeHandlers(c,u),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!c.isPropagationStopped());return this}clean(t){if(!t||ze(t)||rn(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const o=t.getElementsByTagName("*");let r=o.length;for(;r--;)t=o[r],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,o){const r=this.events[o],c=r&&r[t.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}};Ie(UT,"Event",new UT);let Vg=UT;const _a=He.each,F3=He.grep,D2="data-mce-style",R2=He.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),E0=(e,t,o)=>{gn(o)||o===""?Ks(e,t):ds(e,t,o)},bw=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Sf=(e,t)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;t&&ze(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},vw=(e,t)=>{const o=zo(t,"style"),r=e.serialize(e.parse(o),mn(t));E0(t,D2,r)},mp=(e,t)=>pr(e)?Yt(R2,t)?e+"":e+"px":e,M2=(e,t,o)=>{const r=bw(t);gn(o)||o===""?J1(e,r):gc(e,r,mp(o,r))},yw=(e,t,o)=>{const r=t.keep_values,c={set:(f,b,v)=>{const w=q.fromDom(f);ne(t.url_converter)&&ve(b)&&(b=t.url_converter.call(t.url_converter_scope||o(),String(b),v,f));const k="data-mce-"+v;E0(w,k,b),E0(w,v,b)},get:(f,b)=>{const v=q.fromDom(f);return zo(v,"data-mce-"+b)||zo(v,b)}},u={style:{set:(f,b)=>{const v=q.fromDom(f);r&&E0(v,D2,b),Ks(v,"style"),Y(b)&&di(v,e.parse(b))},get:f=>{const b=q.fromDom(f),v=zo(b,D2)||zo(b,"style");return e.serialize(e.parse(v),mn(b))}}};return r&&(u.href=u.src=c),u},_n=(e,t={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,v=C2.forElement(q.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:ue=>{const he=t.crossOrigin;if(ne(he))return he(ue,"stylesheet")}}),w=[],k=t.schema?t.schema:Nr({}),O=gd({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),R=t.ownEvents?new Vg:Vg.Event,I=k.getBlockElements(),U=ue=>Y(ue)?Yt(I,ue):Ye(ue)&&(Yt(I,ue.nodeName)||ms(k,ue)),H=ue=>ue&&e&&Y(ue)?e.getElementById(ue):ue,j=ue=>{const he=H(ue);return ve(he)?q.fromDom(he):null},oe=(ue,he,rt="")=>{let qe;const jt=j(ue);if(ve(jt)&&bs(jt)){const Wn=XL[he];Wn&&Wn.get?qe=Wn.get(jt.dom,he):qe=zo(jt,he)}return ve(qe)?qe:rt},se=ue=>{const he=H(ue);return gn(he)?[]:he.attributes},ae=(ue,he,rt)=>{At(ue,qe=>{if(Ye(qe)){const jt=q.fromDom(qe),Wn=rt===""?null:rt,Us=zo(jt,he),ug=XL[he];ug&&ug.set?ug.set(jt.dom,Wn,he):E0(jt,he,Wn),Us!==Wn&&t.onSetAttrib&&t.onSetAttrib({attrElm:jt.dom,attrName:he,attrValue:Wn})}})},Se=(ue,he)=>ue.cloneNode(he),Oe=()=>t.root_element||e.body,Je=ue=>{const he=hc(ue);return{x:he.x,y:he.y,w:he.width,h:he.height}},St=(ue,he)=>to(e.body,H(ue),he),xe=(ue,he,rt)=>{At(ue,qe=>{const jt=q.fromDom(qe);M2(jt,he,rt),t.update_styles&&vw(O,jt)})},me=(ue,he)=>{At(ue,rt=>{const qe=q.fromDom(rt);hn(he,(jt,Wn)=>{M2(qe,Wn,jt)}),t.update_styles&&vw(O,qe)})},Ee=(ue,he,rt)=>{const qe=H(ue);if(!(gn(qe)||!Za(qe)&&!A3(qe)))return rt?Ts(q.fromDom(qe),bw(he)):(he=he.replace(/-(\D)/g,(jt,Wn)=>Wn.toUpperCase()),he==="float"&&(he="cssFloat"),qe.style?qe.style[he]:void 0)},Qe=ue=>{const he=H(ue);if(!he)return{w:0,h:0};let rt=Ee(he,"width"),qe=Ee(he,"height");return(!rt||rt.indexOf("px")===-1)&&(rt="0"),(!qe||qe.indexOf("px")===-1)&&(qe="0"),{w:parseInt(rt,10)||he.offsetWidth||he.clientWidth,h:parseInt(qe,10)||he.offsetHeight||he.clientHeight}},It=ue=>{const he=H(ue),rt=St(he),qe=Qe(he);return{x:rt.x,y:rt.y,w:qe.w,h:qe.h}},Lt=(ue,he)=>{if(!ue)return!1;const rt=dn(ue)?ue:[ue];return jn(rt,qe=>Ic(q.fromDom(qe),he))},On=(ue,he,rt,qe)=>{const jt=[];let Wn=H(ue);qe=qe===void 0;const Us=rt||(Oe().nodeName!=="BODY"?Oe().parentNode:null);if(Y(he))if(he==="*")he=Ye;else{const ug=he;he=Jm=>Lt(Jm,ug)}for(;Wn&&!(Wn===Us||gn(Wn.nodeType)||ld(Wn)||Ag(Wn));){if(!he||he(Wn))if(qe)jt.push(Wn);else return[Wn];Wn=Wn.parentNode}return qe?jt:null},lo=(ue,he,rt)=>{const qe=On(ue,he,rt,!1);return qe&&qe.length>0?qe[0]:null},Bo=(ue,he,rt)=>{let qe=he;if(ue){Y(he)&&(qe=jt=>Lt(jt,he));for(let jt=ue[rt];jt;jt=jt[rt])if(ne(qe)&&qe(jt))return jt}return null},qo=(ue,he)=>Bo(ue,he,"nextSibling"),zr=(ue,he)=>Bo(ue,he,"previousSibling"),Ei=ue=>ne(ue.querySelectorAll),nt=(ue,he)=>{const rt=H(he)??t.root_element??e;return Ei(rt)?Fo(rt.querySelectorAll(ue)):[]},At=function(ue,he,rt){const qe=rt??this;if(dn(ue)){const jt=[];return _a(ue,(Wn,Us)=>{const ug=H(Wn);ug&&jt.push(he.call(qe,ug,Us))}),jt}else{const jt=H(ue);return jt?he.call(qe,jt):!1}},Xn=(ue,he)=>{At(ue,rt=>{hn(he,(qe,jt)=>{ae(rt,jt,qe)})})},Zn=(ue,he)=>{At(ue,rt=>{const qe=q.fromDom(rt);sd(qe,he)})},sa=(ue,he,rt,qe,jt)=>At(ue,Wn=>{const Us=Y(he)?e.createElement(he):he;return ve(rt)&&Xn(Us,rt),qe&&(!Y(qe)&&qe.nodeType?Us.appendChild(qe):Y(qe)&&Zn(Us,qe)),jt?Us:Wn.appendChild(Us)}),ke=(ue,he,rt)=>sa(e.createElement(ue),ue,he,rt,!0),Ge=yc.decode,ut=yc.encodeAllRaw,wn=(ue,he,rt="")=>{let qe="<"+ue;for(const jt in he)Xo(he,jt)&&(qe+=" "+jt+'="'+ut(he[jt])+'"');return Xu(rt)&&Yt(k.getVoidElements(),ue)?qe+" />":qe+">"+rt+"</"+ue+">"},en=ue=>{const he=e.createElement("div"),rt=e.createDocumentFragment();rt.appendChild(he),ue&&(he.innerHTML=ue);let qe;for(;qe=he.firstChild;)rt.appendChild(qe);return rt.removeChild(he),rt},po=(ue,he)=>At(ue,rt=>{const qe=q.fromDom(rt);return he&&le(vs(qe),jt=>{Qn(jt)&&jt.dom.length===0?Ao(jt):Gr(qe,jt)}),Ao(qe),qe.dom}),Ql=ue=>At(ue,he=>{const rt=he.attributes;for(let qe=rt.length-1;qe>=0;qe--)he.removeAttributeNode(rt.item(qe))}),Ac=ue=>O.parse(ue),eu=(ue,he)=>O.serialize(ue,he),rl=ue=>{if($v!==_n.DOM&&e===document){if(o[ue])return;o[ue]=!0}let he=e.getElementById("mceDefaultStyles");if(!he){he=e.createElement("style"),he.id="mceDefaultStyles",he.type="text/css";const rt=e.head;rt.firstChild?rt.insertBefore(he,rt.firstChild):rt.appendChild(he)}he.styleSheet?he.styleSheet.cssText+=ue:he.appendChild(e.createTextNode(ue))},Ih=ue=>{ue||(ue=""),le(ue.split(","),he=>{c[he]=!0,v.load(he).catch(Dt)})},oc=(ue,he,rt)=>{At(ue,qe=>{if(Ye(qe)){const jt=q.fromDom(qe),Wn=he.split(" ");le(Wn,Us=>{ve(rt)?(rt?Hc:ur)(jt,Us):Mr(jt,Us)})}})},Jc=(ue,he)=>{oc(ue,he,!0)},ig=(ue,he)=>{oc(ue,he,!1)},Nv=(ue,he)=>{const rt=j(ue),qe=he.split(" ");return ve(rt)&&Ha(qe,jt=>e0(rt,jt))},ZT=ue=>{At(ue,he=>J1(q.fromDom(he),"display"))},Ft=ue=>{At(ue,he=>gc(q.fromDom(he),"display","none"))},Mn=ue=>{const he=j(ue);return ve(he)&&uo(tr(he,"display"),"none")},Vs=ue=>(ue||"mce_")+u++,Zo=ue=>{const he=j(ue);return ve(he)?Ye(he.dom)?he.dom.outerHTML:d3(he):""},Co=(ue,he)=>{At(ue,rt=>{Ye(rt)&&(rt.outerHTML=he)})},Ms=(ue,he)=>{const rt=H(he);return At(ue,qe=>{const jt=rt==null?void 0:rt.parentNode,Wn=rt==null?void 0:rt.nextSibling;return jt&&(Wn?jt.insertBefore(qe,Wn):jt.appendChild(qe)),qe})},Ti=(ue,he,rt)=>At(he,qe=>{var Wn;const jt=dn(he)?ue.cloneNode(!0):ue;return rt&&_a(F3(qe.childNodes),Us=>{jt.appendChild(Us)}),(Wn=qe.parentNode)==null||Wn.replaceChild(jt,qe),qe}),Oc=(ue,he)=>{if(ue.nodeName!==he.toUpperCase()){const rt=ke(he);return _a(se(ue),qe=>{ae(rt,qe.nodeName,oe(ue,qe.nodeName))}),Ti(rt,ue,!0),rt}else return ue},tu=(ue,he)=>{let rt=ue;for(;rt;){let qe=he;for(;qe&&rt!==qe;)qe=qe.parentNode;if(rt===qe)break;rt=rt.parentNode}return!rt&&ue.ownerDocument?ue.ownerDocument.documentElement:rt},lg=(ue,he,rt)=>Qc(he)?kt(k,ue,{...rt,isContent:jt=>{const Wn=jt.nodeName.toLowerCase();return!!he[Wn]}}):kt(k,ue,rt),WT=()=>e.createRange(),jT=(ue,he,rt)=>{let qe=WT(),jt,Wn;if(ue&&he&&ue.parentNode&&he.parentNode){const Us=ue.parentNode;return qe.setStart(Us,Sf(ue)),qe.setEnd(he.parentNode,Sf(he)),jt=qe.extractContents(),qe=WT(),qe.setStart(he.parentNode,Sf(he)+1),qe.setEnd(Us,Sf(ue)+1),Wn=qe.extractContents(),Us.insertBefore(ap($v,jt,k),ue),rt?Us.insertBefore(rt,ue):Us.insertBefore(he,ue),Us.insertBefore(ap($v,Wn,k),ue),po(ue),rt||he}else return},PS=(ue,he,rt,qe)=>{if(dn(ue)){let jt=ue.length;const Wn=[];for(;jt--;)Wn[jt]=PS(ue[jt],he,rt,qe);return Wn}else return t.collect&&(ue===e||ue===r)&&w.push([ue,he,rt,qe]),R.bind(ue,he,rt,qe||$v)},Xm=(ue,he,rt)=>{if(dn(ue)){let qe=ue.length;const jt=[];for(;qe--;)jt[qe]=Xm(ue[qe],he,rt);return jt}else{if(w.length>0&&(ue===e||ue===r)){let qe=w.length;for(;qe--;){const[jt,Wn,Us]=w[qe];ue===jt&&(!he||he===Wn)&&(!rt||rt===Us)&&R.unbind(jt,Wn,Us)}}return R.unbind(ue,he,rt)}},Pv=(ue,he,rt)=>R.dispatch(ue,he,rt),N5=(ue,he,rt)=>R.dispatch(ue,he,rt),GT=ue=>{if(ue&&Za(ue)){const he=ue.getAttribute("data-mce-contenteditable");return he&&he!=="inherit"?he:ue.contentEditable!=="inherit"?ue.contentEditable:null}else return null},$v={doc:e,settings:t,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:v,boundEvents:w,styles:O,schema:k,events:R,isBlock:U,root:null,clone:Se,getRoot:Oe,getViewPort:Je,getRect:It,getSize:Qe,getParent:lo,getParents:On,get:H,getNext:qo,getPrev:zr,select:nt,is:Lt,add:sa,create:ke,createHTML:wn,createFragment:en,remove:po,setStyle:xe,getStyle:Ee,setStyles:me,removeAllAttribs:Ql,setAttrib:ae,setAttribs:Xn,getAttrib:oe,getPos:St,parseStyle:Ac,serializeStyle:eu,addStyle:rl,loadCSS:Ih,addClass:Jc,removeClass:ig,hasClass:Nv,toggleClass:oc,show:ZT,hide:Ft,isHidden:Mn,uniqueId:Vs,setHTML:Zn,getOuterHTML:Zo,setOuterHTML:Co,decode:Ge,encode:ut,insertAfter:Ms,replace:Ti,rename:Oc,findCommonAncestor:tu,run:At,getAttribs:se,isEmpty:lg,createRng:WT,nodeIndex:Sf,split:jT,bind:PS,unbind:Xm,fire:N5,dispatch:Pv,getContentEditable:GT,getContentEditableParent:ue=>{const he=Oe();let rt=null;for(let qe=ue;qe&&qe!==he&&(rt=GT(qe),rt===null);qe=qe.parentNode);return rt},isEditable:ue=>{if(ve(ue)){const he=Ye(ue)?ue:ue.parentElement;return ve(he)&&Za(he)&&Li(q.fromDom(he))}else return!1},destroy:()=>{if(w.length>0){let ue=w.length;for(;ue--;){const[he,rt,qe]=w[ue];R.unbind(he,rt,qe)}}hn(c,(ue,he)=>{v.unload(he),delete c[he]})},isChildOf:(ue,he)=>ue===he||he.contains(ue),dumpRng:ue=>"startContainer: "+ue.startContainer.nodeName+", startOffset: "+ue.startOffset+", endContainer: "+ue.endContainer.nodeName+", endOffset: "+ue.endOffset},XL=yw(O,t,Xe($v));return $v};_n.DOM=_n(document),_n.nodeIndex=Sf;const T0=_n.DOM,Nn=0,Cc=1,pm=2,fp=3,bn=class bn{constructor(t={}){Ie(this,"settings");Ie(this,"states",{});Ie(this,"queue",[]);Ie(this,"scriptLoadedCallbacks",{});Ie(this,"queueLoadedCallbacks",[]);Ie(this,"loading",!1);this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise((o,r)=>{const c=T0,u=document;let f;const b=()=>{c.remove(k),f&&(f.onerror=f.onload=f=null)},v=()=>{b(),o()},w=()=>{b(),r("Failed to load script: "+t)},k=c.uniqueId();f=u.createElement("script"),f.id=k,f.type="text/javascript",f.src=He._addCacheSuffix(t),this.settings.referrerPolicy&&c.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy);const O=this.settings.crossOrigin;if(ne(O)){const R=O(t);R!==void 0&&c.setAttrib(f,"crossorigin",R)}f.onload=v,f.onerror=w,(u.head||u.body).appendChild(f)})}isDone(t){return this.states[t]===pm}markDone(t){this.states[t]=pm}add(t){const o=this;return o.queue.push(t),o.states[t]===void 0&&(o.states[t]=Nn),new Promise((c,u)=>{o.scriptLoadedCallbacks[t]||(o.scriptLoadedCallbacks[t]=[]),o.scriptLoadedCallbacks[t].push({resolve:c,reject:u})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const o=this,r=(v,w)=>{wo(o.scriptLoadedCallbacks,w).each(k=>{le(k,O=>O[v](w))}),delete o.scriptLoadedCallbacks[w]},c=v=>{const w=ge(v,k=>k.status==="rejected");return w.length>0?Promise.reject(Gn(w,({reason:k})=>dn(k)?k:[k])):Promise.resolve()},u=v=>Promise.allSettled(Mt(v,w=>o.states[w]===pm?(r("resolve",w),Promise.resolve()):o.states[w]===fp?(r("reject",w),Promise.reject(w)):(o.states[w]=Cc,o.loadScript(w).then(()=>{o.states[w]=pm,r("resolve",w);const k=o.queue;return k.length>0?(o.queue=[],u(k).then(c)):Promise.resolve()},()=>(o.states[w]=fp,r("reject",w),Promise.reject(w)))))),f=v=>(o.loading=!0,u(v).then(w=>{o.loading=!1;const k=o.queueLoadedCallbacks.shift();return N.from(k).each(hs),c(w)})),b=gg(t);return o.loading?new Promise((v,w)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(v,w)})}):f(b)}getScriptAttributes(t){const o={};this.settings.referrerPolicy&&(o.referrerpolicy=this.settings.referrerPolicy);const r=this.settings.crossOrigin;if(ne(r)){const c=r(t);Y(c)&&(o.crossorigin=c)}return o}};Ie(bn,"ScriptLoader",new bn);let Kn=bn;const Cw=(e,t)=>{const o=e.indexOf(t);return o!==-1&&e.indexOf(t,o+1)>o},Sw=e=>tn(e)&&Yt(e,"raw"),H3=e=>dn(e)&&e.length>1,wf={},gp=Nt("en"),ww=()=>wo(wf,gp.get()),Sc={getData:()=>lc(wf,e=>({...e})),setCode:e=>{e&&gp.set(e)},getCode:()=>gp.get(),add:(e,t)=>{let o=wf[e];o||(wf[e]=o={});const r=Mt(bt(t),c=>c.toLowerCase());hn(t,(c,u)=>{const f=u.toLowerCase();f!==u&&Cw(r,f)?(Yt(t,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const t=ww().getOr({}),o=b=>ne(b)?Object.prototype.toString.call(b):r(b)?"":""+b,r=b=>b===""||b===null||b===void 0,c=b=>{const v=o(b);return Yt(t,v)?o(t[v]):wo(t,v.toLowerCase()).map(o).getOr(v)},u=b=>b.replace(/{context:\w+}$/,""),f=b=>b.replaceAll("...",zh);if(r(e))return"";if(Sw(e))return f(o(e.raw));if(H3(e)){const b=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(w,k)=>Yt(b,k)?o(b[k]):w);return f(u(v))}return f(u(c(e)))},isRtl:()=>ww().bind(e=>wo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Yt(wf,e)},sr=()=>{const e=[],t={},o={},r=[],c=(H,j)=>{const oe=ge(r,se=>se.name===H&&se.state===j);le(oe,se=>se.resolve())},u=H=>Yt(t,H),f=H=>Yt(o,H),b=H=>{if(o[H])return o[H].instance},v=(H,j)=>{const oe=Sc.getCode(),se=","+(j||"")+",";!oe||j&&se.indexOf(","+oe+",")===-1||Kn.ScriptLoader.add(t[H]+"/langs/"+oe+".js")},w=(H,j)=>{sr.languageLoad!==!1&&(u(H)?v(H,j):U(H,"loaded").then(()=>v(H,j)))},k=(H,j)=>(e.push(j),o[H]={instance:j},c(H,"added"),j),O=H=>{delete t[H],delete o[H]},R=(H,j)=>Y(j)?Y(H)?{prefix:"",resource:j,suffix:""}:{prefix:H.prefix,resource:j,suffix:H.suffix}:j,I=(H,j)=>{if(t[H])return Promise.resolve();let oe=Y(j)?j:j.prefix+j.resource+j.suffix;oe.indexOf("/")!==0&&oe.indexOf("://")===-1&&(oe=sr.baseURL+"/"+oe),t[H]=oe.substring(0,oe.lastIndexOf("/"));const se=()=>(c(H,"loaded"),Promise.resolve());return o[H]?se():Kn.ScriptLoader.add(oe).then(se)},U=(H,j="added")=>j==="added"&&f(H)||j==="loaded"&&u(H)?Promise.resolve():new Promise(oe=>{r.push({name:H,state:j,resolve:oe})});return{items:e,urls:t,lookup:o,get:b,requireLangPack:w,add:k,remove:O,createUrl:R,load:I,waitFor:U}};sr.languageLoad=!0,sr.baseURL="",sr.PluginManager=sr(),sr.ThemeManager=sr(),sr.ModelManager=sr();const bm=Xe("mce-annotation"),Ui=Xe("data-mce-annotation"),yu=Xe("data-mce-annotation-uid"),Ug=Xe("data-mce-annotation-active"),Zg=Xe("data-mce-annotation-classes"),k0=Xe("data-mce-annotation-attrs"),W3=e=>t=>En(t,e),_0=(e,t)=>{const o=e.selection.getRng(),r=q.fromDom(o.startContainer),c=q.fromDom(e.getBody()),u=t.fold(()=>"."+bm(),v=>`[${Ui()}="${v}"]`),f=Bi(r,o.startOffset).getOr(r);return qr(f,u,W3(c)).bind(v=>Pi(v,`${yu()}`).bind(w=>Pi(v,`${Ui()}`).map(k=>{const O=hp(e,w);return{uid:w,name:k,elements:O}})))},B2=e=>bs(e)&&e0(e,bm()),N2=(e,t)=>Qo(e,"data-mce-bogus")||YS(e,'[data-mce-bogus="all"]',W3(t)),hp=(e,t)=>{const o=q.fromDom(e.getBody()),r=Br(o,`[${yu()}="${t}"]`);return ge(r,c=>!N2(c,o))},hd=(e,t)=>{const o=q.fromDom(e.getBody()),r=Br(o,`[${Ui()}="${t}"]`),c={};return le(r,u=>{if(!N2(u,o)){const f=zo(u,yu()),b=wo(c,f).getOr([]);c[f]=b.concat([u])}}),c},A0=(e,t)=>{const o=Nt({}),r=()=>({listeners:[],previous:Bc()}),c=(O,R)=>{u(O,I=>(R(I),I))},u=(O,R)=>{const I=o.get(),U=wo(I,O).getOrThunk(r),H=R(U);I[O]=H,o.set(I)},f=(O,R,I)=>{c(O,U=>{le(U.listeners,H=>H(!0,O,{uid:R,nodes:Mt(I,j=>j.dom)}))})},b=O=>{c(O,R=>{le(R.listeners,I=>I(!1,O))})},v=(O,R)=>{le(hp(e,O),I=>{R?ds(I,Ug(),"true"):Ks(I,Ug())})},w=su(()=>{const O=_i(t.getNames());le(O,R=>{u(R,I=>{const U=I.previous.get();return _0(e,N.some(R)).fold(()=>{U.each(H=>{b(R),I.previous.clear(),v(H,!1)})},({uid:H,name:j,elements:oe})=>{uo(U,H)||(U.each(se=>v(se,!1)),f(j,H,oe),I.previous.set(H),v(H,!0))}),{previous:I.previous,listeners:I.listeners}})})},30);return e.on("remove",()=>{w.cancel()}),e.on("NodeChange",()=>{w.throttle()}),{addListener:(O,R)=>{u(O,I=>({previous:I.previous,listeners:I.listeners.concat([R])}))}}},pp=(e,t)=>{const o=Ui(),r=u=>N.from(u.attr(o)).bind(t.lookup),c=u=>{var k;u.attr(yu(),null),u.attr(Ui(),null),u.attr(Ug(),null);const f=N.from(u.attr(k0())).map(O=>O.split(",")).getOr([]),b=N.from(u.attr(Zg())).map(O=>O.split(",")).getOr([]);le(f,O=>u.attr(O,null));const v=((k=u.attr("class"))==null?void 0:k.split(" "))??[],w=is(v,[bm()].concat(b));u.attr("class",w.length>0?w.join(" "):null),u.attr(Zg(),null),u.attr(k0(),null)};e.serializer.addTempAttr(Ug()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},O0=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>wo(e,c).map(u=>u.settings),getNames:()=>bt(e)}},Tw=(e,t,o=De)=>{const r=new ys(e,t),c=u=>{let f;do f=r[u]();while(f&&!ze(f)&&!o(f));return N.from(f).filter(ze)};return{current:()=>N.from(r.current()).filter(ze),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Cu=(e,t)=>{const o=t||(f=>e.isBlock(f)||os(f)||Vo(f)),r=(f,b,v,w)=>{if(ze(f)){const k=w(f,b,f.data);if(k!==-1)return N.some({container:f,offset:k})}return v().bind(k=>r(k.container,k.offset,v,w))};return{backwards:(f,b,v,w)=>{const k=Tw(f,w??e.getRoot(),o);return r(f,b,()=>k.prev().map(O=>({container:O,offset:O.length})),v).getOrNull()},forwards:(f,b,v,w)=>{const k=Tw(f,w??e.getRoot(),o);return r(f,b,()=>k.next().map(O=>({container:O,offset:0})),v).getOrNull()}}},D0=["td","th"],kw=["thead","tbody","tfoot"],j3=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],G3=["li","dd","dt"],_w=["ul","ol","dl"],P2=["pre","script","textarea","style"],Su=e=>{let t;return o=>(t=t||Ku(e,et),Yt(t,mn(o)))},Aw=e=>mn(e)==="table",Zi=e=>bs(e)&&mn(e)==="br",fa=Su(j3),vi=Su(_w),Aa=Su(G3),R0=Su(kw),Ef=Su(D0),M0=Su(P2),$2=e=>{const t=[];let o=e.dom;for(;o;)t.push(q.fromDom(o)),o=o.lastChild;return t},q3=e=>{const t=Br(e,"br"),o=ge($2(e).slice(-1),Zi);t.length===o.length&&le(o,Ao)},vm=()=>{const e=q.fromTag("br");return ds(e,"data-mce-bogus","1"),e},ym=e=>{$i(e),Hn(e,vm())},I2=(e,t)=>{qs(e).each(o=>{ii(o).each(r=>{t.isBlock(mn(e))&&Zi(o)&&t.isBlock(mn(r))&&Ao(o)})})},rr=Ju,bp=oi,Ya=Nc,B0=e=>e.insertContent(rr,{preserve_zwsp:!0}),vo=Ye,Rl=ze,pd=e=>(Rl(e)&&(e=e.parentNode),vo(e)&&e.hasAttribute("data-mce-caret")),Ml=e=>Rl(e)&&bp(e.data),Zc=e=>pd(e)||Ml(e),N0=e=>e.firstChild!==e.lastChild||!os(e.firstChild),Ow=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(rr),c=e.parentNode;if(t){const u=e.previousSibling;if(Rl(u)){if(Zc(u))return u;if(Cm(u))return u.splitText(u.data.length-1)}c==null||c.insertBefore(r,e)}else{const u=e.nextSibling;if(Rl(u)){if(Zc(u))return u;if(wc(u))return u.splitText(1),u}e.nextSibling?c==null||c.insertBefore(r,e.nextSibling):c==null||c.appendChild(r)}return r},bd=e=>{const t=e.container();return ze(t)?t.data.charAt(e.offset())===rr||e.isAtStart()&&Ml(t.previousSibling):!1},Tf=e=>{const t=e.container();return ze(t)?t.data.charAt(e.offset()-1)===rr||e.isAtEnd()&&Ml(t.nextSibling):!1},L2=(e,t,o)=>{const c=(t.ownerDocument??document).createElement(e);c.setAttribute("data-mce-caret",o?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(vm().dom);const u=t.parentNode;return o?u==null||u.insertBefore(c,t):t.nextSibling?u==null||u.insertBefore(c,t.nextSibling):u==null||u.appendChild(c),c},wc=e=>Rl(e)&&e.data[0]===rr,Cm=e=>Rl(e)&&e.data[e.data.length-1]===rr,Pr=e=>{var r;const t=e.getElementsByTagName("br"),o=t[t.length-1];dm(o)&&((r=o.parentNode)==null||r.removeChild(o))},Wi=e=>e&&e.hasAttribute("data-mce-caret")?(Pr(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,P0=e=>pd(e.startContainer),kf=Math.round,Sm=e=>e?{left:kf(e.left),top:kf(e.top),bottom:kf(e.bottom),right:kf(e.right),width:kf(e.width),height:kf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},vp=(e,t)=>(e=Sm(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),F2=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,$0=(e,t,o)=>e>=0&&e<=Math.min(t.height,o.height)/2,_f=(e,t)=>{const o=Math.min(t.height/2,e.height/2);return e.bottom-o<t.top?!0:e.top>t.bottom?!1:$0(t.top-e.bottom,e,t)},wm=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:$0(t.bottom-e.top,e,t),H2=(e,t,o)=>t>=e.left&&t<=e.right&&o>=e.top&&o<=e.bottom,yp=e=>cn(e,(t,o)=>t.fold(()=>N.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return N.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),N.none()),z2=(e,t,o)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(o-c)*(o-c))},Dw=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),ar=e=>{const t=e.startContainer,o=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===o+1?t.childNodes[o]:null},xm=(e,t)=>{if(Ye(e)&&e.hasChildNodes()){const o=e.childNodes,r=jd(t,0,o.length-1);return o[r]}else return e},Em=(e,t)=>{if(!(t<0&&Ye(e)&&e.hasChildNodes()))return xm(e,t)},Rw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),I0=e=>Y(e)&&e.charCodeAt(0)>=768&&Rw.test(e),V2=(...e)=>t=>{for(let o=0;o<e.length;o++)if(e[o](t))return!0;return!1},Cp=(...e)=>t=>{for(let o=0;o<e.length;o++)if(!e[o](t))return!1;return!0},L0=pc,Mw=Vo,K3=os,Sp=ze,Js=mi(["script","style","textarea"]),Ls=mi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),$r=mi(["table"]),vr=Zc,Wo=e=>vr(e)?!1:Sp(e)?!Js(e.parentNode):Ls(e)||K3(e)||$r(e)||Wg(e),Fs=e=>Ye(e)&&e.getAttribute("unselectable")==="true",Wg=e=>!Fs(e)&&Mw(e),U2=(e,t)=>{for(let o=e.parentNode;o&&o!==t;o=o.parentNode){if(Wg(o))return!1;if(L0(o))return!0}return!0},Z2=e=>Wg(e)?!cn(Fo(e.getElementsByTagName("*")),(t,o)=>t||L0(o),!1):!1,Bw=e=>Ls(e)||Z2(e),F0=(e,t)=>Wo(e)&&U2(e,t),W2=Ye,j2=Wo,H0=u0("display","block table"),G2=u0("float","left right"),jg=Cp(W2,j2,ao(G2)),Nw=ao(u0("white-space","pre pre-line pre-wrap")),wp=ze,Bl=os,z0=_n.nodeIndex,xp=Em,Gg=e=>e?e.createRange():_n.DOM.createRng(),Af=e=>Y(e)&&/[\r\n\t ]/.test(e),Ep=e=>!!e.setStart&&!!e.setEnd,V0=e=>{const t=e.startContainer,o=e.startOffset;if(Af(e.toString())&&Nw(t.parentNode)&&ze(t)){const r=t.data;if(Af(r[o-1])||Af(r[o+1]))return!0}return!1},Tp=e=>{const t=e.ownerDocument,o=Gg(t),r=t.createTextNode(us),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Sm(o.getBoundingClientRect());return c.removeChild(r),u},U0=e=>{const t=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(t===o&&ze(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Oa(u)}else return null},Of=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Oa=e=>{let t;const o=e.getClientRects();return o.length>0?t=Sm(o[0]):t=Sm(e.getBoundingClientRect()),!Ep(e)&&Bl(e)&&Of(t)?Tp(e):Of(t)&&Ep(e)?U0(e)??t:t},Xr=(e,t)=>{const o=vp(e,t);return o.width=1,o.right=o.left+1,o},qg=e=>{const t=[],o=f=>{f.height!==0&&(t.length>0&&F2(f,t[t.length-1])||t.push(f))},r=(f,b)=>{const v=Gg(f.ownerDocument);if(b<f.data.length){if(I0(f.data[b]))return;if(I0(f.data[b-1])&&(v.setStart(f,b),v.setEnd(f,b+1),!V0(v))){o(Xr(Oa(v),!1));return}}b>0&&(v.setStart(f,b-1),v.setEnd(f,b),V0(v)||o(Xr(Oa(v),!1))),b<f.data.length&&(v.setStart(f,b),v.setEnd(f,b+1),V0(v)||o(Xr(Oa(v),!0)))},c=e.container(),u=e.offset();if(wp(c))return r(c,u),t;if(W2(c))if(e.isAtEnd()){const f=xp(c,u);wp(f)&&r(f,f.data.length),jg(f)&&!Bl(f)&&o(Xr(Oa(f),!1))}else{const f=xp(c,u);if(wp(f)&&r(f,0),jg(f)&&e.isAtEnd())return o(Xr(Oa(f),!1)),t;const b=xp(e.container(),e.offset()-1);jg(b)&&!Bl(b)&&(H0(b)||H0(f)||!jg(f))&&o(Xr(Oa(b),!1)),jg(f)&&o(Xr(Oa(f),!0))}return t},Ce=(e,t,o)=>{const r=()=>(wp(e),t===0),c=()=>wp(e)?t>=e.data.length:t>=e.childNodes.length,u=()=>{const k=Gg(e.ownerDocument);return k.setStart(e,t),k.setEnd(e,t),k},f=()=>(o||(o=qg(Ce(e,t))),o),b=()=>f().length>0,v=k=>k&&e===k.container()&&t===k.offset(),w=k=>xp(e,k?t-1:t);return{container:Xe(e),offset:Xe(t),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:v,getNode:w}};Ce.fromRangeStart=e=>Ce(e.startContainer,e.startOffset),Ce.fromRangeEnd=e=>Ce(e.endContainer,e.endOffset),Ce.after=e=>Ce(e.parentNode,z0(e)+1),Ce.before=e=>Ce(e.parentNode,z0(e)),Ce.isAbove=(e,t)=>_s(ps(t.getClientRects()),js(e.getClientRects()),_f).getOr(!1),Ce.isBelow=(e,t)=>_s(js(t.getClientRects()),ps(e.getClientRects()),wm).getOr(!1),Ce.isAtStart=e=>e?e.isAtStart():!1,Ce.isAtEnd=e=>e?e.isAtEnd():!1,Ce.isTextPosition=e=>e?ze(e.container()):!1,Ce.isElementPosition=e=>!Ce.isTextPosition(e);const kp=(e,t)=>{ze(t)&&t.data.length===0&&e.remove(t)},Y3=(e,t,o)=>{t.insertNode(o),kp(e,o.previousSibling),kp(e,o.nextSibling)},Da=(e,t,o)=>{const r=N.from(o.firstChild),c=N.from(o.lastChild);t.insertNode(o),r.each(u=>kp(e,u.previousSibling)),c.each(u=>kp(e,u.nextSibling))},Kg=(e,t,o)=>{Ag(o)?Da(e,t,o):Y3(e,t,o)},Nl=ze,q2=dm,K2=_n.nodeIndex,Df=e=>{const t=e.parentNode;return q2(t)?Df(t):t},_p=e=>e?Qd(e.childNodes,(t,o)=>(q2(o)&&o.nodeName!=="BR"?t=t.concat(_p(o)):t.push(o),t),[]):[],vd=(e,t)=>{let o=e;for(;(o=o.previousSibling)&&Nl(o);)t+=o.data.length;return t},Z0=e=>t=>e===t,X3=e=>{let t,o;t=_p(Df(e)),o=of(t,Z0(e),e),t=t.slice(0,o+1);const r=Qd(t,(c,u,f)=>(Nl(u)&&Nl(t[f-1])&&c++,c),0);return t=Qu(t,mi([e.nodeName])),o=of(t,Z0(e),e),o-r},Jr=e=>(Nl(e)?"text()":e.nodeName.toLowerCase())+"["+X3(e)+"]",Pl=(e,t,o)=>{const r=[];for(let c=t.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},xc=(e,t)=>{let o=[],r=t.container(),c=t.offset(),u;if(Nl(r))u=vd(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(Jr(r));let f=Pl(e,r);return f=Qu(f,ao(dm)),o=o.concat(hl(f,b=>Jr(b))),o.reverse().join("/")+","+u},J3=(e,t,o)=>{let r=_p(e);return r=Qu(r,(c,u)=>!Nl(c)||!Nl(r[u-1])),r=Qu(r,mi([t])),r[o]},Yg=(e,t)=>{let o=e,r=0;for(;Nl(o);){const c=o.data.length;if(t>=r&&t<=r+c){e=o,t=t-r;break}if(!Nl(o.nextSibling)){e=o,t=c;break}r+=c,o=o.nextSibling}return Nl(e)&&t>e.data.length&&(t=e.data.length),Ce(e,t)},Pw=(e,t)=>{if(!t)return null;const o=t.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Qd(r,(f,b)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return v?(v[1]==="text()"&&(v[1]="#text"),J3(f,v[1],parseInt(v[2],10))):null},e);if(!u)return null;if(!Nl(u)&&u.parentNode){let f;return c==="after"?f=K2(u)+1:f=K2(u),Ce(u.parentNode,f)}return Yg(u,parseInt(c,10))},W0=Vo,Q3=(e,t,o)=>{let r=e(t.data.slice(0,o)).length;for(let c=t.previousSibling;c&&ze(c);c=c.previousSibling)r+=e(c.data).length;return r},$w=(e,t,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],v=e.getRoot();if(ze(u))b.push(o?Q3(t,u,f):f);else{let w=0;const k=u.childNodes;f>=k.length&&k.length&&(w=1,f=Math.max(0,k.length-1)),b.push(e.nodeIndex(k[f],o)+w)}for(let w=u;w&&w!==v;w=w.parentNode)b.push(e.nodeIndex(w,o));return b},fn=(e,t,o,r)=>{const c=t.dom,u=$w(c,e,o,r,!0),f=t.isForward(),b=P0(r)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:u,forward:f,...b};{const v=$w(c,e,o,r,!1);return{start:u,end:v,forward:f,...b}}},xt=(e,t,o)=>{let r=0;return He.each(e.select(t),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},Xg=(e,t)=>{let o=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(Ye(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(t?r:r-1,c.length-1)],o&&(r=t?0:o.childNodes.length,t?e.setStart(o,r):e.setEnd(o,r))}},j0=e=>(Xg(e,!0),Xg(e,!1),e),G0=(e,t)=>{if(Ye(e)&&(e=xm(e,t),W0(e)))return e;if(Zc(e)){ze(e)&&pd(e)&&(e=e.parentNode);let o=e.previousSibling;if(W0(o)||(o=e.nextSibling,W0(o)))return o}},ek=e=>G0(e.startContainer,e.startOffset)||G0(e.endContainer,e.endOffset),Y2=(e,t,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||W0(r)){const f=r.nodeName;return{name:f,index:xt(o.dom,f,r)}}const u=ek(c);if(u){const f=u.tagName;return{name:f,index:xt(o.dom,f,u)}}return fn(e,o,t,c)},Uo=e=>{const t=e.getRng();return{start:xc(e.dom.getRoot(),Ce.fromRangeStart(t)),end:xc(e.dom.getRoot(),Ce.fromRangeEnd(t)),forward:e.isForward()}},q0=e=>({rng:e.getRng(),forward:e.isForward()}),K0=(e,t,o)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},X2=(e,t)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,v=e.isForward();if(b==="IMG")return{name:b,index:xt(o,b,f)};const w=j0(r.cloneRange());if(!u){w.collapse(!1);const O=K0(o,c+"_end",t);Kg(o,w,O)}r=j0(r),r.collapse(!0);const k=K0(o,c+"_start",t);return Kg(o,r,k),e.moveToBookmark({id:c,keep:!0,forward:v}),{id:c,forward:v}},Te=(e,t,o=!1)=>t===2?Y2(Ya,o,e):t===3?Uo(e):t?q0(e):X2(e,!1),Jg=Me(Y2,Yo,!0),Rf=e=>e===1,wu=e=>e===-1;var ji;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ji||(ji={}));const xu=(e,t,o)=>e.stype===ji.Error?t(e.serror):o(e.svalue),Qg=e=>{const t=[],o=[];return le(e,r=>{xu(r,c=>o.push(c),c=>t.push(c))}),{values:t,errors:o}},Mf=(e,t)=>e.stype===ji.Error?{stype:ji.Error,serror:t(e.serror)}:e,tk=(e,t)=>e.stype===ji.Value?{stype:ji.Value,svalue:t(e.svalue)}:e,eh=(e,t)=>e.stype===ji.Value?t(e.svalue):e,Oo=(e,t)=>e.stype===ji.Error?t(e.serror):e,Gi=e=>({stype:ji.Value,svalue:e}),J2=e=>({stype:ji.Error,serror:e}),Qr={fromResult:e=>e.fold(J2,Gi),toResult:e=>xu(e,Er.error,Er.value),svalue:Gi,partition:Qg,serror:J2,bind:eh,bindError:Oo,map:tk,mapError:Mf,fold:xu},Iw=e=>tn(e)&&bt(e).length>100?" removed due to size":JSON.stringify(e,null,2),Q2=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Xe("... (only showing first ten failures)")}]):e;return Mt(t,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Lw=(e,t)=>Qr.serror([{path:e,getErrorInfo:t}]),nk=(e,t,o)=>Lw(e,()=>'Could not find valid *required* value for "'+t+'" in '+Iw(o)),ok=(e,t)=>Lw(e,Xe(t)),ey=e=>{const t=(r,c)=>Qr.bindError(e(c),u=>ok(r,u)),o=Xe("val");return{extract:t,toString:o}},Fw=ey(Qr.svalue),Ve=Xe(Fw),ty=(e,t)=>ey(o=>{const r=typeof o;return e(o)?Qr.svalue(o):Qr.serror(`Expected type: ${t} but got: ${r}`)}),yr=ty(pr,"number"),ny=ty(Y,"string"),oy=ty(ne,"function"),sy=()=>({tag:"required",process:{}}),sk=e=>({tag:"defaultedThunk",process:e}),Ut=e=>sk(Xe(e)),Hw=()=>({tag:"option",process:{}}),zw=(e,t,o,r)=>({tag:"field",key:e,newKey:t,presence:o,prop:r}),rk=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},ak=(e,t)=>Qr.svalue(Gd(t,qd.apply(void 0,e))),Vw=e=>T(Qr.serror,ca)(e),Uw={consolidateObj:(e,t)=>{const o=Qr.partition(e);return o.errors.length>0?Vw(o.errors):ak(o.values,t)},consolidateArr:e=>{const t=Qr.partition(e);return t.errors.length>0?Vw(t.errors):Qr.svalue(t.values)}},ck=(e,t,o,r)=>wo(t,o).fold(()=>nk(e,o,t),r),Zt=(e,t,o,r)=>{const c=wo(e,t).getOrThunk(()=>o(e));return r(c)},ry=(e,t,o)=>o(wo(e,t)),yd=(e,t,o,r)=>{const c=wo(e,t).map(u=>u===!0?o(e):u);return r(c)},yi=(e,t,o,r,c)=>{const u=b=>c.extract(t.concat([r]),b),f=b=>b.fold(()=>Qr.svalue(N.none()),v=>{const w=c.extract(t.concat([r]),v);return Qr.map(w,N.some)});switch(e.tag){case"required":return ck(t,o,r,u);case"defaultedThunk":return Zt(o,r,e.process,u);case"option":return ry(o,r,f);case"defaultedOptionThunk":return yd(o,r,e.process,f);case"mergeWithThunk":return Zt(o,r,Xe({}),b=>{const v=Gd(e.process(o),b);return u(v)})}},Y0=(e,t,o)=>{const r={},c=[];for(const u of o)rk(u,(f,b,v,w)=>{const k=yi(v,e,t,f,w);Qr.fold(k,O=>{c.push(...O)},O=>{r[b]=O})},(f,b)=>{r[f]=b(t)});return c.length>0?Qr.serror(c):Qr.svalue(r)},Ra=e=>({extract:(r,c)=>Y0(r,c,e),toString:()=>`obj{
`+Mt(e,c=>rk(c,(u,f,b,v)=>u+" -> "+v.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),th=e=>({extract:(r,c)=>{const u=Mt(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return Uw.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),Ap=T(th,Ra),X0=e=>ey(t=>e(t).fold(Qr.serror,Qr.svalue)),nh=(e,t,o)=>{const r=t.extract([e],o);return Qr.mapError(r,c=>({input:o,errors:c}))},oh=(e,t,o)=>Qr.toResult(nh(e,t,o)),Eu=e=>`Errors: 
`+Q2(e.errors).join(`
`)+`

Input object: `+Iw(e.input),Hs=zw,Cd=e=>Hs(e,e,sy(),Ve()),Zw=(e,t)=>Hs(e,e,sy(),t),ay=e=>Zw(e,ny),Ww=e=>Zw(e,oy),ik=(e,t)=>Hs(e,e,sy(),th(t)),An=e=>Hs(e,e,Hw(),Ve()),qi=(e,t)=>Hs(e,e,Hw(),t),km=e=>qi(e,ny),Z5=e=>qi(e,oy),sh=(e,t)=>Hs(e,e,Ut(t),Ve()),Rn=(e,t,o)=>Hs(e,e,Ut(t),o),lk=(e,t)=>Rn(e,t,yr),uk=(e,t,o)=>Rn(e,t,th(o)),W5=e=>e.type==="inline-command"||e.type==="inline-format",j5=e=>e.type==="block-command"||e.type==="block-format",Op=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,dk=e=>{const t=r=>Er.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(dn(e.format)){if(!Ha(e.format,Y))return t(r+" pattern has non-string items in the `format` array");f=e.format}else if(Y(e.format))f=[e.format];else return t(r+" pattern has non-string `format` parameter");return Er.value(c(f))}else return e.cmd!==void 0?Y(e.cmd)?Er.value(u(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!tn(e))return t("Raw pattern is not an object");if(!Y(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Y(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else{if(e.replacement!==void 0)return Y(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):Er.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter");{const r=e.trigger??"space";return e.start.length===0?t("Block pattern has empty `start` parameter"):o("Block",c=>({type:"block-format",start:e.start,format:c[0],trigger:r}),(c,u)=>({type:"block-command",start:e.start,cmd:c,value:u,trigger:r}))}}},mk=e=>ge(e,j5),Dp=e=>ge(e,W5),fk=(e,t)=>({inlinePatterns:Dp(e),blockPatterns:mk(e),dynamicPatternsLookup:t}),Rp=(e,t)=>({...e,blockPatterns:ge(e.blockPatterns,o=>Op(o,t))}),jw=e=>{const t=va(Mt(e,dk));return le(t.errors,o=>console.error(o.message,o.pattern)),t.values},gk=e=>t=>{const o=e(t);return jw(o)},J0=(e,t)=>e.dispatch("PreProcess",t),cy=(e,t)=>e.dispatch("PostProcess",t),iy=e=>{e.dispatch("remove")},Gw=e=>{e.dispatch("detach")},hk=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},qw=(e,t,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:t,width:o,height:r,origin:c})},ly=(e,t,o,r,c)=>{e.dispatch("ObjectResized",{target:t,width:o,height:r,origin:c})},Kw=e=>{e.dispatch("PreInit")},zn=e=>{e.dispatch("PostRender")},Yw=e=>{e.dispatch("Init")},uy=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},Q0=(e,t,o)=>{e.dispatch(t,o)},Sd=(e,t,o,r)=>{e.dispatch("FormatApply",{format:t,node:o,vars:r})},dy=(e,t,o,r)=>{e.dispatch("FormatRemove",{format:t,node:o,vars:r})},pk=(e,t)=>e.dispatch("BeforeSetContent",t),Xw=(e,t)=>e.dispatch("SetContent",t),rh=(e,t)=>e.dispatch("BeforeGetContent",t),Jw=(e,t)=>e.dispatch("GetContent",t),Mp=(e,t)=>{e.dispatch("AutocompleterStart",t)},Bp=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},my=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},_m=e=>{e.dispatch("AutocompleterEnd")},Qw=(e,t,o)=>e.dispatch("PastePreProcess",{content:t,internal:o}),ex=(e,t,o)=>e.dispatch("PastePostProcess",{node:t,internal:o}),tx=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),nx=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),G5=(e,t)=>e.dispatch("DisabledStateChange",{state:t}),ox=e=>e.dispatch("CloseActiveTooltips"),eb=cu().deviceType,tb=eb.isTouch(),Np=_n.DOM,nb=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return cn(t,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[ls(u)]=ls(f),o},{})},ob=e=>ac(e,RegExp),lt=e=>t=>t.options.get(e),Am=e=>Y(e)||tn(e),Tu=(e,t="")=>o=>{const r=Y(o);if(r)if(o.indexOf("=")!==-1){const c=nb(o);return{value:wo(c,e.id).getOr(t),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Pp=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("crossorigin",{processor:"function",default:Xe(void 0)}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),t("body_id",{processor:Tu(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Tu(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:r=>{const c=Y(r)&&Jo(r);return c?{value:r,valid:c}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:r=>{const c=vt(["block","linebreak","invert","default"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:r=>an(r)?{valid:!0,value:r}:Y(r)?{valid:!0,value:r}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:r=>{const c=r===!1||Y(r)||Vn(r,Y);return c?Y(r)?{value:Mt(r.split(","),ls),valid:c}:dn(r)?{value:r,valid:c}:r===!1?{value:[],valid:c}:{value:r,valid:c}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Ip(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:r=>{const c=Y(r)||Vn(r,Y);return c?{value:dn(r)?r:Mt(r.split(","),ls),valid:c}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("extended_mathml_attributes",{processor:"string[]"}),t("extended_mathml_elements",{processor:"string[]"}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:r=>{const c=an(r)||Y(r);return c?r===!1||eb.isiPhone()||eb.isiPad()?{value:"",valid:c}:{value:r===!0?"table,img,figure.image,div,video,iframe":r,valid:c}:{valid:!1,message:"Must be boolean or a string"}},default:!tb}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("onboarding",{processor:"boolean",default:!0}),t("tiny_cloud_entry_url",{processor:"string"}),t("theme",{processor:r=>r===!1||Y(r)||ne(r),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:r=>{const c=r===!1||Y(r);return c?{value:r===!1?"":r,valid:c}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("disabled",{processor:r=>an(r)?(e.initialized&&Yi(e)!==r&&Promise.resolve().then(()=>{G5(e,r)}),{valid:!0,value:r}):{valid:!1,message:"The value must be a boolean."},default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_html_in_comments",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("allow_mathml_annotation_encodings",{processor:r=>{const c=Vn(r,Y);return c?{value:r,valid:c}:{valid:!1,message:"Must be an array of strings."}},default:[]}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:Am}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Am}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Am}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Am}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:r=>Y(r)||r===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:r=>Vn(r,tn)||r===!1?{value:jw(r===!1?[]:r),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:r=>ne(r)?{value:gk(r),valid:!0}:{valid:!1,message:"Must be a single function"},default:r=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:r=>Vn(r,ob)?{value:r,valid:!0}:ob(r)?{value:[r],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:r=>{const c=vt(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:r=>{const c=vt(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),t("user_id",{processor:"string",default:"Anonymous"}),t("fetch_users",{processor:r=>r===void 0?{valid:!0,value:void 0}:ne(r)?{valid:!0,value:r}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}});const o=Ap([ay("mimeType"),ik("extensions",X0(r=>Y(r)?Er.value(r):Er.error("Extensions must be an array of strings")))]);t("documents_file_types",{processor:r=>oh("documents_file_types",o,r).fold(c=>({valid:!1,message:"Must be a non-empty array of objects matching the configuration schema: https://www.tiny.cloud/docs/tinymce/latest/uploadcare-documents/#documents-file-types"}),c=>({valid:!0,value:c}))}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:Sc.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:Np.getAttrib(e.getElement(),"placeholder")})}),t("lists_indent_on_tab",{processor:"boolean",default:!0}),t("list_max_depth",{processor:r=>{const c=pr(r);if(c){if(r<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:r,valid:c}}else return{valid:!1,message:"Must be a number"}}})},sx=lt("iframe_attrs"),fy=lt("doctype"),gy=lt("document_base_url"),rx=lt("body_id"),ax=lt("body_class"),cx=lt("content_security_policy"),sb=lt("br_in_pre"),zs=lt("forced_root_block"),Ki=lt("forced_root_block_attrs"),rb=lt("newline_behavior"),ix=lt("br_newline_selector"),lx=lt("no_newline_selector"),ux=lt("keep_styles"),ab=lt("end_container_on_empty_block"),hy=lt("automatic_uploads"),dx=lt("images_reuse_filename"),mx=lt("images_replace_blob_uris"),$p=lt("icons"),py=lt("icons_url"),cb=lt("images_upload_url"),by=lt("images_upload_base_path"),bk=lt("images_upload_credentials"),fx=lt("images_upload_handler"),gx=lt("content_css_cors"),ib=lt("referrer_policy"),Bf=lt("crossorigin"),hx=lt("language"),px=lt("language_url"),lb=lt("indent_use_margin"),vk=lt("indentation"),yk=lt("content_css"),Nf=lt("content_style"),vy=lt("font_css"),Ck=lt("directionality"),Sk=lt("inline_boundaries_selector"),bx=lt("object_resizing"),wk=lt("resize_img_proportional"),yy=lt("placeholder"),ub=lt("event_root"),Cy=lt("service_message"),ku=lt("theme"),vx=lt("theme_url"),db=lt("model"),xk=lt("model_url"),Om=lt("inline_boundaries"),Ek=lt("formats"),Tk=lt("preview_styles"),q5=lt("format_empty_lines"),K5=lt("format_noneditable_selector"),ah=lt("custom_ui_selector"),Ip=lt("inline"),Sy=lt("hidden_input"),kk=lt("submit_patch"),_k=lt("add_form_submit_trigger"),mb=lt("add_unload_trigger"),yx=lt("custom_undo_redo_levels"),Cx=lt("disable_nodechange"),Lp=lt("readonly"),fb=lt("editable_root"),wy=lt("content_css_cors"),Fp=lt("plugins"),xy=lt("external_plugins"),Ak=lt("block_unsupported_drop"),Hp=lt("visual"),Sx=lt("visual_table_class"),gb=lt("visual_anchor_class"),hb=lt("iframe_aria_text"),Pf=lt("setup"),Ok=lt("init_instance_callback"),_u=lt("urlconverter_callback"),Dk=lt("auto_focus"),wx=lt("browser_spellcheck"),Rk=lt("protect"),Y5=lt("paste_block_drop"),pb=lt("paste_data_images"),Mk=lt("paste_preprocess"),Bk=lt("paste_postprocess"),Nk=lt("newdocument_content"),Ey=lt("paste_webkit_styles"),Pk=lt("paste_remove_styles_if_webkit"),xx=lt("paste_merge_formats"),Ty=lt("smart_paste"),$k=lt("paste_as_text"),Ik=lt("paste_tab_spaces"),ky=lt("allow_html_data_urls"),Ex=lt("text_patterns"),wt=lt("text_patterns_lookup"),zp=lt("noneditable_class"),Tx=lt("editable_class"),Lk=lt("noneditable_regexp"),_y=lt("preserve_cdata"),Vp=lt("highlight_on_focus"),bb=lt("xss_sanitization"),Up=lt("init_content_sync"),ch=e=>e.options.isSet("text_patterns_lookup"),Ay=e=>He.explode(e.options.get("font_size_style_values")),Oy=e=>He.explode(e.options.get("font_size_classes")),kx=e=>e.options.get("encoding")==="xml",Dy=e=>He.explode(e.options.get("images_file_types")),_x=lt("table_tab_navigation"),ih=lt("details_initial_state"),wd=lt("details_serialized_state"),lh=lt("sandbox_iframes"),xd=e=>e.options.get("sandbox_iframes_exclusions"),Ed=lt("convert_unsafe_embeds"),Ax=lt("license_key"),Zp=lt("api_key"),Yi=lt("disabled"),Ox=lt("user_id"),Dx=lt("fetch_users"),Ry=lt("lists_indent_on_tab"),My=e=>N.from(e.options.get("list_max_depth")),Rx=Ye,Mx=ze,Fk=e=>{const t=e.parentNode;t&&t.removeChild(e)},Bx=e=>{const t=Ya(e);return{count:e.length-t.length,text:t}},$f=e=>{let t;for(;(t=e.data.lastIndexOf(rr))!==-1;)e.deleteData(t,1)},By=(e,t)=>(If(e),t),Nx=(e,t)=>{const o=Bx(e.data.substr(0,t.offset())),r=Bx(e.data.substr(t.offset()));return(o.text+r.text).length>0?($f(e),Ce(e,t.offset()-o.count)):t},Ny=(e,t)=>{const o=t.container(),r=aa(Fo(o.childNodes),e).map(c=>c<t.offset()?Ce(o,t.offset()-1):t).getOr(t);return If(e),r},Py=(e,t)=>Mx(e)&&t.container()===e?Nx(e,t):By(e,t),$y=(e,t)=>t.container()===e.parentNode?Ny(e,t):By(e,t),Hk=(e,t)=>Ce.isTextPosition(t)?Py(e,t):$y(e,t),If=e=>{Rx(e)&&Zc(e)&&(N0(e)?e.removeAttribute("data-mce-caret"):Fk(e)),Mx(e)&&($f(e),e.data.length===0&&Fk(e))},Lf=Vo,vb=hi,yb=Og,Px="*[contentEditable=false],video,audio,embed,object",zk=(e,t,o)=>{const r=vp(t.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=t.offsetWidth-t.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},$x=e=>{var o,r;const t=Br(q.fromDom(e),Px);for(let c=0;c<t.length;c++){const u=t[c].dom;let f=u.previousSibling;if(Cm(f)){const b=f.data;b.length===1?(o=f.parentNode)==null||o.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,wc(f)&&(f.data.length===1?(r=f.parentNode)==null||r.removeChild(f):f.deleteData(0,1))}},Gt=(e,t,o,r)=>{const c=Bc();let u,f;const b=zs(e),v=e.dom,w=(H,j)=>{let oe;if(k(),yb(j))return null;if(o(j)){const se=L2(b,j,H),ae=zk(t,j,H);v.setStyle(se,"top",ae.top),v.setStyle(se,"caret-color","transparent"),f=se;const Se=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(Se,{...ae}),v.add(t,Se),c.set({caret:Se,element:j,before:H}),H&&v.addClass(Se,"mce-visual-caret-before"),O(),oe=j.ownerDocument.createRange(),oe.setStart(se,0),oe.setEnd(se,0)}else return f=Ow(j,H),oe=j.ownerDocument.createRange(),Wc(f.nextSibling)?(oe.setStart(f,0),oe.setEnd(f,0)):(oe.setStart(f,1),oe.setEnd(f,1)),oe;return oe},k=()=>{$x(t),f&&(If(f),f=null),c.on(H=>{v.remove(H.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},O=()=>{u=window.setInterval(()=>{c.on(H=>{r()?v.toggleClass(H.caret,"mce-visual-caret-hidden"):v.addClass(H.caret,"mce-visual-caret-hidden")})},500)},R=()=>{c.on(H=>{const j=zk(t,H.element,H.before);v.setStyles(H.caret,{...j})})},I=()=>clearInterval(u),U=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:c.isSet,show:w,hide:k,getCss:U,reposition:R,destroy:I}},Cb=()=>Fn.browser.isFirefox(),Wc=e=>Lf(e)||vb(e),Wp=e=>(Wc(e)||Wa(e)&&Cb())&&Mi(q.fromDom(e)).exists(Li),Vk=pc,Sb=Vo,Uk=hi,Iy=u0("display","block table table-cell table-row table-caption list-item"),Ly=Zc,jp=pd,Il=Ye,uh=ze,Zk=Wo,Ff=(e,t)=>{let o;for(;o=e(t);)if(!jp(o))return o;return null},Gp=(e,t,o,r,c)=>{const u=new ys(e,r),f=Sb(e)||jp(e);let b;if(wu(t)){if(f&&(b=Ff(u.prev.bind(u),!0),o(b)))return b;for(;b=Ff(u.prev.bind(u),c);)if(o(b))return b}if(Rf(t)){if(f&&(b=Ff(u.next.bind(u),!0),o(b)))return b;for(;b=Ff(u.next.bind(u),c);)if(o(b))return b}return null},wb=(e,t)=>{const o=c=>Vk(c.dom),r=c=>c.dom===t;return hu(q.fromDom(e),o,r).map(c=>c.dom).getOr(t)},cr=e=>Ye(e)&&Ts(q.fromDom(e),"position")==="absolute",Wk=(e,t)=>e.parentNode!==t,Fy=(e,t)=>Sb(e)&&cr(e)&&Wk(e,t),Dm=(e,t)=>{for(;e&&e!==t;){if(Iy(e)&&!Fy(e,t))return e;e=e.parentNode}return null},Au=(e,t,o)=>Dm(e.container(),o)===Dm(t.container(),o),Hy=(e,t)=>{if(!t)return N.none();const o=t.container(),r=t.offset();return Il(o)?N.from(o.childNodes[r+e]):N.none()},Ix=(e,t)=>{const r=(t.ownerDocument??document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},jk=(e,t,o)=>Dm(t,e)===Dm(o,e),xb=(e,t,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==t;){let u=c[r];if(u&&Ly(u)&&(u=u[r]),Sb(u)||Uk(u)){if(jk(t,u,c))return u;break}if(Zk(u))break;c=c.parentNode}return null},qp=Me(Ix,!0),Rm=Me(Ix,!1),Eb=(e,t,o)=>{let r;const c=Me(xb,!0,t),u=Me(xb,!1,t),f=o.startContainer,b=o.startOffset;if(pd(f)){const v=uh(f)?f.parentNode:f,w=v.getAttribute("data-mce-caret");if(w==="before"&&(r=v.nextSibling,Wp(r)))return qp(r);if(w==="after"&&(r=v.previousSibling,Wp(r)))return Rm(r)}if(!o.collapsed)return o;if(ze(f)){if(Ly(f)){if(e===1){if(r=u(f),r)return qp(r);if(r=c(f),r)return Rm(r)}if(e===-1){if(r=c(f),r)return Rm(r);if(r=u(f),r)return qp(r)}return o}if(Cm(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?qp(r):o;if(wc(f)&&b<=1)return e===-1&&(r=c(f),r)?Rm(r):o;if(b===f.data.length)return r=u(f),r?qp(r):o;if(b===0)return r=c(f),r?Rm(r):o}return o},Tb=(e,t)=>Hy(e?0:-1,t).filter(Sb),Mm=(e,t,o)=>{const r=Eb(e,t,o);return e===-1?Ce.fromRangeStart(r):Ce.fromRangeEnd(r)},Kp=e=>N.from(e.getNode()).map(q.fromDom),zy=e=>N.from(e.getNode(!0)).map(q.fromDom),kb=(e,t)=>{let o=t;for(;o=e(o);)if(o.isVisible())return o;return o},Ll=(e,t)=>{const o=Au(e,t);return!o&&os(e.getNode())?!0:o},Lx=Vo,Ou=ze,Vy=Ye,_b=os,dh=Wo,Yp=Bw,Ab=F0,Gk=(e,t)=>{const o=[];let r=e;for(;r&&r!==t;)o.push(r),r=r.parentNode;return o},Fx=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Ob=(e,t)=>{if(Rf(e)){if(dh(t.previousSibling)&&!Ou(t.previousSibling))return Ce.before(t);if(Ou(t))return Ce(t,0)}if(wu(e)){if(dh(t.nextSibling)&&!Ou(t.nextSibling))return Ce.after(t);if(Ou(t))return Ce(t,t.data.length)}return wu(e)?_b(t)?Ce.before(t):Ce.after(t):Ce.before(t)},qk=(e,t)=>{const o=t.nextSibling;return o&&dh(o)?Ou(o)?Ce(o,0):Ce.before(o):Uy(1,Ce.after(t),e)},Uy=(e,t,o)=>{let r,c,u,f;if(!Vy(o)||!t)return null;if(t.isEqual(Ce.after(o))&&o.lastChild){if(f=Ce.after(o.lastChild),wu(e)&&dh(o.lastChild)&&Vy(o.lastChild))return _b(o.lastChild)?Ce.before(o.lastChild):f}else f=t;const b=f.container();let v=f.offset();if(Ou(b)){if(wu(e)&&v>0)return Ce(b,--v);if(Rf(e)&&v<b.length)return Ce(b,++v);r=b}else{if(wu(e)&&v>0&&(c=Fx(b,v-1),dh(c)))return!Yp(c)&&(u=Gp(c,e,Ab,c),u)?Ou(u)?Ce(u,u.data.length):Ce.after(u):Ou(c)?Ce(c,c.data.length):Ce.before(c);if(Rf(e)&&v<b.childNodes.length&&(c=Fx(b,v),dh(c)))return _b(c)?qk(o,c):!Yp(c)&&(u=Gp(c,e,Ab,c),u)?Ou(u)?Ce(u,0):Ce.before(u):Ou(c)?Ce(c,0):Ce.after(c);r=c||f.getNode()}if(r&&(Rf(e)&&f.isAtEnd()||wu(e)&&f.isAtStart())&&(r=Gp(r,e,et,o,!0),Ab(r,o)))return Ob(e,r);c=r&&Gp(r,e,Ab,o);const w=si(ge(Gk(b,o),Lx));return w&&(!c||!w.contains(c))?(Rf(e)?f=Ce.after(w):f=Ce.before(w),f):c?Ob(e,c):null},Fl=e=>({next:t=>Uy(1,t,e),prev:t=>Uy(-1,t,e)}),Zy=(e,t,o)=>{const r=e?Ce.before(o):Ce.after(o);return jc(e,t,r)},Kk=e=>os(e)?Ce.before(e):Ce.after(e),Hx=e=>Ce.isTextPosition(e)?e.offset()===0:Wo(e.getNode()),zx=e=>{if(Ce.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Wo(e.getNode(!0))},Vx=(e,t)=>!Ce.isTextPosition(e)&&!Ce.isTextPosition(t)&&e.getNode()===t.getNode(!0),Yk=e=>!Ce.isTextPosition(e)&&os(e.getNode()),$o=(e,t,o)=>e?!Vx(t,o)&&!Yk(t)&&zx(t)&&Hx(o):!Vx(o,t)&&Hx(t)&&zx(o),jc=(e,t,o)=>{const r=Fl(t);return N.from(e?r.next(o):r.prev(o))},mh=(e,t,o)=>jc(e,t,o).bind(r=>Au(o,r,t)&&$o(e,o,r)?jc(e,t,r):N.some(r)),Ci=(e,t,o,r)=>mh(e,t,o).bind(c=>r(c)?Ci(e,t,c,r):N.some(c)),l=(e,t)=>{const o=e?t.firstChild:t.lastChild;return ze(o)?N.some(Ce(o,e?0:o.data.length)):o?Wo(o)?N.some(e?Ce.before(o):Kk(o)):Zy(e,t,o):N.none()},m=Me(jc,!0),p=Me(jc,!1),y=Me(l,!0),E=Me(l,!1),A="_mce_caret",M=e=>Ye(e)&&e.id===A,L=(e,t)=>{let o=t;for(;o&&o!==e;){if(M(o))return o;o=o.parentNode}return null},Z=e=>Y(e.start),Q=e=>Yt(e,"rng"),ce=e=>Yt(e,"id"),Fe=e=>Yt(e,"name"),at=e=>He.isArray(e.start),tt=e=>!Fe(e)&&an(e.forward)?e.forward:!0,Le=(e,t)=>(Ye(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),je=(e,t)=>{const o=N.from(Pw(e.getRoot(),t.start)),r=N.from(Pw(e.getRoot(),t.end));return _s(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:tt(t)}})},Pe=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(rr);e.appendChild(r),t.setStart(r,0),t.setEnd(r,0)},Bt=e=>!e.hasChildNodes(),Qt=(e,t)=>E(e).fold(De,o=>(t.setStart(o.container(),o.offset()),t.setEnd(o.container(),o.offset()),!0)),mt=(e,t,o)=>Bt(t)&&L(e,t)?(Pe(t,o),!0):!1,Yn=(e,t,o,r)=>{const c=o[t?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let v=c.length-1;f&&v>=1;v--){const w=f.childNodes;if(mt(u,f,r))return!0;if(c[v]>w.length-1)return mt(u,f,r)?!0:Qt(f,r);f=w[c[v]]}ze(f)&&(b=Math.min(c[0],f.data.length)),Ye(f)&&(b=Math.min(c[0],f.childNodes.length)),t?r.setStart(f,b):r.setEnd(f,b)}return!0},qt=e=>ze(e)&&e.data.length>0,no=(e,t,o)=>{const r=e.get(o.id+"_"+t),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(t==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):qt(r.nextSibling)?(f=r.nextSibling,b=0):qt(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):qt(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const v=r.previousSibling,w=r.nextSibling;He.each(He.grep(r.childNodes),O=>{ze(O)&&(O.data=O.data.replace(/\uFEFF/g,""))});let k;for(;k=e.get(o.id+"_"+t);)e.remove(k,!0);if(ze(w)&&ze(v)&&!Fn.browser.isOpera()){const O=v.data.length;v.appendData(w.data),e.remove(w),f=v,b=O}}return N.some(Ce(f,b))}else return N.none()},Os=(e,t)=>{const o=e.createRng();return Yn(e,!0,t,o)&&Yn(e,!1,t,o)?N.some({range:o,forward:tt(t)}):N.none()},Gc=(e,t)=>{const o=no(e,"start",t),r=no(e,"end",t);return _s(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(Le(e,c.container()),c.offset()),f.setEnd(Le(e,u.container()),u.offset()),{range:f,forward:tt(t)}})},Hf=(e,t)=>N.from(e.select(t.name)[t.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Bm=(e,t)=>{const o=e.dom;if(t){if(at(t))return Os(o,t);if(Z(t))return je(o,t);if(ce(t))return Gc(o,t);if(Fe(t))return Hf(o,t);if(Q(t))return N.some({range:t.rng,forward:tt(t)})}return N.none()},zf=(e,t,o)=>Te(e,t,o),go=(e,t)=>{Bm(e,t).each(({range:o,forward:r})=>{e.setRng(o,r)})},gs=e=>Ye(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Ma=(e=>t=>e===t)(us),Cr=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Td=e=>!Cr(e)&&!Ma(e)&&!oi(e),ga=e=>{const t=[];if(e)for(let o=0;o<e.rangeCount;o++)t.push(e.getRangeAt(o));return t},Wy=e=>Gn(e,t=>{const o=ar(t);return o?[q.fromDom(o)]:[]}),Db=e=>ga(e).length>1,kd=e=>ge(Wy(e),Ef),ea=e=>Br(e,"td[data-mce-selected],th[data-mce-selected]"),Ux=(e,t)=>{const o=ea(t);return o.length>0?o:kd(e)},ft=e=>Ux(ga(e.selection.getSel()),q.fromDom(e.getBody())),Ja=(e,t)=>$s(e,"table",t),Xk=e=>{const t=e.startContainer,o=e.startOffset;return ze(t)?o===0?N.some(q.fromDom(t)):N.none():N.from(t.childNodes[o]).map(q.fromDom)},Zx=e=>{const t=e.endContainer,o=e.endOffset;return ze(t)?o===t.data.length?N.some(q.fromDom(t)):N.none():N.from(t.childNodes[o-1]).map(q.fromDom)},Rb=e=>_r(e).fold(Xe([e]),t=>[e].concat(Rb(t))),jy=e=>qs(e).fold(Xe([e]),t=>mn(t)==="br"?ii(t).map(o=>[e].concat(jy(o))).getOr([]):[e].concat(jy(t))),Vf=(e,t)=>_s(Xk(t),Zx(t),(o,r)=>{const c=so(Rb(e),Me(En,o)),u=so(jy(e),Me(En,r));return c.isSome()&&u.isSome()}).getOr(!1),Wx=(e,t,o,r)=>{const c=o,u=new ys(o,c),f=nu(e.schema.getMoveCaretBeforeOnEnterElements(),(v,w)=>!vt(["td","th","table"],w.toLowerCase()));let b=o;do{if(ze(b)&&He.trim(b.data).length!==0){r?t.setStart(b,0):t.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?t.setStartBefore(b):b.nodeName==="BR"?t.setEndBefore(b):t.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?t.setStart(c,0):t.setEnd(c,c.childNodes.length))},Gy=e=>{const t=e.selection.getSel();return ve(t)&&t.rangeCount>0},qy=(e,t)=>{const o=ft(e);o.length>0?le(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),t(u,!0)}):t(e.selection.getRng(),!1)},jx=(e,t,o)=>{const r=X2(e,t);o(r),e.moveToBookmark(r)},Ky=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&t(e.startContainer.childNodes[e.startOffset]),QL=e=>Ky(e,Za),eF=e=>Ky(e,ze),tF=e=>Ky(e,ep),Yy=e=>pr(e==null?void 0:e.nodeType),Xy=e=>Ye(e)&&!gs(e)&&!M(e)&&!dm(e),X5=(e,t)=>{if(Xy(t)&&!/^(TD|TH)$/.test(t.nodeName)){const o=e.getAttrib(t,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},J5=(e,t,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=Vo(u);jx(r,!0,()=>{t()}),f&&Vo(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Q5(c,r)},Q5=(e,t)=>{const o=t.getRng(),{startContainer:r,startOffset:c}=o,u=t.getNode();if(!X5(e,u)&&Ye(r)){const f=r.childNodes,b=e.getRoot();let v;if(c<f.length){const w=f[c];v=new ys(w,e.getParent(w,e.isBlock)??b)}else{const w=f[f.length-1];v=new ys(w,e.getParent(w,e.isBlock)??b),v.next(!0)}for(let w=v.current();w;w=v.next()){if(e.getContentEditable(w)==="false")return;if(ze(w)&&!Jk(w)){o.setStart(w,0),t.setRng(o);return}}}},eM=(e,t,o)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Ye(e)||!Jk(e))return e}},Jy=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||ms(e,t),Mb=(e,t,o)=>e.schema.isValidChild(t,o),Jk=(e,t=!1)=>{if(ve(e)&&ze(e)){const o=t?e.data.replace(/ /g," "):e.data;return kg(o)}else return!1},nF=e=>ve(e)&&ze(e)&&e.length===0,oF=(e,t)=>{const o="[data-mce-cef-wrappable]",r=K5(e),c=Xu(r)?o:`${o},${r}`;return Ic(q.fromDom(t),c)},tM=(e,t)=>{const o=e.dom;return Xy(t)&&o.getContentEditable(t)==="false"&&oF(e,t)&&o.select('[contenteditable="true"]',t).length===0},Uf=(e,t)=>ne(e)?e(t):(ve(t)&&(e=e.replace(/%(\w+)/g,(o,r)=>t[r]||o)),e),Qy=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Gx=(e,t)=>{if(gn(e))return null;{let o=String(e);return(t==="color"||t==="backgroundColor")&&(o=bi(o)),t==="fontWeight"&&e===700&&(o="bold"),t==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},eC=(e,t,o)=>{const r=e.getStyle(t,o);return Gx(r,o)},nM=(e,t)=>{let o;return e.getParent(t,r=>Ye(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},qx=(e,t,o)=>e.getParents(t,o,e.getRoot()),Qk=(e,t,o)=>{const r=e.formatter.get(t);return ve(r)&&jn(r,o)},Kx=(e,t)=>Qk(e,t,r=>{const c=u=>ne(u)||u.length>1&&u.charAt(0)==="%";return jn(["styles","attributes"],u=>wo(r,u).exists(f=>{const b=dn(f)?f:za(f);return jn(b,c)}))}),oM=(e,t,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>nu(u,(f,b)=>jn(r,v=>v===b));return Qk(e,t,u=>{const f=c(u);return Qk(e,o,b=>{const v=c(b);return ef(f,v)})})},_d=e=>Xo(e,"block"),sF=e=>_d(e)&&e.wrapper===!0,rF=e=>_d(e)&&e.wrapper!==!0,Du=e=>Xo(e,"selector"),ta=e=>Xo(e,"inline"),pY=e=>Du(e)&&ta(e)&&uo(wo(e,"mixed"),!0),e_=e=>Du(e)&&e.expand!==!1&&!ta(e),bY=e=>{const t=[];let o=e;for(;o;){if(ze(o)&&o.data!==rr||o.childNodes.length>1)return[];Ye(o)&&t.push(o),o=o.firstChild}return t},sM=e=>bY(e).length>0,t_=e=>M(e.dom)&&sM(e.dom),tC=gs,rM=qx,jo=Jk,n_=Jy,Yx=e=>os(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,nC=(e,t)=>{let o=t;for(;o;){if(Ye(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:t;o=o.parentNode}return t},Nm=(e,t,o,r)=>{const c=t.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Xx=(e,t,o)=>Nm(e,t,o,r=>Ma(r)||Cr(r)),Bb=(e,t,o)=>Nm(e,t,o,Td),o_=(e,t,o,r,c,u)=>{let f;const b=e.getParent(o,O=>ud(O)||e.isBlock(O)),v=ve(b)?b:t,w=(O,R,I)=>{const U=Cu(e),H=c?U.backwards:U.forwards;return N.from(H(O,R,(j,oe)=>tC(j.parentNode)?-1:(f=j,I(c,j,oe)),v))};return w(o,r,Xx).bind(O=>u?w(O.container,O.offset+(c?-1:0),Bb):N.some(O)).orThunk(()=>f?N.some({container:f,offset:c?0:f.length}):N.none())},aM=(e,t,o,r,c)=>{const u=r[c];ze(r)&&Xu(r.data)&&u&&(r=u);const f=rM(e,r);for(let b=0;b<f.length;b++)for(let v=0;v<t.length;v++){const w=t[v];if(!(ve(w.collapsed)&&w.collapsed!==o.collapsed)&&Du(w)&&e.is(f[b],w.selector))return f[b]}return r},cM=(e,t,o,r)=>{let c=o;const u=e.getRoot(),f=t[0];if(_d(f)&&(c=f.wrapper?null:e.getParent(o,f.block,u)),!c){const b=e.getParent(o,"LI,TD,TH,SUMMARY")??u;c=e.getParent(ze(o)?o.parentNode:o,v=>v!==u&&n_(e.schema,v),b)}if(c&&_d(f)&&f.wrapper&&(c=rM(e,c,"ul,ol").reverse()[0]||c),!c)for(c=o;c&&c[r]&&!e.isBlock(c[r])&&(c=c[r],!Qy(c,"br")););return c||o},s_=(e,t,o,r)=>{const c=o.parentNode;return ve(o[r])?!1:c===t||gn(c)||e.isBlock(c)?!0:s_(e,t,c,r)},Jx=(e,t,o,r,c,u)=>{let f=o;const b=c?"previousSibling":"nextSibling",v=e.getRoot();if(ze(o)&&!jo(o)&&(c?r>0:r<o.data.length))return o;for(;f;){if(ud(f))return o;if(!t[0].block_expand&&e.isBlock(f))return u?f:o;for(let w=f[b];w;w=w[b]){const k=ze(w)&&!s_(e,v,w,b);if(!tC(w)&&!Yx(w)&&!jo(w,k))return f}if(f===v||f.parentNode===v){o=f;break}f=f.parentNode}return o},Qx=e=>tC(e.parentNode)||tC(e),Pm=(e,t,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:u=!0}=r,f=e.getParent(t.commonAncestorContainer,I=>ud(I)),b=ve(f)?f:e.getRoot();let{startContainer:v,startOffset:w,endContainer:k,endOffset:O}=t;const R=o[0];return Ye(v)&&v.hasChildNodes()&&(v=xm(v,w),ze(v)&&(w=0)),Ye(k)&&k.hasChildNodes()&&(k=xm(k,t.collapsed?O:O-1),ze(k)&&(O=k.data.length)),v=nC(e,v),k=nC(e,k),Qx(v)&&(v=tC(v)?v:v.parentNode,t.collapsed?v=v.previousSibling||v:v=v.nextSibling||v,ze(v)&&(w=t.collapsed?v.length:0)),Qx(k)&&(k=tC(k)?k:k.parentNode,t.collapsed?k=k.nextSibling||k:k=k.previousSibling||k,ze(k)&&(O=t.collapsed?0:k.length)),t.collapsed&&(o_(e,b,v,w,!0,c).each(({container:H,offset:j})=>{v=H,w=j}),o_(e,b,k,O,!1,c).each(({container:H,offset:j})=>{k=H,O=j})),(ta(R)||R.block_expand)&&((!ta(R)||!ze(v)||w===0)&&(v=Jx(e,o,v,w,!0,u)),(!ta(R)||!ze(k)||O===k.data.length)&&(k=Jx(e,o,k,O,!1,u))),e_(R)&&(v=aM(e,o,t,v,"previousSibling"),k=aM(e,o,t,k,"nextSibling")),(_d(R)||Du(R))&&(v=cM(e,o,v,"previousSibling"),k=cM(e,o,k,"nextSibling"),_d(R)&&(e.isBlock(v)||(v=Jx(e,o,v,w,!0,u),ze(v)&&(w=0)),e.isBlock(k)||(k=Jx(e,o,k,O,!1,u),ze(k)&&(O=k.data.length)))),Ye(v)&&v.parentNode&&(w=e.nodeIndex(v),v=v.parentNode),Ye(k)&&k.parentNode&&(O=e.nodeIndex(k)+1,k=k.parentNode),{startContainer:v,startOffset:w,endContainer:k,endOffset:O}},Ru=(e,t,o)=>{const r=t.startOffset,c=xm(t.startContainer,r),u=t.endOffset,f=xm(t.endContainer,u-1),b=H=>{const j=H[0];ze(j)&&j===c&&r>=j.data.length&&H.splice(0,1);const oe=H[H.length-1];return u===0&&H.length>0&&oe===f&&ze(oe)&&H.splice(H.length-1,1),H},v=(H,j,oe)=>{const se=[];for(;H&&H!==oe;H=H[j])se.push(H);return se},w=(H,j)=>e.getParent(H,oe=>oe.parentNode===j,j),k=(H,j,oe)=>{const se=oe?"nextSibling":"previousSibling";for(let ae=H,Se=ae.parentNode;ae&&ae!==j;ae=Se){Se=ae.parentNode;const Oe=v(ae===H?ae:ae[se],se);Oe.length&&(oe||Oe.reverse(),o(b(Oe)))}};if(c===f)return o(b([c]));const O=e.findCommonAncestor(c,f)??e.getRoot();if(e.isChildOf(c,f))return k(c,O,!0);if(e.isChildOf(f,c))return k(f,O);const R=w(c,O)||c,I=w(f,O)||f;k(c,R,!0);const U=v(R===c?R:R.nextSibling,"nextSibling",I===f?I.nextSibling:I);U.length&&o(b(U)),k(f,I)},Xp=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],iM=e=>Qn(e)&&ma(e)===rr,aF=(e,t,o,r)=>Mi(t).fold(()=>"skipping",c=>r==="br"||iM(t)?"valid":B2(t)?"existing":M(t.dom)?"caret":jn(Xp,u=>Ic(t,u))?"valid-block":!Mb(e,o,r)||!Mb(e,mn(c),o)?"invalid-child":"valid"),cF=(e,t)=>{const o=Pm(e.dom,t,[{inline:"span"}]);t.setStart(o.startContainer,o.startOffset),t.setEnd(o.endContainer,o.endOffset),e.selection.setRng(t)},lM=(e,t,o,r,c,u)=>{const{uid:f=t,...b}=o;Hc(e,bm()),ds(e,`${yu()}`,f),ds(e,`${Ui()}`,r);const{attributes:v={},classes:w=[]}=c(f,b);if(Rr(e,v),Xh(e,w),u){w.length>0&&ds(e,`${Zg()}`,w.join(","));const k=bt(v);k.length>0&&ds(e,`${k0()}`,k.join(","))}},iF=e=>{ur(e,bm()),Ks(e,`${yu()}`),Ks(e,`${Ui()}`),Ks(e,`${Ug()}`);const t=Pi(e,`${k0()}`).map(r=>r.split(",")).getOr([]),o=Pi(e,`${Zg()}`).map(r=>r.split(",")).getOr([]);le(t,r=>Ks(e,r)),qS(e,o),Ks(e,`${Zg()}`),Ks(e,`${k0()}`)},uM=(e,t,o,r,c)=>{const u=q.fromTag("span",e);return lM(u,t,o,r,c,!1),u},lF=(e,t,o,r,c,u)=>{const f=[],b=uM(e.getDoc(),o,u,r,c),v=Bc(),w=()=>{v.clear()},k=()=>v.get().getOrThunk(()=>{const U=ua(b);return f.push(U),v.set(U),U}),O=U=>{le(U,R)},R=U=>{switch(aF(e,U,"span",mn(U))){case"invalid-child":{w();const j=vs(U);O(j),w();break}case"valid-block":{w(),lM(U,o,u,r,c,!0);break}case"valid":{const j=k();Fc(U,j);break}}},I=U=>{const H=Mt(U,q.fromDom);O(H)};return Ru(e.dom,t,U=>{w(),I(U)}),f},dM=(e,t,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=ft(e).length>0,b=Ns("mce-annotation");if(u.collapsed&&!f&&cF(e,u),c.getRng().collapsed&&!f){const v=uM(e.getDoc(),b,r,t,o.decorate);sd(v,us),c.getRng().insertNode(v.dom),c.select(v.dom)}else jx(c,!1,()=>{qy(e,v=>{lF(e,v,b,t,o.decorate,r)})})})},mM=e=>{const t=O0();pp(e,t);const o=A0(e,t),r=uu("span"),c=u=>{le(u,f=>{r(f)?ui(f):iF(f)})};return{register:(u,f)=>{t.register(u,f)},annotate:(u,f)=>{t.lookup(u).each(b=>{dM(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{_0(e,N.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();hn(hd(e,u),(b,v)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=hd(e,u);return lc(f,b=>Mt(b,v=>v.dom))}}},Nb=e=>({getBookmark:Me(zf,e),moveToBookmark:Me(go,e)});Nb.isBookmarkNode=gs;const fM=(e,t,o)=>o.collapsed?!1:jn(o.getClientRects(),r=>H2(r,e,t)),uF=(e,t)=>{const o=Qn(t)?ma(t).length:vs(t).length+1;return e>o?o:e<0?0:e},dF=e=>im.range(e.start,uF(e.soffset,e.start),e.finish,uF(e.foffset,e.finish)),Ir=(e,t)=>!l0(t.dom)&&(ai(e,t)||En(e,t)),oC=e=>t=>Ir(e,t.start)&&Ir(e,t.finish),ha=e=>e.inline||Fn.browser.isFirefox(),Mu=e=>im.range(q.fromDom(e.startContainer),e.startOffset,q.fromDom(e.endContainer),e.endOffset),mF=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?N.none():N.from(t.getRangeAt(0))).map(Mu)},gM=e=>{const t=nd(e);return mF(t.dom).filter(oC(e))},fF=(e,t)=>N.from(t).filter(oC(e)).map(dF),r_=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),N.some(t)}catch{return N.none()}},eE=e=>{const t=ha(e)?gM(q.fromDom(e.getBody())):N.none();e.bookmark=t.isSome()?t:e.bookmark},tE=e=>(e.bookmark?e.bookmark:N.none()).bind(o=>fF(q.fromDom(e.getBody()),o)).bind(r_),gF=e=>{tE(e).each(t=>e.selection.setRng(t))},hM={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Xi=(e,t)=>(pr(t)||(t=0),window.setTimeout(e,t)),Ec=(e,t)=>(pr(t)||(t=0),window.setInterval(e,t)),Bu={setEditorTimeout:(e,t,o)=>Xi(()=>{e.removed||t()},o),setEditorInterval:(e,t,o)=>{const r=Ec(()=>{e.removed?window.clearInterval(r):t()},o);return r}},Ad=e=>e.type==="nodechange"&&e.selectionChange,a_=(e,t)=>{const o=()=>{t.throttle()};_n.DOM.bind(document,"mouseup",o),e.on("remove",()=>{_n.DOM.unbind(document,"mouseup",o)})},hF=(e,t)=>{e.on("mouseup touchend",o=>{t.throttle()})},pF=(e,t)=>{hF(e,t),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Ad(o)||eE(e)})},pM=e=>{const t=ot(()=>{eE(e)},0);e.on("init",()=>{e.inline&&a_(e,t),pF(e,t)}),e.on("remove",()=>{t.cancel()})};let Pb;const nE=_n.DOM,bF=e=>Ye(e)&&hM.isEditorUIElement(e),sC=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},oE=(e,t)=>{const o=ah(e);return nE.getParent(t,c=>bF(c)||(o?e.dom.is(c,o):!1))!==null},c_=e=>{try{const t=Ar(q.fromDom(e.getElement()));return xl(t).fold(()=>document.body,o=>o.dom)}catch{return document.body}},vF=(e,t)=>{const o=t.editor;pM(o);const r=(c,u)=>{if(Vp(c)&&c.inline!==!0){const f=q.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;sC(c_(o))&&r(o,Hc),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Bu.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!sC(c_(o))||c!==o)&&r(o,ur),!oE(o,c_(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Pb||(Pb=c=>{const u=e.activeEditor;u&&Jv(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!oE(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},nE.bind(document,"focusin",Pb))},yF=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Pb&&(nE.unbind(document,"focusin",Pb),Pb=null)},bM=e=>{e.on("AddEditor",Me(vF,e)),e.on("RemoveEditor",Me(yF,e))},i_=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="true"),vM=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="false")!==null,l_=e=>e.collapsed?N.from(xm(e.startContainer,e.startOffset)).map(q.fromDom):N.none(),CF=(e,t)=>l_(t).bind(o=>R0(o)?N.some(o):ai(e,o)?N.none():N.some(e)),SF=(e,t)=>{CF(q.fromDom(e.getBody()),t).bind(o=>y(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},u_=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},wF=e=>od(e)||u3(e).isSome(),yM=e=>ve(e.iframeElement)&&od(q.fromDom(e.iframeElement)),xF=e=>{const t=e.getBody();return t&&wF(q.fromDom(t))},EF=e=>{const t=Ar(q.fromDom(e.getElement()));return xl(t).filter(o=>!sC(o.dom)&&oE(e,o.dom)).isSome()},$b=e=>e.inline?xF(e):yM(e),CM=e=>$b(e)||EF(e),yY=e=>{const t=e.selection,o=e.getBody();let r=t.getRng();e.quirks.refreshContentEditable();const c=f=>{tE(f).each(b=>{f.selection.setRng(b),r=b})};!$b(e)&&e.hasEditableRoot()&&c(e);const u=i_(e,t.getNode());if(u&&e.dom.isChildOf(u,o)){vM(e,u)||u_(o),u_(u),e.hasEditableRoot()||c(e),SF(e,r),sE(e);return}e.inline||(Fn.browser.isOpera()||u_(o),e.getWin().focus()),(Fn.browser.isFirefox()||e.inline)&&(u_(o),SF(e,r)),sE(e)},sE=e=>e.editorManager.setActive(e),SM=(e,t)=>{e.removed||(t?sE(e):yY(e))},ct={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ct.metaKeyPressed(e),metaKeyPressed:e=>Fn.os.isMacOS()||Fn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Jp="data-mce-selected",TF=`table,img,figure.image,hr,video,span.mce-preview-object,details,${rw}`,kF=Math.abs,d_=Math.round,wM={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},_F=e=>e.type==="longpress"||e.type.indexOf("touch")===0,AF=(e,t)=>{const o=t.dom,r=t.getDoc(),c=document,u=t.getBody();let f,b,v,w,k,O,R,I,U,H,j,oe,se,ae,Se;const Oe=ke=>ve(ke)&&(gi(ke)||o.is(ke,"figure.image")),Je=ke=>hi(ke)||o.hasClass(ke,"mce-preview-object"),St=(ke,Ge)=>{if(_F(ke)){const ut=ke.touches[0];return Oe(ke.target)&&!fM(ut.clientX,ut.clientY,Ge)}else return Oe(ke.target)&&!fM(ke.clientX,ke.clientY,Ge)},xe=ke=>{const Ge=ke.target;St(ke,t.selection.getRng())&&!ke.isDefaultPrevented()&&t.selection.select(Ge)},me=ke=>o.hasClass(ke,"mce-preview-object")&&ve(ke.firstElementChild)?[ke,ke.firstElementChild]:o.is(ke,"figure.image")?[ke.querySelector("img")]:[ke],Ee=ke=>{const Ge=bx(t);return!Ge||t.mode.isReadOnly()||ke.getAttribute("data-mce-resize")==="false"||ke===t.getBody()?!1:o.hasClass(ke,"mce-preview-object")&&ve(ke.firstElementChild)?Ic(q.fromDom(ke.firstElementChild),Ge):Ic(q.fromDom(ke),Ge)},Qe=(ke,Ge)=>{if(Je(Ge))return ke.create("img",{src:Fn.transparentSrc});if(Wa(Ge)){const wn=Wt(w.name,"n")?ps:js,en=Ge.cloneNode(!0);return wn(ke.select("tr",en)).each(po=>{const Ql=ke.select("td,th",po);ke.setStyle(po,"height",null),le(Ql,Ac=>ke.setStyle(Ac,"height",null))}),en}else return Ge.cloneNode(!0)},It=(ke,Ge,ut)=>{ke[Ge]=ut;const wn=400;if(ke.width>wn&&!(Ge==="width"&&ut<wn))ke[Ge]=ut,o.setStyle(ke,Ge,ut);else{const en=Ge==="height"?wn*(H??1):wn;ke[Ge]=en,o.setStyle(ke,Ge,en)}},Lt=(ke,Ge,ut)=>{if(ve(ut)){const wn=me(ke);le(wn,en=>{op(en)?It(en,Ge,ut):en.style[Ge]||!t.schema.isValid(en.nodeName.toLowerCase(),Ge)?o.setStyle(en,Ge,ut):o.setAttrib(en,Ge,""+ut)})}},On=(ke,Ge,ut)=>{Lt(ke,"width",Ge),Lt(ke,"height",ut)},lo=ke=>{let Ge,ut,wn,en,po;Ge=ke.screenX-O,ut=ke.screenY-R,oe=Ge*w[2]+I,se=ut*w[3]+U,oe=oe<5?5:oe,se=se<5?5:se,(Oe(f)||Je(f)||op(f))&&wk(t)!==!1?wn=!ct.modifierPressed(ke):wn=ct.modifierPressed(ke),wn&&(kF(Ge)>kF(ut)?(se=d_(oe*H),oe=d_(se/H)):(oe=d_(se/H),se=d_(oe*H))),On(b,oe,se),en=w.startPos.x+Ge,po=w.startPos.y+ut,en=en>0?en:0,po=po>0?po:0,o.setStyles(v,{left:en,top:po,display:"block"}),v.innerHTML=oe+" &times; "+se,Ge=u.scrollWidth-ae,ut=u.scrollHeight-Se,Ge+ut!==0&&o.setStyles(v,{left:en-Ge,top:po-ut}),j||(qw(t,f,I,U,"corner-"+w.name),j=!0)},Bo=()=>{const ke=j;j=!1,ke&&(Lt(f,"width",oe),Lt(f,"height",se)),o.unbind(r,"mousemove",lo),o.unbind(r,"mouseup",Bo),c!==r&&(o.unbind(c,"mousemove",lo),o.unbind(c,"mouseup",Bo)),o.remove(b),o.remove(v),o.remove(k),qo(f),ke&&(ly(t,f,oe,se,"corner-"+w.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),t.nodeChanged()},qo=ke=>{Xn();const Ge=o.getPos(ke,u),ut=Ge.x,wn=Ge.y,en=ke.getBoundingClientRect(),po=en.width||en.right-en.left,Ql=en.height||en.bottom-en.top;f!==ke&&(Ei(),f=ke,oe=se=0);const Ac=t.dispatch("ObjectSelected",{target:ke});Ee(ke)&&!Ac.isDefaultPrevented()?hn(wM,(eu,rl)=>{const Ih=Jc=>{const ig=me(f)[0];O=Jc.screenX,R=Jc.screenY,I=ig.clientWidth,U=ig.clientHeight,H=U/I,w=eu,w.name=rl,w.startPos={x:po*eu[0]+ut,y:Ql*eu[1]+wn},ae=u.scrollWidth,Se=u.scrollHeight,k=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(k,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Qe(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:ut,top:wn,margin:0}),On(b,po,Ql),b.removeAttribute(Jp),u.appendChild(b),o.bind(r,"mousemove",lo),o.bind(r,"mouseup",Bo),c!==r&&(o.bind(c,"mousemove",lo),o.bind(c,"mouseup",Bo)),v=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},I+" &times; "+U)};let oc=o.get("mceResizeHandle"+rl);oc&&o.remove(oc),oc=o.add(u,"div",{id:"mceResizeHandle"+rl,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+rl+"-resize; margin:0; padding:0"}),o.bind(oc,"mousedown",Jc=>{Jc.stopImmediatePropagation(),Jc.preventDefault(),Ih(Jc)}),eu.elm=oc,o.setStyles(oc,{left:po*eu[0]+ut-oc.offsetWidth/2,top:Ql*eu[1]+wn-oc.offsetHeight/2})}):Ei(!1)},zr=ot(qo,0),Ei=(ke=!0)=>{zr.cancel(),Xn(),f&&ke&&f.removeAttribute(Jp),hn(wM,(Ge,ut)=>{const wn=o.get("mceResizeHandle"+ut);wn&&(o.unbind(wn),o.remove(wn))})},nt=(ke,Ge)=>o.isChildOf(ke,Ge),At=ke=>{if(j||t.removed||t.composing)return;const Ge=ke.type==="mousedown"?ke.target:e.getNode(),ut=qr(q.fromDom(Ge),TF).map(en=>en.dom).filter(en=>o.isEditable(en.parentElement)||en.nodeName==="IMG"&&o.isEditable(en)).getOrUndefined(),wn=ve(ut)?o.getAttrib(ut,Jp,"1"):"1";if(le(o.select(`img[${Jp}],hr[${Jp}]`),en=>{en.removeAttribute(Jp)}),ve(ut)&&nt(ut,u)&&CM(t)){Zn();const en=e.getStart(!0);if(nt(en,ut)&&nt(e.getEnd(!0),ut)){o.setAttrib(ut,Jp,wn),zr.throttle(ut);return}}Ei()},Xn=()=>{hn(wM,ke=>{ke.elm&&(o.unbind(ke.elm),delete ke.elm)})},Zn=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Zn(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",At),t.on("keyup compositionend",ke=>{f&&f.nodeName==="TABLE"&&At(ke)}),t.on("hide blur",Ei),t.on("contextmenu longpress",xe,!0)}),t.on("remove",Xn),{isResizable:Ee,showResizeRect:qo,hideResizeRect:Ei,updateResizeRect:At,destroy:()=>{zr.cancel(),f=b=k=null}}},xM=(e,t,o)=>{const r=nd(q.fromDom(o));return a0(r.dom,e,t).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Zf=(e,t)=>ve(e)&&ve(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,OF=(e,t,o)=>{let r=e;for(;r&&r!==t;){if(o(r))return r;r=r.parentNode}return null},m_=(e,t,o)=>OF(e,t,o)!==null,EM=(e,t,o)=>m_(e,t,r=>r.nodeName===o),TM=(e,t)=>Zc(e)&&!m_(e,t,M),f_=(e,t,o)=>{const r=t.parentNode;if(r){const c=new ys(t,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(os(u))return!0}return!1},g_=(e,t)=>{var o;return((o=e.previousSibling)==null?void 0:o.nodeName)===t},CY=(e,t)=>{let o=t;for(;o&&o!==e;){if(Vo(o))return!0;o=o.parentNode}return!1},h_=(e,t,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let v,w;if(!b)return N.none();const k=e.getParent(b,e.isBlock)||u;if(r&&os(c)&&t&&e.isEmpty(k))return N.some(Ce(b,e.nodeIndex(c)));const O=new ys(c,k);for(;w=O[r?"prev":"next"]();){if(e.getContentEditableParent(w)==="false"||TM(w,u))return N.none();if(ze(w)&&w.data.length>0)return EM(w,u,"A")?N.none():N.some(Ce(w,r?w.data.length:0));if(e.isBlock(w)||f[w.nodeName.toLowerCase()])return N.none();v=w}return rn(v)?N.none():o&&v?N.some(Ce(v,0)):N.none()},DF=(e,t,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,v=o?r.startOffset:r.endOffset;const w=Ye(b)&&v===b.childNodes.length,k=e.schema.getNonEmptyElements();let O=o;if(Zc(b))return N.none();if(Ye(b)&&v>b.childNodes.length-1&&(O=!1),ld(b)&&(b=c,v=0),b===c){if(O&&(u=b.childNodes[v>0?v-1:0],u&&(Zc(u)||k[u.nodeName]||Wa(u))))return N.none();if(b.hasChildNodes()){if(v=Math.min(!O&&v>0?v-1:v,b.childNodes.length-1),b=b.childNodes[v],v=ze(b)&&w?b.data.length:0,!t&&b===c.lastChild&&Wa(b)||CY(c,b)||Zc(b)||np(b))return N.none();if(b.hasChildNodes()&&!Wa(b)){u=b;const R=new ys(b,c);do{if(Vo(u)||Zc(u)){f=!1;break}if(ze(u)&&u.data.length>0){v=O?0:u.data.length,b=u,f=!0;break}if(k[u.nodeName.toLowerCase()]&&!g2(u)){v=e.nodeIndex(u),b=u.parentNode,O||v++,f=!0;break}}while(u=O?R.next():R.prev())}}}return t&&(ze(b)&&v===0&&h_(e,w,t,!0,b).each(R=>{b=R.container(),v=R.offset(),f=!0}),Ye(b)&&(u=b.childNodes[v],u||(u=b.childNodes[v-1]),u&&os(u)&&!g_(u,"A")&&!f_(e,u,!1)&&!f_(e,u,!0)&&h_(e,w,t,!0,u).each(R=>{b=R.container(),v=R.offset(),f=!0}))),O&&!t&&ze(b)&&v===b.data.length&&h_(e,w,t,!1,b).each(R=>{b=R.container(),v=R.offset(),f=!0}),f&&b?N.some(Ce(b,v)):N.none()},rE=(e,t)=>{const o=t.collapsed,r=t.cloneRange(),c=Ce.fromRangeStart(t);return DF(e,o,!0,r).each(u=>{(!o||!Ce.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||DF(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Zf(t,r)?N.none():N.some(r)},aE=(e,t)=>e.splitText(t),Ib=e=>{let t=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(t===r&&ze(t)){if(o>0&&o<t.data.length)if(r=aE(t,o),t=r.previousSibling,c>o){c=c-o;const u=aE(r,c).previousSibling;t=r=u,c=u.data.length,o=0}else c=0}else if(ze(t)&&o>0&&o<t.data.length&&(t=aE(t,o),o=0),ze(r)&&c>0&&c<r.data.length){const u=aE(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:t,startOffset:o,endContainer:r,endOffset:c}},Od=e=>({walk:(u,f)=>Ru(e,u,f),split:Ib,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Pm(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),v=e.createRng();return v.setStart(b.startContainer,b.startOffset),v.setEnd(b.endContainer,b.endOffset),v}return u},normalize:u=>rE(e,u).fold(De,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Od.compareRanges=Zf,Od.getCaretRangeFromPoint=xM,Od.getSelectedNode=ar,Od.getNode=xm;const RF=(e,t)=>e.view(t).fold(Xe([]),r=>{const c=e.owner(r),u=RF(e,c);return[r].concat(u)}),SY=(e,t)=>{const o=t.owner(e);return RF(t,o)};var xY=Object.freeze({__proto__:null,view:e=>{var o;return(e.dom===document?N.none():N.from((o=e.dom.defaultView)==null?void 0:o.frameElement)).map(q.fromDom)},owner:e=>Sl(e)});const MF=e=>{const t=G1(),o=t2(t),r=SY(e,xY),c=Kh(e),u=yn(r,(f,b)=>{const v=Kh(b);return{left:f.left+v.left,top:f.top+v.top}},{left:0,top:0});return kl(u.left+c.left+o.left,u.top+c.top+o.top)},cE=e=>mn(e)==="textarea",BF=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),kM=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},EY=(e,t)=>{const o=vs(e);if(o.length===0||cE(e))return{element:e,offset:t};if(t<o.length&&!cE(o[t]))return{element:o[t],offset:0};{const r=o[o.length-1];return cE(r)?{element:e,offset:t}:mn(r)==="img"?{element:r,offset:1}:Qn(r)?{element:r,offset:ma(r).length}:{element:r,offset:vs(r).length}}},_M=(e,t)=>{const o=qh(e),r=m3(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:t}},AM=(e,t)=>{const o=EY(e,t),r=q.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+rr+"</span>");return Gr(o.element,r),_M(r,()=>Ao(r))},NF=e=>_M(q.fromDom(e),Dt),OM=(e,t,o,r)=>{$F(e,(c,u)=>PF(e,t,o,r),o)},DM=(e,t,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(BF(e,u))return;const f=t2(t).top;o(e,t,f,r,c),kM(e,u)},PF=(e,t,o,r)=>{const c=q.fromDom(e.getBody()),u=q.fromDom(e.getDoc());e2(c);const f=AM(q.fromDom(o.startContainer),o.startOffset);DM(e,u,t,f,r),f.cleanup()},RM=(e,t,o,r)=>{const c=q.fromDom(e.getDoc());DM(e,c,o,NF(t),r)},$F=(e,t,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;t(q.fromDom(r),q.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},p_=(e,t,o,r,c)=>{const u=t.pos,f=30;if(r)ZS(u.left,Math.max(0,u.top-f),c);else{const b=u.top-o+t.height+f;ZS(-e.getBody().getBoundingClientRect().left,b,c)}},MM=(e,t,o,r,c,u)=>{const f=r+o,b=c.pos.top,v=c.bottom,w=v-b>=r;b<o?p_(e,c,r,u!==!1,t):b>f?p_(e,c,r,w?u!==!1:u===!0,t):v>f&&!w&&p_(e,c,r,u===!0,t)},BM=(e,t,o,r,c)=>{const u=nd(t).dom.innerHeight;MM(e,t,o,u,r,c)},NM=(e,t,o,r,c)=>{const u=nd(t).dom.innerHeight;MM(e,t,o,u,r,c);const f=MF(r.element),b=hc(window);f.top<b.y?Ii(r.element,c!==!1):f.top>b.bottom&&Ii(r.element,c===!0)},IF=(e,t,o)=>OM(e,BM,t,o),LF=(e,t,o)=>RM(e,t,BM,o),FF=(e,t,o)=>OM(e,NM,t,o),HF=(e,t,o)=>RM(e,t,NM,o),it=(e,t,o)=>{(e.inline?LF:HF)(e,t,o)},Ji=(e,t,o)=>{(e.inline?IF:FF)(e,t,o)},zF=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),PM=(e,t,o,r,c)=>{const u=o?t.startContainer:t.endContainer,f=o?t.startOffset:t.endOffset;return N.from(u).map(q.fromDom).map(b=>!r||!t.collapsed?Bi(b,c(b,f)).getOr(b):b).bind(b=>bs(b)?N.some(b):Lc(b).filter(bs)).map(b=>b.dom).getOr(e)},iE=(e,t,o=!1)=>PM(e,t,!0,o,(r,c)=>Math.min(cf(r),c)),b_=(e,t,o=!1)=>PM(e,t,!1,o,(r,c)=>c>0?c-1:c),v_=(e,t)=>{const o=e;for(;e&&ze(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||o},y_=(e,t)=>{if(!t)return e;let o=t.startContainer,r=t.endContainer;const c=t.startOffset,u=t.endOffset;let f=t.commonAncestorContainer;t.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),ze(o)&&ze(r)&&(o.length===c?o=v_(o.nextSibling,!0):o=o.parentNode,u===0?r=v_(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=ze(f)?f.parentNode:f;return Za(b)?b:e},VF=(e,t,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||iE(u,t,t.collapsed),e.isBlock),b=e.getParent(r||b_(u,t,t.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let v;const w=new ys(f,u);for(;(v=w.next())&&v!==b;)e.isBlock(v)&&c.push(v)}return b&&f!==b&&b!==u&&c.push(b),c},$M=(e,t,o)=>N.from(t).bind(r=>N.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(Wx(e,f,r,!0),Wx(e,f,r,!1)),f})),C_=(e,t)=>Mt(t,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),UF={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},lE=(e,t,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==t){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==t;f=f.parent)if(u=f[c],u)return u}},ZF=e=>{const t=e.value??"";if(!kg(t))return!1;const o=e.parent;return!(o&&(o.name!=="span"||o.attr("style"))&&/^[ ]+$/.test(t))},IM=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Lr{constructor(t,o){Ie(this,"name");Ie(this,"type");Ie(this,"attributes");Ie(this,"value");Ie(this,"parent");Ie(this,"firstChild");Ie(this,"lastChild");Ie(this,"next");Ie(this,"prev");Ie(this,"raw");this.name=t,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(t,o){const r=new Lr(t,UF[t]||1);return o&&hn(o,(c,u)=>{r.attr(u,c)}),r}replace(t){const o=this;return t.parent&&t.remove(),o.insert(t,o),o.remove(),o}attr(t,o){const r=this;if(!Y(t))return ve(t)&&hn(t,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(t in c.map){delete c.map[t];let u=c.length;for(;u--;)if(c[u].name===t)return c.splice(u,1),r}return r}if(t in c.map){let u=c.length;for(;u--;)if(c[u].name===t){c[u].value=o;break}}else c.push({name:t,value:o});return c.map[t]=o,r}return c.map[t]}}clone(){const t=this,o=new Lr(t.name,t.type),r=t.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=t.value,o}wrap(t){const o=this;return o.parent&&(o.parent.insert(t,o),t.append(o)),o}unwrap(){const t=this;for(let o=t.firstChild;o;){const r=o.next;t.insert(o,t,!0),o=r}t.remove()}remove(){const t=this,o=t.parent,r=t.next,c=t.prev;return o&&(o.firstChild===t?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===t?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),t.parent=t.next=t.prev=null),t}append(t){const o=this;t.parent&&t.remove();const r=o.lastChild;return r?(r.next=t,t.prev=r,o.lastChild=t):o.lastChild=o.firstChild=t,t.parent=o,t}insert(t,o,r){t.parent&&t.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=t:o.prev&&(o.prev.next=t),t.prev=o.prev,t.next=o,o.prev=t):(o===c.lastChild?c.lastChild=t:o.next&&(o.next.prev=t),t.next=o.next,t.prev=o,o.next=t),t.parent=c,t}getAll(t){const o=this,r=[];for(let c=o.firstChild;c;c=lE(c,o))c.name===t&&r.push(c);return r}children(){const t=this,o=[];for(let r=t.firstChild;r;r=r.next)o.push(r);return o}empty(){const t=this;if(t.firstChild){const o=[];for(let c=t.firstChild;c;c=lE(c,t))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,o={},r){const c=this;let u=c.firstChild;if(IM(c))return!1;if(u)do{if(u.type===1){if(u.attr("data-mce-bogus"))continue;if(t[u.name]||IM(u))return!1}if(u.type===8||u.type===3&&!ZF(u)||u.type===3&&u.parent&&o[u.parent.name]&&kg(u.value??"")||r&&r(u))return!1}while(u=lE(u,c));return!0}walk(t){return lE(this,null,t)}}const WF=He.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),LM=e=>Y(e.nodeValue)&&e.nodeValue.includes(rr),FM=e=>`${e.length===0?"":`${Mt(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,jF=(e,t)=>t.querySelectorAll(FM(e)),HM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>LM(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),S_=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(LM(t)){const o=t.parentNode;return o&&Yt(WF,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),uE=e=>HM(e).nextNode()!==null,GF=e=>S_(e).nextNode()!==null,qF=(e,t)=>t.querySelector(FM(e))!==null,KF=(e,t)=>{le(jF(e,t),o=>{const r=q.fromDom(o);zo(r,"data-mce-bogus")==="all"?Ao(r):le(e,c=>{Qo(r,c)&&Ks(r,c)})})},zM=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},YF=T(zM,HM),XF=T(zM,S_),VM=(e,t)=>{const o=[{condition:Me(qF,t),action:Me(KF,t)},{condition:uE,action:YF},{condition:GF,action:XF}];let r=e,c=!1;return le(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},UM=e=>{const t=Br(e,"[data-mce-bogus]");le(t,o=>{zo(o,"data-mce-bogus")==="all"?Ao(o):Zi(o)?(Gr(o,q.fromText(Ju)),Ao(o)):ui(o)})},ZM=e=>{const t=Br(e,"input");le(t,o=>{Ks(o,"name")})},JF=(e,t)=>{const o=zs(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(r,"")},QF=(e,t)=>{const o=e.getDoc(),r=Ar(q.fromDom(e.getBody())),c=q.fromTag("div",o);ds(c,"data-mce-bogus","all"),di(c,{position:"fixed",left:"-9999999px",top:"0"}),sd(c,t.innerHTML),UM(c),ZM(c);const u=FS(r);Hn(u,c);const f=Ya(c.dom.innerText);return Ao(c),f},eH=(e,t,o)=>{let r;return t.format==="raw"?r=He.trim(Ya(VM(o,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?r=QF(e,o):t.format==="tree"?r=e.serializer.serialize(o,t):r=JF(e,e.serializer.serialize(o,t)),t.format!=="text"&&!M0(q.fromDom(o))&&Y(r)?He.trim(r):r},tH=(e,t)=>N.from(e.getBody()).fold(Xe(t.format==="tree"?new Lr("body",11):""),o=>eH(e,t,o)),WM=He.makeMap,w_=e=>{const t=[];e=e||{};const o=e.indent,r=WM(e.indent_before||""),c=WM(e.indent_after||""),u=yc.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,v,w)=>{if(o&&r[b]&&t.length>0){const k=t[t.length-1];k.length>0&&k!==`
`&&t.push(`
`)}if(t.push("<",b),v)for(let k=0,O=v.length;k<O;k++){const R=v[k];t.push(" ",R.name,'="',u(R.value,!0),'"')}if(!w||f?t[t.length]=">":t[t.length]=" />",w&&o&&c[b]&&t.length>0){const k=t[t.length-1];k.length>0&&k!==`
`&&t.push(`
`)}},end:b=>{let v;t.push("</",b,">"),o&&c[b]&&t.length>0&&(v=t[t.length-1],v.length>0&&v!==`
`&&t.push(`
`))},text:(b,v)=>{b.length>0&&(t[t.length]=v?b:u(b))},cdata:b=>{t.push("<![CDATA[",b,"]]>")},comment:b=>{t.push("<!--",b,"-->")},pi:(b,v)=>{v?t.push("<?",b," ",u(v),"?>"):t.push("<?",b,"?>"),o&&t.push(`
`)},doctype:b=>{t.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},fh=(e={},t=Nr())=>{const o=w_(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:v=>{o.text(v.value??"",v.raw)},8:v=>{o.comment(v.value??"")},7:v=>{o.pi(v.name,v.value)},10:v=>{o.doctype(v.value??"")},4:v=>{o.cdata(v.value??"")},11:v=>{let w=v;if(w=w.firstChild)do b(w);while(w=w.next)}};o.reset();const b=v=>{var k;const w=f[v.type];if(w)w(v);else{const O=v.name,R=O in t.getVoidElements();let I=v.attributes;if(u&&I&&I.length>1){const U=[];U.map={};const H=t.getElementRule(v.name);if(H){for(let j=0,oe=H.attributesOrder.length;j<oe;j++){const se=H.attributesOrder[j];if(se in I.map){const ae=I.map[se];U.map[se]=ae,U.push({name:se,value:ae})}}for(let j=0,oe=I.length;j<oe;j++){const se=I[j].name;if(!(se in U.map)){const ae=I.map[se];U.map[se]=ae,U.push({name:se,value:ae})}}I=U}}if(o.start(O,I,R),gf(O))Y(v.value)&&o.text(v.value,!0),o.end(O);else if(!R){let U=v.firstChild;if(U){(O==="pre"||O==="textarea")&&U.type===3&&((k=U.value)==null?void 0:k[0])===`
`&&o.text(`
`,!0);do b(U);while(U=U.next)}o.end(O)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},jM=new Set;le(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{jM.add(t)});const rC=new Set;le(["background-color"],t=>{rC.add(t)});const gh=["font","text-decoration","text-emphasis"],dE=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),Lb=(e,t)=>bt(dE(e,t)),nH=e=>jM.has(e),oH=e=>rC.has(e),GM=(e,t)=>jn(Lb(e,t),o=>nH(o)),qM=(e,t)=>GM(e,t)&&jn(Lb(e,t),o=>oH(o)),sH=e=>ge(e,t=>jn(gh,o=>Wt(t,o))),rH=(e,t,o)=>{const r=Lb(e,t),c=Lb(e,o),u=f=>{const b=e.getStyle(t,f)??"",v=e.getStyle(o,f)??"";return Jo(b)&&Jo(v)&&b!==v};return jn(r,f=>{const b=v=>jn(v,w=>w===f);if(!b(c)&&b(gh)){const v=sH(c);return jn(v,u)}else return u(f)})},x_=(e,t,o)=>N.from(o.container()).filter(ze).exists(r=>{const c=e?0:-1;return t(r.data.charAt(o.offset()+c))}),E_=Me(x_,!0,Cr),mE=Me(x_,!1,Cr),aH=e=>{const t=e.container();return ze(t)&&(t.data.length===0||bp(t.data)&&Nb.isBookmarkNode(t.parentNode))},hh=(e,t)=>o=>Hy(e?0:-1,o).filter(t).isSome(),KM=e=>gi(e)&&Ts(q.fromDom(e),"display")==="block",T_=e=>Vo(e)&&!D3(e),k_=hh(!0,KM),YM=hh(!1,KM),aC=hh(!0,hi),cC=hh(!1,hi),iC=hh(!0,Wa),__=hh(!1,Wa),Wf=hh(!0,T_),$m=hh(!1,T_),XM=e=>e.slice(0,-1),cH=(e,t,o)=>ai(t,e)?XM(ci(e,r=>o(r)||En(r,t))):[],JM=(e,t)=>cH(e,t,De),Nu=(e,t)=>[e].concat(JM(e,t)),fE=(e,t,o)=>Ci(e,t,o,aH),QM=e=>t=>e.isBlock(mn(t)),A_=(e,t,o)=>so(Nu(q.fromDom(t.container()),e),QM(o)),O_=(e,t,o,r)=>fE(e,t.dom,o).forall(c=>A_(t,o,r).fold(()=>!Au(c,o,t.dom),u=>!Au(c,o,t.dom)&&ai(u,q.fromDom(c.container())))),D_=(e,t,o,r)=>A_(t,o,r).fold(()=>fE(e,t.dom,o).forall(c=>!Au(c,o,t.dom)),c=>fE(e,c.dom,o).isNone()),gE=Me(D_,!1),R_=Me(D_,!0),e6=Me(O_,!1),t6=Me(O_,!0),n6=e=>Kp(e).exists(Zi),hE=(e,t,o,r)=>{const c=ge(Nu(q.fromDom(o.container()),t),f=>r.isBlock(mn(f))),u=ps(c).getOr(t);return jc(e,u.dom,o).filter(n6)},M_=(e,t,o)=>Kp(t).exists(Zi)||hE(!0,e,t,o).isSome(),pE=(e,t,o)=>zy(t).exists(Zi)||hE(!1,e,t,o).isSome(),o6=Me(hE,!1),iH=Me(hE,!0),s6=e=>Ce.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),r6=(e,t,o)=>{const r=ge(Nu(q.fromDom(t.container()),e),c=>o.isBlock(mn(c)));return ps(r).getOr(e)},a6=(e,t,o)=>s6(t)?mE(t):mE(t)||p(r6(e,t,o).dom,t).exists(mE),c6=(e,t,o)=>s6(t)?E_(t):E_(t)||m(r6(e,t,o).dom,t).exists(E_),lH=e=>vt(["pre","pre-wrap"],e),bE=e=>Kp(e).bind(t=>bo(t,bs)).exists(t=>lH(Ts(t,"white-space"))),TY=(e,t)=>p(e.dom,t).isNone(),kY=(e,t)=>m(e.dom,t).isNone(),uH=(e,t,o)=>TY(e,t)||kY(e,t)||gE(e,t,o)||R_(e,t,o)||pE(e,t,o)||M_(e,t,o),_Y=e=>ve(e)&&Vo(e)&&Iy(e),i6=(e,t)=>o=>_Y(new ys(o,e)[t]()),Ba=(e,t)=>{const o=m(e.dom,t).getOr(t),r=i6(e.dom,"next");return t.isAtEnd()&&(r(t.container())||r(o.container()))},dH=(e,t)=>{const o=p(e.dom,t).getOr(t),r=i6(e.dom,"prev");return t.isAtStart()&&(r(t.container())||r(o.container()))},mH=(e,t,o)=>bE(t)?!1:uH(e,t,o)||a6(e,t,o)||c6(e,t,o),lC=(e,t,o)=>bE(t)?!1:gE(e,t,o)||e6(e,t,o)||pE(e,t,o)||a6(e,t,o)||dH(e,t),fH=e=>{const t=e.container(),o=e.offset();return ze(t)&&o<t.data.length?Ce(t,o+1):e},Na=(e,t,o)=>bE(t)?!1:R_(e,t,o)||t6(e,t,o)||M_(e,t,o)||c6(e,t,o)||Ba(e,t),l6=(e,t,o)=>lC(e,t,o)||Na(e,fH(t),o),u6=(e,t)=>Ma(e.charAt(t)),gH=(e,t)=>Cr(e.charAt(t)),hH=e=>{const t=e.container();return ze(t)&&xs(t.data,us)},pH=e=>{const t=e.split("");return Mt(t,(o,r)=>Ma(o)&&r>0&&r<t.length-1&&Td(t[r-1])&&Td(t[r+1])?" ":o).join("")},bH=(e,t,o,r)=>{const c=t.data,u=Ce(t,0);return!o&&u6(c,0)&&!l6(e,u,r)?(t.data=" "+c.slice(1),!0):o&&gH(c,0)&&lC(e,u,r)?(t.data=us+c.slice(1),!0):!1},vH=e=>{const t=e.data,o=pH(t);return o!==t?(e.data=o,!0):!1},qc=(e,t,o,r)=>{const c=t.data,u=Ce(t,c.length-1);return!o&&u6(c,c.length-1)&&!l6(e,u,r)?(t.data=c.slice(0,-1)+" ",!0):o&&gH(c,c.length-1)&&Na(e,u,r)?(t.data=c.slice(0,-1)+us,!0):!1},d6=(e,t,o)=>{const r=t.container();if(!ze(r))return N.none();if(hH(t)){const c=bH(e,r,!1,o)||vH(r)||qc(e,r,!1,o);return dc(c,t)}else if(l6(e,t,o)){const c=bH(e,r,!0,o)||qc(e,r,!0,o);return dc(c,t)}else return N.none()},m6=e=>{const t=q.fromDom(e.getBody());e.selection.isCollapsed()&&d6(t,Ce.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},f6=(e,t,o,r)=>{if(o===0)return;const c=q.fromDom(e),u=hu(c,w=>r.isBlock(mn(w))).getOr(c),f=e.data.slice(t,t+o),b=t+o>=e.data.length&&Na(u,Ce(e,e.data.length),r),v=t===0&&lC(u,Ce(e,0),r);e.replaceData(t,o,i0(f,4,v,b))},vE=(e,t,o)=>{const r=e.data.slice(t),c=r.length-nf(r).length;f6(e,t,c,o)},yE=(e,t,o)=>{const r=e.data.slice(0,t),c=r.length-Xd(r).length;f6(e,t-c,c,o)},CE=(e,t,o,r,c=!0)=>{const u=Xd(e.data).length,f=c?e:t,b=c?t:e;return c?f.appendData(b.data):f.insertData(0,b.data),Ao(q.fromDom(b)),r&&vE(f,u,o),f},yH=(e,t)=>{const o=e.container(),r=e.offset();return!Ce.isTextPosition(e)&&o===t.parentNode&&r>Ce.before(t).offset()},CH=(e,t)=>yH(t,e)?Ce(t.container(),t.offset()-1):t,SH=e=>ze(e)?Ce(e,0):Ce.before(e),wH=e=>ze(e)?Ce(e,e.data.length):Ce.after(e),B_=e=>Wo(e.previousSibling)?N.some(wH(e.previousSibling)):e.previousSibling?E(e.previousSibling):N.none(),g6=e=>Wo(e.nextSibling)?N.some(SH(e.nextSibling)):e.nextSibling?y(e.nextSibling):N.none(),h6=(e,t)=>N.from(t.previousSibling?t.previousSibling:t.parentNode).bind(o=>p(e,Ce.before(o))).orThunk(()=>m(e,Ce.after(t))),xH=(e,t)=>m(e,Ce.after(t)).orThunk(()=>p(e,Ce.before(t))),AY=(e,t)=>B_(t).orThunk(()=>g6(t)).orThunk(()=>h6(e,t)),EH=(e,t)=>g6(t).orThunk(()=>B_(t)).orThunk(()=>xH(e,t)),TH=(e,t,o)=>e?EH(t,o):AY(t,o),OY=(e,t,o)=>TH(e,t,o).map(Me(CH,o)),p6=(e,t,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},In=e=>t=>t.dom===e,uC=(e,t)=>t&&Yt(e.schema.getBlockElements(),mn(t)),jf=(e,t,o)=>{if(Cs(e,t)){const r=q.fromHtml('<br data-mce-bogus="1">');return o?le(vs(t),c=>{t_(c)||Ao(c)}):$i(t),Hn(t,r),N.some(Ce.before(r.dom))}else return N.none()},Qp=(e,t,o,r)=>{const c=ii(e).filter(Qn),u=du(e).filter(Qn);return Ao(e),Oi(c,u,t,(f,b,v)=>{const w=f.dom,k=b.dom,O=w.data.length;return CE(w,k,o,r),v.container()===k?Ce(w,O):v}).orThunk(()=>(r&&(c.each(f=>yE(f.dom,f.dom.length,o)),u.each(f=>vE(f.dom,0,o))),t))},SE=(e,t)=>Yt(e.schema.getTextInlineElements(),mn(t)),Im=(e,t,o,r=!0,c=!1)=>{const u=OY(t,e.getBody(),o.dom),f=hu(o,Me(uC,e),In(e.getBody())),b=Qp(o,u,e.schema,SE(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(v=>jf(e.schema,v,c)).fold(()=>{r&&p6(e,t,b)},v=>{r&&p6(e,t,N.some(v))})},N_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,b6=e=>N_.test(e),e1=(e,t)=>Ic(q.fromDom(t),Sk(e))&&!ms(e.schema,t)&&e.dom.isEditable(t),P_=e=>_n.DOM.getStyle(e,"direction",!0)==="rtl"||b6(e.textContent??""),v6=(e,t,o)=>ge(_n.DOM.getParents(o.container(),"*",t),e),ph=(e,t,o)=>{const r=v6(e,t,o);return N.from(r[r.length-1])},kH=(e,t,o)=>{const r=Dm(t,e),c=Dm(o,e);return ve(r)&&r===c},_H=e=>bd(e)||Tf(e),Hl=(e,t)=>{const o=t.container(),r=t.offset();return e?Ml(o)?ze(o.nextSibling)?Ce(o.nextSibling,0):Ce.after(o):bd(t)?Ce(o,r+1):t:Ml(o)?ze(o.previousSibling)?Ce(o.previousSibling,o.previousSibling.data.length):Ce.before(o):Tf(t)?Ce(o,r-1):t},y6=Me(Hl,!0),C6=Me(Hl,!1),$_=(e,t)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(t),e.off("beforeinput input",o)},S6=e=>{e.execCommand("delete")},I_=e=>$_(e,"Delete"),AH=e=>$_(e,"ForwardDelete"),DY=e=>t=>uo(Lc(t),e,En),OH=e=>fa(e)||Aa(e),L_=(e,t)=>ai(e,t)?bo(t,OH,DY(e)):N.none(),w6=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},x6=(e,t,o)=>_s(y(o),E(o),(r,c)=>{const u=Hl(!0,r),f=Hl(!1,c),b=Hl(!1,t);return e?m(o,b).exists(v=>v.isEqual(f)&&t.isEqual(u)):p(o,b).exists(v=>v.isEqual(u)&&t.isEqual(f))}).getOr(!0),E6=e=>(yl(e)?ii(e):qs(e)).bind(E6).orThunk(()=>N.some(e)),DH=(e,t,o,r=!0)=>{t.deleteContents();const c=E6(o).getOr(o),u=q.fromDom(e.dom.getParent(c.dom,e.dom.isBlock)??o.dom);if(u.dom===e.getBody()?w6(e,r):Cs(e.schema,u,{checkRootAsContent:!1})&&(ym(u),r&&e.selection.setCursorLocation(u.dom,0)),!En(o,u)){const f=uo(Lc(u),o)?[]:eo(u);le(f.concat(vs(o)),b=>{!En(b,u)&&!ai(b,u)&&Cs(e.schema,b)&&Ao(b)})}},RH=e=>t=>En(e,t),Qa=e=>Br(e,"td,th"),MH=(e,t)=>Ja(q.fromDom(e),t),BH=e=>_s(e.startTable,e.endTable,(t,o)=>{const r=xg(t,u=>En(u,o)),c=xg(o,u=>En(u,t));return!r&&!c?e:{...e,startTable:r?N.none():e.startTable,endTable:c?N.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),T6=e=>BH(e),RY=(e,t)=>{const o=MH(e.startContainer,t),r=MH(e.endContainer,t),c=o.isSome(),u=r.isSome(),f=_s(o,r,En).getOr(!1);return T6({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},F_=(e,t)=>({start:e,end:t}),NH=(e,t,o)=>({rng:e,table:t,cells:o}),dC=ei.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Fb=(e,t)=>qr(q.fromDom(e),"td,th",t),PH=e=>!En(e.start,e.end),k6=(e,t)=>Ja(e.start,t).bind(o=>Ja(e.end,t).bind(r=>dc(En(o,r),o))),$H=(e,t)=>!PH(e)&&k6(e,t).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),To=(e,t)=>{const o=Fb(e.startContainer,t),r=Fb(e.endContainer,t);return _s(o,r,F_)},IH=e=>t=>Ja(t,e).bind(o=>js(Qa(o)).map(r=>F_(t,r))),LH=e=>t=>Ja(t,e).bind(o=>ps(Qa(o)).map(r=>F_(r,t))),t1=e=>t=>k6(t,e).map(o=>NH(t,o,Qa(o))),H_=(e,t,o,r)=>{if(o.collapsed||!e.forall(PH))return N.none();if(t.isSameTable){const c=e.bind(t1(r));return N.some({start:c,end:c})}else{const c=Fb(o.startContainer,r),u=Fb(o.endContainer,r),f=c.bind(IH(r)).bind(t1(r)),b=u.bind(LH(r)).bind(t1(r));return N.some({start:f,end:b})}},_6=(e,t)=>il(e,o=>En(o,t)),z_=e=>_s(_6(e.cells,e.rng.start),_6(e.cells,e.rng.end),(t,o)=>e.cells.slice(t,o+1)),FH=(e,t,o)=>e.exists(r=>$H(r,o)&&Vf(r.start,t)),V_=(e,t)=>{const{startTable:o,endTable:r}=t,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},HH=(e,t,o,r)=>H_(e,t,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=t,f=z_(c).getOr([]);if(u&&c.cells.length===f.length)return N.some(dC.fullTable(c.table));if(f.length>0){if(u)return N.some(dC.partialTable(f,N.none()));{const b=V_(o,t);return N.some(dC.partialTable(f,N.some({...t,rng:b})))}}else return N.none()}),MY=(e,t,o,r)=>H_(e,t,o,r).bind(({start:c,end:u})=>{const f=c.bind(z_).getOr([]),b=u.bind(z_).getOr([]);if(f.length>0&&b.length>0){const v=V_(o,t);return N.some(dC.multiTable(f,b,v))}else return N.none()}),BY=(e,t)=>{const o=RH(e),r=To(t,o),c=RY(t,o);return FH(r,t,o)?r.map(u=>dC.singleCellTable(t,u.start)):c.isMultiTable?MY(r,c,t,o):HH(r,c,t,o)},A6=e=>le(e,t=>{Ks(t,"contenteditable"),ym(t)}),zH=(e,t)=>N.from(e.dom.getParent(t,e.dom.isBlock)).map(q.fromDom),VH=(e,t,o)=>{o.each(r=>{t?Ao(r):(ym(r),e.selection.setCursorLocation(r.dom,0))})},U_=(e,t,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(t.dom.lastChild)):(c.setStartBefore(t.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),wE(e,c,t,!1).each(u=>u())},Z_=e=>{const t=ft(e),o=q.fromDom(e.selection.getNode());Og(o.dom)&&Cs(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),t.length>1&&jn(t,r=>En(r,o))&&ds(o,"data-mce-selected","1")},O6=(e,t,o)=>N.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=zH(e,f?u.endContainer:u.startContainer);u.deleteContents(),VH(e,f,b.filter(Me(Cs,e.schema)));const v=f?t[0]:t[t.length-1];return U_(e,v,r,f),Cs(e.schema,v)?N.none():N.some(f?t.slice(1):t.slice(0,-1))}).getOr(t);A6(c),Z_(e)}),Sn=(e,t,o,r)=>N.some(()=>{const c=e.selection.getRng(),u=t[0],f=o[o.length-1];U_(e,u,c,!0),U_(e,f,c,!1);const b=Cs(e.schema,u)?t:t.slice(1),v=Cs(e.schema,f)?o:o.slice(0,-1);A6(b.concat(v)),r.deleteContents(),Z_(e)}),wE=(e,t,o,r=!0)=>N.some(()=>{DH(e,t,o,r)}),mC=(e,t)=>N.some(()=>Im(e,!1,t)),fC=(e,t,o)=>BY(t,o).bind(r=>r.fold(Me(wE,e),Me(mC,e),Me(O6,e),Me(Sn,e))),gC=(e,t)=>W_(e,t),hC=(e,t,o,r)=>R6(t,r).fold(()=>fC(e,t,o),c=>gC(e,c)),D6=(e,t,o)=>{const r=q.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?O6(e,o,N.none()):hC(e,r,c,t)},UH=(e,t)=>so(Nu(t,e),Ef),R6=(e,t)=>so(Nu(t,e),uu("caption")),NY=(e,t,o,r,c)=>mh(o,e.getBody(),c).bind(u=>UH(t,q.fromDom(u.getNode())).bind(f=>En(f,r)?N.none():N.some(Dt))),W_=(e,t)=>N.some(()=>{ym(t),e.selection.setCursorLocation(t.dom,0)}),ZH=(e,t,o,r)=>y(e.dom).bind(c=>E(e.dom).map(u=>t?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),PY=(e,t)=>W_(e,t),WH=(e,t,o)=>R6(e,q.fromDom(o.getNode())).fold(()=>N.some(Dt),r=>dc(!En(r,t),Dt)),jH=(e,t,o,r,c)=>mh(o,e.getBody(),c).fold(()=>N.some(Dt),u=>ZH(r,o,c,u)?PY(e,r):WH(t,r,u)),$Y=(e,t,o,r)=>{const c=Ce.fromRangeStart(e.selection.getRng());return UH(o,r).bind(u=>Cs(e.schema,u,{checkRootAsContent:!1})?W_(e,u):NY(e,o,t,u,c))},GH=(e,t,o,r)=>{const c=Ce.fromRangeStart(e.selection.getRng());return Cs(e.schema,r)?W_(e,r):jH(e,o,t,r,c)},Do=(e,t)=>e?iC(t):__(t),IY=(e,t)=>{const o=Ce.fromRangeStart(e.selection.getRng());return Do(t,o)||jc(t,e.getBody(),o).exists(r=>Do(t,r))},LY=(e,t,o)=>{const r=q.fromDom(e.getBody());return R6(r,o).fold(()=>$Y(e,t,r,o).orThunk(()=>dc(IY(e,t),Dt)),c=>GH(e,t,r,c))},j_=(e,t)=>{const o=q.fromDom(e.selection.getStart(!0)),r=ft(e);return e.selection.isCollapsed()&&r.length===0?LY(e,t,o):D6(e,o,r)},Dd=(e,t)=>{let o=t;for(;o&&o!==e;){if(pc(o)||Vo(o))return o;o=o.parentNode}return null},qH=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],KH=He.each,Rd=e=>{const t=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=w=>{const k={};return KH(t.getAttribs(w),O=>{const R=O.nodeName.toLowerCase();R!=="style"&&!c(R)&&(k[R]=t.getAttrib(w,R))}),k},v=(w,k)=>{for(const O in w)if(Yt(w,O)){const R=k[O];if(as(R)||w[O]!==R)return!1;delete k[O]}for(const O in k)if(Yt(k,O))return!1;return!0};return Ye(u)&&Ye(f)&&(!v(b(u),b(f))||!v(t.parseStyle(t.getAttrib(u,"style")),t.parseStyle(t.getAttrib(f,"style"))))?!1:!gs(u)&&!gs(f)},c=u=>jn(qH,f=>Wt(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},Un=(e,t)=>{if(ze(e))return{container:e,offset:t};const o=Od.getNode(e,t);return ze(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&ze(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&ze(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},Sr=e=>{const t=e.cloneRange(),o=Un(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=Un(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},Qi=_n.DOM,YH=()=>Qi.create("span",{"data-mce-type":"bookmark"}),M6=(e,t,o)=>{if(Ye(e)){const r=o();return e.hasChildNodes()?t===e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[t]):e.appendChild(r),{container:r,offset:0}}else return{container:e,offset:t}},B6=(e,t)=>{const o=r=>{var f;let c=(f=r.parentNode)==null?void 0:f.firstChild,u=0;for(;c;){if(c===r)return u;(!Ye(c)||c.getAttribute("data-mce-type")!=="bookmark")&&u++,c=c.nextSibling}return-1};if(Ye(e)&&ve(e.parentNode)){const r=e;t=o(e),e=e.parentNode,Qi.remove(r),!e.hasChildNodes()&&Qi.isBlock(e)&&e.appendChild(Qi.create("br"))}return{container:e,offset:t}},N6=(e,t,o,r)=>{const c=Qi.createRng();return c.setStart(e,t),c.setEnd(o,r),Sr(c)},Lm=(e,t=YH)=>{const{container:o,offset:r}=M6(e.startContainer,e.startOffset,t);if(e.collapsed)return{startContainer:o,startOffset:r};{const{container:c,offset:u}=M6(e.endContainer,e.endOffset,t);return{startContainer:o,startOffset:r,endContainer:c,endOffset:u}}},zl=e=>{const{container:t,offset:o}=B6(e.startContainer,e.startOffset);if(!as(e.endContainer)&&!as(e.endOffset)){const{container:r,offset:c}=B6(e.endContainer,e.endOffset);return N6(t,o,r,c)}else return N6(t,o,t,o)},G_=(e,t,o,r)=>{if(He.each(o.styles,(c,u)=>{e.setStyle(t,u,Uf(c,r))}),o.styles){const c=e.getAttrib(t,"style");c&&e.setAttrib(t,"data-mce-style",c)}},n1=(e,t,o,r,c)=>{const u=e.dom;ne(o.onformat)&&o.onformat(t,o,r,c),G_(u,t,o,r),He.each(o.attributes,(f,b)=>{u.setAttrib(t,b,Uf(f,r))}),He.each(o.classes,f=>{const b=Uf(f,r);u.hasClass(t,b)||u.addClass(t,b)})},XH=e=>!dn(e.attributes)&&!dn(e.styles),q_=Qy,P6=(e,t,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Du(u)&&u.inherit===!1&&e.dom.is(t,u.selector))return!0}return!1},xE=(e,t,o,r,c)=>{const u=e.dom.getRoot();if(t===u)return!1;const f=e.dom.getParent(t,b=>P6(e,b,o)?!0:b.parentNode===u||!!Vl(e,b,o,r,!0));return!!Vl(e,f,o,r,c)},EE=(e,t,o)=>ta(o)&&q_(t,o.inline)||_d(o)&&q_(t,o.block)?!0:Du(o)?Ye(t)&&e.is(t,o.selector):!1,$6=(e,t,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(ne(o.onmatch))return o.onmatch(t,o,r);if(f){if(hg(f)){for(let v=0;v<f.length;v++)if(b?e.getAttrib(t,f[v]):eC(e,t,f[v]))return!0}else for(const v in f)if(Yt(f,v)){const w=b?e.getAttrib(t,v):eC(e,t,v),k=Uf(f[v],u),O=gn(w)||Xu(w);if(O&&gn(k))continue;if(c&&O&&!o.exact||(!c||o.exact)&&!q_(w,Gx(k,v)))return!1}}return!0},Vl=(e,t,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Ye(t))for(let b=0;b<u.length;b++){const v=u[b];if(EE(e.dom,t,v)&&$6(f,t,v,"attributes",c,r)&&$6(f,t,v,"styles",c,r)){const w=v.classes;if(w){for(let k=0;k<w.length;k++)if(!e.dom.hasClass(t,Uf(w[k],r)))return}return v}}},K_=(e,t,o,r,c)=>{if(r)return xE(e,r,t,o,c);if(r=e.selection.getNode(),xE(e,r,t,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&xE(e,u,t,o,c))},Y_=(e,t,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<t.length;b++){const v=t[b];!c[v]&&Vl(e,f,v,o)&&(c[v]=!0,r.push(v))}},e.dom.getRoot()),r},I6=(e,t)=>{const o=c=>En(c,q.fromDom(e.getBody())),r=(c,u)=>Vl(e,c.dom,u)?N.some(u):N.none();return N.from(e.selection.getStart(!0)).bind(c=>o0(q.fromDom(c),u=>cc(t,f=>r(u,f)),o)).getOrNull()},X_=(e,t)=>{const o=e.formatter.get(t),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=qx(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Du(b))return!0;for(let v=u.length-1;v>=0;v--)if(r.is(u[v],b.selector))return!0}}return!1},FY=(e,t,o)=>cn(o,(r,c)=>{const u=Kx(e,c);return e.formatter.matchNode(t,c,{},u)?r.concat([c]):r},[]),fr=rr,JH=(e,t)=>e.importNode(t,!0),QH=e=>{if(e){const t=new ys(e,e);for(let o=t.current();o;o=t.next())if(ze(o))return o}return null},J_=e=>{const t=q.fromTag("span");return Rr(t,{id:A,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Hn(t,q.fromText(fr)),t},e9=e=>{const t=QH(e);return t&&t.data.charAt(0)===fr&&t.deleteData(0,1),t},Q_=(e,t,o)=>{const r=e.dom,c=e.selection;if(sM(t))Im(e,!1,q.fromDom(t),o,!0);else{const u=c.getRng(),f=r.getParent(t,r.isBlock),b=u.startContainer,v=u.startOffset,w=u.endContainer,k=u.endOffset,O=e9(t);r.remove(t,!0),b===O&&v>0&&u.setStart(O,v-1),w===O&&k>0&&u.setEnd(O,k-1),f&&r.isEmpty(f)&&ym(q.fromDom(f)),c.setRng(u)}},eA=(e,t,o)=>{const r=e.dom,c=e.selection;if(t)Q_(e,t,o);else if(t=L(e.getBody(),c.getStart()),!t)for(;t=r.get(A);)Q_(e,t,o)},L6=(e,t,o)=>{var u,f;const r=e.dom,c=r.getParent(o,Me(Jy,e.schema));c&&r.isEmpty(c)?(u=o.parentNode)==null||u.replaceChild(t,o):(q3(q.fromDom(o)),r.isEmpty(o)?(f=o.parentNode)==null||f.replaceChild(t,o):r.insertAfter(t,o))},Hb=(e,t)=>(e.appendChild(t),t),F6=(e,t)=>{const o=yn(e,(c,u)=>Hb(c,u.cloneNode(!1)),t),r=o.ownerDocument??document;return Hb(o,r.createTextNode(fr))},H6=(e,t,o,r,c,u)=>{const f=e.formatter,b=e.dom,v=ge(bt(f.get()),O=>O!==r&&!xs(O,"removeformat")),w=FY(e,o,v);if(ge(w,O=>!oM(e,O,r)).length>0){const O=o.cloneNode(!1);return b.add(t,O),f.remove(r,c,O,u),b.remove(O),N.some(O)}else return N.none()},z6=e=>n2(e,ma(e).replace(new RegExp(`${us}$`)," ")),bh=(e,t)=>{const o=()=>{t!==null&&!e.dom.isEmpty(t)&&ii(q.fromDom(t)).each(r=>{Qn(r)?z6(r):Yh(r,c=>Qn(c)).each(c=>{Qn(c)&&z6(c)})})};e.once("input",r=>{r.data&&!Cr(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},V6=(e,t,o)=>{let r;const c=e.selection,u=e.formatter.get(t);if(!u)return;const f=c.getRng();let b=f.startOffset;const w=f.startContainer.nodeValue;r=L(e.getBody(),c.getStart());const k=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(w&&b>0&&b<w.length&&k.test(w.charAt(b))&&k.test(w.charAt(b-1))){const O=c.getBookmark();f.collapse(!0);let R=Pm(e.dom,f,u);R=Ib(R),e.formatter.apply(t,o,R),c.moveToBookmark(O)}else{let O=r?QH(r):null;(!r||(O==null?void 0:O.data)!==fr)&&(r=JH(e.getDoc(),J_(!0).dom),O=r.firstChild,f.insertNode(r),b=1,bh(e,r)),e.formatter.apply(t,o,r),c.setCursorLocation(O,b)}},U6=(e,t,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(t);if(!b)return;const v=u.getRng(),w=v.startContainer,k=v.startOffset;let O=w;ze(w)&&(k!==w.data.length&&(f=!0),O=O.parentNode);const R=[];let I;for(;O;){if(Vl(e,O,t,o,r)){I=O;break}O.nextSibling&&(f=!0),R.push(O),O=O.parentNode}if(I)if(f){const U=u.getBookmark();v.collapse(!0);let H=Pm(c,v,b,{includeTrailingSpace:!0});H=Ib(H),e.formatter.remove(t,o,H,r),u.moveToBookmark(U)}else{const U=L(e.getBody(),I),H=ve(U)?c.getParents(I.parentNode,et,U):[],j=J_(!1).dom;L6(e,j,U??I);const oe=H6(e,j,I,t,o,r),se=F6([...R,...oe.toArray(),...H],j);U&&Q_(e,U,ve(U)),u.setCursorLocation(se,1),bh(e,j),c.isEmpty(I)&&c.remove(I)}},Z6=(e,t,o)=>{const r=e.selection,c=e.getBody();eA(e,null,o),(t===8||t===46)&&r.isCollapsed()&&r.getStart().innerHTML===fr&&eA(e,L(c,r.getStart()),!0),(t===37||t===39)&&eA(e,L(c,r.getStart()),!0)},W6=e=>ze(e)&&Zr(e.data,us),j6=e=>{e.on("mouseup keydown",t=>{Z6(e,t.keyCode,W6(e.selection.getRng().endContainer))})},G6=e=>{const t=J_(!1),o=F6(e,t.dom);return{caretContainer:t,caretPosition:Ce(o,0)}},tA=(e,t)=>{const{caretContainer:o,caretPosition:r}=G6(t);return Gr(q.fromDom(e),o),Ao(q.fromDom(e)),r},t9=(e,t)=>{const{caretContainer:o,caretPosition:r}=G6(t);return e.insertNode(o.dom),r},q6=(e,t)=>{if(M(t.dom))return!1;const o=e.schema.getTextInlineElements();return Yt(o,mn(t))&&!M(t.dom)&&!dm(t.dom)},K6=["fontWeight","fontStyle","color","fontSize","fontFamily"],n9=e=>tn(e.styles)&&jn(bt(e.styles),t=>vt(K6,t)),o9=e=>so(e,t=>ta(t)&&t.inline==="span"&&n9(t)),s9=(e,t)=>{const o=e.get(t);return dn(o)?o9(o):N.none()},nA=(e,t)=>p(t,Ce.fromRangeStart(e)).isNone(),Y6=(e,t)=>m(t,Ce.fromRangeEnd(e)).exists(o=>!os(o.getNode())||m(t,o).isSome())===!1,r9=e=>t=>tp(t)&&e.isEditable(t),X6=(e,t)=>Mt(e.getSelectedBlocks(),(o,r)=>r===0&&t(o)?e.dom.getParent(o,tp)??o:o),oA=e=>{if(e.isCollapsed())return[];const t=e.getRng(),o=X6(e,r=>nA(t,r)&&!tp(r));if(o.length===1)return nA(t,o[0])&&Y6(t,o[0])?o:[];{const r=ps(o).filter(f=>nA(t,f)).toArray(),c=js(o).filter(f=>Y6(t,f)).toArray(),u=o.slice(1,-1);return r.concat(u).concat(c)}},sA=e=>ge(oA(e),r9(e.dom)),J6=e=>ge(X6(e,t=>!tp(t)),r9(e.dom)),Q6=He.each,rA=e=>Ye(e)&&!gs(e)&&!M(e)&&!dm(e),eB=(e,t)=>{for(let o=e;o;o=o[t]){if(ze(o)&&Jo(o.data))return e;if(Ye(o)&&!gs(o))return o}return e},tB=(e,t,o)=>{const r=Rd(e),c=Za(t)&&e.dom.isEditable(t),u=Za(o)&&e.dom.isEditable(o);if(c&&u){const f=eB(t,"previousSibling"),b=eB(o,"nextSibling");if(r.compare(f,b)){for(let v=f.nextSibling;v&&v!==b;){const w=v;v=v.nextSibling,f.appendChild(w)}return e.dom.remove(b),He.each(He.grep(b.childNodes),v=>{f.appendChild(v)}),f}}return o},nB=(e,t,o,r)=>{if(r&&t.merge_siblings!==!1){const c=tB(e,eM(r),r)??r;tB(e,c,eM(c,!0))}},a9=(e,t,o)=>{if(t.clear_child_styles){const r=t.links?"*:not(a)":"*";Q6(e.select(r,o),c=>{rA(c)&&e.isEditable(c)&&Q6(t.styles,(u,f)=>{e.setStyle(c,f,"")})})}},aA=(e,t,o)=>{Q6(e.childNodes,r=>{rA(r)&&(t(r)&&o(r),r.hasChildNodes()&&aA(r,t,o))})},c9=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},cA=(e,t)=>o=>!!(o&&eC(e,o,t)),oB=(e,t,o)=>r=>{e.setStyle(r,t,o),r.getAttribute("style")===""&&r.removeAttribute("style"),c9(e,r)},o1=ei.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Gf=/^(src|href|style)$/,iA=He.each,pC=Qy,i9=e=>/^(TR|TH|TD)$/.test(e.nodeName),sB=(e,t,o)=>e.isChildOf(t,o)&&t!==o&&!e.isBlock(o),lA=(e,t,o)=>{let r=t[o?"startContainer":"endContainer"],c=t[o?"startOffset":"endOffset"];if(Ye(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return ze(r)&&o&&c>=r.data.length&&(r=new ys(r,e.getBody()).next()||r),ze(r)&&!o&&c===0&&(r=new ys(r,e.getBody()).prev()||r),r},uA=(e,t)=>{const o=t?"firstChild":"lastChild",r=e[o];return i9(e)&&r?e.nodeName==="TR"&&r[o]||r:e},TE=(e,t,o,r)=>{var u;const c=e.create(o,r);return(u=t.parentNode)==null||u.insertBefore(c,t),c.appendChild(t),c},dA=(e,t,o,r,c)=>{const u=q.fromDom(t),f=q.fromDom(e.create(r,c)),b=o?br(u):la(u);return li(f,b),o?(Gr(u,f),mu(f,u)):(El(u,f),Hn(f,u)),f.dom},l9=(e,t)=>t.links&&e.nodeName==="A",rB=(e,t,o)=>{const r=t.parentNode;let c;const u=e.dom,f=zs(e);_d(o)&&r===u.getRoot()&&(!o.list_block||!pC(t,o.list_block))&&le(Fo(t.childNodes),b=>{Mb(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=TE(u,b,f),u.setAttribs(c,Ki(e))):c=null}),!(pY(o)&&!pC(o.inline,t))&&u.remove(t,!0)},aB=(e,t,o)=>pr(e)?{name:t,value:null}:{name:e,value:Uf(t,o)},cB=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},iB=(e,t,o,r,c)=>{let u=!1;iA(o.styles,(f,b)=>{const{name:v,value:w}=aB(b,f,r),k=Gx(w,v);(o.remove_similar||ie(w)||!Ye(c)||pC(eC(e,c,v),k))&&e.setStyle(t,v,""),u=!0}),u&&cB(e,t)},s1=(e,t,o)=>{t==="removeformat"?le(J6(e.selection),r=>{le(K6,c=>e.dom.setStyle(r,c,"")),cB(e.dom,r)}):s9(e.formatter,t).each(r=>{le(J6(e.selection),c=>iB(e.dom,c,r,o,null))})},kE=(e,t,o,r,c)=>{const u=e.dom,f=Rd(e),b=e.schema;if(ta(t)&&ja(b,t.inline)&&ms(b,r)&&r.parentElement===e.getBody())return rB(e,r,t),o1.removed();if(!t.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!EE(u,r,t)&&!l9(r,t))return o1.keep();const v=r,w=t.preserve_attributes;if(ta(t)&&t.remove==="all"&&dn(w)){const k=ge(u.getAttribs(v),O=>vt(w,O.name.toLowerCase()));if(u.removeAllAttribs(v),le(k,O=>u.setAttrib(v,O.name,O.value)),k.length>0)return o1.rename("span")}if(t.remove!=="all"){iB(u,v,t,o,c),iA(t.attributes,(O,R)=>{const{name:I,value:U}=aB(R,O,o);if(t.remove_similar||ie(U)||!Ye(c)||pC(u.getAttrib(c,I),U)){if(I==="class"){const H=u.getAttrib(v,I);if(H){let j="";if(le(H.split(/\s+/),oe=>{/mce\-\w+/.test(oe)&&(j+=(j?" ":"")+oe)}),j){u.setAttrib(v,I,j);return}}}if(Gf.test(I)&&v.removeAttribute("data-mce-"+I),I==="style"&&mi(["li"])(v)&&u.getStyle(v,"list-style-type")==="none"){v.removeAttribute(I),u.setStyle(v,"list-style-type","none");return}I==="class"&&v.removeAttribute("className"),v.removeAttribute(I)}}),iA(t.classes,O=>{O=Uf(O,o),(!Ye(c)||u.hasClass(c,O))&&u.removeClass(v,O)});const k=u.getAttribs(v);for(let O=0;O<k.length;O++){const R=k[O].nodeName;if(!f.isAttributeInternal(R))return o1.keep()}}return t.remove!=="none"?(rB(e,v,t),o1.removed()):o1.keep()},u9=(e,t,o,r,c)=>{let u;return t.parentNode&&le(qx(e.dom,t.parentNode).reverse(),f=>{if(!u&&Ye(f)&&f.id!=="_start"&&f.id!=="_end"){const b=Vl(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},d9=(e,t,o,r)=>kE(e,t,o,r,r).fold(Xe(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Xe(null)),mA=(e,t,o,r,c,u,f,b)=>{var O;let v,w;const k=e.dom;if(o){const R=o.parentNode;for(let I=r.parentNode;I&&I!==R;I=I.parentNode){let U=k.clone(I,!1);for(let H=0;H<t.length&&(U=d9(e,t[H],b,U),U!==null);H++);U&&(v&&U.appendChild(v),w||(w=U),v=U)}(!f.mixed||!k.isBlock(o))&&(r=k.split(o,r)??r),v&&w&&((O=c.parentNode)==null||O.insertBefore(v,c),w.appendChild(c),ta(f)&&nB(e,f,b,v))}return r},m9=(e,t,o,r,c)=>{const u=e.formatter.get(t),f=u[0],b=e.dom,v=e.selection,w=H=>{const j=u9(e,H,t,o,c);return mA(e,u,j,H,H,!0,f,o)},k=H=>gs(H)&&Ye(H)&&(H.id==="_start"||H.id==="_end"),O=H=>jn(u,j=>bC(e,j,o,H,H)),R=H=>{const j=Fo(H.childNodes),se=O(H)||jn(u,Oe=>EE(b,H,Oe)),ae=H.parentNode;if(!se&&ve(ae)&&e_(f)&&O(ae),f.deep&&j.length)for(let Oe=0;Oe<j.length;Oe++)R(j[Oe]);le(["underline","line-through","overline"],Oe=>{Ye(H)&&e.dom.getStyle(H,"text-decoration")===Oe&&H.parentNode&&nM(b,H.parentNode)===Oe&&bC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Oe}},void 0,H)})},I=H=>{const j=b.get(H?"_start":"_end");if(j){let oe=j[H?"firstChild":"lastChild"];return k(oe)&&(oe=oe[H?"firstChild":"lastChild"]),ze(oe)&&oe.data.length===0&&(oe=H?j.previousSibling||j.nextSibling:j.nextSibling||j.previousSibling),b.remove(j,!0),oe}else return null},U=H=>{let j,oe,se=Pm(b,H,u,{includeTrailingSpace:H.collapsed});if(f.split){if(se=Ib(se),j=lA(e,se,!0),oe=lA(e,se),j!==oe){if(j=uA(j,!0),oe=uA(oe,!1),sB(b,j,oe)){const Se=N.from(j.firstChild).getOr(j);w(dA(b,Se,!0,"span",{id:"_start","data-mce-type":"bookmark"})),I(!0);return}if(sB(b,oe,j)){const Se=N.from(oe.lastChild).getOr(oe);w(dA(b,Se,!1,"span",{id:"_end","data-mce-type":"bookmark"})),I(!1);return}j=TE(b,j,"span",{id:"_start","data-mce-type":"bookmark"}),oe=TE(b,oe,"span",{id:"_end","data-mce-type":"bookmark"});const ae=b.createRng();ae.setStartAfter(j),ae.setEndBefore(oe),Ru(b,ae,Se=>{le(Se,Oe=>{!gs(Oe)&&!gs(Oe.parentNode)&&w(Oe)})}),w(j),w(oe),j=I(!0),oe=I()}else j=oe=w(j);se.startContainer=j.parentNode?j.parentNode:j,se.startOffset=b.nodeIndex(j),se.endContainer=oe.parentNode?oe.parentNode:oe,se.endOffset=b.nodeIndex(oe)+1}Ru(b,se,ae=>{le(ae,R)})};if(r){if(Yy(r)){const H=b.createRng();H.setStartBefore(r),H.setEndAfter(r),U(H)}else U(r);dy(e,t,r,o);return}!v.isCollapsed()||!ta(f)||ft(e).length?(J5(e,()=>qy(e,U),H=>ta(f)&&K_(e,t,o,H)),e.nodeChanged()):U6(e,t,o,c),s1(e,t,o),dy(e,t,r,o)},_E=(e,t,o,r,c)=>{(r||e.selection.isEditable())&&m9(e,t,o,r,c)},lB=(e,t,o,r)=>kE(e,t,o,r).fold(()=>N.some(r),c=>N.some(e.dom.rename(r,c)),N.none),bC=(e,t,o,r,c)=>kE(e,t,o,r,c).fold(De,u=>(e.dom.rename(r,u),!0),et),uB=["fontsize","subscript","superscript"],AE=["strikethrough",...uB],f9=(e,t,o)=>ve(e.matchNode(t.dom,o,{},o==="fontsize")),OE=(e,t)=>jn(uB,o=>f9(e,t,o)),g9=e=>vt(AE,e),dB=(e,t,o,r,c)=>{const u=ci(t,e).filter(bs);return Lh(u,o).map(f=>{const b=u[f],v=r(b),w=[...c(ua(b)).toArray(),...Gn(u.slice(0,f),k=>o(k)?c(k).toArray():[ua(k)])];return{container:b,innerWrapper:v,outerWrappers:w}})},mB=(e,t,o,r)=>{le(vs(e),c=>{bs(c)&&o(c)&&r(c).isNone()&&ui(c)}),le(vs(e),c=>Hn(t,c)),mu(e,t)},fB=(e,t)=>{if(t.length>0){const o=t[t.length-1];Gr(e,o);const r=cn(t.slice(0,t.length-1),(c,u)=>(Hn(c,u),u),o);Hn(r,e)}},h9=(e,t,o,r,c)=>{const u=f=>En(q.fromDom(e.getRoot()),f)||e.isBlock(f.dom);le(t,f=>{dB(u,f,o,r,c).each(({container:b,innerWrapper:v,outerWrappers:w})=>{e.split(b.dom,f.dom),mB(f,v,o,c),fB(f,w)})})},fA=(e,t,o)=>{const r=b=>ve(Vl(e,b.dom,t)),c=b=>{const v=q.fromTag(mn(b)),w=Vl(e,b.dom,t,{});return ve(w)&&XH(w)&&n1(e,v.dom,w),v},u=b=>{const v=Vl(e,b.dom,t,{});return ve(v)?lB(e,v,{},b.dom).map(q.fromDom):N.some(b)},f=Lm(e.selection.getRng());h9(e.dom,o,r,c,u),e.selection.setRng(zl(f))},p9=(e,t)=>Gn(t,o=>{const r=t0(o,c=>OE(e,c));return OE(e,o)?[o,...r]:r}),b9=(e,t,o)=>{if(g9(t)){const r=p9(e.formatter,o);fA(e,"strikethrough",r)}},v9=(e,t)=>{const o=ge(t,r=>OE(e.formatter,r));fA(e,"strikethrough",o)},Kc=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),gB=e=>e.name==="summary",y9=(e,t)=>{let o=e;for(;o=o.walk();)t(o)},gA=(e,t,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const v=r.nodes[c];v?v.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=t.length;u<f;u++){const b=t[u],v=b.name;if(v in o.attributes.map){const w=r.attributes[v];w?w.nodes.push(o):r.attributes[v]={filter:b,nodes:[o]}}}},C9=(e,t,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&y9(o,c=>{gA(e,t,c,r)}),r},hB=(e,t)=>{const o=(r,c)=>{hn(r,u=>{const f=Fo(u.nodes);le(u.filter.callbacks,b=>{for(let v=f.length-1;v>=0;v--){const w=f[v];(!(c?w.attr(u.filter.name)!==void 0:w.name===u.filter.name)||gn(w.parent))&&f.splice(v,1)}f.length>0&&b(f,u.filter.name,t)})})};o(e.nodes,!1),o(e.attributes,!0)},pB=(e,t,o,r={})=>{const c=C9(e,t,o);hB(c,r)},vh=(e,t,o,r)=>{if((e.pad_empty_with_br||t.insert)&&o(r)){const u=new Lr("br",1);t.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Lr("#text",3)).value=us},zb=e=>{var t;return S9(e,"#text")&&((t=e==null?void 0:e.firstChild)==null?void 0:t.value)===us},S9=(e,t)=>{const o=e==null?void 0:e.firstChild;return ve(o)&&o===e.lastChild&&o.name===t},w9=(e,t)=>{const o=e.getElementRule(t.name);return(o==null?void 0:o.paddEmpty)===!0},vC=(e,t,o,r)=>r.isEmpty(t,o,c=>w9(e,c)),Md=(e,t)=>ve(e)&&(t(e)||e.name==="br"),x9=e=>{let t;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(t=o)}return N.from(t)},E9=e=>{const t=[];for(let o=e.firstChild;ve(o);o=o.walk())t.push(o);return t},Vb=(e,t,o=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!t.isValidChild(o.name,c.name)&&Vb(c,t,o);e.unwrap()}},bB=(e,t,o,r=Dt)=>{const c=t.getTextBlockElements(),u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=He.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,w=k=>k!==o&&!b[k.name];for(let k=0;k<e.length;k++){const O=e[k];let R,I,U;if(!O.parent||v.has(O))continue;if(c[O.name]&&O.parent.name==="li"){let j=O.next;for(;j&&c[j.name];){j.name="li",v.add(j),O.parent.insert(j,O.parent);j=j.next}O.unwrap();continue}const H=[O];for(R=O.parent;R&&!t.isValidChild(R.name,O.name)&&w(R);R=R.parent)H.push(R);if(R&&H.length>1)if(yC(t,O,R))Vb(O,t);else{H.reverse(),I=H[0].clone(),r(I);let j=I;for(let oe=0;oe<H.length-1;oe++){t.isValidChild(j.name,H[oe].name)&&oe>0?(U=H[oe].clone(),r(U),j.append(U)):U=j;for(let se=H[oe].firstChild;se&&se!==H[oe+1];){const ae=se.next;U.append(se),se=ae}j=U}vC(t,u,f,I)?R.insert(O,H[0],!0):(R.insert(I,H[0],!0),R.insert(O,I)),R=H[0],(vC(t,u,f,R)||S9(R,"br"))&&R.empty().remove()}else if(O.parent){if(O.name==="li"){let j=O.prev;if(j&&(j.name==="ul"||j.name==="ol")){j.append(O);continue}if(j=O.next,j&&(j.name==="ul"||j.name==="ol")&&j.firstChild){j.insert(O,j.firstChild,!0);continue}const oe=new Lr("ul",1);r(oe),O.wrap(oe);continue}if(t.isValidChild(O.parent.name,"div")&&t.isValidChild("div",O.name)){const j=new Lr("div",1);r(j),O.wrap(j)}else Vb(O,t)}}},hA=(e,t)=>{let o=e;for(;o;){if(o.name===t)return!0;o=o.parent}return!1},yC=(e,t,o=t.parent)=>o?e.children[t.name]&&!e.isValidChild(o.name,t.name)||t.name==="a"&&hA(o,"a")?!0:gB(o)&&Kc(t)?!((o==null?void 0:o.firstChild)===t&&(o==null?void 0:o.lastChild)===t):!1:!1,vB=(e,t,o,r)=>{const c=document.createRange();return c.setStart(e,t),c.setEnd(o,r),c},T9=e=>{const t=Ce.fromRangeStart(e),o=Ce.fromRangeEnd(e),r=e.commonAncestorContainer;return jc(!1,r,o).map(c=>!Au(t,o,r)&&Au(t,c,r)?vB(t.container(),t.offset(),c.container(),c.offset()):e).getOr(e)},pA=e=>e.collapsed?e:T9(e),qf=He.explode,yB=()=>{const e={};return{addFilter:(c,u)=>{le(qf(c),f=>{Yt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>za(e),removeFilter:(c,u)=>{le(qf(c),f=>{if(Yt(e,f))if(ve(u)){const b=e[f],v=ge(b.callbacks,w=>w!==u);v.length>0?b.callbacks=v:delete e[f]}else delete e[f]})}}},k9=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),_9=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),pn=(e,t)=>{le(t,o=>{e.attr(o,null)})},A9=(e,t,o)=>{e.addNodeFilter("font",r=>{le(r,c=>{const u=t.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),v=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),v&&Hh(v).each(w=>{u["font-size"]=o[w-1]}),c.name="span",c.attr("style",t.serialize(u)),pn(c,["color","face","size"])})})},O9=(e,t,o)=>{e.addNodeFilter("strike",r=>{const c=t.type!=="html4";le(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},CB=(e,t,o)=>{const r=gd();t.convert_fonts_to_spans&&A9(e,r,He.explode(t.font_size_legacy_values??"")),O9(e,o,r)},D9=(e,t,o)=>{t.inline_styles&&CB(e,t,o)},R9=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),Ds=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},M9=e=>{try{return decodeURIComponent(e)}catch{return e}},bA=e=>{const[t,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(c){const u=c[2]===";base64",f=M9(r),b=u?Ds(f):f;return N.some({type:c[1],data:b,base64Encoded:u})}else return N.none()},SB=(e,t,o=!0)=>{let r=t;if(o)try{r=atob(t)}catch{return N.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return N.some(new Blob([c],{type:e}))},B9=e=>new Promise((t,o)=>{bA(e).bind(({type:r,data:c,base64Encoded:u})=>SB(r,c,u)).fold(()=>o("Invalid data URI"),t)}),rs=e=>Wt(e,"blob:")?R9(e):Wt(e,"data:")?B9(e):Promise.reject("Unknown URI format"),vA=e=>new Promise((t,o)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var c;o((c=r.error)==null?void 0:c.message)},r.readAsDataURL(e)});let wB=0;const N9=e=>"blobid"+wB++,yA=(e,t,o)=>bA(e).bind(({data:r,type:c,base64Encoded:u})=>{if(t&&!u)return N.none();{const f=u?r:btoa(r);return o(f,c)}}),xB=(e,t,o)=>{const r=e.create(N9(),t,o);return e.add(r),r},Fm=(e,t,o=!1)=>yA(t,o,(r,c)=>N.from(e.getByData(r,c)).orThunk(()=>SB(c,r).map(u=>xB(e,u,r)))),CA=(e,t)=>{const o=()=>Promise.reject("Invalid data URI");if(Wt(t,"blob:")){const r=e.getByUri(t);return ve(r)?Promise.resolve(r):rs(t).then(c=>vA(c).then(u=>yA(u,!1,f=>N.some(xB(e,c,f))).getOrThunk(o)))}else return Wt(t,"data:")?Fm(e,t).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},P9=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,$9=e=>N.from(e.match(P9)).bind(t=>Ur(t,1)).map(t=>Wt(t,"www.")?t.substring(4):t),DE=(e,t)=>{N.from(e.attr("src")).bind($9).forall(o=>!vt(t,o))&&e.attr("sandbox","")},SA=(e,t)=>Wt(e,`${t}/`),I9=e=>as(e)?"iframe":SA(e,"image")?"img":SA(e,"video")?"video":SA(e,"audio")?"audio":"iframe",gr=({type:e,src:t,width:o,height:r}={},c,u)=>{const f=I9(e),b=new Lr(f,1);return b.attr(f==="audio"?{src:t}:{src:t,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&DE(b,u),b},L9=e=>ve(e.attr("data-mce-bogus")),yh=e=>e.attr("src")===Fn.transparentSrc||ve(e.attr("data-mce-placeholder")),F9=(e,t)=>{const{blob_cache:o}=t;if(o){const r=c=>{const u=c.attr("src");yh(c)||L9(c)||gn(u)||Fm(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>le(c,r))}},H9=(e,t)=>{const o=e.schema;e.addAttributeFilter("href",f=>{let b=f.length;const v=k=>k.split(" ").filter(R=>R.length>0).concat(["noopener"]).sort().join(" "),w=k=>{const O=k?He.trim(k):"";return/\b(noopener)\b/g.test(O)?O:v(O)};if(!t.allow_unsafe_link_target)for(;b--;){const k=f[b];k.name==="a"&&k.attr("target")==="_blank"&&k.attr("rel",w(k.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",f=>{let b=f.length,v,w,k,O;for(;b--;)if(O=f[b],O.name==="a"&&O.firstChild&&!O.attr("href"))for(k=O.parent,v=O.lastChild;v&&k;)w=v.prev,k.insert(v,O),v=w}),t.fix_list_elements&&e.addNodeFilter("ul,ol",f=>{let b=f.length,v,w;for(;b--;)if(v=f[b],w=v.parent,w&&(w.name==="ul"||w.name==="ol"))if(v.prev&&v.prev.name==="li")v.prev.append(v);else{const k=new Lr("li",1);k.attr("style","list-style-type: none"),v.wrap(k)}});const r=o.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",f=>{let b=f.length;for(;b--;){const v=f[b],w=v.attr("class")??"",k=He.explode(w," ");let O="";for(let R=0;R<k.length;R++){const I=k[R];let U=!1,H=r["*"];H&&H[I]&&(U=!0),H=r[v.name],!U&&H&&H[I]&&(U=!0),U&&(O&&(O+=" "),O+=I)}O.length||(O=null),v.attr("class",O)}}),F9(e,t);const c=t.sandbox_iframes??!1,u=ic(t.sandbox_iframes_exclusions??[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",f=>le(f,b=>{b.replace(gr({type:b.attr("type"),src:b.name==="object"?b.attr("data"):b.attr("src"),width:b.attr("width"),height:b.attr("height")},c,u))})),c&&e.addNodeFilter("iframe",f=>le(f,b=>DE(b,u)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:EB,setPrototypeOf:TB,isFrozen:z9,getPrototypeOf:V9,getOwnPropertyDescriptor:U9}=Object;let{freeze:Si,seal:Pu,create:CC}=Object,{apply:wA,construct:xA}=typeof Reflect<"u"&&Reflect;Si||(Si=function(t){return t}),Pu||(Pu=function(t){return t}),wA||(wA=function(t,o,r){return t.apply(o,r)}),xA||(xA=function(t,o){return new t(...o)});const EA=ec(Array.prototype.forEach),SC=ec(Array.prototype.lastIndexOf),kB=ec(Array.prototype.pop),r1=ec(Array.prototype.push),Z9=ec(Array.prototype.splice),RE=ec(String.prototype.toLowerCase),TA=ec(String.prototype.toString),_B=ec(String.prototype.match),Bd=ec(String.prototype.replace),a1=ec(String.prototype.indexOf),ME=ec(String.prototype.trim),el=ec(Object.prototype.hasOwnProperty),na=ec(RegExp.prototype.test),Nd=BE(TypeError);function ec(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return wA(e,t,r)}}function BE(e){return function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return xA(e,o)}}function ko(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:RE;TB&&TB(e,null);let r=t.length;for(;r--;){let c=t[r];if(typeof c=="string"){const u=o(c);u!==c&&(z9(t)||(t[r]=u),c=u)}e[c]=!0}return e}function kA(e){for(let t=0;t<e.length;t++)el(e,t)||(e[t]=null);return e}function Pd(e){const t=CC(null);for(const[o,r]of EB(e))el(e,o)&&(Array.isArray(r)?t[o]=kA(r):r&&typeof r=="object"&&r.constructor===Object?t[o]=Pd(r):t[o]=r);return t}function Ub(e,t){for(;e!==null;){const r=U9(e,t);if(r){if(r.get)return ec(r.get);if(typeof r.value=="function")return ec(r.value)}e=V9(e)}function o(){return null}return o}const _A=Si(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ch=Si(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),NE=Si(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),AB=Si(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),PE=Si(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$E=Si(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),AA=Si(["#text"]),OA=Si(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),IE=Si(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),DA=Si(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$u=Si(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Sh=Pu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Iu=Pu(/<%[\w\W]*|[\w\W]*%>/gm),W9=Pu(/\$\{[\w\W]*/gm),j9=Pu(/^data-[\-\w.\u00B7-\uFFFF]+$/),G9=Pu(/^aria-[\-\w]+$/),OB=Pu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q9=Pu(/^(?:\w+script|data):/i),K9=Pu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DB=Pu(/^html$/i),Y9=Pu(/^[a-z][.\w]*(-[.\w]+)+$/i);var RB=Object.freeze({__proto__:null,ARIA_ATTR:G9,ATTR_WHITESPACE:K9,CUSTOM_ELEMENT:Y9,DATA_ATTR:j9,DOCTYPE_NAME:DB,ERB_EXPR:Iu,IS_ALLOWED_URI:OB,IS_SCRIPT_OR_DATA:q9,MUSTACHE_EXPR:Sh,TMPLIT_EXPR:W9});const wC={element:1,text:3,progressingInstruction:7,comment:8,document:9},X9=function(){return typeof window>"u"?null:window},J9=function(t,o){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},LE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function FE(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X9();const t=kn=>FE(kn);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==wC.document||!e.Element)return t.isSupported=!1,t;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:v,NodeFilter:w,NamedNodeMap:k=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:O,DOMParser:R,trustedTypes:I}=e,U=v.prototype,H=Ub(U,"cloneNode"),j=Ub(U,"remove"),oe=Ub(U,"nextSibling"),se=Ub(U,"childNodes"),ae=Ub(U,"parentNode");if(typeof f=="function"){const kn=o.createElement("template");kn.content&&kn.content.ownerDocument&&(o=kn.content.ownerDocument)}let Se,Oe="";const{implementation:Je,createNodeIterator:St,createDocumentFragment:xe,getElementsByTagName:me}=o,{importNode:Ee}=r;let Qe=LE();t.isSupported=typeof EB=="function"&&typeof ae=="function"&&Je&&Je.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:It,ERB_EXPR:Lt,TMPLIT_EXPR:On,DATA_ATTR:lo,ARIA_ATTR:Bo,IS_SCRIPT_OR_DATA:qo,ATTR_WHITESPACE:zr,CUSTOM_ELEMENT:Ei}=RB;let{IS_ALLOWED_URI:nt}=RB,At=null;const Xn=ko({},[..._A,...Ch,...NE,...PE,...AA]);let Zn=null;const sa=ko({},[...OA,...IE,...DA,...$u]);let ke=Object.seal(CC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ge=null,ut=null,wn=!0,en=!0,po=!1,Ql=!0,Ac=!1,eu=!0,rl=!1,Ih=!1,oc=!1,Jc=!1,ig=!1,Nv=!1,ZT=!0,Ft=!1;const Mn="user-content-";let Vs=!0,Zo=!1,Co={},Ms=null;const Ti=ko({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Oc=null;const tu=ko({},["audio","video","img","source","image","track"]);let lg=null;const WT=ko({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jT="http://www.w3.org/1998/Math/MathML",PS="http://www.w3.org/2000/svg",Xm="http://www.w3.org/1999/xhtml";let Pv=Xm,N5=!1,GT=null;const lX=ko({},[jT,PS,Xm],TA);let P5=ko({},["mi","mo","mn","ms","mtext"]),$5=ko({},["annotation-xml"]);const uX=ko({},["title","style","font","a","script"]);let qT=null;const $v=["application/xhtml+xml","text/html"],XL="text/html";let ue=null,he=null;const rt=o.createElement("form"),qe=function(pe){return pe instanceof RegExp||pe instanceof Function},jt=function(){let pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(he&&he===pe)){if((!pe||typeof pe!="object")&&(pe={}),pe=Pd(pe),qT=$v.indexOf(pe.PARSER_MEDIA_TYPE)===-1?XL:pe.PARSER_MEDIA_TYPE,ue=qT==="application/xhtml+xml"?TA:RE,At=el(pe,"ALLOWED_TAGS")?ko({},pe.ALLOWED_TAGS,ue):Xn,Zn=el(pe,"ALLOWED_ATTR")?ko({},pe.ALLOWED_ATTR,ue):sa,GT=el(pe,"ALLOWED_NAMESPACES")?ko({},pe.ALLOWED_NAMESPACES,TA):lX,lg=el(pe,"ADD_URI_SAFE_ATTR")?ko(Pd(WT),pe.ADD_URI_SAFE_ATTR,ue):WT,Oc=el(pe,"ADD_DATA_URI_TAGS")?ko(Pd(tu),pe.ADD_DATA_URI_TAGS,ue):tu,Ms=el(pe,"FORBID_CONTENTS")?ko({},pe.FORBID_CONTENTS,ue):Ti,Ge=el(pe,"FORBID_TAGS")?ko({},pe.FORBID_TAGS,ue):Pd({}),ut=el(pe,"FORBID_ATTR")?ko({},pe.FORBID_ATTR,ue):Pd({}),Co=el(pe,"USE_PROFILES")?pe.USE_PROFILES:!1,wn=pe.ALLOW_ARIA_ATTR!==!1,en=pe.ALLOW_DATA_ATTR!==!1,po=pe.ALLOW_UNKNOWN_PROTOCOLS||!1,Ql=pe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ac=pe.SAFE_FOR_TEMPLATES||!1,eu=pe.SAFE_FOR_XML!==!1,rl=pe.WHOLE_DOCUMENT||!1,Jc=pe.RETURN_DOM||!1,ig=pe.RETURN_DOM_FRAGMENT||!1,Nv=pe.RETURN_TRUSTED_TYPE||!1,oc=pe.FORCE_BODY||!1,ZT=pe.SANITIZE_DOM!==!1,Ft=pe.SANITIZE_NAMED_PROPS||!1,Vs=pe.KEEP_CONTENT!==!1,Zo=pe.IN_PLACE||!1,nt=pe.ALLOWED_URI_REGEXP||OB,Pv=pe.NAMESPACE||Xm,P5=pe.MATHML_TEXT_INTEGRATION_POINTS||P5,$5=pe.HTML_INTEGRATION_POINTS||$5,ke=pe.CUSTOM_ELEMENT_HANDLING||{},pe.CUSTOM_ELEMENT_HANDLING&&qe(pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&qe(pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&typeof pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ke.allowCustomizedBuiltInElements=pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ac&&(en=!1),ig&&(Jc=!0),Co&&(At=ko({},AA),Zn=[],Co.html===!0&&(ko(At,_A),ko(Zn,OA)),Co.svg===!0&&(ko(At,Ch),ko(Zn,IE),ko(Zn,$u)),Co.svgFilters===!0&&(ko(At,NE),ko(Zn,IE),ko(Zn,$u)),Co.mathMl===!0&&(ko(At,PE),ko(Zn,DA),ko(Zn,$u))),pe.ADD_TAGS&&(At===Xn&&(At=Pd(At)),ko(At,pe.ADD_TAGS,ue)),pe.ADD_ATTR&&(Zn===sa&&(Zn=Pd(Zn)),ko(Zn,pe.ADD_ATTR,ue)),pe.ADD_URI_SAFE_ATTR&&ko(lg,pe.ADD_URI_SAFE_ATTR,ue),pe.FORBID_CONTENTS&&(Ms===Ti&&(Ms=Pd(Ms)),ko(Ms,pe.FORBID_CONTENTS,ue)),Vs&&(At["#text"]=!0),rl&&ko(At,["html","head","body"]),At.table&&(ko(At,["tbody"]),delete Ge.tbody),pe.TRUSTED_TYPES_POLICY){if(typeof pe.TRUSTED_TYPES_POLICY.createHTML!="function")throw Nd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof pe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Nd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=pe.TRUSTED_TYPES_POLICY,Oe=Se.createHTML("")}else Se===void 0&&(Se=J9(I,c)),Se!==null&&typeof Oe=="string"&&(Oe=Se.createHTML(""));Si&&Si(pe),he=pe}},Wn=ko({},[...Ch,...NE,...AB]),Us=ko({},[...PE,...$E]),ug=function(pe){let Ot=ae(pe);(!Ot||!Ot.tagName)&&(Ot={namespaceURI:Pv,tagName:"template"});const vn=RE(pe.tagName),Vr=RE(Ot.tagName);return GT[pe.namespaceURI]?pe.namespaceURI===PS?Ot.namespaceURI===Xm?vn==="svg":Ot.namespaceURI===jT?vn==="svg"&&(Vr==="annotation-xml"||P5[Vr]):!!Wn[vn]:pe.namespaceURI===jT?Ot.namespaceURI===Xm?vn==="math":Ot.namespaceURI===PS?vn==="math"&&$5[Vr]:!!Us[vn]:pe.namespaceURI===Xm?Ot.namespaceURI===PS&&!$5[Vr]||Ot.namespaceURI===jT&&!P5[Vr]?!1:!Us[vn]&&(uX[vn]||!Wn[vn]):!!(qT==="application/xhtml+xml"&&GT[pe.namespaceURI]):!1},Jm=function(pe){r1(t.removed,{element:pe});try{ae(pe).removeChild(pe)}catch{j(pe)}},KT=function(pe,Ot){try{r1(t.removed,{attribute:Ot.getAttributeNode(pe),from:Ot})}catch{r1(t.removed,{attribute:null,from:Ot})}if(Ot.removeAttribute(pe),pe==="is")if(Jc||ig)try{Jm(Ot)}catch{}else try{Ot.setAttribute(pe,"")}catch{}},dX=function(pe){let Ot=null,vn=null;if(oc)pe="<remove></remove>"+pe;else{const Dc=_B(pe,/^[\r\n\t ]+/);vn=Dc&&Dc[0]}qT==="application/xhtml+xml"&&Pv===Xm&&(pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+pe+"</body></html>");const Vr=Se?Se.createHTML(pe):pe;if(Pv===Xm)try{Ot=new R().parseFromString(Vr,qT)}catch{}if(!Ot||!Ot.documentElement){Ot=Je.createDocument(Pv,"template",null);try{Ot.documentElement.innerHTML=N5?Oe:Vr}catch{}}const al=Ot.body||Ot.documentElement;return pe&&vn&&al.insertBefore(o.createTextNode(vn),al.childNodes[0]||null),Pv===Xm?me.call(Ot,rl?"html":"body")[0]:rl?Ot.documentElement:al},mX=function(pe){return St.call(pe.ownerDocument||pe,pe,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT|w.SHOW_PROCESSING_INSTRUCTION|w.SHOW_CDATA_SECTION,null)},mY=function(pe){return pe instanceof O&&(typeof pe.nodeName!="string"||typeof pe.textContent!="string"||typeof pe.removeChild!="function"||!(pe.attributes instanceof k)||typeof pe.removeAttribute!="function"||typeof pe.setAttribute!="function"||typeof pe.namespaceURI!="string"||typeof pe.insertBefore!="function"||typeof pe.hasChildNodes!="function")},fX=function(pe){return typeof b=="function"&&pe instanceof b};function F1(kn,pe,Ot){EA(kn,vn=>{vn.call(t,pe,Ot,he)})}const gX=function(pe){let Ot=null;if(F1(Qe.beforeSanitizeElements,pe,null),mY(pe))return Jm(pe),!0;const vn=ue(pe.nodeName);if(F1(Qe.uponSanitizeElement,pe,{tagName:vn,allowedTags:At}),eu&&pe.hasChildNodes()&&!fX(pe.firstElementChild)&&na(/<[/\w!]/g,pe.innerHTML)&&na(/<[/\w!]/g,pe.textContent)||pe.nodeType===wC.progressingInstruction||eu&&pe.nodeType===wC.comment&&na(/<[/\w]/g,pe.data))return Jm(pe),!0;if(!At[vn]||Ge[vn]){if(!Ge[vn]&&pX(vn)&&(ke.tagNameCheck instanceof RegExp&&na(ke.tagNameCheck,vn)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(vn)))return!1;if(Vs&&!Ms[vn]){const Vr=ae(pe)||pe.parentNode,al=se(pe)||pe.childNodes;if(al&&Vr){const Dc=al.length;for(let qu=Dc-1;qu>=0;--qu){const H1=H(al[qu],!0);H1.__removalCount=(pe.__removalCount||0)+1,Vr.insertBefore(H1,oe(pe))}}}return Jm(pe),!0}return pe instanceof v&&!ug(pe)||(vn==="noscript"||vn==="noembed"||vn==="noframes")&&na(/<\/no(script|embed|frames)/i,pe.innerHTML)?(Jm(pe),!0):(Ac&&pe.nodeType===wC.text&&(Ot=pe.textContent,EA([It,Lt,On],Vr=>{Ot=Bd(Ot,Vr," ")}),pe.textContent!==Ot&&(r1(t.removed,{element:pe.cloneNode()}),pe.textContent=Ot)),F1(Qe.afterSanitizeElements,pe,null),!1)},hX=function(pe,Ot,vn){if(ZT&&(Ot==="id"||Ot==="name")&&(vn in o||vn in rt))return!1;if(!(en&&!ut[Ot]&&na(lo,Ot))){if(!(wn&&na(Bo,Ot))){if(!Zn[Ot]||ut[Ot]){if(!(pX(pe)&&(ke.tagNameCheck instanceof RegExp&&na(ke.tagNameCheck,pe)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(pe))&&(ke.attributeNameCheck instanceof RegExp&&na(ke.attributeNameCheck,Ot)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(Ot))||Ot==="is"&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&na(ke.tagNameCheck,vn)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(vn))))return!1}else if(!lg[Ot]){if(!na(nt,Bd(vn,zr,""))){if(!((Ot==="src"||Ot==="xlink:href"||Ot==="href")&&pe!=="script"&&a1(vn,"data:")===0&&Oc[pe])){if(!(po&&!na(qo,Bd(vn,zr,"")))){if(vn)return!1}}}}}}return!0},pX=function(pe){return pe!=="annotation-xml"&&_B(pe,Ei)},bX=function(pe){F1(Qe.beforeSanitizeAttributes,pe,null);const{attributes:Ot}=pe;if(!Ot||mY(pe))return;const vn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Zn,forceKeepAttr:void 0};let Vr=Ot.length;for(;Vr--;){const al=Ot[Vr],{name:Dc,namespaceURI:qu,value:H1}=al,I5=ue(Dc),fY=H1;let cl=Dc==="value"?fY:ME(fY);if(vn.attrName=I5,vn.attrValue=cl,vn.keepAttr=!0,vn.forceKeepAttr=void 0,F1(Qe.uponSanitizeAttribute,pe,vn),cl=vn.attrValue,Ft&&(I5==="id"||I5==="name")&&(KT(Dc,pe),cl=Mn+cl),eu&&na(/((--!?|])>)|<\/(style|title)/i,cl)){KT(Dc,pe);continue}if(vn.forceKeepAttr)continue;if(!vn.keepAttr){KT(Dc,pe);continue}if(!Ql&&na(/\/>/i,cl)){KT(Dc,pe);continue}Ac&&EA([It,Lt,On],yX=>{cl=Bd(cl,yX," ")});const vX=ue(pe.nodeName);if(!hX(vX,I5,cl)){KT(Dc,pe);continue}if(Se&&typeof I=="object"&&typeof I.getAttributeType=="function"&&!qu)switch(I.getAttributeType(vX,I5)){case"TrustedHTML":{cl=Se.createHTML(cl);break}case"TrustedScriptURL":{cl=Se.createScriptURL(cl);break}}if(cl!==fY)try{qu?pe.setAttributeNS(qu,Dc,cl):pe.setAttribute(Dc,cl),mY(pe)?Jm(pe):kB(t.removed)}catch{KT(Dc,pe)}}F1(Qe.afterSanitizeAttributes,pe,null)},TX=function kn(pe){let Ot=null;const vn=mX(pe);for(F1(Qe.beforeSanitizeShadowDOM,pe,null);Ot=vn.nextNode();)F1(Qe.uponSanitizeShadowNode,Ot,null),gX(Ot),bX(Ot),Ot.content instanceof u&&kn(Ot.content);F1(Qe.afterSanitizeShadowDOM,pe,null)};return t.sanitize=function(kn){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ot=null,vn=null,Vr=null,al=null;if(N5=!kn,N5&&(kn="<!-->"),typeof kn!="string"&&!fX(kn))if(typeof kn.toString=="function"){if(kn=kn.toString(),typeof kn!="string")throw Nd("dirty is not a string, aborting")}else throw Nd("toString is not a function");if(!t.isSupported)return kn;if(Ih||jt(pe),t.removed=[],typeof kn=="string"&&(Zo=!1),Zo){if(kn.nodeName){const H1=ue(kn.nodeName);if(!At[H1]||Ge[H1])throw Nd("root node is forbidden and cannot be sanitized in-place")}}else if(kn instanceof b)Ot=dX("<!---->"),vn=Ot.ownerDocument.importNode(kn,!0),vn.nodeType===wC.element&&vn.nodeName==="BODY"||vn.nodeName==="HTML"?Ot=vn:Ot.appendChild(vn);else{if(!Jc&&!Ac&&!rl&&kn.indexOf("<")===-1)return Se&&Nv?Se.createHTML(kn):kn;if(Ot=dX(kn),!Ot)return Jc?null:Nv?Oe:""}Ot&&oc&&Jm(Ot.firstChild);const Dc=mX(Zo?kn:Ot);for(;Vr=Dc.nextNode();)gX(Vr),bX(Vr),Vr.content instanceof u&&TX(Vr.content);if(Zo)return kn;if(Jc){if(ig)for(al=xe.call(Ot.ownerDocument);Ot.firstChild;)al.appendChild(Ot.firstChild);else al=Ot;return(Zn.shadowroot||Zn.shadowrootmode)&&(al=Ee.call(r,al,!0)),al}let qu=rl?Ot.outerHTML:Ot.innerHTML;return rl&&At["!doctype"]&&Ot.ownerDocument&&Ot.ownerDocument.doctype&&Ot.ownerDocument.doctype.name&&na(DB,Ot.ownerDocument.doctype.name)&&(qu="<!DOCTYPE "+Ot.ownerDocument.doctype.name+`>
`+qu),Ac&&EA([It,Lt,On],H1=>{qu=Bd(qu,H1," ")}),Se&&Nv?Se.createHTML(qu):qu},t.setConfig=function(){let kn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};jt(kn),Ih=!0},t.clearConfig=function(){he=null,Ih=!1},t.isValidAttribute=function(kn,pe,Ot){he||jt({});const vn=ue(kn),Vr=ue(pe);return hX(vn,Vr,Ot)},t.addHook=function(kn,pe){typeof pe=="function"&&r1(Qe[kn],pe)},t.removeHook=function(kn,pe){if(pe!==void 0){const Ot=SC(Qe[kn],pe);return Ot===-1?void 0:Z9(Qe[kn],Ot,1)[0]}return kB(Qe[kn])},t.removeHooks=function(kn){Qe[kn]=[]},t.removeAllHooks=function(){Qe=LE()},t}var HE=FE();const MB=He.each,Q9=He.trim,BB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],NB={ftp:21,http:80,https:443,mailto:25},RA=["img","video"],PB=(e,t)=>ve(e)?!e:ve(t)?!vt(RA,t):!0,$B=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},zE=(e,t,o)=>{const r=$B(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?PB(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Lu{constructor(t,o={}){Ie(this,"source");Ie(this,"protocol");Ie(this,"authority");Ie(this,"userInfo");Ie(this,"user");Ie(this,"password");Ie(this,"host");Ie(this,"port");Ie(this,"relative");Ie(this,"path","");Ie(this,"directory","");Ie(this,"file");Ie(this,"query");Ie(this,"anchor");Ie(this,"settings");t=Q9(t),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){c.source=t;return}const u=t.indexOf("//")===0;if(t.indexOf("/")===0&&!u&&(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const b=r?r.path:new Lu(document.location.href).directory;if((r==null?void 0:r.protocol)==="")t="//mce_host"+c.toAbsPath(b,t);else{const v=/([^#?]*)([#?]?.*)/.exec(t);v&&(t=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,v[1])+v[2])}}t=t.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);f&&MB(BB,(b,v)=>{let w=f[v];w&&(w=w.replace(/\(mce_at\)/g,"@@")),c[b]=w}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(t){let o;const r=decodeURIComponent(t).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(t,o,r={}){if(r.allow_script_urls)return!0;{const c=yc.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!zE(r,c,o)}}static getDocumentBaseUrl(t){let o;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?o=t.href??"":o=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}setPath(t){const o=/^(.*?)\/?(\w+)?$/.exec(t);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const o=new Lu(t,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(t,o){const r=new Lu(t,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const o=this.protocol?NB[this.protocol]:null;if(o&&(this.port||o)==(t.port||o))return!0}return!1}toRelPath(t,o){let r=0,c="",u,f;const b=t.substring(0,t.lastIndexOf("/")).split("/"),v=o.split("/");if(b.length>=v.length){for(u=0,f=b.length;u<f;u++)if(u>=v.length||b[u]!==v[u]){r=u+1;break}}if(b.length<v.length){for(u=0,f=v.length;u<f;u++)if(u>=b.length||b[u]!==v[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=v.length;u<f;u++)u!==r-1?c+="/"+v[u]:c+=v[u];return c}toAbsPath(t,o){let r=0;const c=/\/$/.test(o)?"/":"",u=t.split("/"),f=o.split("/"),b=[];MB(u,O=>{O&&b.push(O)});const v=[];for(let O=f.length-1;O>=0;O--)if(!(f[O].length===0||f[O]===".")){if(f[O]===".."){r++;continue}if(r>0){r--;continue}v.push(f[O])}const w=b.length-r;let k;return w<=0?k=Lo(v).join("/"):k=b.slice(0,w).join("/")+"/"+Lo(v).join("/"),k.indexOf("/")!==0&&(k="/"+k),c&&k.lastIndexOf("/")!==k.length-1&&(k+=c),k}getURI(t=!1){let o;return(!this.source||t)&&(o="",t||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const ez=He.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Fu="data-mce-type";let Ul=0;const xC=(e,t,o,r,c)=>{const u=t.validate,f=o.getSpecialElements();e.nodeType===Ua&&(!t.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&Y(e.nodeValue)&&(e.nodeValue=k9(e.nodeValue)));const b=(c==null?void 0:c.tagName)??e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){ve(c)&&(c.allowedTags[b]=!0);return}if(e.nodeType!==Zh||b==="body")return;const v=q.fromDom(e),w=Qo(v,Fu),k=zo(v,"data-mce-bogus");if(!w&&Y(k)){k==="all"?Ao(v):ui(v);return}const O=o.getElementRule(b);if(u&&!O){Yt(f,b)?Ao(v):ui(v);return}else ve(c)&&(c.allowedTags[b]=!0);if(u&&O&&!w){if(le(O.attributesForced??[],R=>{ds(v,R.name,R.value==="{$uid}"?`mce_${Ul++}`:R.value)}),le(O.attributesDefault??[],R=>{Qo(v,R.name)||ds(v,R.name,R.value==="{$uid}"?`mce_${Ul++}`:R.value)}),O.attributesRequired&&!jn(O.attributesRequired,R=>Qo(v,R))){ui(v);return}if(O.removeEmptyAttrs&&yg(v)){ui(v);return}O.outputName&&O.outputName!==b&&jh(v,O.outputName)}},IB=(e,t,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=EC(t,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,BA(f,o,e.nodeName)&&(c.attrValue=f),t.allow_svg_data_urls&&Wt(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):MA(e,f)&&(c.forceKeepAttr=!0)},EC=(e,t,o,r,c,u)=>o!=="html"&&!gf(r)?!0:!(c in ez&&zE(e,u,r))&&(!e.validate||t.isValid(r,c)||Wt(c,"data-")||Wt(c,"aria-")),MA=(e,t)=>e.hasAttribute(Fu)&&(t==="id"||t==="class"||t==="style"),BA=(e,t,o)=>e in t.getBoolAttrs()&&!Yt(t.getCustomElements(),o.toLowerCase()),LB=(e,t,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,v=f.value;!EC(t,o,r,e.tagName.toLowerCase(),b,v)&&!MA(e,b)?e.removeAttribute(b):BA(b,o,e.nodeName)&&e.setAttribute(b,b)}},FB=(e,t,o)=>{const r=HE();return r.addHook("uponSanitizeElement",(c,u)=>{xC(c,e,t,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{IB(c,e,t,o.current(),u)}),r},HB=(e,t)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},zB=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};HE().sanitize(e,o)},VE=(e,t)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=HE(),c=t.allow_mathml_annotation_encodings,u=dn(c)&&c.length>0,f=v=>{const w=v.getAttribute("encoding");return u&&Y(w)&&vt(c,w)},b=(v,w)=>u&&w==="semantics"?N.some(!0):w==="annotation"?N.some(Ye(v)&&f(v)):dn(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(w)?N.from(!0):N.none();r.addHook("uponSanitizeElement",(v,w)=>{const k=w.tagName??v.nodeName.toLowerCase();b(v,k).each(R=>{w.allowedTags[k]=R,!R&&t.sanitize&&Ye(v)&&v.remove()})}),r.addHook("uponSanitizeAttribute",(v,w)=>{dn(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(w.attrName)&&(w.forceKeepAttr=!0)}),r.sanitize(e,o)},NA=e=>t=>{const o=v2(t);if(o==="svg")zB(t);else if(o==="math")VE(t,e);else throw new Error("Not a namespace element")},tz=(e,t)=>{const o=cw();if(e.sanitize){const r=FB(e,t,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,HB(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:NA(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=b.nextNode();){const w=o.track(v);xC(v,e,t,w),Ye(v)&&LB(v,e,t,w)}o.reset()},sanitizeNamespaceElement:Dt}},VB=["script","style","template","param","meta","title","link"],UB=He.makeMap,ZB=He.extend,PA=(e,t,o,r,c)=>{const u=e.name,f=u in o&&u!=="title"&&u!=="textarea"&&u!=="noscript",b=t.childNodes;for(let v=0,w=b.length;v<w;v++){const k=b[v],O=new Lr(k.nodeName.toLowerCase(),k.nodeType);if(Ye(k)){const R=k.attributes;for(let I=0,U=R.length;I<U;I++){const H=R[I];O.attr(H.name,H.value)}gf(O.name)&&(r(k),O.value=k.innerHTML)}else ze(k)?(O.value=k.data,f&&(O.raw=!0)):rn(k)?O.value=c?_9(k.data):k.data:(f2(k)||nr(k))&&(O.value=k.data);if(h2(k)){const R=Lr.create("#text");R.value=k.innerHTML,R.raw=!0,O.append(R)}else gf(O.name)||PA(O,k,o,r,c);e.append(O)}},nz=(e,t,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;le(t,b=>b(f)),gn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];le(o,f=>f(u))}},oz=(e,t,o,r)=>{const c=o.validate,u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=ZB(UB(VB),t.getBlockElements()),v=p0(t),w=/[ \t\r\n]+/g,k=/^[ \t\r\n]+/,O=/[ \t\r\n]+$/,R=se=>{let ae=se.parent;for(;ve(ae);){if(ae.name in f)return!0;ae=ae.parent}return!1},I=se=>{let ae=se;for(;ve(ae);){if(ae.name in v)return vC(t,u,f,ae);ae=ae.parent}return!1},U=se=>se.name in b||vc(t,se)||gf(se.name)&&se.parent===e,H=(se,ae)=>{const Se=ae?se.prev:se.next;return ve(Se)||gn(se.parent)?!1:U(se.parent)&&(se.parent!==e||r.isRootContent===!0)};return[se=>{if(se.type===3&&!R(se)){let ae=se.value??"";ae=ae.replace(w," "),(Md(se.prev,U)||H(se,!0))&&(ae=ae.replace(k,"")),ae.length===0||ae===" "&&se.prev&&se.prev.type===Ua&&se.next&&se.next.type===Ua?se.remove():se.value=ae}},se=>{if(se.type===1){const ae=t.getElementRule(se.name);if(c&&ae){const Se=vC(t,u,f,se);ae.paddInEmptyBlock&&Se&&I(se)?vh(o,r,U,se):ae.removeEmpty&&Se?U(se)?se.remove():se.unwrap():ae.paddEmpty&&(Se||zb(se))&&vh(o,r,U,se)}}else if(se.type===3&&!R(se)){let ae=se.value??"";(se.next&&U(se.next)||H(se,!1))&&(ae=ae.replace(O,"")),ae.length===0?se.remove():se.value=ae}}]},$A=(e,t)=>{const o=t.forced_root_block??e.forced_root_block;return o===!1?"":o===!0?"p":o},WB=' xmlns="http://www.w3.org/1999/xhtml"',Zb=(e={},t=Nr())=>{const o=yB(),r=yB(),c={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},u=new DOMParser,f=tz(c,t),b=(ae,Se,Oe="html",Je=!1)=>{const St=Oe==="xhtml",xe=St?"application/xhtml+xml":"text/html",me=Yt(t.getSpecialElements(),Se.toLowerCase()),Ee=me?`<${Se}>${ae}</${Se}>`:ae,Qe=()=>/^[\s]*<head/i.test(ae)||/^[\s]*<html/i.test(ae)||/^[\s]*<!DOCTYPE/i.test(ae)?`<html${St?WB:""}>${Ee}</html>`:St?`<html${WB}><head></head><body>${Ee}</body></html>`:`<body>${Ee}</body>`,It=u.parseFromString(Qe(),xe),Lt=Je?It.documentElement:It.body;return f.sanitizeHtmlElement(Lt,xe),me?Lt.firstChild:Lt},v=o.addFilter,w=o.getFilters,k=o.removeFilter,O=r.addFilter,R=r.getFilters,I=r.removeFilter,U=(ae,Se)=>{yC(t,ae)&&Se.push(ae)},H=(ae,Se)=>{const Oe=Y(Se.attr(Fu)),Je=Se.type===1&&!Yt(ae,Se.name)&&!vc(t,Se)&&!gf(Se.name);return Se.type===3||Je&&!Oe},j=(ae,Se)=>{const Oe=ZB(UB(VB),t.getBlockElements()),Je=/^[ \t\r\n]+/,St=/[ \t\r\n]+$/;let xe=ae.firstChild,me=null;const Ee=Qe=>{var It,Lt;Qe&&(xe=Qe.firstChild,xe&&xe.type===3&&(xe.value=(It=xe.value)==null?void 0:It.replace(Je,"")),xe=Qe.lastChild,xe&&xe.type===3&&(xe.value=(Lt=xe.value)==null?void 0:Lt.replace(St,"")))};if(t.isValidChild(ae.name,Se.toLowerCase())){for(;xe;){const Qe=xe.next;H(Oe,xe)?(me||(me=new Lr(Se,1),me.attr(c.forced_root_block_attrs),ae.insert(me,xe)),me.append(xe)):(Ee(me),me=null),xe=Qe}Ee(me)}},se={schema:t,addAttributeFilter:O,getAttributeFilters:R,removeAttributeFilter:I,addNodeFilter:v,getNodeFilters:w,removeNodeFilter:k,parse:(ae,Se={})=>{const Oe=c.validate,Je=(Se.context??c.root_name)==="#document",St=Se.context??(Je?"html":c.root_name),xe=b(ae,St,Se.format,Je);dr(t,xe);const me=new Lr(St,11);PA(me,xe,t.getSpecialElements(),f.sanitizeNamespaceElement,c.sanitize&&c.allow_html_in_comments),xe.innerHTML="";const[Ee,Qe]=oz(me,t,c,Se),It=[],Lt=Oe?qo=>U(qo,It):Dt,On={nodes:{},attributes:{}},lo=qo=>gA(w(),R(),qo,On);nz(me,[Ee,lo],[Qe,Lt]),It.reverse(),Oe&&It.length>0&&(Se.context?Se.invalid=!0:bB(It,t,me,lo));const Bo=$A(c,Se);return Bo&&(me.name==="body"||Se.isRootContent)&&j(me,Bo),Se.invalid||hB(On,Se),me}};return H9(se,c),D9(se,c,t),se},UE=e=>e instanceof Lr,sz=e=>UE(e)?fh({validate:!1}).serialize(e):e,jB=(e,t,o)=>{const r=sz(e),c=t(r);if(c.isDefaultPrevented())return c;if(UE(e))if(c.content!==r){const u=Zb({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},GB=e=>({sanitize:bb(e),sandbox_iframes:lh(e),sandbox_iframes_exclusions:xd(e)}),qB=(e,t)=>{if(t.no_events)return Er.value(t);{const o=rh(e,t);return o.isDefaultPrevented()?Er.error(Jw(e,{content:"",...o}).content):Er.value(o)}},TC=(e,t,o)=>o.no_events?t:jB(t,c=>Jw(e,{...o,content:c}),GB(e)).content,kC=(e,t)=>{if(t.no_events)return Er.value(t);{const o=jB(t.content,r=>pk(e,{...t,content:r}),GB(e));return o.isDefaultPrevented()?(Xw(e,o),Er.error(void 0)):Er.value(o)}},IA=(e,t,o)=>{o.no_events||Xw(e,{...o,content:t})},rz="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),az=["content_css_cors"],cz="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),LA=[{name:"export",replacedWith:"Export to PDF"}],KB=(e,t)=>{const o=ge(t,r=>Yt(e,r));return _i(o)},iz=e=>{const t=KB(e,rz),o=e.forced_root_block;return(o===!1||o==="")&&t.push("forced_root_block (false only)"),_i(t)},FA=e=>KB(e,az),YB=(e,t)=>{const o=He.makeMap(e.plugins," "),c=ge(t,u=>Yt(o,u));return _i(c)},lz=e=>YB(e,cz),uz=e=>YB(e,LA.map(t=>t.name)),dz=(e,t)=>{const o=iz(e),r=lz(t),c=r.length>0,u=o.length>0,f=t.theme==="mobile";if(c||u||f){const b=`
- `,v=f?`

Themes:${b}mobile`:"",w=c?`

Plugins:${b}${r.join(b)}`:"",k=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+v+w+k)}},mz=e=>so(LA,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),fz=(e,t)=>{const o=FA(e),r=uz(t),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(mz).join(f)}`:"",v=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+v)}},gz=(e,t)=>{dz(e,t),fz(e,t)},ZE={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},_C=e=>{console.warn(ZE[e],new Error().stack)},XB=e=>e.dom.length===0?(Ao(e),N.none()):N.some(e),hz=(e,t)=>e.filter(o=>Nb.isBookmarkNode(o.dom)).bind(t?du:ii),WE=(e,t,o,r,c)=>{const u=e.dom,f=t.dom,b=r?u.length:f.length;r?(CE(u,f,c,!1,!r),o.setStart(f,b)):(CE(f,u,c,!1,!r),o.setEnd(f,b))},pz=(e,t,o)=>{Lc(e).each(r=>{const c=e.dom;t&&lC(r,Ce(c,0),o)?vE(c,0,o):!t&&Na(r,Ce(c,c.length),o)&&yE(c,c.length,o)})},JB=(e,t,o,r,c)=>{e.bind(u=>((r?yE:vE)(u.dom,r?u.dom.length:0,c),t.filter(Qn).map(b=>WE(u,b,o,r,c)))).orThunk(()=>hz(t,r).or(t).filter(Qn).map(f=>pz(f,r,c)))},bz=(e,t,o)=>{const r=N.from(t.firstChild).map(q.fromDom),c=N.from(t.lastChild).map(q.fromDom);e.deleteContents(),e.insertNode(t);const u=r.bind(ii).filter(Qn).bind(XB),f=c.bind(du).filter(Qn).bind(XB);JB(u,r,e,!0,o),JB(f,c,e,!1,o),e.collapse(!1)},vz=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),yz=(e,t)=>{if(t.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(t.content,{forced_root_block:!1,...c,...t});return fh({validate:!1},e.schema).serialize(u)}else return t.content},jE=(e,t,o={})=>{const r=vz(o,t);kC(e,r).each(c=>{const u=yz(e,c),f=e.selection.getRng();bz(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),Ji(e,f),IA(e,u,c)})},Cz=(e,t,o={})=>{_C("selectionSetContent"),jE(e,t,o)},Sz=e=>ve(e.firstChild)&&e.firstChild===e.lastChild,wz=e=>e.name==="br"||e.value===us,xz=(e,t)=>e.getBlockElements()[t.name]&&Sz(t)&&wz(t.firstChild),Ez=(e,t)=>{const o=e.getNonEmptyElements();return ve(t)&&(t.isEmpty(o)||xz(e,t))},HY=(e,t)=>{let o=t.firstChild,r=t.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),Ez(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},Hu=e=>{var r,c;const t=e.firstChild,o=e.lastChild;return t&&t.nodeName==="META"&&((r=t.parentNode)==null||r.removeChild(t)),o&&o.id==="mce_marker"&&((c=o.parentNode)==null||c.removeChild(o)),e},QB=(e,t,o)=>{const r=t.serialize(o),c=e.createFragment(r);return Hu(c)},Tz=e=>ge((e==null?void 0:e.childNodes)??[],t=>t.nodeName==="LI"),eN=e=>e.data===us||os(e),kz=e=>ve(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&eN(e.firstChild),_z=e=>!e.firstChild||kz(e),zY=e=>e.length>0&&_z(e[e.length-1])?e.slice(0,-1):e,oa=(e,t)=>{const o=e.getParent(t,e.isBlock);return o&&o.nodeName==="LI"?o:null},Az=(e,t)=>!!oa(e,t),HA=(e,t)=>{const o=t.cloneRange(),r=t.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},tN=(e,t)=>{const o=Ce.before(e),c=Fl(t).next(o);return c?c.toRange():null},AC=(e,t)=>{const o=Ce.after(e),c=Fl(t).prev(o);return c?c.toRange():null},Oz=(e,t,o,r)=>{const c=HA(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),He.each(t,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),AC(t[t.length-1],o)},Dz=(e,t,o)=>{const r=e.parentNode;return r&&He.each(t,c=>{r.insertBefore(c,e)}),tN(e,o)},Rz=(e,t,o,r)=>(r.insertAfter(t.reverse(),e),AC(t[0],o)),Mz=(e,t,o,r)=>{const c=QB(t,e,r),u=oa(t,o.startContainer),f=zY(Tz(c.firstChild)),b=1,v=2,w=t.getRoot(),k=O=>{const R=Ce.fromRangeStart(o),I=Fl(t.getRoot()),U=O===b?I.prev(R):I.next(R),H=U==null?void 0:U.getNode();return H?oa(t,H)!==u:!0};return u?k(b)?Dz(u,f,w):k(v)?Rz(u,f,w,t):Oz(u,f,w,o):null},Bz=["pre"],nN=(e,t,o,r)=>{var w;const c=t.firstChild,u=t.lastChild,f=u.attr("data-mce-type")==="bookmark"?u.prev:u,b=c===f,v=vt(Bz,c.name);if(b&&v){const k=c.attr("contenteditable")!=="false",O=((w=e.getParent(o,e.isBlock))==null?void 0:w.nodeName.toLowerCase())===c.name,R=N.from(Dd(r,o)).forall(pc);return k&&O&&R}else return!1},zA=Og,oN=(e,t,o)=>{if(ve(o)){const r=e.getParent(t.endContainer,zA);return o===r&&Vf(q.fromDom(o),t)}else return!1},sN=(e,t)=>{if(e.isBlock(t)&&e.isEditable(t)){const o=t.childNodes;return o.length===1&&os(o[0])||o.length===0}else return!1},Nz=(e,t,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)==null||r.insertBefore(e.dom.createFragment(t),o):sN(e.dom,o)?e.dom.setHTML(o,t):jE(e,t,{no_events:!0})},Pz=(e,t,o)=>{N.from(e.getParent(t,"td,th")).map(q.fromDom).each(r=>I2(r,o))},$z=(e,t)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(t){const c=e.getBody(),u=Rd(e),f="*[data-mce-fragment]",b=r.select(f);He.each(b,v=>{const w=R=>ve(o[R.nodeName.toLowerCase()]),k=R=>R.childNodes.length===1;if((R=>!(GM(r,R)||qM(r,R)))(v)&&w(v)&&k(v)){const R=Lb(r,v),I=(oe,se)=>Ha(oe,ae=>vt(se,ae)),U=oe=>k(v)&&r.is(oe,f)&&w(oe)&&(oe.nodeName===v.nodeName&&I(R,Lb(r,oe))||U(oe.children[0])),H=oe=>ve(oe)&&oe!==c&&(u.compare(v,oe)||H(oe.parentElement)),j=oe=>ve(oe)&&oe!==c&&r.is(oe,f)&&(rH(r,v,oe)||j(oe.parentElement));(U(v.children[0])||H(v.parentElement)&&!j(v.parentElement))&&r.remove(v,!0)}}),v9(e,df(b))}},Iz=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},Lz=e=>{He.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},GE=e=>!!e.getAttribute("data-mce-fragment"),rN=(e,t)=>ve(t)&&!e.schema.getVoidElements()[t.nodeName],aN=(e,t)=>{var k,O;let o;const r=e.dom,c=e.selection;if(!t)return;c.scrollIntoView(t);const u=Dd(e.getBody(),t);if(u&&r.getContentEditable(u)==="false"){r.remove(t),c.select(u);return}let f=r.createRng();const b=t.previousSibling;if(ze(b)){f.setStart(b,((k=b.nodeValue)==null?void 0:k.length)??0);const R=t.nextSibling;ze(R)&&(b.appendData(R.data),(O=R.parentNode)==null||O.removeChild(R))}else f.setStartBefore(t),f.setEndBefore(t);const v=R=>{let I=Ce.fromRangeStart(R);return I=Fl(e.getBody()).next(I),I==null?void 0:I.toRange()},w=r.getParent(t,r.isBlock);if(r.remove(t),w&&r.isEmpty(w)){const R=zA(w);$i(q.fromDom(w)),f.setStart(w,0),f.setEnd(w,0),!R&&!GE(w)&&(o=v(f))?(f=o,r.remove(w)):r.add(w,r.create("br",R?{}:{"data-mce-bogus":"1"}))}c.setRng(f)},Fz=e=>{const t=e.dom,o=pA(e.selection.getRng());e.selection.setRng(o);const r=t.getParent(o.startContainer,zA);oN(t,o,r)?wE(e,o,q.fromDom(r)):tF(o)||eF(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},cN=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return N.some(t);return N.none()},Hz=(e,t,o)=>{var r;return jn(o.children(),Kc)&&((r=e.getParent(t,e.isBlock))==null?void 0:r.nodeName)==="SUMMARY"},zz=(e,t,o)=>{var j;const r=e.selection,c=e.dom,u=e.parser,f=o.merge,b=fh({validate:!0},e.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(t=Ya(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,v);let w=r.getRng();const k=w.startContainer,O=e.getBody();k===O&&r.isCollapsed()&&c.isBlock(O.firstChild)&&rN(e,O.firstChild)&&c.isEmpty(O.firstChild)&&(w=c.createRng(),w.setStart(O.firstChild,0),w.setEnd(O.firstChild,0),r.setRng(w)),r.isCollapsed()||Fz(e);const R=r.getNode(),I={context:R.nodeName.toLowerCase(),data:o.data,insert:!0},U=u.parse(t,I);if(o.paste===!0&&HY(e.schema,U)&&Az(c,R))return w=Mz(b,c,r.getRng(),U),w&&r.setRng(w),t;o.paste===!0&&nN(c,U,R,e.getBody())&&((j=U.firstChild)==null||j.unwrap()),Iz(U);let H=U.lastChild;if(H&&H.attr("id")==="mce_marker"){const oe=H;for(H=H.prev;H&&H.name!=="table";H=H.walk(!0))if(H.type===3||!c.isBlock(H.name)){H.parent&&e.schema.isValidChild(H.parent.name,"span")&&H.parent.insert(oe,H,H.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(R),!I.invalid&&!Hz(c,R,U))t=b.serialize(U),Nz(e,t,R);else{jE(e,v);let oe=r.getNode(),se;const ae=e.getBody();for(ld(oe)?oe=se=ae:se=oe;se&&se!==ae;)oe=se,se=se.parentNode;t=oe===ae?ae.innerHTML:c.getOuterHTML(oe);const Se=u.parse(t),Oe=cN(Se),Je=Oe.bind(x9).getOr(Se);Oe.each(me=>me.replace(U));const St=E9(U);U.unwrap();const xe=ge(St,me=>yC(e.schema,me));bB(xe,e.schema,Je),pB(u.getNodeFilters(),u.getAttributeFilters(),Se),t=b.serialize(Se),oe===ae?c.setHTML(ae,t):c.setOuterHTML(oe,t)}return $z(e,f),aN(e,c.get("mce_marker")),Lz(e.getBody()),Pz(c,r.getStart(),e.schema),m0(e.schema,e.getBody(),r.getStart()),t},Vz=e=>{$b(e)&&y(e.getBody()).each(t=>{const o=t.getNode(),r=Wa(o)?y(o).getOr(t):t;e.selection.setRng(r.toRange())})},OC=(e,t,o)=>{e.dom.setHTML(e.getBody(),t),o!==!0&&Vz(e)},VA=(e,t,o,r)=>{if(o=Ya(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';t.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(o="<li>"+c+"</li>");const u=zs(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Ki(e),o)):o||(o=c),OC(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=fh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=M0(q.fromDom(t))?o:He.trim(o);return OC(e,c,r.no_selection),{content:c,html:c}}},Uz=(e,t,o,r)=>{pB(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=fh({validate:!1},e.schema).serialize(o),u=Ya(M0(q.fromDom(t))?c:He.trim(c));return OC(e,u,r.no_selection),{content:o,html:u}},UA=(e,t,o)=>N.from(e.getBody()).map(r=>UE(t)?Uz(e,r,t,o):VA(e,r,t,o)).getOr({content:t,html:UE(o.content)?"":o.content}),DC={},iN=mi(["pre"]),Zz=(e,t)=>{DC[e]||(DC[e]=[]),DC[e].push(t)},Wz=(e,t)=>{Yt(DC,e)&&le(DC[e],o=>{o(t)})};Zz("pre",e=>{const t=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return iN(f)&&vt(c,f)},r=(c,u)=>{const f=q.fromDom(u),b=Sl(f).dom;Ao(f),li(q.fromDom(c),[q.fromTag("br",b),q.fromTag("br",b),...vs(f)])};if(!t.collapsed){const c=e.selection.getSelectedBlocks(),u=ge(ge(c,iN),o(c));le(u,f=>{r(f.previousSibling,f)})}});const lN=He.each,jz=(e,t,o,r)=>{const c=u=>{if(Za(u)&&Ye(u.parentNode)&&e.isEditable(u)){const f=nM(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(He.walk(r,c,"childNodes"),c(r))},uN=(e,t,o,r)=>{if(t.styles&&t.styles.backgroundColor){const c=cA(e,"fontSize");aA(r,u=>c(u)&&e.isEditable(u),oB(e,"backgroundColor",Uf(t.styles.backgroundColor,o)))}},Gz=(e,t,o,r)=>{if(ta(t)&&(t.inline==="sub"||t.inline==="sup")){const c=cA(e,"fontSize");aA(r,f=>c(f)&&e.isEditable(f),oB(e,"fontSize",""));const u=ge(e.select(t.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},qz=(e,t,o,r)=>{lN(t,c=>{ta(c)&&lN(e.dom.select(c.inline,r),u=>{rA(u)&&bC(e,c,o,u,c.exact?u:null)}),a9(e.dom,c,r)})},Kz=(e,t,o,r,c)=>{const u=c.parentNode;Vl(e,u,o,r)&&bC(e,t,r,c)||t.merge_with_parents&&u&&e.dom.getParent(u,f=>Vl(e,f,o,r)?(bC(e,t,r,c),!0):!1)},Yz=He.each,Xz=(e,t,o,r)=>{if(q5(e)&&ta(t)&&o.parentNode){const c=p0(e.schema),u=b3(q.fromDom(o),f=>M(f.dom));return Xo(c,r)&&kt(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},Jz=(e,t,o,r)=>{const c=e.formatter.get(t),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,v=e.selection,w=(I,U)=>{let H=!1;return Yz(I,j=>Du(j)?b.getContentEditable(U)==="false"&&!j.ceFalseOverride||ve(j.collapsed)&&j.collapsed!==f?!0:b.is(U,j.selector)&&!M(U)?(n1(e,U,j,o,U),H=!0,!1):!0:!1),H},k=I=>{if(Y(I)){const U=b.create(I);return n1(e,U,u,o,r),U}else return null},O=(I,U,H)=>{const j=[];let oe=!0;const se=u.inline||u.block,ae=k(se),Se=St=>sF(u)&&Vl(e,St,t,o),Oe=(St,xe,me)=>{const Ee=rF(u)&&Jy(e.schema,St)&&Mb(e,xe,se);return me&&Ee},Je=(St,xe,me,Ee)=>{const Qe=St.nodeName.toLowerCase(),It=Mb(e,se,Qe)&&Mb(e,xe,se),Lt=!H&&ze(St)&&bp(St.data),On=M(St),lo=!ta(u)||!I.isBlock(St);return(me||Ee)&&It&&!Lt&&!On&&lo};Ru(I,U,St=>{let xe;const me=Ee=>{let Qe=!1,It=oe,Lt=!1;const On=Ee.parentNode,lo=On.nodeName.toLowerCase(),Bo=I.getContentEditable(Ee);ve(Bo)&&(It=oe,oe=Bo==="true",Qe=!0,Lt=tM(e,Ee));const qo=oe&&!Qe;if(os(Ee)&&!Xz(e,u,Ee,lo)){xe=null,_d(u)&&I.remove(Ee);return}if(Se(Ee)){xe=null;return}if(Oe(Ee,lo,qo)){const zr=I.rename(Ee,se);n1(e,zr,u,o,Ee),j.push(zr),xe=null;return}if(Du(u)){let zr=w(c,Ee);if(!zr&&ve(On)&&e_(u)&&(zr=w(c,On)),!ta(u)||zr){xe=null;return}}ve(ae)&&Je(Ee,lo,qo,Lt)?(xe||(xe=I.clone(ae,!1),On.insertBefore(xe,Ee),j.push(xe)),Lt&&Qe&&(oe=It),xe.appendChild(Ee)):(xe=null,le(Fo(Ee.childNodes),me),Qe&&(oe=It),xe=null)};le(St,me)}),u.links===!0&&le(j,St=>{const xe=me=>{me.nodeName==="A"&&n1(e,me,u,o,r),le(Fo(me.childNodes),xe)};xe(St)}),b9(e,t,df(j)),le(j,St=>{const xe=Qe=>{let It=0;return le(Qe.childNodes,Lt=>{!nF(Lt)&&!gs(Lt)&&It++}),It},me=Qe=>so(Qe.childNodes,Xy).filter(Lt=>I.getContentEditable(Lt)!=="false"&&EE(I,Lt,u)).map(Lt=>{const On=I.clone(Lt,!1);return n1(e,On,u,o,Qe),I.replace(On,Qe,!0),I.remove(Lt,!0),On}).getOr(Qe),Ee=xe(St);if((j.length>1||!I.isBlock(St))&&Ee===0){I.remove(St,!0);return}(ta(u)||_d(u)&&u.wrapper)&&(!u.exact&&Ee===1&&(St=me(St)),qz(e,c,o,St),Kz(e,u,t,o,St),uN(I,u,o,St),jz(I,u,o,St),Gz(I,u,o,St),nB(e,u,o,St))})},R=Yy(r)?r:v.getNode();if(b.getContentEditable(R)==="false"&&!tM(e,R)){r=R,w(c,r),Sd(e,t,r,o);return}if(u){if(r)if(Yy(r)){if(!w(c,r)){const I=b.createRng();I.setStartBefore(r),I.setEndAfter(r),O(b,Pm(b,I,c),!0)}}else O(b,r,!0);else!f||!ta(u)||ft(e).length?(v.setRng(pA(v.getRng())),J5(e,()=>{qy(e,(I,U)=>{const H=U?I:Pm(b,I,c);O(b,H,!1)})},et),e.nodeChanged()):V6(e,t,o),s9(e.formatter,t).each(I=>{const U=sA(e.selection);le(U,H=>G_(b,H,I,o))});Wz(t,e)}Sd(e,t,r,o)},dN=(e,t,o,r)=>{(r||e.selection.isEditable())&&Jz(e,t,o,r)},c1=e=>Yt(e,"vars"),qE=(e,t)=>{e.set({}),t.on("NodeChange",o=>{fN(t,o.element,e.get())}),t.on("FormatApply FormatRemove",o=>{const r=N.from(o.node).map(c=>Yy(c)?c:c.startContainer).bind(c=>Ye(c)?N.some(c):N.from(c.parentElement)).getOrThunk(()=>ZA(t));fN(t,r,e.get())})},ZA=e=>e.selection.getStart(),WA=(e,t,o,r,c)=>Ws(t,b=>{const v=e.formatter.matchNode(b,o,c??{},r);return!as(v)},b=>P6(e,b,o)?!0:r?!1:ve(e.formatter.matchNode(b,o,c,!0))),mN=(e,t)=>{const o=t??ZA(e);return ge(qx(e.dom,o),r=>Ye(r)&&!dm(r))},fN=(e,t,o)=>{const r=mN(e,t);hn(o,(c,u)=>{const f=b=>{const v=WA(e,r,u,b.similar,c1(b)?b.vars:void 0),w=v.isSome();if(b.state.get()!==w){b.state.set(w);const k=v.getOr(t);c1(b)?b.callback(w,{node:k,format:u,parents:r}):le(b.callbacks,O=>O(w,{node:k,format:u,parents:r}))}};le([c.withSimilar,c.withoutSimilar],f),le(c.withVars,f)})},jA=(e,t,o,r,c,u)=>{const f=t.get();le(o.split(","),b=>{const v=wo(f,b).getOrThunk(()=>{const k={withSimilar:{state:Nt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Nt(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=k,k}),w=()=>{const k=mN(e);return WA(e,k,b,c,u).isSome()};if(as(u)){const k=c?v.withSimilar:v.withoutSimilar;k.callbacks.push(r),k.callbacks.length===1&&k.state.set(w())}else v.withVars.push({state:Nt(w()),similar:c,vars:u,callback:r})}),t.set(f)},Qz=(e,t,o)=>{const r=e.get();le(t.split(","),c=>wo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:ge(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:ge(u.withoutSimilar.callbacks,f=>f!==o)},withVars:ge(u.withVars,f=>f.callback!==o)}})),e.set(r)},eV=(e,t,o,r,c,u)=>(jA(e,t,o,r,c,u),{unbind:()=>Qz(t,o,r)}),tV=(e,t,o,r)=>{const c=e.formatter.get(t);c&&(K_(e,t,o,r)&&(!("toggle"in c[0])||c[0].toggle)?_E(e,t,o,r):dN(e,t,o,r))},GA=(e,t,o)=>({element:e,width:t,rows:o}),gN=(e,t)=>({element:e,cells:t}),KE=(e,t)=>({x:e,y:t}),Wb=(e,t)=>Pi(e,t).bind(Hh).getOr(1),nV=(e,t,o,r,c)=>{const u=Wb(c,"rowspan"),f=Wb(c,"colspan"),b=e.rows;for(let v=o;v<o+u;v++){b[v]||(b[v]=gN(Wh(r),[]));for(let w=t;w<t+f;w++){const k=b[v].cells;k[w]=v===o&&w===t?c:ua(c)}}},jb=(e,t,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[t]},tl=(e,t,o)=>{for(;jb(e,t,o);)t++;return t},Gb=e=>cn(e,(t,o)=>o.cells.length>t?o.cells.length:t,0),ho=(e,t)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(En(c[u],t))return N.some(KE(u,r))}return N.none()},qb=(e,t,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const v=f[b].cells,w=t<r?v.slice(t,r+1):v.slice(r,t+1);u.push(gN(f[b].element,w))}return u},hN=(e,t,o)=>{const r=t.x,c=t.y,u=o.x,f=o.y,b=c<f?qb(e,r,c,u,f):qb(e,r,f,u,c);return GA(e.element,Gb(b),b)},pN=(e,t)=>{const o=ua(e.element),r=q.fromTag("tbody");return li(r,t),Hn(o,r),o},YE=e=>Mt(e.rows,t=>{const o=Mt(t.cells,c=>{const u=Wh(c);return Ks(u,"colspan"),Ks(u,"rowspan"),u}),r=ua(t.element);return li(r,o),r}),qA=e=>{const t=GA(ua(e),0,[]);return le(Br(e,"tr"),(o,r)=>{le(Br(o,"td,th"),(c,u)=>{nV(t,tl(t,u,r),r,o,c)})}),GA(t.element,Gb(t.rows),t.rows)},KA=e=>pN(e,YE(e)),YA=(e,t,o)=>ho(e,t).bind(r=>ho(e,o).map(c=>hN(e,r,c))),XA=e=>so(e,t=>mn(t)==="ul"||mn(t)==="ol"),XE=(e,t)=>so(e,o=>mn(o)==="li"&&Vf(o,t)).fold(Xe([]),o=>XA(e).map(r=>{const c=q.fromTag(mn(r)),u=nu(Cg(r),(f,b)=>Wt(b,"list-style"));return di(c,u),[q.fromTag("li"),c]}).getOr([])),JA=(e,t)=>{const o=cn(t,(r,c)=>(Hn(c,r),c),e);return t.length>0?rm([o]):o},bN=e=>Aa(e)?Lc(e).filter(vi).fold(Xe([]),t=>[e,t]):vi(e)?[e]:[],vN=(e,t,o)=>{const r=q.fromDom(t.commonAncestorContainer),c=Nu(r,e),u=ge(c,v=>o.isWrapper(mn(v))),f=XE(c,t),b=u.concat(f.length?f:bN(r));return Mt(b,ua)},QA=()=>rm([]),yN=(e,t,o)=>JA(q.fromDom(t.cloneContents()),vN(e,t,o)),CN=(e,t)=>$s(t,"table",Me(En,e)),i1=(e,t)=>CN(e,t[0]).bind(o=>{const r=t[0],c=t[t.length-1],u=qA(o);return YA(u,r,c).map(f=>rm([KA(f)]))}).getOrThunk(QA),SN=(e,t,o)=>t.length>0&&t[0].collapsed?QA():yN(e,t[0],o),eO=(e,t,o)=>{const r=Ux(t,e);return r.length>0?i1(e,r):SN(e,t,o)},JE=(e,t)=>t>=0&&t<e.length&&Cr(e.charAt(t)),wN=e=>Ya(e.innerText),xN=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),EN=e=>N.from(e.selection.getRng()).map(t=>{const o=N.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),c=xN(o),u=q.fromDom(t.cloneContents());UM(u),ZM(u);const f=e.dom.add(r,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},u.dom),b=wN(f),v=Ya(f.textContent??"");if(e.dom.remove(f),JE(v,0)||JE(v,v.length-1)){const w=o.getOr(r),k=wN(w),O=k.indexOf(b);if(O===-1)return b;{const R=JE(k,O-1),I=JE(k,O+b.length);return(R?" ":"")+b+(I?" ":"")}}else return b}).getOr(""),TN=(e,t)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=C_(e,ga(c)),f=t.contextual?eO(q.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,t)},QE=(e,t)=>{if(t.format==="text")return EN(e);{const o=TN(e,t);return t.format==="tree"?o:e.selection.isCollapsed()?"":o}},kN=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),_N=(e,t,o={})=>{const r=kN(o,t);return qB(e,r).fold(Yo,c=>{const u=QE(e,c);return TC(e,u,c)})},e4=0,tO=1,nO=2,AN=(e,t)=>{const o=e.length+t.length+2,r=new Array(o),c=new Array(o),u=(k,O,R)=>({start:k,end:O,diag:R}),f=(k,O,R,I,U)=>{const H=v(k,O,R,I);if(H===null||H.start===O&&H.diag===O-I||H.end===k&&H.diag===k-R){let j=k,oe=R;for(;j<O||oe<I;)j<O&&oe<I&&e[j]===t[oe]?(U.push([e4,e[j]]),++j,++oe):O-k>I-R?(U.push([nO,e[j]]),++j):(U.push([tO,t[oe]]),++oe)}else{f(k,H.start,R,H.start-H.diag,U);for(let j=H.start;j<H.end;++j)U.push([e4,e[j]]);f(H.end,O,H.end-H.diag,I,U)}},b=(k,O,R,I)=>{let U=k;for(;U-O<I&&U<R&&e[U]===t[U-O];)++U;return u(k,U,O)},v=(k,O,R,I)=>{const U=O-k,H=I-R;if(U===0||H===0)return null;const j=U-H,oe=H+U,se=(oe%2===0?oe:oe+1)/2;r[1+se]=k,c[1+se]=O+1;let ae,Se,Oe,Je,St;for(ae=0;ae<=se;++ae){for(Se=-ae;Se<=ae;Se+=2){for(Oe=Se+se,Se===-ae||Se!==ae&&r[Oe-1]<r[Oe+1]?r[Oe]=r[Oe+1]:r[Oe]=r[Oe-1]+1,Je=r[Oe],St=Je-k+R-Se;Je<O&&St<I&&e[Je]===t[St];)r[Oe]=++Je,++St;if(j%2!==0&&j-ae<=Se&&Se<=j+ae&&c[Oe-j]<=r[Oe])return b(c[Oe-j],Se+k-R,O,I)}for(Se=j-ae;Se<=j+ae;Se+=2){for(Oe=Se+se-j,Se===j-ae||Se!==j+ae&&c[Oe+1]<=c[Oe-1]?c[Oe]=c[Oe+1]-1:c[Oe]=c[Oe-1],Je=c[Oe]-1,St=Je-k+R-Se;Je>=k&&St>=R&&e[Je]===t[St];)c[Oe]=Je--,St--;if(j%2===0&&-ae<=Se&&Se<=ae&&c[Oe]<=r[Oe+j])return b(c[Oe],Se+k-R,O,I)}}return null},w=[];return f(0,e.length,0,t.length,w),w},oO=e=>Ye(e)?e.outerHTML:ze(e)?yc.encodeRaw(e.data,!1):rn(e)?"<!--"+e.data+"-->":"",ON=e=>{let t;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);t=o.firstChild;)r.appendChild(t);return r},DN=(e,t,o)=>{const r=ON(t);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},RN=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const o=e.childNodes[t];e.removeChild(o)}},sO=(e,t)=>{let o=0;le(e,r=>{r[0]===e4?o++:r[0]===tO?(DN(t,r[1],o),o++):r[0]===nO&&RN(t,o)})},MN=(e,t)=>ge(Mt(Fo(e.childNodes),T(Ya,oO)),o=>o.length>0),BN=(e,t)=>{const o=Mt(Fo(t.childNodes),oO);return sO(AN(o,e),t),t},NN=ya(()=>document.implementation.createHTMLDocument("undo")),PN=e=>e.querySelector("iframe")!==null,$N=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),IN=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),RC=e=>{const t=e.serializer.getTempAttrs(),o=VM(e.getBody(),t);return PN(o)?$N(MN(o)):IN(Ya(o.innerHTML))},MC=(e,t,o)=>{const r=o?t.beforeBookmark:t.bookmark;t.type==="fragmented"?BN(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:ve(r)&&at(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Kb=e=>e.type==="fragmented"?e.fragments.join(""):e.content,rO=(e,t)=>{const o=q.fromTag("body",NN());return sd(o,Kb(t)),le(Br(o,"*[data-mce-bogus]"),ui),e&&le(Br(o,"details[open]"),r=>Ks(r,"open")),da(o)},oV=(e,t)=>Kb(e)===Kb(t),LN=(e,t,o)=>rO(e,t)===rO(e,o),Yb=(e,t,o)=>!t||!o?!1:oV(t,o)?!0:LN(e,t,o),BC=e=>e.get()===0,wh=(e,t,o)=>{BC(o)&&(e.typing=t)},t4=(e,t)=>{e.typing&&(wh(e,!1,t),e.add())},FN=e=>{e.typing&&(e.typing=!1,e.add())},Xb=(e,t,o)=>{BC(t)&&o.set(Jg(e.selection))},aO=(e,t,o,r,c,u,f)=>{const b=RC(e),v=He.extend(u||{},b);if(!BC(r)||e.removed)return null;const w=t.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:w,originalEvent:f}).isDefaultPrevented()||w&&Yb(e.readonly,w,v))return null;t.data[o.get()]&&c.get().each(R=>{t.data[o.get()].beforeBookmark=R});const k=yx(e);if(k&&t.data.length>k){for(let R=0;R<t.data.length-1;R++)t.data[R]=t.data[R+1];t.data.length--,o.set(t.data.length)}v.bookmark=Jg(e.selection),o.get()<t.data.length-1&&(t.data.length=o.get()+1),t.data.push(v),o.set(t.data.length-1);const O={level:v,lastLevel:w,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",O),e.dispatch("change",O)):e.dispatch("AddUndo",O),v},cO=(e,t,o)=>{t.data=[],o.set(0),t.typing=!1,e.dispatch("ClearUndos")},Jb=(e,t,o,r,c)=>{if(t.transact(r)){const u=t.data[o.get()].bookmark,f=t.data[o.get()-1];MC(e,f,!0),t.transact(c)&&(t.data[o.get()-1].beforeBookmark=u)}},xh=(e,t,o)=>{let r;return t.get()<o.length-1&&(t.set(t.get()+1),r=o[t.get()],MC(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},HN=(e,t,o,r)=>{let c;return t.typing&&(t.add(),t.typing=!1,wh(t,!1,o)),r.get()>0&&(r.set(r.get()-1),c=t.data[r.get()],MC(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},sV=e=>{e.clear(),e.add()},rV=(e,t,o)=>o.get()>0||t.typing&&t.data[0]&&!Yb(e.readonly,RC(e),t.data[0]),zN=(e,t)=>t.get()<e.data.length-1&&!e.typing,VN=(e,t,o)=>(t4(e,t),e.beforeChange(),e.ignore(o),e.add()),UN=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},aV=(e,t)=>{const o=e.dom,r=ve(t)?t:e.getBody();le(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=Sx(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,v=gb(e);b&&e.hasVisual?o.addClass(c,v):o.removeClass(c,v)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},Kf=e=>({init:{bindEvents:Dt},undoManager:{beforeChange:(t,o)=>Xb(e,t,o),add:(t,o,r,c,u,f)=>aO(e,t,o,r,c,u,f),undo:(t,o,r)=>HN(e,t,o,r),redo:(t,o)=>xh(e,t,o),clear:(t,o)=>cO(e,t,o),reset:t=>sV(t),hasUndo:(t,o)=>rV(e,t,o),hasRedo:(t,o)=>zN(t,o),transact:(t,o,r)=>VN(t,o,r),ignore:(t,o)=>UN(t,o),extra:(t,o,r,c)=>Jb(e,t,o,r,c)},formatter:{match:(t,o,r,c)=>K_(e,t,o,r,c),matchAll:(t,o)=>Y_(e,t,o),matchNode:(t,o,r,c)=>Vl(e,t,o,r,c),canApply:t=>X_(e,t),closest:t=>I6(e,t),apply:(t,o,r)=>dN(e,t,o,r),remove:(t,o,r,c)=>_E(e,t,o,r,c),toggle:(t,o,r)=>tV(e,t,o,r),formatChanged:(t,o,r,c,u)=>eV(e,t,o,r,c,u)},editor:{getContent:t=>tH(e,t),setContent:(t,o)=>UA(e,t,o),insertContent:(t,o)=>zz(e,t,o),addVisual:t=>aV(e,t)},selection:{getContent:(t,o)=>_N(e,t,o)},autocompleter:{addDecoration:Dt,removeDecoration:Dt},raw:{getModel:()=>N.none()}}),l1=e=>{const t=w=>tn(w)?w:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(w,k,O)=>r.transact(O),ignore:(w,k)=>r.ignore(k),extra:(w,k,O,R)=>r.extra(O,R)},formatter:{match:(w,k,O,R)=>c.match(w,t(k),R),matchAll:c.matchAll,matchNode:c.matchNode,canApply:w=>c.canApply(w),closest:w=>c.closest(w),apply:(w,k,O)=>c.apply(w,t(k)),remove:(w,k,O,R)=>c.remove(w,t(k)),toggle:(w,k,O)=>c.toggle(w,t(k)),formatChanged:(w,k,O,R,I)=>c.formatChanged(k,O,R,I)},editor:{getContent:w=>u.getContent(w),setContent:(w,k)=>({content:u.setContent(w,k),html:""}),insertContent:(w,k)=>(u.insertContent(w),""),addVisual:u.addVisual},selection:{getContent:(w,k)=>f.getContent(k)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>N.some(v.getRawModel())}}},ZN=()=>{const e=Xe(null),t=Xe("");return{init:{bindEvents:Dt},undoManager:{beforeChange:Dt,add:e,undo:e,redo:e,clear:Dt,reset:Dt,hasUndo:De,hasRedo:De,transact:e,ignore:Dt,extra:Dt},formatter:{match:De,matchAll:Xe([]),matchNode:Xe(void 0),canApply:De,closest:t,apply:Dt,remove:Dt,toggle:Dt,formatChanged:Xe({unbind:Dt})},editor:{getContent:t,setContent:Xe({content:"",html:""}),insertContent:Xe(""),addVisual:Dt},selection:{getContent:t},autocompleter:{addDecoration:Dt,removeDecoration:Dt},raw:{getModel:Xe(N.none())}}},$d=e=>Yt(e.plugins,"rtc"),cV=e=>wo(e.plugins,"rtc").bind(t=>N.from(t.setup)),iV=e=>{const t=e;return cV(e).fold(()=>(t.rtcInstance=Kf(e),N.none()),o=>(t.rtcInstance=ZN(),N.some(()=>o().then(r=>(t.rtcInstance=l1(r),r.rtc.isRemote)))))},iO=e=>e.rtcInstance?e.rtcInstance:Kf(e),Ro=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},zu=(e,t,o)=>{Ro(e).undoManager.beforeChange(t,o)},WN=(e,t,o,r,c,u,f)=>Ro(e).undoManager.add(t,o,r,c,u,f),lO=(e,t,o,r)=>Ro(e).undoManager.undo(t,o,r),uO=(e,t,o)=>Ro(e).undoManager.redo(t,o),n4=(e,t,o)=>{Ro(e).undoManager.clear(t,o)},lV=(e,t)=>{Ro(e).undoManager.reset(t)},jN=(e,t,o)=>Ro(e).undoManager.hasUndo(t,o),NC=(e,t,o)=>Ro(e).undoManager.hasRedo(t,o),uV=(e,t,o,r)=>Ro(e).undoManager.transact(t,o,r),o4=(e,t,o)=>{Ro(e).undoManager.ignore(t,o)},dO=(e,t,o,r,c)=>{Ro(e).undoManager.extra(t,o,r,c)},GN=(e,t,o,r,c)=>Ro(e).formatter.match(t,o,r,c),PC=(e,t,o)=>Ro(e).formatter.matchAll(t,o),dV=(e,t,o,r,c)=>Ro(e).formatter.matchNode(t,o,r,c),mV=(e,t)=>Ro(e).formatter.canApply(t),Id=(e,t)=>Ro(e).formatter.closest(t),wi=(e,t,o,r)=>{Ro(e).formatter.apply(t,o,r)},$C=(e,t,o,r,c)=>{Ro(e).formatter.remove(t,o,r,c)},xi=(e,t,o,r)=>{Ro(e).formatter.toggle(t,o,r)},fV=(e,t,o,r,c,u)=>Ro(e).formatter.formatChanged(t,o,r,c,u),Mo=(e,t)=>iO(e).editor.getContent(t),gV=(e,t,o)=>iO(e).editor.setContent(t,o),Yf=(e,t,o)=>iO(e).editor.insertContent(t,o),IC=(e,t,o)=>Ro(e).selection.getContent(t,o),qN=(e,t)=>Ro(e).editor.addVisual(t),s4=e=>Ro(e).init.bindEvents(),mO=(e,t={})=>{const o=t.format?t.format:"html";return IC(e,o,t)},KN=(e,t,o)=>{if(Yt(e,t)){const r=ge(e[t],c=>c!==o);r.length===0?delete e[t]:e[t]=r}};var fO=(e,t)=>{let o,r;const c=(b,v)=>so(v,w=>e.is(w,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},t.on("NodeChange",b=>{const v=b.element,w=u(v),k={};hn(o,(O,R)=>{c(R,w).each(I=>{r[R]||(le(O,U=>{U(!0,{node:I,selector:R,parents:w})}),r[R]=O),k[R]=O})}),hn(r,(O,R)=>{k[R]||(delete r[R],le(O,I=>{I(!1,{node:v,selector:R,parents:w})}))})})};return{selectorChangedWithUnbind:(b,v)=>(o||f(),o[b]||(o[b]=[]),o[b].push(v),c(b,u(t.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{KN(o,b,v),KN(r,b,v)}})}};const YN=e=>!!(e&&e.ownerDocument)&&ai(q.fromDom(e.ownerDocument),q.fromDom(e)),XN=e=>e?YN(e.startContainer)&&YN(e.endContainer):!1,gO=(e,t,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=fO(e,r),b=(nt,At)=>{const Xn=e.createRng();ve(nt)&&ve(At)?(Xn.setStart(nt,At),Xn.setEnd(nt,At),Se(Xn),oe(!1)):(Wx(e,Xn,r.getBody(),!0),Se(Xn))},v=nt=>mO(r,nt),w=(nt,At)=>Cz(r,nt,At),k=nt=>iE(r.getBody(),ae(),nt),O=nt=>b_(r.getBody(),ae(),nt),R=(nt,At)=>zr.getBookmark(nt,At),I=nt=>zr.moveToBookmark(nt),U=(nt,At)=>($M(e,nt,At).each(Se),nt),H=()=>{const nt=ae(),At=se();return!nt||nt.item?!1:nt.compareEndPoints?nt.compareEndPoints("StartToEnd",nt)===0:!At||nt.collapsed},j=()=>{if(r.mode.isReadOnly())return!1;const nt=ae(),At=r.getBody().querySelectorAll('[data-mce-selected="1"]');return At.length>0?Ha(At,Xn=>e.isEditable(Xn.parentElement)):zF(e,nt)},oe=nt=>{const At=ae();At.collapse(!!nt),Se(At)},se=()=>t.getSelection?t.getSelection():t.document.selection,ae=()=>{let nt;const At=(Zn,sa,ke)=>{try{return sa.compareBoundaryPoints(Zn,ke)}catch{return-1}},Xn=t.document;if(ve(r.bookmark)&&!$b(r)){const Zn=tE(r);if(Zn.isSome())return Zn.map(sa=>C_(r,[sa])[0]).getOr(Xn.createRange())}try{const Zn=se();Zn&&!l0(Zn.anchorNode)&&(Zn.rangeCount>0?nt=Zn.getRangeAt(0):nt=Xn.createRange(),nt=C_(r,[nt])[0])}catch{}if(nt||(nt=Xn.createRange()),ld(nt.startContainer)&&nt.collapsed){const Zn=e.getRoot();nt.setStart(Zn,0),nt.setEnd(Zn,0)}return c&&u&&(At(nt.START_TO_START,nt,c)===0&&At(nt.END_TO_END,nt,c)===0?nt=u:(c=null,u=null)),nt},Se=(nt,At)=>{if(!XN(nt))return;const Xn=se();if(nt=r.dispatch("SetSelectionRange",{range:nt,forward:At}).range,Xn){u=nt;try{Xn.removeAllRanges(),Xn.addRange(nt)}catch{}At===!1&&Xn.extend&&(Xn.collapse(nt.endContainer,nt.endOffset),Xn.extend(nt.startContainer,nt.startOffset)),c=Xn.rangeCount>0?Xn.getRangeAt(0):null}if(!nt.collapsed&&nt.startContainer===nt.endContainer&&(Xn!=null&&Xn.setBaseAndExtent)&&nt.endOffset-nt.startOffset<2&&nt.startContainer.hasChildNodes()){const sa=nt.startContainer.childNodes[nt.startOffset];sa&&sa.nodeName==="IMG"&&(Xn.setBaseAndExtent(nt.startContainer,nt.startOffset,nt.endContainer,nt.endOffset),(Xn.anchorNode!==nt.startContainer||Xn.focusNode!==nt.endContainer)&&Xn.setBaseAndExtent(sa,0,sa,1))}r.dispatch("AfterSetSelectionRange",{range:nt,forward:At})},Oe=nt=>(jE(r,e.getOuterHTML(nt)),nt),Je=()=>y_(r.getBody(),ae()),St=(nt,At)=>VF(e,ae(),nt,At),xe=()=>{const nt=se(),At=nt==null?void 0:nt.anchorNode,Xn=nt==null?void 0:nt.focusNode;if(!nt||!At||!Xn||l0(At)||l0(Xn))return!0;const Zn=e.createRng(),sa=e.createRng();try{Zn.setStart(At,nt.anchorOffset),Zn.collapse(!0),sa.setStart(Xn,nt.focusOffset),sa.collapse(!0)}catch{return!0}return Zn.compareBoundaryPoints(Zn.START_TO_START,sa)<=0},qo={dom:e,win:t,serializer:o,editor:r,expand:(nt={type:"word"})=>Se(Od(e).expand(ae(),nt)),collapse:oe,setCursorLocation:b,getContent:v,setContent:w,getBookmark:R,moveToBookmark:I,select:U,isCollapsed:H,isEditable:j,isForward:xe,setNode:Oe,getNode:Je,getSel:se,setRng:Se,getRng:ae,getStart:k,getEnd:O,getSelectedBlocks:St,normalize:()=>{const nt=ae(),At=se();if(!Db(At)&&Gy(r)){const Xn=rE(e,nt);return Xn.each(Zn=>{Se(Zn,xe())}),Xn.getOr(nt)}return nt},selectorChanged:(nt,At)=>(f(nt,At),qo),selectorChangedWithUnbind:f,getScrollContainer:()=>{let nt,At=e.getRoot();for(;At&&At.nodeName!=="BODY";){if(At.scrollHeight>At.clientHeight){nt=At;break}At=At.parentNode}return nt},scrollIntoView:(nt,At)=>{ve(nt)?it(r,nt,At):Ji(r,ae(),At)},placeCaretAt:(nt,At)=>Se(xM(nt,At,r.getDoc())),getBoundingClientRect:()=>{const nt=ae();return nt.collapsed?Ce.fromRangeStart(nt).getClientRects()[0]:nt.getBoundingClientRect()},destroy:()=>{t=c=u=null,Ei.destroy()}},zr=Nb(qo),Ei=AF(qo,r);return qo.bookmarkManager=zr,qo.controlSelection=Ei,qo},hO=(e,t,o)=>{t.addNodeFilter("br",(r,c,u)=>{const f=He.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),v=o.getWhitespaceElements();f.body=1;const w=k=>k.name in f||vc(o,k);for(let k=0,O=r.length;k<O;k++){let R=r[k],I=R.parent;if(I&&w(I)&&R===I.lastChild){let U=R.prev;for(;U;){const H=U.name;if(H!=="span"||U.attr("data-mce-type")!=="bookmark"){H==="br"&&(R=null);break}U=U.prev}if(R&&(R.remove(),vC(o,b,v,I))){const H=o.getElementRule(I.name);H&&(H.removeEmpty?I.remove():H.paddEmpty&&vh(e,u,w,I))}}else{let U=R;for(;I&&I.firstChild===U&&I.lastChild===U&&(U=I,!f[I.name]);)I=I.parent;if(U===I){const H=new Lr("#text",3);H.value=us,R.replace(H)}}}})},JN=(e,t,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=t.url_converter,b=t.url_converter_scope;let v=r.length;for(;v--;){const w=r[v];let k=w.attr(u);k!==void 0?(w.attr(c,k.length>0?k:null),w.attr(u,null)):(k=w.attr(c),c==="style"?k=o.serializeStyle(o.parseStyle(k),w.name):f&&(k=f.call(b,k,c,w.name)),w.attr(c,k.length>0?k:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(N.from(b.firstChild).exists(w=>!bp(w.value??""))?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{const u=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=r.length;for(;f--;){const b=r[f],v=b.firstChild,w=(v==null?void 0:v.value)??"";if(c==="script"){const k=b.attr("type");k&&b.attr("type",k==="mce-no/type"?null:k.replace(/^mce\-/,"")),t.element_format==="xhtml"&&v&&w.length>0&&(v.value=`// <![CDATA[
`+u(w)+`
// ]]>`)}else t.element_format==="xhtml"&&v&&w.length>0&&(v.value=`<!--
`+u(w)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;t.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{le(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.remove_trailing_brs&&hO(t,e,e.schema)},r4=e=>{const t=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(t(o)){const r=o.prev;t(r)&&(o.remove(),r.remove())}},hV=(e,t,o)=>{let r;const c=e.dom;let u=t.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");He.each(u.nodeName==="BODY"?u.childNodes:[u],v=>{b.body.appendChild(b.importNode(v,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return J0(e,{...o,node:u}),r&&(c.doc=r),u},pV=(e,t)=>ve(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,bV=(e,t,o)=>pV(e,o)?hV(e,t,o):t,vV=(e,t,o)=>{He.inArray(t,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.push(o))},yV=(e,t,o)=>!t.no_events&&e?cy(e,{...t,content:o}).content:o,QN=(e,t,o)=>{const r=Ya(o.getInner?t.innerHTML:e.getOuterHTML(t));return o.selection||M0(q.fromDom(t))?r:He.trim(r)},CV=(e,t,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(t,r);return r4(c),c},SV=(e,t,o)=>fh(e,t).serialize(o),eP=(e,t,o,r,c)=>{const u=SV(t,o,r);return yV(e,c,u)},wV=(e,t)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=t&&t.dom?t.dom:_n.DOM,u=t&&t.schema?t.schema:Nr(r),f=Zb(r,u);JN(f,r,c);const b=(v,w={})=>{const{indent:k,entity_encoding:O,...R}=w,I={format:"html",...R},U=bV(t,v,I),H=QN(c,U,I),j=CV(f,H,I);if(I.format==="tree")return j;const oe={...r,...ve(k)?{indent:k}:{},...ve(O)?{entity_encoding:O}:{}};return eP(t,oe,u,j,I)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Me(vV,f,o),getTempAttrs:Xe(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},pO=(e,t)=>{const o=wV(e,t);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},LC="html",xV=(e,t)=>({...e,format:t,get:!0,getInner:!0}),EV=(e,t={})=>{const o=t.format?t.format:LC,r=xV(t,o);return qB(e,r).fold(Yo,c=>{const u=Mo(e,c);return TC(e,u,c)})},tP="html",nP=(e,t)=>({format:tP,...e,set:!0,content:t}),bO=(e,t,o={})=>{const r=nP(o,t);kC(e,r).each(c=>{const u=gV(e,c.content,c);IA(e,u.html,c)})},FC=_n.DOM,Pa=e=>{FC.setStyle(e.id,"display",e.orgDisplay)},a4=e=>N.from(e).each(t=>t.destroy()),oP=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const o=e.selection;if(o){const r=o.dom;t.selection=o.win=o.dom=r.doc=null}},vO=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),FC.unbind(t,"submit reset",e.formEventDelegate))},yO=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ve(c==null?void 0:c.nextSibling)&&FC.remove(c.nextSibling),iy(e),e.editorManager.remove(e),!e.inline&&r&&Pa(e),Gw(e),FC.remove(e.getContainer()),a4(t),a4(o),e.destroy()}},sP=(e,t)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),a4(o),a4(r)),vO(e),oP(e),e.destroyed=!0}},c4=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>Yt(e,c)}})(),Qb=sr.ModelManager,CO=(e,t)=>t.dom[e],SO=(e,t)=>parseInt(Ts(t,e),10),nl=Me(CO,"clientWidth"),kV=Me(CO,"clientHeight"),_V=Me(SO,"margin-top"),VY=Me(SO,"margin-left"),wO=e=>e.dom.getBoundingClientRect(),AV=(e,t,o)=>{const r=nl(e),c=kV(e);return t>=0&&o>=0&&t<=r&&o<=c},UY=(e,t,o,r)=>{const c=wO(t),u=e?c.left+t.dom.clientLeft+VY(t):0,f=e?c.top+t.dom.clientTop+_V(t):0,b=o-u,v=r-f;return{x:b,y:v}},OV=(e,t,o)=>{const r=q.fromDom(e.getBody()),c=e.inline?r:er(r),u=UY(e.inline,c,t,o);return AV(c,u.x,u.y)},xO=e=>N.from(e).map(q.fromDom),Vu=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return xO(t).map(fo).getOr(!1)};var EO=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const HC=e=>{const t=[],o=()=>{const R=e.theme;return R&&R.getNotificationManagerImpl?R.getNotificationManagerImpl():EO()},r=()=>N.from(t[0]),c=(R,I)=>R.type===I.type&&R.text===I.text&&!R.progressBar&&!R.timeout&&!I.progressBar&&!I.timeout,u=()=>{r().each(R=>{R.reposition()})},f=R=>{t.push(R)},b=R=>{il(t,I=>I===R).each(I=>{t.splice(I,1)})},v=(R,I=!0)=>e.removed||!Vu(e)?{}:(I&&e.dispatch("BeforeOpenNotification",{notification:R}),so(t,U=>c(o().getArgs(U),R)).getOrThunk(()=>{e.editorManager.setActive(e);const U=o().open(R,()=>{b(U)},()=>CM(e));return f(U),u(),e.dispatch("OpenNotification",{notification:{...U}}),U})),w=()=>{r().each(R=>{o().close(R),b(R),u()})},k=Xe(t);return(R=>{R.on("SkinLoaded",()=>{const I=Cy(R);I&&v({text:I,type:"warning",timeout:0},!1),u()}),R.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),R.on("remove",()=>{le(t.slice(),I=>{o().close(I)})}),R.on("keydown",I=>{var H;const U=((H=I.key)==null?void 0:H.toLowerCase())==="f12"||I.keyCode===123;I.altKey&&U&&(I.preventDefault(),r().map(j=>q.fromDom(j.getEl())).each(j=>q1(j)))})})(e),{open:v,close:w,getNotifications:k}},Eh=sr.PluginManager,u1=sr.ThemeManager;var TO=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const rP=e=>{let t=[];const o=()=>{const j=e.theme;return j&&j.getWindowManagerImpl?j.getWindowManagerImpl():TO()},r=(j,oe)=>(...se)=>oe?oe.apply(j,se):void 0,c=j=>{e.dispatch("OpenWindow",{dialog:j})},u=j=>{e.dispatch("CloseWindow",{dialog:j})},f=(j,oe)=>{t.push({instanceApi:j,triggerElement:oe}),c(j)},b=j=>{u(j);const oe=cc(t,({instanceApi:se,triggerElement:ae})=>se===j?ae:N.none());t=ge(t,({instanceApi:se})=>se!==j),t.length===0?e.focus():oe.filter(fo).each(q1)},v=()=>N.from(t[t.length-1]),w=j=>{e.editorManager.setActive(e),eE(e);const oe=xl();e.ui.show();const se=j();return f(se,oe),se},k=(j,oe)=>w(()=>o().open(j,oe,b)),O=j=>w(()=>o().openUrl(j,b)),R=j=>{t.length!==0&&j.each(oe=>q1(oe))},I=(j,oe,se)=>{const ae=xl(),Se=o();Se.alert(j,r(se||Se,()=>{R(ae),oe==null||oe()}))},U=(j,oe,se)=>{const ae=xl(),Se=o();Se.confirm(j,r(se||Se,Oe=>{R(ae),oe==null||oe(Oe)}))},H=()=>{v().each(({instanceApi:j})=>{o().close(j),b(j)})};return e.on("remove",()=>{le(t,({instanceApi:j})=>{o().close(j)})}),{open:k,openUrl:O,alert:I,confirm:U,close:H}},kO=(e,t)=>{e.notificationManager.open({type:"error",text:t})},i4=(e,t)=>{e._skinLoaded?kO(e,t):e.on("SkinLoaded",()=>{kO(e,t)})},DV=(e,t)=>{i4(e,Sc.translate(["Failed to upload image: {0}",t]))},Xf=(e,t,o)=>{Q0(e,t,{message:o}),console.error(o)},d1=(e,t,o)=>o?`Failed to load ${e}: ${o} from url ${t}`:`Failed to load ${e} url: ${t}`,aP=(e,t,o)=>{Xf(e,"PluginLoadError",d1("plugin",t,o))},RV=(e,t,o)=>{Xf(e,"IconsLoadError",d1("icons",t,o))},m1=(e,t,o)=>{Xf(e,"LanguageLoadError",d1("language",t,o))},cP=(e,t,o)=>{Xf(e,"ThemeLoadError",d1("theme",t,o))},MV=(e,t,o)=>{Xf(e,"ModelLoadError",d1("model",t,o))},iP=(e,t)=>{Xf(e,"LicenseKeyManagerLoadError",d1("license key manager",t))},BV=(e,t)=>{Xf(e,"ComponentLoadError",d1("component",t))},NV=(e,t,o)=>{const r=Sc.translate(["Failed to initialize plugin: {0}",t]);Q0(e,"PluginLoadError",{message:r}),l4(r,o),i4(e,r)},l4=(e,...t)=>{const o=window.console;o&&(o.error?o.error(e,...t):o.log(e,...t))},lP=new WeakMap,PV=e=>{if(lP.has(e))return;lP.set(e,!0);const t=()=>{e.on("SwitchMode",r=>{const{mode:c}=r;c!=="readonly"&&e.mode.set("readonly")})},o=()=>{e.on("DisabledStateChange",r=>{const{state:c}=r;c||r.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),o(),t()},_O=(e,t)=>{const{type:o,message:r}=t;e.notificationManager.open({type:o,text:r})},$V=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},AO=e=>{$V(e.type)(e.message)},Hm=(e,t)=>{const{console:o,editor:r}=t;ve(r)&&(e._skinLoaded?_O(e,r):e.on("SkinLoaded",()=>{_O(e,r)})),ve(o)&&AO(o)},OO="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",zC="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",uP=e=>{const t="The editor is disabled because a TinyMCE license key has not been provided.";Hm(e,{console:{type:"error",message:[`${t}`,zC,OO].join(" ")},editor:{type:"warning",message:`${t}`}})},dP=(e,t)=>{const o=`${t==="online"?"API":"license"} key`,r=`The editor is disabled because the TinyMCE ${o} could not be validated.`;Hm(e,{console:{type:"error",message:[`${r}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${o} to be validated but could not be loaded.`,OO].join(" ")},editor:{type:"warning",message:`${r}`}})},mP=(e,t,o)=>{const r=`The "${t}" plugin requires a valid TinyMCE license key.`;Hm(e,{console:{type:"error",message:[`${r}`,OO].join(" ")},...o?{}:{editor:{type:"warning",message:"One or more premium plugins are disabled due to license key restrictions."}}})},VC="licensekeymanager",fP=e=>Y(Zp(e))?"online":"offline",IV=e=>{var o;const t=(o=Ax(e))==null?void 0:o.toLowerCase();return t==="gpl"?"gpl":gn(t)?"no_key":"non_gpl"},DO=e=>{const t=fP(e),o=IV(e),r=new Set([...Fp(e),...bt(xy(e))]).has(VC);return o!=="gpl"||t==="online"||r?{type:"use_plugin",onlineStatus:t,licenseKeyType:o,forcePlugin:r}:{type:"use_gpl",onlineStatus:t,licenseKeyType:o,forcePlugin:r}},gP=e=>t=>{let o=!1;return{validate:r=>{const{plugin:c}=r,u=Y(c);return u&&(mP(t,c,o),o=!0),Promise.resolve(e&&!u)}}},LV=gP(!1),u4=gP(!0),UC="manager",RO=VC,BO=(()=>{const e=sr();return{load:(c,u)=>{if(DO(c).type==="use_plugin"){const v=wo(xy(c),RO).map(ls).filter(Jo).getOr(`plugins/${RO}/plugin${u}.js`);e.load(UC,v).catch(()=>{iP(c,v)})}},add:c=>{e.add(UC,c)},init:c=>{const u=v=>{Object.defineProperty(c,"licenseKeyManager",{value:v,writable:!1,configurable:!1,enumerable:!0})},f=DO(c),b=e.get(UC);if(ve(b)){const v=b(c,e.urls[UC]);u(v)}else switch(f.type){case"use_gpl":{u(u4(c));break}case"use_plugin":{PV(c),u(LV(c)),f.onlineStatus==="offline"&&f.licenseKeyType==="no_key"?uP(c):dP(c,f.onlineStatus);break}}c.licenseKeyManager.validate({})}}})(),FV=e=>{N.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},NO=(e,t,o)=>{try{e.getDoc().execCommand(t,!1,String(o))}catch{}},hP=(e,t)=>{NO(e,"StyleWithCSS",t),NO(e,"enableInlineTableEditing",t),NO(e,"enableObjectResizing",t)},PO=e=>{e.selection.setRng(e.selection.getRng())},pP=(e,t,o)=>{e0(e,t)&&!o?ur(e,t):o&&Hc(e,t)},$O=e=>{const t=q.fromDom(e.getBody());pP(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),FV(e)},bP=e=>{const t=q.fromDom(e.getBody());pP(t,"mce-content-readonly",!1),e.hasEditableRoot()&&ff(t,!0),hP(e,!1),CM(e)&&e.focus(),PO(e),e.nodeChanged()},Jf=e=>Yi(e),f1="data-mce-contenteditable",ZC=e=>{le(Br(e,'*[contenteditable="true"]'),t=>{ds(t,f1,"true"),ff(t,!1)})},Ld=e=>{le(Br(e,`*[${f1}="true"]`),t=>{Ks(t,f1),ff(t,!0)})},vP=(e,t)=>{const o=q.fromDom(e.getBody());t?($O(e),ff(o,!1),ZC(o)):(Ld(o),bP(e))},IO=e=>{e.serializer?Ss(e):e.on("PreInit",()=>{Ss(e)})},Ss=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Jf(e)&&le(t,o=>{o.attr(f1,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(f1,t=>{Jf(e)&&le(t,o=>{o.attr("contenteditable",o.attr(f1))})}),e.serializer.addTempAttr(f1)},LO=e=>e.type==="click",d4=["copy"],Qf=e=>vt(d4,e.type),yP=(e,t)=>qr(t,"a",r=>En(r,q.fromDom(e.getBody()))).bind(r=>Pi(r,"href")),FO=(e,t)=>r2(t,"details",r=>En(r,q.fromDom(e.getBody()))),HV=(e,t)=>{if(LO(t)&&!ct.metaKeyPressed(t)){const o=q.fromDom(t.target);yP(e,o).fold(()=>{FO(e,o)&&t.preventDefault()},r=>{if(t.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${fg(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Qf(t)&&e.dispatch(t.type,t)},ev=e=>{e.on("ShowCaret ObjectSelected",t=>{Jf(e)&&t.preventDefault()}),e.on("DisabledStateChange",t=>{t.isDefaultPrevented()||vP(e,t.state)})},zV=e=>{IO(e),ev(e)},VV=e=>/^[a-z0-9\-]+$/i.test(e),Th=e=>"content/"+e+"/content.css",UV=e=>tinymce.Resource.has(Th(e)),g1=e=>eg(e,yk(e)),ZV=e=>eg(e,vy(e)),eg=(e,t)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Mt(t,u=>UV(u)?u:VV(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},WV=e=>{e.contentCSS=e.contentCSS.concat(g1(e),ZV(e))},Zl=e=>e?Fo(e.getElementsByTagName("img")):[],h1=(e,t)=>{const o={};return{findAll:(c,u=et)=>{const f=ge(Zl(c),v=>{const w=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!w||w===Fn.transparentSrc?!1:Wt(w,"blob:")?!e.isUploaded(w)&&u(v):Wt(w,"data:")?u(v):!1}),b=Mt(f,v=>{const w=v.src;if(Yt(o,w))return o[w].then(k=>Y(k)?k:{image:v,blobInfo:k.blobInfo});{const k=CA(t,w).then(O=>(delete o[w],{image:v,blobInfo:O})).catch(O=>(delete o[w],O));return o[w]=k,k}});return Promise.all(b)}}},CP=()=>{let o={};const r=(R,I)=>({status:R,resultUri:I}),c=R=>R in o;return{hasBlobUri:c,getResultUri:R=>{const I=o[R];return I?I.resultUri:null},isPending:R=>c(R)?o[R].status===1:!1,isUploaded:R=>c(R)?o[R].status===2:!1,markPending:R=>{o[R]=r(1,null)},markUploaded:(R,I)=>{o[R]=r(2,I)},removeFailed:R=>{delete o[R]},destroy:()=>{o={}}}};let WC=0;const HO=()=>{const e=()=>Math.round(dl()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},jV=e=>e+WC+++HO(),tv=()=>{let e=[];const t=O=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[O.toLowerCase()]||"dat",o=(O,R,I,U,H)=>{if(Y(O))return r({id:O,name:U,filename:H,blob:R,base64:I});if(tn(O))return r(O);throw new Error("Unknown input type")},r=O=>{if(!O.blob||!O.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const R=O.id||jV("blobid"),I=O.name||R,U=O.blob;return{id:Xe(R),name:Xe(I),filename:Xe(O.filename||I+"."+t(U.type)),blob:Xe(U),base64:Xe(O.base64),blobUri:Xe(O.blobUri||URL.createObjectURL(U)),uri:Xe(O.uri)}},c=O=>{f(O.id())||e.push(O)},u=O=>so(e,O).getOrUndefined(),f=O=>u(R=>R.id()===O);return{create:o,add:c,get:f,getByUri:O=>u(R=>R.blobUri()===O),getByData:(O,R)=>u(I=>I.base64()===O&&I.blob().type===R),findFirst:u,removeByUri:O=>{e=ge(e,R=>R.blobUri()===O?(URL.revokeObjectURL(R.blobUri()),!1):!0)},destroy:()=>{le(e,O=>{URL.revokeObjectURL(O.blobUri())}),e=[]}}},GV=(e,t)=>{const o={},r=(H,j)=>H?H.replace(/\/$/,"")+"/"+j.replace(/^\//,""):j,c=(H,j)=>new Promise((oe,se)=>{const ae=new XMLHttpRequest;ae.open("POST",t.url),ae.withCredentials=t.credentials,ae.upload.onprogress=Oe=>{j(Oe.loaded/Oe.total*100)},ae.onerror=()=>{se("Image upload failed due to a XHR Transport error. Code: "+ae.status)},ae.onload=()=>{if(ae.status<200||ae.status>=300){se("HTTP Error: "+ae.status);return}const Oe=JSON.parse(ae.responseText);if(!Oe||!Y(Oe.location)){se("Invalid JSON: "+ae.responseText);return}oe(r(t.basePath,Oe.location))};const Se=new FormData;Se.append("file",H.blob(),H.filename()),ae.send(Se)}),u=ne(t.handler)?t.handler:c,f=()=>new Promise(H=>{H([])}),b=(H,j)=>({url:j,blobInfo:H,status:!0}),v=(H,j)=>({url:"",blobInfo:H,status:!1,error:j}),w=(H,j)=>{He.each(o[H],oe=>{oe(j)}),delete o[H]},k=(H,j,oe)=>(e.markPending(H.blobUri()),new Promise(se=>{let ae,Se;try{const Oe=()=>{ae&&(ae.close(),Se=Dt)},Je=xe=>{Oe();const me=Y(xe)?xe:xe.url;e.markUploaded(H.blobUri(),me),w(H.blobUri(),b(H,me)),se(b(H,me))},St=xe=>{Oe(),e.removeFailed(H.blobUri()),w(H.blobUri(),v(H,xe)),se(v(H,xe))};Se=xe=>{xe<0||xe>100||N.from(ae).orThunk(()=>N.from(oe).map(Io)).each(me=>{ae=me,me.progressBar.value(xe)})},j(H,Se).then(Je,xe=>{St(Y(xe)?{message:xe}:xe)})}catch(Oe){se(v(H,Oe))}})),O=H=>H===c,R=H=>{const j=H.blobUri();return new Promise(oe=>{o[j]=o[j]||[],o[j].push(oe)})},I=(H,j)=>(H=He.grep(H,oe=>!e.isUploaded(oe.blobUri())),Promise.all(He.map(H,oe=>e.isPending(oe.blobUri())?R(oe):k(oe,u,j))));return{upload:(H,j)=>!t.url&&O(u)?f():I(H,j)}},Wl=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),jC=(e,t)=>GV(t,{url:cb(e),basePath:by(e),credentials:bk(e),handler:fx(e)}),SP=e=>{const t=CP(),o=jC(e,t);return{upload:(r,c=!0)=>o.upload(r,c?Wl(e):void 0)}},zO=(e,t)=>e.dom.isEmpty(t.dom)&&ve(e.schema.getTextBlockElements()[mn(t)]),VO=e=>t=>{zO(e,t)&&Hn(t,q.fromHtml('<br data-mce-bogus="1" />'))},p1=e=>{const t=tv();let o,r;const c=CP(),u=[],f=ae=>Se=>e.selection?ae(Se):[],b=ae=>ae+(ae.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(ae,Se,Oe)=>{let Je=0;do Je=ae.indexOf(Se,Je),Je!==-1&&(ae=ae.substring(0,Je)+Oe+ae.substr(Je+Se.length),Je+=Oe.length-Se.length+1);while(Je!==-1);return ae},w=(ae,Se,Oe)=>{const Je=`src="${Oe}"${Oe===Fn.transparentSrc?' data-mce-placeholder="1"':""}`;return ae=v(ae,`src="${Se}"`,Je),ae=v(ae,'data-mce-src="'+Se+'"','data-mce-src="'+Oe+'"'),ae},k=(ae,Se)=>{le(e.undoManager.data,Oe=>{Oe.type==="fragmented"?Oe.fragments=Mt(Oe.fragments,Je=>w(Je,ae,Se)):Oe.content=w(Oe.content,ae,Se)})},O=(ae,Se)=>{const Oe=e.convertURL(Se,"src");k(ae.src,Se),Rr(q.fromDom(ae),{src:dx(e)?b(Se):Se,"data-mce-src":Oe})},R=()=>(o||(o=jC(e,c)),j().then(f(ae=>{const Se=Mt(ae,Oe=>Oe.blobInfo);return o.upload(Se,Wl(e)).then(f(Oe=>{const Je=[];let St=!1;const xe=Mt(Oe,(me,Ee)=>{const{blobInfo:Qe,image:It}=ae[Ee];let Lt=!1;return me.status&&mx(e)?(me.url&&!xs(It.src,me.url)&&(St=!0),t.removeByUri(It.src),$d(e)||O(It,me.url)):me.error&&(me.error.remove&&(k(It.src,Fn.transparentSrc),Je.push(It),Lt=!0),DV(e,me.error.message)),{element:It,status:me.status,uploadUri:me.url,blobInfo:Qe,removed:Lt}});return Je.length>0&&!$d(e)?e.undoManager.transact(()=>{le(df(Je),me=>{const Ee=Lc(me);Ao(me),Ee.each(VO(e)),t.removeByUri(me.dom.src)})}):St&&e.undoManager.dispatchChange(),xe}))}))),I=()=>hy(e)?R():Promise.resolve([]),U=ae=>Ha(u,Se=>Se(ae)),H=ae=>{u.push(ae)},j=()=>(r||(r=h1(c,t)),r.findAll(e.getBody(),U).then(f(ae=>{const Se=ge(ae,Oe=>Y(Oe)?(i4(e,Oe),!1):Oe.uriType!=="blob");return $d(e)||le(Se,Oe=>{k(Oe.image.src,Oe.blobInfo.blobUri()),Oe.image.src=Oe.blobInfo.blobUri(),Oe.image.removeAttribute("data-mce-src")}),Se}))),oe=()=>{t.destroy(),c.destroy(),r=o=null},se=ae=>ae.replace(/src="(blob:[^"]+)"/g,(Se,Oe)=>{const Je=c.getResultUri(Oe);if(Je)return'src="'+Je+'"';let St=t.getByUri(Oe);return St||(St=cn(e.editorManager.get(),(xe,me)=>xe||me.editorUpload&&me.editorUpload.blobCache.getByUri(Oe),void 0)),St?'src="data:'+St.blob().type+";base64,"+St.base64()+'"':Se});return e.on("SetContent",()=>{hy(e)?I():j()}),e.on("RawSaveContent",ae=>{ae.content=se(ae.content)}),e.on("GetContent",ae=>{ae.source_view||ae.format==="raw"||ae.format==="tree"||(ae.content=se(ae.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ae=>{le(ae,Se=>{const Oe=Se.attr("src");if(!Oe||t.getByUri(Oe))return;const Je=c.getResultUri(Oe);Je&&Se.attr("src",Je)})})}),{blobCache:t,addFilter:H,uploadImages:R,uploadImagesAuto:I,scanForImages:j,destroy:oe}},UO=e=>{const t=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"},remove_similar:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Ye(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{He.each(f,(b,v)=>{t.setAttrib(c,v,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>(c==null?void 0:c.customValue)??null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return He.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},wP={remove_similar:!0,inherit:!1},nv={selector:"td,th",...wP},qV={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...nv},tablecellverticalalign:{styles:{"vertical-align":"%value"},...nv},tablecellbordercolor:{styles:{borderColor:"%value"},...nv},tablecellclass:{classes:["%value"],...nv},tableclass:{selector:"table",classes:["%value"],...wP},tablecellborderstyle:{styles:{borderStyle:"%value"},...nv},tablecellborderwidth:{styles:{borderWidth:"%value"},...nv}},KV=Xe(qV),YV=e=>{const t={},o=f=>ve(f)?t[f]:t,r=f=>Yt(t,f),c=(f,b)=>{f&&(Y(f)?(dn(b)||(b=[b]),le(b,v=>{as(v.deep)&&(v.deep=!Du(v)),as(v.split)&&(v.split=!Du(v)||ta(v)),as(v.remove)&&Du(v)&&!ta(v)&&(v.remove="none"),Du(v)&&ta(v)&&(v.mixed=!0,v.block_expand=!0),Y(v.classes)&&(v.classes=v.classes.split(/\s+/))}),t[f]=b):hn(f,(v,w)=>{c(w,v)}))},u=f=>(f&&t[f]&&delete t[f],t);return c(UO(e)),c(KV()),c(Ek(e)),{get:o,has:r,register:c,unregister:u}},m4=He.each,tc=_n.DOM,jl=e=>ve(e)&&tn(e),xP=(e,t)=>{const o=t&&t.schema||Nr({}),r=(v,w)=>{w.classes.length>0&&tc.addClass(v,w.classes.join(" ")),tc.setAttribs(v,w.attrs)},c=v=>{const w=Y(v)?{name:v,classes:[],attrs:{}}:v,k=tc.create(w.name);return r(k,w),k},u=(v,w)=>{const k=o.getElementRule(v.nodeName.toLowerCase()),O=k==null?void 0:k.parentsRequired;return O&&O.length?w&&vt(O,w)?w:O[0]:!1},f=(v,w,k)=>{let O;const R=w[0],I=jl(R)?R.name:void 0,U=u(v,I);if(U)I===U?(O=R,w=w.slice(1)):O=U;else if(R)O=R,w=w.slice(1);else if(!k)return v;const H=O?c(O):tc.create("div");H.appendChild(v),k&&He.each(k,oe=>{const se=c(oe);H.insertBefore(se,v)});const j=jl(O)?O.siblings:void 0;return f(H,w,j)},b=tc.create("div");if(e.length>0){const v=e[0],w=c(v),k=jl(v)?v.siblings:void 0;b.appendChild(f(w,e.slice(1),k))}return b},XV=e=>{e=He.trim(e);let t="div";const o={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":He.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const v=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=t||"div",o},JV=e=>Y(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),He.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const o=He.map(t.split(/(?:~\+|~|\+)/),XV),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],QV=(e,t)=>{let o="",r=Tk(e);if(r==="")return"";const c=R=>Y(R)?R.replace(/%(\w+)/g,""):"",u=(R,I)=>tc.getStyle(I??e.getBody(),R,!0);if(Y(t)){const R=e.formatter.get(t);if(!R)return"";t=R[0]}if("preview"in t){const R=t.preview;if(R===!1)return"";r=R||r}let f=t.block||t.inline||"span",b;const v=JV(t.selector);v.length>0?(v[0].name||(v[0].name=f),f=t.selector,b=xP(v,e)):b=xP([f],e);const w=tc.select(f,b)[0]||b.firstChild;m4(t.styles,(R,I)=>{const U=c(R);U&&tc.setStyle(w,I,U)}),m4(t.attributes,(R,I)=>{const U=c(R);U&&tc.setAttrib(w,I,U)}),m4(t.classes,R=>{const I=c(R);tc.hasClass(w,I)||tc.addClass(w,I)}),e.dispatch("PreviewFormats"),tc.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const k=u("fontSize"),O=/px$/.test(k)?parseInt(k,10):0;return m4(r.split(" "),R=>{let I=u(R,w);if(!(R==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(I)&&(I=u(R),bi(I).toLowerCase()==="#ffffff"))&&!(R==="color"&&bi(I).toLowerCase()==="#000000")){if(R==="font-size"&&/em|%$/.test(I)){if(O===0)return;I=parseFloat(I)/(/%$/.test(I)?100:1)*O+"px"}R==="border"&&I&&(o+="padding:0 2px;"),o+=R+":"+I+";"}}),e.dispatch("AfterPreviewFormats"),tc.remove(b),o},eU=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},EP=e=>{const t=YV(e),o=Nt({});return eU(e),j6(e),$d(e)||qE(o,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,c,u)=>{wi(e,r,c,u)},remove:(r,c,u,f)=>{$C(e,r,c,u,f)},toggle:(r,c,u)=>{xi(e,r,c,u)},match:(r,c,u,f)=>GN(e,r,c,u,f),closest:r=>Id(e,r),matchAll:(r,c)=>PC(e,r,c),matchNode:(r,c,u,f)=>dV(e,r,c,u,f),canApply:r=>mV(e,r),formatChanged:(r,c,u,f)=>fV(e,o,r,c,u,f),getCssText:Me(QV,e)}},TP=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},tU=(e,t,o)=>{const r=Nt(!1),c=v=>{wh(t,!1,o),t.add({},v)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",v=>{const w=v.command;TP(w)||(t4(t,o),t.beforeChange())}),e.on("ExecCommand",v=>{const w=v.command;TP(w)||c(v)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",v=>{const w=v.keyCode;if(v.isDefaultPrevented())return;const k=Fn.os.isMacOS()&&v.key==="Meta";(w>=33&&w<=36||w>=37&&w<=40||w===45||v.ctrlKey||k)&&(c(),e.nodeChanged()),(w===46||w===8)&&e.nodeChanged(),r.get()&&t.typing&&!Yb(e.readonly,RC(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const w=v.keyCode;if(v.isDefaultPrevented())return;if(w>=33&&w<=36||w>=37&&w<=40||w===45){t.typing&&c(v);return}const k=v.ctrlKey&&!v.altKey||v.metaKey;if((w<16||w>20)&&w!==224&&w!==91&&!t.typing&&!k){t.beforeChange(),wh(t,!0,o),t.add({},v),r.set(!0);return}(Fn.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&t.beforeChange()}),e.on("mousedown",v=>{t.typing&&c(v)});const u=v=>v.inputType==="insertReplacementText",f=v=>v.inputType==="insertText"&&v.data===null,b=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(u(v)||f(v)||b(v))&&c(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},nU=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},oU=e=>{const t=Bc(),o=Nt(0),r=Nt(0),c={data:[],typing:!1,beforeChange:()=>{zu(e,o,t)},add:(u,f)=>WN(e,c,r,o,t,u,f),dispatchChange:()=>{e.setDirty(!0);const u=RC(e);u.bookmark=Jg(e.selection),e.dispatch("change",{level:u,lastLevel:Ur(c.data,r.get()).getOrUndefined()})},undo:()=>lO(e,c,o,r),redo:()=>uO(e,r,c.data),clear:()=>{n4(e,c,r)},reset:()=>{lV(e,c)},hasUndo:()=>jN(e,c,r),hasRedo:()=>NC(e,c,r),transact:u=>uV(e,c,o,u),ignore:u=>{o4(e,o,u)},extra:(u,f)=>{dO(e,c,r,u,f)}};return $d(e)||tU(e,c,o),nU(e),c},sU=[9,27,ct.HOME,ct.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ct.DOWN,ct.UP,ct.LEFT,ct.RIGHT].concat(Fn.browser.isFirefox()?[224]:[]),kP="data-mce-placeholder",_P=e=>e.type==="keydown"||e.type==="keyup",AP=e=>{const t=e.keyCode;return t===ct.BACKSPACE||t===ct.DELETE},rU=e=>{if(_P(e)){const t=e.keyCode;return!AP(e)&&(ct.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||vt(sU,t))}else return!1},aU=e=>_P(e)&&!(AP(e)||e.type==="keyup"&&e.keyCode===229),kh=(e,t,o)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){const r=t.firstElementChild;return r?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},cU=e=>{const t=e.dom,o=zs(e),r=yy(e)??"",c=(u,f)=>{if(rU(u))return;const b=e.getBody(),v=aU(u)?!1:kh(t,b,o);(t.getAttrib(b,kP)!==""!==v||f)&&(t.setAttrib(b,kP,v?r:null),uy(e,v),e.on(v?"keydown":"keyup",c),e.off(v?"keyup":"keydown",c))};Jo(r)&&e.on("init",u=>{c(u,!0),e.on("change SetContent ExecCommand",c),e.on("paste",f=>Bu.setEditorTimeout(e,()=>c(f)))})},iU=e=>t=>ve(t)&&t.nodeName.toLowerCase()===e,ov=e=>t=>ve(t)&&e.test(t.nodeName),Fd=e=>ve(e)&&e.nodeType===3,f4=e=>ve(e)&&e.nodeType===1,Gl=ov(/^(OL|UL|DL)$/),lU=ov(/^(OL|UL)$/),g4=ov(/^(LI|DT|DD)$/),uU=ov(/^(DT|DD)$/),b1=iU("br"),dU=e=>{var t;return((t=e.parentNode)==null?void 0:t.firstChild)===e},ZO=(e,t)=>ve(t)&&t.nodeName in e.schema.getTextBlockElements(),WO=(e,t)=>ve(e)&&e.nodeName in t,mU=(e,t)=>ve(t)&&t.nodeName in e.schema.getVoidElements(),fU=(e,t)=>b1(t)?e.isBlock(t.nextSibling)&&!b1(t.previousSibling):!1,v1=(e,t,o)=>{const r=e.isEmpty(t);return o&&e.select("span[data-mce-type=bookmark]",t).length>0?!1:r},OP=(e,t)=>e.isChildOf(t,e.getRoot()),DP=_n.DOM,gU=(e,t)=>{const o=t.parentElement;if(o&&o.nodeName==="LI"&&o.firstChild===t){const r=o.previousSibling;r&&r.nodeName==="LI"?(r.appendChild(t),v1(e,o)&&DP.remove(o)):DP.setStyle(o,"listStyleType","none")}if(Gl(o)){const r=o.previousSibling;r&&r.nodeName==="LI"&&r.appendChild(t)}},jO=(e,t)=>{const o=He.grep(e.select("ol,ul",t));He.each(o,r=>{gU(e,r)})},RP=(e,t)=>{if(Fd(e))return{container:e,offset:t};const o=Od.getNode(e,t);return Fd(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&Fd(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&Fd(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},GO=e=>{const t=e.cloneRange(),o=RP(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=RP(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},MP=["OL","UL","DL"],BP=MP.join(","),GC=(e,t)=>{const o=e.selection.getStart(!0);return e.dom.getParent(o,BP,qC(e,o))},NP=(e,t)=>ve(e)&&t.length===1&&t[0]===e,hU=e=>ge(e.querySelectorAll(BP),Gl),pU=e=>{const t=GC(e),o=e.selection.getSelectedBlocks();return NP(t,o)?hU(t):ge(o,r=>Gl(r)&&t!==r)},bU=(e,t)=>{const o=He.map(t,r=>{const c=e.dom.getParent(r,"li,dd,dt",qC(e,r));return c||r});return ic(o)},qO=e=>{const t=e.selection.getSelectedBlocks();return ge(bU(e,t),g4)},vU=e=>ge(qO(e),uU),KO=(e,t)=>{const o=e.dom.getParents(t,"TD,TH");return o.length>0?o[0]:e.getBody()},yU=(e,t)=>!Gl(t)&&!g4(t)&&jn(MP,o=>e.isValidChild(t.nodeName,o)),qC=(e,t)=>{const o=e.dom.getParents(t,e.dom.isBlock),r=u=>u.nodeName.toLowerCase()!==zs(e);return so(o,u=>r(u)&&yU(e.schema,u)).getOr(e.getBody())},PP=e=>Lc(e).exists(t=>g4(t.dom)&&_r(t).exists(o=>!Gl(o.dom))&&qs(t).exists(o=>!Gl(o.dom))),$P=(e,t)=>{const o=e.dom.getParents(t,"ol,ul",qC(e,t));return js(o)},CU=e=>{const t=$P(e,e.selection.getStart()),o=ge(e.selection.getSelectedBlocks(),lU);return t.toArray().concat(o)},SU=e=>{const t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",qC(e,t))},wU=e=>{const t=CU(e),o=SU(e);return so(o,r=>PP(q.fromDom(r))).fold(()=>xU(e,t),r=>[r])},xU=(e,t)=>{const o=Mt(t,r=>$P(e,r).getOr(r));return ic(o)},h4=e=>/\btox\-/.test(e.className),IP=(e,t)=>t!==null&&!e.dom.isEditable(t),EU=e=>{const t=GC(e);return IP(e,t)||!e.selection.isEditable()},YO=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return IP(e,o)||!e.selection.isEditable()},_h=(e,t,o)=>e.dispatch("ListMutation",{action:t,element:o}),XO=(e,t,o={})=>{const r=e.dom,c=e.schema.getBlockElements(),u=r.createFragment(),f=zs(e),b=Ki(e);let v,w,k=!1;for(w=r.create(f,{...b,...o.style?{style:o.style}:{}}),WO(t.firstChild,c)||u.appendChild(w);v=t.firstChild;){const O=v.nodeName;!k&&(O!=="SPAN"||v.getAttribute("data-mce-type")!=="bookmark")&&(k=!0),WO(v,c)?(u.appendChild(v),w=null):(w||(w=r.create(f,b),u.appendChild(w)),w.appendChild(v))}return!k&&w&&w.appendChild(r.create("br",{"data-mce-bogus":"1"})),u},sv=e=>W1(e,"OL,UL"),WY=e=>W1(e,"LI"),JO=e=>_r(e).exists(sv),TU=e=>qs(e).exists(sv),LP=(e,t)=>My(e).map(o=>o>=t).getOr(!0),y1=e=>"listAttributes"in e,FP=e=>"isComment"in e,kU=e=>"isFragment"in e,HP=e=>e.depth>0,_U=e=>e.isSelected,AU=e=>{const t=vs(e),o=TU(e)?t.slice(0,-1):t;return Mt(o,Wh)},QO=(e,t,o)=>Lc(e).filter(bs).map(r=>({depth:t,dirty:!1,isSelected:o,content:AU(e),itemAttributes:Cn(e),listAttributes:Cn(r),listType:mn(r),isInPreviousLi:!1})),p4=(e,t)=>{Hn(e.item,t.list)},OU=e=>{for(let t=1;t<e.length;t++)p4(e[t-1],e[t])},zP=(e,t)=>{_s(js(e),ps(t),p4)},DU=(e,t)=>{const o={list:q.fromTag(t,e),item:q.fromTag("li",e)};return Hn(o.list,o.item),o},RU=(e,t,o)=>{const r=[];for(let c=0;c<o;c++)r.push(DU(e,y1(t)?t.listType:t.parentListType));return r},MU=(e,t)=>{for(let o=0;o<e.length-1;o++)gc(e[o].item,"list-style-type","none");js(e).each(o=>{y1(t)&&(Rr(o.list,t.listAttributes),Rr(o.item,t.itemAttributes)),li(o.item,t.content)})},BU=(e,t)=>{mn(e.list)!==t.listType&&(e.list=jh(e.list,t.listType)),Rr(e.list,t.listAttributes)},NU=(e,t,o)=>{const r=q.fromTag("li",e);return Rr(r,t),li(r,o),r},PU=(e,t)=>{Hn(e.list,t),e.item=t},VP=(e,t,o)=>{const r=t.slice(0,o.depth);return js(r).each(c=>{if(y1(o)){const u=NU(e,o.itemAttributes,o.content);PU(c,u),BU(c,o)}else if(kU(o))li(c.item,o.content);else{const u=q.fromHtml(`<!--${o.content}-->`);Hn(c.list,u)}}),r},$U=(e,t,o)=>{const r=RU(e,o,o.depth-t.length);return OU(r),MU(r,o),zP(t,r),t.concat(r)},IU=(e,t)=>{let o=N.none();const r=cn(t,(c,u,f)=>FP(u)?f===0?(o=N.some(u),c):VP(e,c,u):u.depth>c.length?$U(e,c,u):VP(e,c,u),[]);return o.each(c=>{const u=q.fromHtml(`<!--${c.content}-->`);ps(r).each(f=>{mu(f.list,u)})}),ps(r).map(c=>c.list)},LU=(e,t,o)=>{switch(t){case"Indent":if(LP(e,o.depth))o.depth++;else return;break;case"Outdent":o.depth--;break;case"Flatten":o.depth=0}o.dirty=!0},eD=(e,t)=>{y1(e)&&y1(t)&&(e.listType=t.listType,e.listAttributes={...t.listAttributes})},FU=e=>{e.listAttributes=nu(e.listAttributes,(t,o)=>o!=="start")},HU=(e,t)=>{const o=e[t].depth,r=u=>u.depth===o&&!u.dirty,c=u=>u.depth<o;return Ws(Lo(e.slice(0,t)),r,c).orThunk(()=>Ws(e.slice(t+1),r,c))},UP=e=>(le(e,(t,o)=>{HU(e,o).fold(()=>{t.dirty&&y1(t)&&FU(t)},r=>eD(t,r))}),e),ZP=(e,t,o,r)=>{if(yl(r))return[{depth:e+1,content:r.dom.nodeValue??"",dirty:!1,isSelected:!1,isComment:!0}];t.each(f=>{En(f.start,r)&&o.set(!0)});const c=QO(r,e,o.get());t.each(f=>{En(f.end,r)&&o.set(!1)});const u=qs(r).filter(sv).map(f=>KC(e,t,o,f)).getOr([]);return c.toArray().concat(u)},zU=(e,t,o,r)=>_r(r).filter(sv).fold(()=>ZP(e,t,o,r),c=>{const u=cn(vs(r),(f,b,v)=>{if(v===0)return f;if(WY(b))return f.concat(ZP(e,t,o,b));{const w={isFragment:!0,depth:e,content:[b],isSelected:!1,dirty:!1,parentListType:mn(c)};return f.concat(w)}},[]);return KC(e,t,o,c).concat(u)}),KC=(e,t,o,r)=>Gn(vs(r),c=>{const u=sv(c)?KC:zU,f=e+1;return u(f,t,o,c)}),C1=(e,t)=>{const o=Nt(!1),r=0;return Mt(e,c=>({sourceList:c,entries:KC(r,t,o,c)}))},WP=(e,t)=>{const o=UP(t);return Mt(o,r=>{const c=FP(r)?rm([q.fromHtml(`<!--${r.content}-->`)]):rm(r.content),u=y1(r)?r.itemAttributes:{};return q.fromDom(XO(e,c.dom,u))})},VU=(e,t)=>{const o=UP(t);return IU(e.contentDocument,o).toArray()},UU=(e,t)=>Gn(nn(t,HP),o=>ps(o).exists(HP)?VU(e,o):WP(e,o)),ZU=(e,t,o)=>{le(ge(t,_U),r=>LU(e,o,r))},WU=e=>{const t=Mt(qO(e),q.fromDom);return _s(so(t,ao(JO)),so(Lo(t),ao(JO)),(o,r)=>({start:o,end:r}))},rv=(e,t,o)=>{const r=C1(t,WU(e));le(r,c=>{ZU(e,c.entries,o);const u=UU(e,c.entries);le(u,f=>{_h(e,o==="Indent"?"IndentList":"OutdentList",f.dom)}),HS(c.sourceList,u),Ao(c.sourceList)})},jU=e=>My(e).forall(t=>{const o=e.selection.getSelectedBlocks();return jn(o,r=>qr(q.fromDom(r),"li").forall(c=>p3(c,"ol,ul").length<=t))}),zm=_n.DOM,tD=(e,t,o)=>{const r=w=>{const k=w.parentNode;k&&He.each(c,O=>{k.insertBefore(O,o.parentNode)}),zm.remove(w)},c=zm.select('span[data-mce-type="bookmark"]',t),u=XO(e,o),f=zm.createRng();f.setStartAfter(o),f.setEndAfter(t);const b=f.extractContents();for(let w=b.firstChild;w;w=w.firstChild)if(w.nodeName==="LI"&&e.dom.isEmpty(w)){zm.remove(w);break}e.dom.isEmpty(b)||zm.insertAfter(b,t),zm.insertAfter(u,t);const v=o.parentElement;v&&v1(e.dom,v)&&r(v),zm.remove(o),v1(e.dom,t)&&zm.remove(t)},GU=uu("dd"),nD=uu("dt"),b4=(e,t)=>{GU(t)?jh(t,"dt"):nD(t)&&Mi(t).each(o=>tD(e,o.dom,t.dom))},qU=e=>{nD(e)&&jh(e,"dd")},KU=(e,t,o)=>{t==="Indent"?le(o,qU):le(o,r=>b4(e,r))},YU=(e,t)=>{const o=df(wU(e)),r=df(vU(e));let c=!1;if(o.length||r.length){const u=e.selection.getBookmark();rv(e,o,t),KU(e,t,r),e.selection.moveToBookmark(u),e.selection.setRng(GO(e.selection.getRng())),e.nodeChanged(),c=!0}return c},oD=(e,t)=>!EU(e)&&YU(e,t),jP=e=>oD(e,"Indent"),YC=e=>oD(e,"Outdent"),v4=e=>oD(e,"Flatten"),av=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},XU=(e,t,o)=>{const r=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},GP=(e,t)=>{He.each(t,(o,r)=>{e.setAttribute(r,o)})},JU=(e,t,o)=>{GP(t,o["list-attributes"]),He.each(e.select("li",t),r=>{GP(r,o["list-item-attributes"])})},cv=(e,t,o)=>{XU(e,t,o),JU(e,t,o)},QU=(e,t,o)=>{He.each(o,r=>e.setStyle(t,r,""))},y4=(e,t)=>ve(t)&&!WO(t,e.schema.getBlockElements()),sD=(e,t,o,r)=>{let c=t[o?"startContainer":"endContainer"];const u=t[o?"startOffset":"endOffset"];f4(c)&&(c=c.childNodes[Math.min(u,c.childNodes.length-1)]||c),!o&&b1(c.nextSibling)&&(c=c.nextSibling);const f=v=>{for(;!e.dom.isBlock(v)&&v.parentNode&&r!==v;)v=v.parentNode;return v},b=(v,w)=>{var I;const k=new ys(v,f(v)),O=w?"next":"prev";let R;for(;R=k[O]();)if(!(mU(e,R)||oi(R.textContent)||((I=R.textContent)==null?void 0:I.length)===0))return N.some(R);return N.none()};if(o&&Fd(c))if(oi(c.textContent))c=b(c,!1).getOr(c);else for(c.parentNode!==null&&y4(e,c.parentNode)&&(c=c.parentNode);c.previousSibling!==null&&(y4(e,c.previousSibling)||Fd(c.previousSibling));)c=c.previousSibling;if(!o&&Fd(c))if(oi(c.textContent))c=b(c,!0).getOr(c);else for(c.parentNode!==null&&y4(e,c.parentNode)&&(c=c.parentNode);c.nextSibling!==null&&(y4(e,c.nextSibling)||Fd(c.nextSibling));)c=c.nextSibling;for(;c.parentNode!==r;){const v=c.parentNode;if(ZO(e,c)||/^(TD|TH)$/.test(v.nodeName))return c;c=v}return c},eZ=(e,t,o)=>{const r=[],c=e.dom,u=sD(e,t,!0,o),f=sD(e,t,!1,o);let b;const v=[];for(let w=u;w&&(v.push(w),w!==f);w=w.nextSibling);return He.each(v,w=>{var O;if(ZO(e,w)){r.push(w),b=null;return}if(c.isBlock(w)||b1(w)){b1(w)&&c.remove(w),b=null;return}const k=w.nextSibling;if(Nb.isBookmarkNode(w)&&(Gl(k)||ZO(e,k)||!k&&w.parentNode===o)){b=null;return}b||(b=c.create("p"),(O=w.parentNode)==null||O.insertBefore(b,w),r.push(b)),b.appendChild(w)}),r},tZ=(e,t,o)=>{const r=e.getStyle(t,"list-style-type");let c=o?o["list-style-type"]:"";return c=c===null?"":c,r===c},nZ=(e,t)=>{const o=e.selection.getStart(!0),r=sD(e,t,!0,e.getBody());return n0(q.fromDom(r),q.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:o},rD=(e,t,o)=>{const r=e.selection.getRng();let c="LI";const u=qC(e,nZ(e,r)),f=e.dom;if(f.getContentEditable(e.selection.getNode())==="false")return;t=t.toUpperCase(),t==="DL"&&(c="DT");const b=Lm(r),v=ge(eZ(e,r,u),e.dom.isEditable);He.each(v,w=>{let k;const O=w.previousSibling,R=w.parentNode;g4(R)||(O&&Gl(O)&&O.nodeName===t&&tZ(f,O,o)?(k=O,w=f.rename(w,c),O.appendChild(w)):(k=f.create(t),R.insertBefore(k,w),k.appendChild(w),w=f.rename(w,c)),QU(f,w,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),cv(f,k,o),aD(e.dom,k))}),e.selection.setRng(zl(b))},oZ=(e,t)=>Gl(e)&&e.nodeName===(t==null?void 0:t.nodeName),qP=(e,t,o)=>{const r=e.getStyle(t,"list-style-type",!0),c=e.getStyle(o,"list-style-type",!0);return r===c},sZ=(e,t)=>e.className===t.className,KP=(e,t,o)=>oZ(t,o)&&qP(e,t,o)&&sZ(t,o),aD=(e,t)=>{let o,r=t.nextSibling;if(KP(e,t,r)){const c=r;for(;o=c.firstChild;)t.appendChild(o);e.remove(c)}if(r=t.previousSibling,KP(e,t,r)){const c=r;for(;o=c.lastChild;)t.insertBefore(o,t.firstChild);e.remove(c)}},rZ=(e,t,o,r)=>{if(t.nodeName!==o){const c=e.dom.rename(t,o);cv(e.dom,c,r),_h(e,av(o),c)}else cv(e.dom,t,r),_h(e,av(o),t)},aZ=(e,t,o,r)=>{if(t.classList.forEach((c,u,f)=>{c.startsWith("tox-")&&(f.remove(c),f.length===0&&t.removeAttribute("class"))}),t.nodeName!==o){const c=e.dom.rename(t,o);cv(e.dom,c,r),_h(e,av(o),c)}else cv(e.dom,t,r),_h(e,av(o),t)},cD=(e,t,o,r,c)=>{const u=Gl(t);if(u&&t.nodeName===r&&!YP(c)&&!h4(t))v4(e);else{rD(e,r,c);const f=Lm(e.selection.getRng()),b=u?[t,...o]:o,v=u&&h4(t)?aZ:rZ;He.each(b,w=>{v(e,w,r,c)}),e.selection.setRng(zl(f))}},YP=e=>"list-style-type"in e,cZ=(e,t,o,r)=>{if(t!==e.getBody())if(t)if(t.nodeName===o&&!YP(r)&&!h4(t))v4(e);else{const c=Lm(e.selection.getRng());h4(t)&&t.classList.forEach((f,b,v)=>{f.startsWith("tox-")&&(v.remove(f),v.length===0&&t.removeAttribute("class"))}),cv(e.dom,t,r);const u=e.dom.rename(t,o);aD(e.dom,u),e.selection.setRng(zl(c)),rD(e,o,r),_h(e,av(o),u)}else rD(e,o,r),_h(e,av(o),t)},iD=(e,t,o)=>{const r=GC(e);if(YO(e,r))return;const c=pU(e),u=tn(o)?o:{};c.length>0?cD(e,r,c,t,u):cZ(e,r,t,u)},XP=(e,t,o,r)=>{let c=t.startContainer;const u=t.startOffset;if(Fd(c)&&(o?u<c.data.length:u>0))return c;const f=e.schema.getNonEmptyElements();f4(c)&&(c=Od.getNode(c,u));const b=new ys(c,r);o&&fU(e.dom,c)&&b.next();const v=o?b.next.bind(b):b.prev2.bind(b);for(;c=v();)if(c.nodeName==="LI"&&!c.hasChildNodes()||f[c.nodeName]||Fd(c)&&c.data.length>0)return c;return null},JP=(e,t)=>{const o=t.childNodes;return o.length===1&&!Gl(o[0])&&e.isBlock(o[0])},iZ=e=>N.from(e).map(q.fromDom).filter(Cl).exists(t=>Li(t)&&!vt(["details"],mn(t))),lZ=(e,t)=>{JP(e,t)&&iZ(t.firstChild)&&e.remove(t.firstChild,!0)},QP=(e,t,o)=>{let r;const c=JP(e,o)?o.firstChild:o;if(lZ(e,t),!v1(e,t,!0))for(;r=t.firstChild;)c.appendChild(r)},lD=(e,t,o)=>{let r;const c=t.parentNode;if(!OP(e,t)||!OP(e,o))return;Gl(o.lastChild)&&(r=o.lastChild),c===o.lastChild&&b1(c.previousSibling)&&e.remove(c.previousSibling);const u=o.lastChild;u&&b1(u)&&t.hasChildNodes()&&e.remove(u),v1(e,o,!0)&&$i(q.fromDom(o)),QP(e,t,o),r&&o.appendChild(r);const b=ai(q.fromDom(o),q.fromDom(t))?e.getParents(t,Gl,o):[];e.remove(t),le(b,v=>{v1(e,v)&&v!==e.getRoot()&&e.remove(v)})},uZ=(e,t,o)=>{$i(q.fromDom(o)),lD(e.dom,t,o),e.selection.setCursorLocation(o,0)},dZ=(e,t,o,r)=>{const c=e.dom;if(c.isEmpty(r))uZ(e,o,r);else{const u=Lm(t);lD(c,o,r),e.selection.setRng(zl(u))}},mZ=(e,t,o,r)=>{const c=Lm(t);lD(e.dom,o,r);const u=zl(c);e.selection.setRng(u)},fZ=(e,t)=>{const o=e.dom,r=e.selection,c=r.getStart(),u=KO(e,c),f=o.getParent(r.getStart(),"LI",u);if(f){const b=f.parentElement;if(b===e.getBody()&&v1(o,b))return!0;const v=GO(r.getRng()),w=o.getParent(XP(e,v,t,u),"LI",u),k=w&&(t?o.isChildOf(f,w):o.isChildOf(w,f));if(w&&w!==f&&!k)return e.undoManager.transact(()=>{t?dZ(e,v,w,f):dU(f)?YC(e):mZ(e,v,f,w)}),!0;if(k&&!t&&w!==f){const O=v.commonAncestorContainer.parentElement;return!O||o.isChildOf(w,O)?!1:(e.undoManager.transact(()=>{const R=Lm(v);QP(o,O,w),O.remove();const I=zl(R);e.selection.setRng(I)}),!0)}else if(!w&&!t&&v.startOffset===0&&v.endOffset===0)return e.undoManager.transact(()=>{v4(e)}),!0}return!1},gZ=(e,t,o)=>{const r=e.getParent(t.parentNode,e.isBlock,o);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},hZ=(e,t)=>{const o=e.dom,r=e.selection.getStart(),c=KO(e,r),u=o.getParent(r,o.isBlock,c);if(u&&o.isEmpty(u,void 0,{checkRootAsContent:!0})){const f=GO(e.selection.getRng()),b=XP(e,f,t,c),v=o.getParent(b,"LI",c);if(b&&v){const w=I=>vt(["td","th","caption"],mn(I)),k=I=>I.dom===c,O=bo(q.fromDom(v),w,k),R=bo(q.fromDom(f.startContainer),w,k);return Kd(O,R,En)?(e.undoManager.transact(()=>{const I=v.parentNode;gZ(o,u,c),aD(o,I),e.selection.select(b,!0),e.selection.collapse(t)}),!0):!1}}return!1},pZ=(e,t)=>fZ(e,t)||hZ(e,t),uD=e=>{const t=e.selection.getStart(),o=KO(e,t),r=e.dom.getParent(t,"LI,DT,DD",o);return ve(r)||qO(e).length>0},bZ=e=>uD(e)?(e.undoManager.transact(()=>{let t=!0;const o=()=>t=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),t&&e.dispatch("input"),jO(e.dom,e.getBody())}),!0):!1,dD=(e,t)=>{const o=e.selection;return!YO(e,o.getNode())&&(o.isCollapsed()?pZ(e,t):bZ(e))},vZ=(e,t)=>({block:e,position:t}),yZ=(e,t)=>({from:e,to:t}),C4=(e,t)=>{const o=q.fromDom(e),r=q.fromDom(t.container());return L_(o,r).map(c=>vZ(c,t))},CZ=e=>!(ai(e.to.block,e.from.block)||ai(e.from.block,e.to.block)),SZ=e=>!En(e.from.block,e.to.block),mD=(e,t)=>bo(t,c=>Ef(c)||pc(c.dom),c=>En(c,e)).filter(bs).getOr(e),wZ=(e,t)=>{const o=q.fromDom(e);return En(mD(o,t.from.block),mD(o,t.to.block))},xZ=e=>Vo(e.from.block.dom)===!1&&Vo(e.to.block.dom)===!1,EZ=e=>{const t=o=>fa(o)||Be(o.dom)||Aa(o);return t(e.from.block)&&t(e.to.block)},TZ=(e,t,o,r)=>os(r.position.getNode())&&!Cs(e,r.block)?l(!1,r.block.dom).bind(c=>c.isEqual(r.position)?jc(o,t,c).bind(u=>C4(t,u)):N.some(r)).getOr(r):r,fD=(e,t,o,r)=>{const c=C4(t,Ce.fromRangeStart(r)),u=c.bind(f=>jc(o,t,f.position).bind(b=>C4(t,b).map(v=>TZ(e,t,o,v))));return _s(c,u,yZ).filter(f=>SZ(f)&&wZ(t,f)&&xZ(f)&&EZ(f)&&CZ(f))},e8=(e,t,o,r)=>r.collapsed?fD(e,t,o,r):N.none(),jY=(e,t)=>{const o=vs(e);return il(o,r=>t.isBlock(mn(r))).fold(Xe(o),r=>o.slice(0,r))},iv=(e,t)=>{const o=jY(e,t);return le(o,Ao),o},kZ=(e,t,o)=>{const r=Nu(o,t);return so(r.reverse(),c=>Cs(e,c)).each(Ao)},GY=(e,t)=>ge(la(t),o=>!Cs(e,o)).length===0,qY=(e,t,o,r,c)=>{if(Cs(r,o))return ym(o),y(o.dom);GY(r,c)&&Cs(r,t)&&Gr(c,q.fromTag("br"));const u=p(o.dom,Ce.before(c.dom));return le(iv(t,r),f=>{Gr(c,f)}),kZ(r,e,t),u},KY=(e,t)=>e.isInline(mn(t)),Hd=(e,t,o,r)=>{if(Cs(r,o)){if(Cs(r,t)){const f=yn((b=>{const v=(w,k)=>_r(w).fold(()=>k,O=>KY(r,O)?v(O,k.concat(ua(O))):k);return v(b,[])})(o),(b,v)=>(Fc(b,v),v),vm());$i(t),Hn(t,f)}return Ao(o),y(t.dom)}const c=E(o.dom);return le(iv(t,r),u=>{Hn(o,u)}),kZ(r,e,t),c},XC=(e,t)=>{const o=Nu(t,e);return N.from(o[o.length-1])},zd=(e,t)=>ai(t,e)?XC(t,e):N.none(),Ah=(e,t)=>{l(e,t.dom).bind(o=>N.from(o.getNode())).map(q.fromDom).filter(Zi).each(Ao)},S4=(e,t,o,r)=>(Ah(!0,t),Ah(!1,o),zd(t,o).fold(Me(Hd,e,t,o,r),Me(qY,e,t,o,r))),gD=(e,t,o,r,c)=>t?S4(e,r,o,c):S4(e,o,r,c),S1=(e,t)=>{const o=q.fromDom(e.getBody());return e8(e.schema,o.dom,t,e.selection.getRng()).map(c=>()=>{gD(o,t,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},_Z=(e,t,o)=>{const r=t.getRng();return _s(L_(e,q.fromDom(r.startContainer)),L_(e,q.fromDom(r.endContainer)),(c,u)=>En(c,u)?N.none():N.some(()=>{r.deleteContents(),gD(e,!0,c,u,o).each(f=>{t.setRng(f.toRange())})})).getOr(N.none())},hD=(e,t)=>{const o=q.fromDom(t),r=Me(En,e);return hu(o,Ef,r).isSome()},YY=(e,t)=>hD(e,t.startContainer)||hD(e,t.endContainer),AZ=(e,t)=>{const o=p(e.dom,Ce.fromRangeStart(t)).isNone(),r=m(e.dom,Ce.fromRangeEnd(t)).isNone();return!YY(e,t)&&o&&r},JC=e=>N.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),t8=e=>{const t=q.fromDom(e.getBody()),o=e.selection.getRng();return AZ(t,o)?JC(e):_Z(t,e.selection,e.schema)},Rs=(e,t)=>e.selection.isCollapsed()?N.none():t8(e),tg=(e,t,o,r,c)=>N.from(t._selectionOverrides.showCaret(e,o,r,c)),OZ=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Vm=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?N.none():N.some(OZ(t)),w1=(e,t,o)=>{const r=Eb(1,e.getBody(),t),c=Ce.fromRangeStart(r),u=c.getNode();if(Wc(u))return tg(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Wc(f))return tg(1,e,f,!1,!1);const b=Dd(e.dom.getRoot(),c.getNode());return Wc(b)?tg(1,e,b,!1,o):N.none()},ng=(e,t,o)=>t.collapsed?w1(e,t,o).getOr(t):t,DZ=e=>Wf(e)||aC(e),RZ=e=>$m(e)||cC(e),pD=(e,t)=>{ze(t)&&t.data.length===0&&e.remove(t)},w4=(e,t,o,r,c,u)=>{tg(r,e,u.getNode(!c),c,!0).each(f=>{if(t.collapsed){const b=t.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else t.deleteContents();e.selection.setRng(f)}),pD(e.dom,o)},n8=(e,t)=>{const o=e.selection.getRng();if(!ze(o.commonAncestorContainer))return N.none();const r=t?1:-1,c=Fl(e.getBody()),u=Me(kb,t?c.next:c.prev),f=t?DZ:RZ,b=Mm(r,e.getBody(),o),v=u(b),w=v&&Hl(t,v);if(!w||!Ll(b,w))return N.none();if(f(w))return N.some(()=>w4(e,o,b.getNode(),r,t,w));const k=u(w);return k&&f(k)&&Ll(w,k)?N.some(()=>w4(e,o,b.getNode(),r,t,k)):N.none()},x4=(e,t)=>n8(e,t),bD=(e,t)=>{const o=e.getBody();return t?y(o).filter(Wf):E(o).filter($m)},vD=e=>{const t=e.selection.getRng();return!t.collapsed&&(bD(e,!0).exists(o=>o.isEqual(Ce.fromRangeStart(t)))||bD(e,!1).exists(o=>o.isEqual(Ce.fromRangeEnd(t))))},yD=e=>ve(e)&&(Ef(q.fromDom(e))||Aa(q.fromDom(e))),ol=ei.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),MZ=(e,t)=>{const o=t.getNode(!e),r=e?"after":"before";return Ye(o)&&o.getAttribute("data-mce-caret")===r},BZ=(e,t,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!Au(o,r,e);return Tb(!t,o).fold(()=>Tb(t,r).fold(De,u),u)},o8=(e,t,o,r,c)=>{const u=c.getNode(!o);return L_(q.fromDom(t),q.fromDom(r.getNode())).map(f=>Cs(e,f)?ol.remove(f.dom):ol.moveToElement(u)).orThunk(()=>N.some(ol.moveToElement(u)))},s8=(e,t,o,r)=>jc(t,e,o).bind(c=>yD(c.getNode())||BZ(e,t,o,c,r)?N.none():t&&Vo(c.getNode())||!t&&Vo(c.getNode(!0))?o8(r,e,t,o,c):t&&$m(o)||!t&&Wf(o)?N.some(ol.moveToPosition(c)):N.none()),CD=(e,t)=>gn(t)?N.none():e&&Vo(t.nextSibling)?N.some(ol.moveToElement(t.nextSibling)):!e&&Vo(t.previousSibling)?N.some(ol.moveToElement(t.previousSibling)):N.none(),r8=(e,t,o)=>o.fold(r=>N.some(ol.remove(r)),r=>N.some(ol.moveToElement(r)),r=>Au(t,r,e)?N.none():N.some(ol.moveToPosition(r))),NZ=(e,t,o,r)=>MZ(t,o)?CD(t,o.getNode(!t)).orThunk(()=>s8(e,t,o,r)):s8(e,t,o,r).bind(c=>r8(e,o,c)),PZ=(e,t,o,r)=>{const c=Eb(t?1:-1,e,o),u=Ce.fromRangeStart(c),f=q.fromDom(e);return!t&&$m(u)?N.some(ol.remove(u.getNode(!0))):t&&Wf(u)?N.some(ol.remove(u.getNode())):!t&&Wf(u)&&pE(f,u,r)?o6(f,u,r).map(b=>ol.remove(b.getNode())):t&&$m(u)&&M_(f,u,r)?iH(f,u,r).map(b=>ol.remove(b.getNode())):NZ(e,t,u,r)},lv=(e,t)=>o=>(e._selectionOverrides.hideFakeCaret(),Im(e,t,q.fromDom(o)),!0),a8=(e,t)=>o=>{const r=t?Ce.before(o):Ce.after(o);return e.selection.setRng(r.toRange()),!0},$Z=e=>t=>(e.selection.setRng(t.toRange()),!0),SD=(e,t)=>N.from(Dd(e.getBody(),t)),IZ=(e,t)=>{const o=e.selection.getNode();return SD(e,o).filter(Vo).fold(()=>PZ(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>r.fold(lv(e,t),a8(e,t),$Z(e))),()=>N.some(Dt))},c8=e=>{le(Br(e,".mce-offscreen-selection"),Ao)},LZ=(e,t)=>{const o=e.selection.getNode();return Vo(o)&&!Og(o)?SD(e,o.parentNode).filter(Vo).fold(()=>N.some(()=>{c8(q.fromDom(e.getBody())),Im(e,t,q.fromDom(e.selection.getNode())),w6(e)}),()=>N.some(Dt)):vD(e)?N.some(()=>{DH(e,e.selection.getRng(),q.fromDom(e.getBody()))}):N.none()},wD=e=>{const t=e.dom,o=e.selection,r=Dd(e.getBody(),o.getNode());if(pc(r)&&t.isBlock(r)&&t.isEmpty(r)){const c=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(c),o.setRng(Ce.before(c).toRange())}return!0},E4=(e,t)=>e.selection.isCollapsed()?IZ(e,t):LZ(e,t),T4=(e,t)=>{var b;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),c=o.getParent(e.selection.getEnd(),o.isBlock),u=e.getBody();if(((b=r==null?void 0:r.nodeName)==null?void 0:b.toLowerCase())==="div"&&r&&c&&r===u.firstChild&&c===u.lastChild&&!o.isEmpty(u)){const v=r.cloneNode(!1),w=()=>{if(t?AH(e):I_(e),u.firstChild!==r){const k=Lm(e.selection.getRng(),()=>document.createElement("span"));Array.from(u.childNodes).forEach(O=>v.appendChild(O)),u.appendChild(v),e.selection.setRng(zl(k))}};return N.some(w)}return N.none()},i8=(e,t)=>{const o=Ce.fromRangeStart(e.selection.getRng());return jc(t,e.getBody(),o).filter(r=>t?k_(r):YM(r)).bind(r=>Hy(t?0:-1,r)).map(r=>()=>e.selection.select(r))},k4=(e,t)=>e.selection.isCollapsed()?i8(e,t):N.none(),x1=ze,l8=e=>x1(e)&&e.data[0]===rr,u8=e=>x1(e)&&e.data[e.data.length-1]===rr,d8=e=>(e.ownerDocument??document).createTextNode(rr),xD=e=>{var t;if(x1(e.previousSibling))return u8(e.previousSibling)||e.previousSibling.appendData(rr),e.previousSibling;if(x1(e))return l8(e)||e.insertData(0,rr),e;{const o=d8(e);return(t=e.parentNode)==null||t.insertBefore(o,e),o}},QC=e=>{var t,o;if(x1(e.nextSibling))return l8(e.nextSibling)||e.nextSibling.insertData(0,rr),e.nextSibling;if(x1(e))return u8(e)||e.appendData(rr),e;{const r=d8(e);return e.nextSibling?(t=e.parentNode)==null||t.insertBefore(r,e.nextSibling):(o=e.parentNode)==null||o.appendChild(r),r}},Oh=(e,t)=>e?xD(t):QC(t),ED=Me(Oh,!0),m8=Me(Oh,!1),TD=(e,t)=>ze(e.container())?Oh(t,e.container()):Oh(t,e.getNode()),eS=(e,t)=>{const o=t.get();return o&&e.container()===o&&Ml(o)},kD=(e,t)=>t.fold(o=>{If(e.get());const r=ED(o);return e.set(r),N.some(Ce(r,r.length-1))},o=>y(o).map(r=>{if(eS(r,e)){const c=e.get();return Ce(c,1)}else{If(e.get());const c=TD(r,!0);return e.set(c),Ce(c,1)}}),o=>E(o).map(r=>{if(eS(r,e)){const c=e.get();return Ce(c,c.length-1)}else{If(e.get());const c=TD(r,!1);return e.set(c),Ce(c,c.length-1)}}),o=>{If(e.get());const r=m8(o);return e.set(r),N.some(Ce(r,1))}),f8=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,t);if(r.isSome())return r}return N.none()},wr=ei.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),_4=(e,t)=>{const o=Dm(t,e);return o||e},g8=(e,t,o)=>{const r=y6(o),c=_4(t,r.container());return ph(e,c,r).fold(()=>m(c,r).bind(Me(ph,e,c)).map(u=>wr.before(u)),N.none)},tS=(e,t)=>L(e,t)===null,_D=(e,t,o)=>ph(e,t,o).filter(Me(tS,t)),AD=(e,t,o)=>{const r=C6(o);return _D(e,t,r).bind(c=>p(c,r).isNone()?N.some(wr.start(c)):N.none())},h8=(e,t,o)=>{const r=y6(o);return _D(e,t,r).bind(c=>m(c,r).isNone()?N.some(wr.end(c)):N.none())},p8=(e,t,o)=>{const r=C6(o),c=_4(t,r.container());return ph(e,c,r).fold(()=>p(c,r).bind(Me(ph,e,c)).map(u=>wr.after(u)),N.none)},b8=e=>!P_(OD(e)),Vd=(e,t,o)=>f8([g8,AD,h8,p8],[e,t,o]).filter(b8),OD=e=>e.fold(Yo,Yo,Yo,Yo),v8=e=>e.fold(Xe("before"),Xe("start"),Xe("end"),Xe("after")),A4=e=>e.fold(wr.before,wr.before,wr.after,wr.after),DD=e=>e.fold(wr.start,wr.start,wr.end,wr.end),RD=(e,t)=>v8(e)===v8(t)&&OD(e)===OD(t),FZ=(e,t,o,r,c,u)=>_s(ph(t,o,r),ph(t,o,c),(f,b)=>f!==b&&kH(o,f,b)?wr.after(e?f:b):u).getOr(u),y8=(e,t)=>e.fold(et,o=>!RD(o,t)),HZ=(e,t,o,r,c)=>{const u=Hl(e,c);return jc(e,o,u).map(Me(Hl,e)).fold(()=>r.map(A4),v=>Vd(t,o,v).map(Me(FZ,e,t,o,u,v)).filter(Me(y8,r))).filter(b8)},zZ=(e,t)=>e?t.fold(T(N.some,wr.start),N.none,T(N.some,wr.after),N.none):t.fold(N.none,T(N.some,wr.before),N.none,T(N.some,wr.end)),VZ=(e,t,o,r)=>{const c=Hl(e,r),u=Vd(t,o,c);return Vd(t,o,c).bind(Me(zZ,e)).orThunk(()=>HZ(e,t,o,u,r))},UZ=e=>ne(e.selection.getSel().modify),C8=(e,t,o)=>{const r=e?1:-1;return t.setRng(Ce(o.container(),o.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},ZZ=(e,t)=>{const o=t.selection.getRng(),r=e?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return UZ(t)?e&&bd(r)?C8(!0,t.selection,r):!e&&Tf(r)?C8(!1,t.selection,r):!1:!1};var Um;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Um||(Um={}));const O4=(e,t)=>e===-1?Lo(t):t,WZ=(e,t,o)=>e===1?t.next(o):t.prev(o),jZ=(e,t,o,r)=>os(r.getNode(t===1))?Um.Br:Au(o,r)===!1?Um.Block:Um.Wrap,S8=(e,t,o,r)=>{const c=Fl(o);let u=r;const f=[];for(;u;){const b=WZ(t,c,u);if(!b)break;if(os(b.getNode(!1)))return t===1?{positions:O4(t,f).concat([b]),breakType:Um.Br,breakAt:N.some(b)}:{positions:O4(t,f),breakType:Um.Br,breakAt:N.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const v=jZ(o,t,u,b);return{positions:O4(t,f),breakType:v,breakAt:N.some(b)}}f.push(b),u=b}return{positions:O4(t,f),breakType:Um.Eol,breakAt:N.none()}},MD=(e,t,o,r)=>t(o,r).breakAt.map(c=>{const u=t(o,c).positions;return e===-1?u.concat(c):[c].concat(u)}).getOr([]),BD=(e,t)=>cn(e,(o,r)=>o.fold(()=>N.some(r),c=>_s(ps(c.getClientRects()),ps(r.getClientRects()),(u,f)=>{const b=Math.abs(t-u.left);return Math.abs(t-f.left)<=b?r:c}).or(o)),N.none()),E1=(e,t)=>ps(t.getClientRects()).bind(o=>BD(e,o.left)),Fr=Me(S8,Ce.isAbove,-1),nS=Me(S8,Ce.isBelow,1),oS=Me(MD,-1,Fr),Dh=Me(MD,1,nS),D4=(e,t)=>Fr(e,t).breakAt.isNone(),Tc=(e,t)=>nS(e,t).breakAt.isNone(),T1=e=>y(e).map(t=>[t].concat(nS(e,t).positions)).getOr([]),w8=e=>E(e).map(t=>Fr(e,t).positions.concat(t)).getOr([]),x8=(e,t)=>E1(oS(e,t),t),ND=(e,t)=>E1(Dh(e,t),t),GZ=Vo,PD=(e,t)=>Math.abs(e.left-t),R4=(e,t)=>Math.abs(e.right-t),$D=e=>Xo(e,"node"),E8=(e,t)=>Qd(e,(o,r)=>{const c=Math.min(PD(o,t),R4(o,t)),u=Math.min(PD(r,t),R4(r,t));return u===c&&$D(r)&&GZ(r.node)||u<c?r:o}),qZ=e=>{const t=o=>Mt(o,r=>{const c=Sm(r);return c.node=e,c});if(Ye(e))return t(e.getClientRects());if(ze(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),t(o.getClientRects())}else return[]},ID=e=>Gn(e,qZ);var kc;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(kc||(kc={}));const LD=(e,t,o,r)=>{let c=r;for(;c=Gp(c,e,F0,t);)if(o(c))return},T8=(e,t,o,r,c,u)=>{let f=0;const b=[],v=O=>{let R=ID([O]);e===kc.Up&&(R=R.reverse());for(let I=0;I<R.length;I++){const U=R[I];if(!o(U,w)){if(b.length>0&&t(U,si(b))&&f++,U.line=f,c(U))return!0;b.push(U)}}return!1},w=si(u.getClientRects());if(!w)return b;const k=u.getNode();return k&&(v(k),LD(e,r,v,k)),b},M4=(e,t)=>t.line>e,FD=(e,t)=>t.line===e,k8=Me(T8,kc.Up,_f,wm),_8=Me(T8,kc.Down,wm,_f),HD=e=>si(e.getClientRects()),KZ=(e,t,o,r)=>{const c=Fl(t);let u,f,b,v;const w=[];let k=0;e===kc.Down?(u=c.next,f=wm,b=_f,v=Ce.after(r)):(u=c.prev,f=_f,b=wm,v=Ce.before(r));const O=HD(v);do{if(!v.isVisible())continue;const R=HD(v);if(b(R,O))continue;w.length>0&&f(R,si(w))&&k++;const I=Sm(R);if(I.position=v,I.line=k,o(I))return w;w.push(I)}while(v=u(v));return w},A8=e=>t=>M4(e,t),zD=e=>t=>FD(e,t),Zm=(e,t)=>{e.selection.setRng(t),Ji(e,e.selection.getRng())},VD=(e,t,o)=>N.some(ng(e,t,o)),UD=(e,t)=>{const o=e.getNode(t===-1);return ve(o)&&cr(o)?N.some(o):N.none()},O8=(e,t)=>{const o=e.dom.createRng();return o.selectNode(t),o},D8=(e,t,o,r,c,u)=>{const f=t===1,b=Fl(e.getBody()),v=Me(kb,f?b.next:b.prev),w=f?r:c;if(!o.collapsed){const U=ar(o);if(u(U))if(cr(U)){const H=Mm(t,e.getBody(),o);return N.from(v(H)).map(j=>j.toRange())}else return tg(t,e,U,t===-1,!1);else if(vD(e)){const H=o.cloneRange();return H.collapse(t===-1),N.from(H)}}const k=Mm(t,e.getBody(),o);if(w(k))return Vm(e,k.getNode(!f));let O=v(k);const R=P0(o);if(O)O=Hl(f,O);else return R?N.some(o):N.none();if(w(O))return UD(O,t).fold(()=>tg(t,e,O==null?void 0:O.getNode(!f),f,!1),U=>N.some(O8(e,U)));const I=v(O);return I&&w(I)&&Ll(O,I)?UD(O,t).fold(()=>tg(t,e,I.getNode(!f),f,!1),U=>N.some(O8(e,U))):R?VD(e,O.toRange(),!1):N.none()},R8=(e,t,o,r,c,u)=>{const f=Mm(t,e.getBody(),o),b=si(f.getClientRects()),v=t===kc.Down,w=e.getBody();if(!b)return N.none();if(vD(e)){const j=v?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return(v?ND:x8)(w,j).orThunk(()=>N.from(j)).map(se=>se.toRange())}const O=(v?_8:k8)(w,A8(1),f),R=ge(O,zD(1)),I=b.left,U=E8(R,I);if(U&&u(U.node)){const j=Math.abs(I-U.left),oe=Math.abs(I-U.right);return tg(t,e,U.node,j<oe,!1)}let H;if(r(f)?H=f.getNode():c(f)?H=f.getNode(!0):H=ar(o),H){const j=KZ(t,w,A8(1),H);let oe=E8(ge(j,zD(1)),I);if(oe||(oe=si(ge(j,zD(0))),oe))return VD(e,oe.position.toRange(),!1)}return R.length===0?B4(e,v).filter(v?c:r).map(j=>ng(e,j.toRange(),!1)):N.none()},B4=(e,t)=>{const o=e.selection.getRng(),r=t?Ce.fromRangeEnd(o):Ce.fromRangeStart(o),c=wb(r.container(),e.getBody());if(t){const u=nS(c,r);return js(u.positions)}else{const u=Fr(c,r);return ps(u.positions)}},N4=(e,t,o)=>B4(e,t).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),uv=(e,t)=>{const o=e.dom.createRng();o.setStart(t.container(),t.offset()),o.setEnd(t.container(),t.offset()),e.selection.setRng(o)},ZD=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},P4=(e,t,o)=>kD(t,o).map(r=>(uv(e,r),o)),M8=(e,t,o)=>{const r=Ce.fromRangeStart(e);if(e.collapsed)return r;{const c=Ce.fromRangeEnd(e);return o?p(t,c).getOr(c):m(t,r).getOr(r)}},B8=(e,t,o)=>{const r=e.getBody(),c=M8(e.selection.getRng(),r,o),u=Me(e1,e);return VZ(o,u,r,c).bind(b=>P4(e,t,b))},WD=(e,t,o)=>{const r=Mt(Br(q.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ge(r,e),u=ge(o,e);le(is(c,u),Me(ZD,!1)),le(is(u,c),Me(ZD,!0))},N8=(e,t)=>{const o=t.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ce.fromRangeStart(e.selection.getRng());Ce.isTextPosition(r)&&!_H(r)&&(uv(e,Hk(o,r)),t.set(null))}},P8=(e,t,o,r)=>{if(t.selection.isCollapsed()){const c=ge(r,e);le(c,u=>{const f=Ce.fromRangeStart(t.selection.getRng());Vd(e,t.getBody(),f).bind(b=>P4(t,o,b))})}},jD=(e,t,o)=>Om(e)?B8(e,t,o).isSome():!1,$8=(e,t,o)=>Om(t)?ZZ(e,t):!1,YZ=e=>{const t=Nt(null),o=Me(e1,e);return e.on("NodeChange",r=>{Om(e)&&(WD(o,e.dom,r.parents),N8(e,t),P8(o,e,t,r.parents))}),t},$4=Me($8,!0),XZ=Me($8,!1),Rh=(e,t,o)=>{if(Om(e)){const r=B4(e,t).getOrThunk(()=>{const c=e.selection.getRng();return t?Ce.fromRangeEnd(c):Ce.fromRangeStart(c)});return Vd(Me(e1,e),e.getBody(),r).exists(c=>{const u=A4(c);return kD(o,u).exists(f=>(uv(e,f),!0))})}else return!1},JZ=(e,t)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(t.container(),t.offset()),o},QZ=e=>_s(y(e),E(e),(t,o)=>{const r=Hl(!0,t),c=Hl(!1,o);return m(e,r).forall(u=>u.isEqual(c))}).getOr(!0),I8=(e,t)=>o=>kD(t,o).map(r=>()=>uv(e,r)),L8=(e,t,o,r)=>{const c=e.getBody(),u=Me(e1,e);e.undoManager.ignore(()=>{e.selection.setRng(JZ(o,r)),I_(e),Vd(u,c,Ce.fromRangeStart(e.selection.getRng())).map(DD).bind(I8(e,t)).each(hs)}),e.nodeChanged()},F8=(e,t)=>{const o=Dm(t,e);return o||e},H8=(e,t,o,r)=>{const c=F8(e.getBody(),r.container()),u=Me(e1,e),f=Vd(u,c,r);return f.bind(v=>o?v.fold(Xe(N.some(DD(v))),N.none,Xe(N.some(A4(v))),N.none):v.fold(N.none,Xe(N.some(A4(v))),N.none,Xe(N.some(DD(v))))).map(I8(e,t)).getOrThunk(()=>{const v=mh(o,c,r),w=v.bind(k=>Vd(u,c,k));return _s(f,w,()=>ph(u,c,r).bind(k=>QZ(k)?N.some(()=>{Im(e,o,q.fromDom(k))}):N.none())).getOrThunk(()=>w.bind(()=>v.map(k=>()=>{o?L8(e,t,r,k):L8(e,t,k,r)})))})},GD=(e,t,o)=>{if(e.selection.isCollapsed()&&Om(e)){const r=Ce.fromRangeStart(e.selection.getRng());return H8(e,t,o,r)}return N.none()},eW=e=>cf(e)>1,z8=(e,t)=>{const o=q.fromDom(e.getBody()),r=q.fromDom(e.selection.getStart()),c=Nu(r,o);return il(c,t).fold(Xe(c),u=>c.slice(0,u))},tW=e=>cf(e)===1,nW=e=>z8(e,t=>e.schema.isBlock(mn(t))||eW(t)),V8=e=>z8(e,t=>e.schema.isBlock(mn(t))),oW=(e,t)=>{const o=Me(q6,e);return Gn(t,r=>o(r)?[r.dom]:[])},qD=e=>{const t=V8(e);return oW(e,t)},sW=(e,t,o,r)=>{const c=oW(t,r);if(c.length===0)Im(t,e,o);else{const u=tA(o.dom,c);t.selection.setRng(u.toRange())}},rW=(e,t)=>{const o=ge(nW(e),tW);return js(o).bind(r=>{const c=Ce.fromRangeStart(e.selection.getRng());return x6(t,c,r.dom)&&!t_(r)?N.some(()=>sW(t,e,r,o)):N.none()})},aW=(e,t)=>{const o=t.parentElement;return os(t)&&!ie(o)&&e.dom.isEmpty(o)},cW=e=>t_(q.fromDom(e)),U8=(e,t)=>{const o=e.selection.getStart(),r=aW(e,o)||cW(o)?tA(o,t):t9(e.selection.getRng(),t);e.selection.setRng(r.toRange())},Z8=(e,t)=>{const o=is(t,qD(e));o.length>0&&U8(e,o)},KD=e=>ze(e.startContainer),iW=e=>e.startOffset===0&&KD(e),lW=(e,t)=>{const o=t.startContainer.parentElement;return!ie(o)&&q6(e,q.fromDom(o))},uW=e=>{const t=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ie(t)&&!ie(o)&&t.isEqualNode(o)},dW=e=>{const t=e.endContainer;return e.endOffset===(ze(t)?t.length:t.childNodes.length)},mW=e=>uW(e)&&dW(e),fW=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),gW=e=>mW(e)||fW(e),hW=e=>{const t=e.selection.getRng();return iW(t)&&lW(e,t)&&gW(t)},pW=e=>{if(hW(e)){const t=qD(e);return N.some(()=>{I_(e),Z8(e,t)})}else return N.none()},YD=(e,t)=>e.selection.isCollapsed()?rW(e,t):pW(e),W8=(e,t)=>wg(e,o=>M(o.dom),o=>t.isBlock(mn(o))),bW=e=>W8(q.fromDom(e.selection.getStart()),e.schema),vW=e=>{const t=e.selection.getRng();return t.collapsed&&(KD(t)||e.dom.isEmpty(t.startContainer))&&!bW(e)},sS=e=>(vW(e)&&U8(e,[]),!0),dv=(e,t,o)=>ve(o)?N.some(()=>{e._selectionOverrides.hideFakeCaret(),Im(e,t,q.fromDom(o))}):N.none(),yW=(e,t)=>{const o=t?aC:cC,c=Mm(t?1:-1,e.getBody(),e.selection.getRng());return o(c)?dv(e,t,c.getNode(!t)):N.from(Hl(t,c)).filter(u=>o(u)&&Ll(c,u)).bind(u=>dv(e,t,u.getNode(!t)))},CW=(e,t)=>{const o=e.selection.getNode();return hi(o)?dv(e,t,o):N.none()},I4=(e,t)=>e.selection.isCollapsed()?yW(e,t):CW(e,t),XD=e=>bo(e,t=>pc(t.dom)||Vo(t.dom)).exists(t=>pc(t.dom)),JD=e=>Hh(e??"").getOr(0),j8=(e,t)=>{const o=e||Aw(t)?"margin":"padding",r=Ts(t,"direction")==="rtl"?"-right":"-left";return o+r},XY=(e,t,o,r,c,u)=>{const f=j8(o,q.fromDom(u)),b=JD(e.getStyle(u,f));if(t==="outdent"){const v=Math.max(0,b-r);e.setStyle(u,f,v?v+c:"")}else{const v=b+r+c;e.setStyle(u,f,v)}},SW=(e,t)=>Ha(t,o=>{const r=j8(lb(e),o),c=tr(o,r).map(JD).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),G8=e=>{const t=q8(e);return!e.mode.isReadOnly()&&(t.length>1||SW(e,t))},wW=e=>!e.mode.isReadOnly()&&jU(e),mv=e=>vi(e)||Aa(e),xW=e=>Lc(e).exists(mv),q8=e=>ge(df(e.selection.getSelectedBlocks()),t=>!mv(t)&&!xW(t)&&XD(t)),K8=(e,t)=>{var b;if(e.mode.isReadOnly())return;const{dom:o}=e,r=vk(e),c=((b=/[a-z%]+$/i.exec(r))==null?void 0:b[0])??"px",u=JD(r),f=lb(e);le(q8(e),v=>{XY(o,t,f,u,c,v.dom)}),t==="indent"?jP(e):YC(e)},Y8=e=>K8(e,"indent"),og=e=>K8(e,"outdent"),_c=e=>{if(e.selection.isCollapsed()&&G8(e)){const t=e.dom,o=e.selection.getRng(),r=Ce.fromRangeStart(o),c=t.getParent(o.startContainer,t.isBlock);if(c!==null&&gE(q.fromDom(c),r,e.schema))return N.some(()=>og(e))}return N.none()},X8=(e,t)=>{const o=pA(e.selection.getRng());return QL(o)?N.some(()=>Im(e,t,q.fromDom(e.selection.getNode()))):N.none()},k1=(e,t)=>e.selection.isCollapsed()?N.none():X8(e,t),sg=(e,t,o)=>cc([_c,E4,x4,(r,c)=>GD(r,t,c),S1,j_,k4,I4,Rs,YD,T4,k1],r=>r(e,o)).filter(r=>e.selection.isEditable()),Uu=(e,t)=>{sg(e,t,!1).fold(()=>{e.selection.isEditable()&&(I_(e),w6(e))},hs),uD(e)&&jO(e.dom,e.getBody())},rS=(e,t)=>{sg(e,t,!0).fold(()=>{e.selection.isEditable()&&AH(e)},hs),uD(e)&&jO(e.dom,e.getBody())},QD=(e,t)=>{e.addCommand("delete",()=>{Uu(e,t)}),e.addCommand("forwardDelete",()=>{rS(e,t)})},L4=5,J8=400,eR=e=>e.touches===void 0||e.touches.length!==1?N.none():N.some(e.touches[0]),EW=(e,t)=>{const o=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return o>L4||r>L4},TW=e=>{const t=Bc(),o=Nt(!1),r=su(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},J8);e.on("touchstart",c=>{eR(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),t.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),eR(c).each(u=>{t.on(f=>{EW(u,f)&&(t.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&t.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},F4=(e,t)=>Yt(e,t.nodeName),Q8=(e,t)=>ze(t)?!0:Ye(t)?!F4(e.getBlockElements(),t)&&!gs(t)&&!ms(e,t)&&!Rg(t)&&!h2(t):!1,e$=(e,t,o)=>jn(JM(q.fromDom(o),q.fromDom(t)),r=>F4(e,r.dom)),kW=(e,t)=>{if(ze(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||F4(e,t.nextSibling)||Rg(t.nextSibling)}return!1},t$=e=>e.dom.create(zs(e),Ki(e)),JY=e=>{const t=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,v,w=null;const k=zs(e);if(!u||!Ye(u))return;const O=f.nodeName.toLowerCase();if(!r.isValidChild(O,k.toLowerCase())||e$(c,f,u))return;if(f.firstChild===f.lastChild&&os(f.firstChild)){b=t$(e),b.appendChild(vm().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let R=f.firstChild;for(;R;)if(Ye(R)&&Ta(r,R),Q8(r,R)){if(kW(c,R)){v=R,R=R.nextSibling,t.remove(v);continue}if(!b){if(!w&&e.hasFocus()&&(w=Lm(e.selection.getRng(),()=>document.createElement("span"))),!R.parentNode){R=null;break}b=t$(e),f.insertBefore(b,R)}v=R,R=R.nextSibling,b.appendChild(v)}else b=null,R=R.nextSibling;w&&(e.selection.setRng(zl(w)),e.nodeChanged())},_W=(e,t,o)=>{const r=q.fromDom(t$(e)),c=vm();Hn(r,c),o(t,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},Zu=e=>{e.on("NodeChange",()=>JY(e))},n$=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,AW=(e,t,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?t.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=t.lastIndexOf("<",u);if(b!==-1&&t.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},_1=(e,t,o)=>{let r=t.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(t[r],AW(e,c,zp(e)));o.content=c}},o$=(e,t)=>Ha(e,o=>{const r=t.match(o);return r!==null&&r[0].length===t.length}),OW=e=>{const t="contenteditable",o=" "+He.trim(Tx(e))+" ",r=" "+He.trim(zp(e))+" ",c=n$(o),u=n$(r),f=Lk(e);f.length>0&&e.on("BeforeSetContent",b=>{_1(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let v=b.length;for(;v--;){const w=b[v];c(w)?w.attr(t,"true"):u(w)&&w.attr(t,"false")}}),e.serializer.addAttributeFilter(t,b=>{let v=b.length;for(;v--;){const w=b[v];if(!c(w)&&!u(w))continue;const k=w.attr("data-mce-content");f.length>0&&k?o$(f,k)?(w.name="#text",w.type=3,w.raw=!0,w.value=k):w.remove():w.attr(t,null)}})},H4=e=>pu(q.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),z4=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Wi(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},s$=(e,t)=>{const o=H4(e);if(o){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),z4(e,o);return}N0(o)&&(z4(e,o),e.undoManager.add())}},r$=e=>{e.on("keyup compositionstart",Me(s$,e))},a$=Vo,c$=(e,t,o)=>D8(t,e,o,Wf,$m,a$),i$=(e,t,o)=>R8(t,e,o,u=>Wf(u)||iC(u),u=>$m(u)||__(u),a$),l$=e=>{const t=e.dom.create(zs(e));return t.innerHTML='<br data-mce-bogus="1">',t},V4=(e,t,o)=>{const r=Fl(e.getBody()),c=Me(kb,t===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Ce.fromRangeStart(o))){const b=q.fromDom(l$(e));t===1?El(q.fromDom(u),b):Gr(q.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},DW=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return c$(o,e,r).orThunk(()=>(V4(e,o,r),N.none()))},RW=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return i$(o,e,r).orThunk(()=>(V4(e,o,r),N.none()))},MW=(e,t)=>{const o=t?e.getEnd(!0):e.getStart(!0);return P_(o)?!t:t},u$=(e,t)=>DW(e,MW(e.selection,t)).exists(o=>(Zm(e,o),!0)),d$=(e,t)=>RW(e,t).exists(o=>(Zm(e,o),!0)),m$=(e,t)=>N4(e,t,t?$m:Wf),U4=(e,t)=>bD(e,!t).map(o=>{const r=o.toRange(),c=e.selection.getRng();return t?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Zm(e,o),!0)),f$=(e,t)=>{const o=f=>En(f,t),r=f=>pc(f.dom),c=q.fromDom(e.container());return bo(c,r,o).filter(f=>!o(f))},g$=(e,t,o)=>(o?ND:x8)(e.getBody(),t).map(c=>c.toRange()),BW=(e,t)=>{const o=Ce.fromRangeStart(e.selection.getRng()),r=Ce.fromRangeEnd(e.selection.getRng()),c=q.fromDom(e.getBody());return Yd(_s(f$(o,c),f$(r,c),(f,b)=>En(f,b)?N.some(f):N.none())).fold(De,f=>t&&Tc(f.dom,r)||!t&&D4(f.dom,o)?g$(e,t?r:o,t).exists(b=>(Zm(e,b),!0)):!1)},Wm=(e,t)=>BW(e,t),tR=e=>vt(["figcaption"],mn(e)),NW=(e,t,o)=>{const r=Me(En,t);return bo(q.fromDom(e.container()),c=>o.isBlock(mn(c)),r).filter(tR)},PW=(e,t,o)=>t?Tc(e.dom,o):D4(e.dom,o),$W=(e,t)=>{const o=q.fromDom(e.getBody()),r=Ce.fromRangeStart(e.selection.getRng());return NW(r,o,e.schema).exists(()=>{if(PW(o,t,r)){const u=_W(e,o,t?Hn:mu);return e.selection.setRng(u),!0}else return!1})},Z4=(e,t)=>e.selection.isCollapsed()?$W(e,t):!1,nR=(e,t,o)=>{const r=e.selection.getRng(),c=Ce.fromRangeStart(r);return e.getBody().firstChild===t&&D4(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},h$=(e,t)=>{const o=e.selection.getRng(),r=Ce.fromRangeStart(o);return e.getBody().lastChild===t&&Tc(t,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},p$=(e,t)=>t?N.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>h$(e,o)).getOr(!1):N.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>N.from(e.dom.getParent(o,"details")).map(r=>nR(e,r,o))).getOr(!1),oR=(e,t)=>p$(e,t),b$={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},aS=e=>Mt(e,t=>({...b$,...t})),W4=e=>Mt(e,t=>({...b$,...t})),sR=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,v$=(e,t)=>Gn(aS(e),o=>sR(o,t)?[o]:[]),y$=(e,t)=>Gn(W4(e),o=>sR(o,t)?[o]:[]),zt=(e,...t)=>()=>e.apply(null,t),Mh=(e,t)=>so(v$(e,t),o=>o.action()),j4=(e,t)=>cc(y$(e,t),o=>o.action()),fv=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return D8(e,o,r,aC,cC,hi).exists(c=>(Zm(e,c),!0))},C$=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return R8(e,o,r,aC,cC,hi).exists(c=>(Zm(e,c),!0))},rR=(e,t)=>N4(e,t,t?cC:aC),IW=(e,t)=>S$(e,t,et),S$=(e,t,o)=>Gn(vs(e),r=>Ic(r,t)?o(r)?[r]:[]:S$(r,t,o)),w$=(e,t,o=De)=>{if(o(t))return N.none();if(vt(e,mn(t)))return N.some(t);const r=c=>Ic(c,"table")||o(c);return $s(t,e.join(","),r)},LW=(e,t)=>w$(["td","th"],e,t),x$=e=>IW(e,"th,td"),FW=(e,t)=>qr(e,"table",t),E$=ei.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),cS={...E$,none:e=>E$.none(e)},aR=(e,t,o,r,c=et)=>{const u=r===1;if(!u&&o<=0)return cS.first(e[0]);if(u&&o>=e.length-1)return cS.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?cS.middle(t,b):aR(e,t,f,r,c)}},T$=(e,t)=>FW(e,t).bind(o=>{const r=x$(o);return il(r,u=>En(e,u)).map(u=>({index:u,all:r}))}),HW=(e,t,o)=>T$(e,o).fold(()=>cS.none(e),c=>aR(c.all,e,c.index,1,t)),zW=(e,t,o)=>T$(e,o).fold(()=>cS.none(),c=>aR(c.all,e,c.index,-1,t));var cR=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],VW=()=>{const e=w=>q.fromDom(w.dom.cloneNode(!1)),t=w=>Sl(w).dom,o=w=>bs(w)?mn(w)==="body"?!0:vt(cR,mn(w)):!1,r=w=>bs(w)?vt(["br","img","hr","input"],mn(w)):!1,c=w=>bs(w)&&zo(w,"contenteditable")==="false",u=(w,k)=>w.dom.compareDocumentPosition(k.dom),f=(w,k)=>{const O=Cn(w);Rr(k,O)},b=w=>{const k=mn(w);return vt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],k)},v=w=>bs(w)?Pi(w,"lang"):N.none();return{up:Xe({selector:$s,closest:qr,predicate:hu,all:ci}),down:Xe({selector:Br,predicate:t0}),styles:Xe({get:Ts,getRaw:tr,set:gc,remove:J1}),attrs:Xe({get:zo,set:ds,remove:Ks,copyTo:f}),insert:Xe({before:Gr,after:El,afterAll:K1,append:Hn,appendAll:li,prepend:mu,wrap:Fc}),remove:Xe({unwrap:ui,remove:Ao}),create:Xe({nu:q.fromTag,clone:e,text:q.fromText}),query:Xe({comparePosition:u,prevSibling:ii,nextSibling:du}),property:Xe({children:vs,name:mn,parent:Lc,document:t,isText:Qn,isComment:yl,isElement:bs,isSpecial:b,getLanguage:v,getText:ma,setText:n2,isBoundary:o,isEmptyTag:r,isNonEditable:c}),eq:En,is:W1}};const jm=(e,t)=>({element:e,offset:t}),iR=(e,t)=>{if(e.property().isText(t))return jm(t,e.property().getText(t).length);{const o=e.property().children(t);return o.length>0?iR(e,o[o.length-1]):jm(t,o.length)}},G4=(e,t,o)=>{const r=e.property().children(t);return r.length>0&&o<r.length?G4(e,r[o],0):r.length>0&&e.property().isElement(t)&&r.length===o?iR(e,r[r.length-1]):jm(t,o)},k$=G4,lR=VW(),Bh=(e,t)=>k$(lR,e,t),uR=Ns("image"),ql=e=>{const t=e;return N.from(t[uR])},A1=(e,t)=>{const o=e;o[uR]=t},q4=Ns("event"),dR=e=>{const t=e;return N.from(t[q4])},K4=e=>t=>{const o=t;o[q4]=e},_$=(e,t)=>K4(t)(e),A$=K4(0),UW=K4(2),ZW=K4(1),WW=(e=>t=>{const o=t;return N.from(o[q4]).exists(r=>r===e)})(0),O$=()=>Object.freeze({length:0,item:e=>null}),mR=Ns("mode"),jW=e=>{const t=e;return N.from(t[mR])},rg=e=>t=>{const o=t;o[mR]=e},iS=(e,t)=>rg(t)(e),fR=rg(0),Y4=rg(2),gR=rg(1),D$=e=>t=>{const o=t;return N.from(o[mR]).exists(r=>r===e)},gv=D$(0),R$=D$(1),M$=(e,t)=>({...t,get length(){return t.length},add:(o,r)=>{if(gv(e))if(Y(o)){if(!as(r))return t.add(o,r)}else return t.add(o);return null},remove:o=>{gv(e)&&t.remove(o)},clear:()=>{gv(e)&&t.clear()}}),X4=["none","copy","link","move"],B$=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],hv=()=>{const e=new window.DataTransfer;let t="move",o="all";const r={get dropEffect(){return t},set dropEffect(c){vt(X4,c)&&(t=c)},get effectAllowed(){return o},set effectAllowed(c){WW(r)&&vt(B$,c)&&(o=c)},get items(){return M$(r,e.items)},get files(){return R$(r)?O$():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{gv(r)&&(A1(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>R$(r)?"":e.getData(c),setData:(c,u)=>{gv(r)&&e.setData(c,u)},clearData:c=>{gv(r)&&e.clearData(c)}};return fR(r),r},GW=e=>{const t=hv(),o=jW(e);return Y4(e),A$(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,ql(e).each(r=>t.setDragImage(r.image,r.x,r.y)),le(e.types,r=>{r!=="Files"&&t.setData(r,e.getData(r))}),le(e.files,r=>t.items.add(r)),dR(e).each(r=>{_$(t,r)}),o.each(r=>{iS(e,r),iS(t,r)}),t},N$=e=>{const t=e.getData("text/html");return t===""?N.none():N.some(t)},P$=(e,t)=>e.setData("text/html",t),qW=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),KW=(e,t)=>Gn(t,o=>{const r=qW(Sm(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),$$=(e,t,o)=>cn(e,(r,c)=>r.fold(()=>N.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-t)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-t)+Math.abs(c.y-o));return N.some(b<f?c:u)}),N.none()),I$=(e,t,o,r,c)=>{const u=Br(q.fromDom(o),"td,th,caption").map(b=>b.dom),f=ge(KW(e,u),b=>t(b,c));return $$(f,r,c).map(b=>b.cell)},YW=e=>e.bottom,L$=e=>e.top,lS=(e,t)=>e.y<t,XW=(e,t)=>e.y>t,F$=Me(I$,YW,lS),H$=Me(I$,L$,XW),z$=(e,t)=>ps(t.getClientRects()).bind(o=>F$(e,o.left,o.top)).bind(o=>E1(w8(o),t)),hR=(e,t)=>js(t.getClientRects()).bind(o=>H$(e,o.left,o.top)).bind(o=>E1(T1(o),t)),V$=(e,t,o)=>o.breakAt.exists(r=>e(t,r).breakAt.isSome()),JW=e=>e.breakType===Um.Wrap&&e.positions.length===0,U$=e=>e.breakType===Um.Br&&e.positions.length===1,Z$=(e,t,o)=>{const r=e(t,o);return JW(r)||!os(o.getNode())&&U$(r)?!V$(e,t,r):r.breakAt.isNone()},QW=Me(Z$,Fr),ej=Me(Z$,nS),pR=(e,t,o)=>{const r=Ce.fromRangeStart(t);return l(!e,o).exists(c=>c.isEqual(r))},tj=(e,t,o,r)=>{const c=e.selection.getRng(),u=t?1:-1;return Cb()&&pR(t,c,o)?(tg(u,e,o,!t,!1).each(f=>{Zm(e,f)}),!0):!1},nj=(e,t,o)=>z$(t,o).orThunk(()=>ps(o.getClientRects()).bind(r=>BD(oS(e,Ce.before(t)),r.left))).getOr(Ce.before(t)),J4=(e,t,o)=>hR(t,o).orThunk(()=>ps(o.getClientRects()).bind(r=>BD(Dh(e,Ce.after(t)),r.left))).getOr(Ce.after(t)),W$=(e,t)=>{const o=t.getNode(e);return Wa(o)?N.some(o):N.none()},bR=(e,t,o)=>{t.undoManager.transact(()=>{const r=e?El:Gr,c=_W(t,q.fromDom(o),r);Zm(t,c)})},vR=(e,t,o)=>{const r=W$(!!t,o),c=t===!1;r.fold(()=>Zm(e,o.toRange()),u=>l(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Zm(e,o.toRange()),f=>bR(t,e,u)))},j$=(e,t,o,r)=>{const c=e.selection.getRng(),u=Ce.fromRangeStart(c),f=e.getBody();if(!t&&QW(r,u)){const b=nj(f,o,u);return vR(e,t,b),!0}else if(t&&ej(r,u)){const b=J4(f,o,u);return vR(e,t,b),!0}else return!1},yR=(e,t,o)=>N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>N.from(e.dom.getParent(r,"table")).map(c=>o(e,t,c,r))).getOr(!1),G$=(e,t)=>yR(e,t,tj),CR=(e,t)=>yR(e,t,j$),oj=e=>{const t=im.exact(e,0,e,0);return um(t)},sj=e=>pv(e)||eo(e).some(t=>Cl(t)&&pv(t)),uS=(e,t,o)=>o.fold(N.none,N.none,(r,c)=>y3(c).map(u=>oj(u)),r=>e.mode.isReadOnly()||!rj(r)||!sj(r)?N.none():(e.execCommand("mceTableInsertRowAfter"),q$(e,t,r))),rj=e=>bo(e,uu("table")).exists(Li),q$=(e,t,o)=>uS(e,t,HW(o,pv)),aj=(e,t,o)=>uS(e,t,zW(o,pv)),pv=e=>Li(e)||xg(e,cj),cj=e=>Cl(e)&&Li(e),K$=(e,t)=>{const o=["table","li","dl"],r=q.fromDom(e.getBody()),c=b=>{const v=mn(b);return En(b,r)||vt(o,v)},u=e.selection.getRng(),f=q.fromDom(t?u.endContainer:u.startContainer);return LW(f,c).map(b=>(FW(b,c).each(k=>{e.model.table.clearSelectedCells(k.dom)}),e.selection.collapse(!t),(t?q$:aj)(e,c,b).each(k=>{e.selection.setRng(k)}),!0)).getOr(!1)},Y$=(e,t,o)=>{const r=Fn.os.isMacOS()||Fn.os.isiOS(),c=Fn.browser.isFirefox();Mh([{keyCode:ct.RIGHT,action:zt(u$,e,!0)},{keyCode:ct.LEFT,action:zt(u$,e,!1)},{keyCode:ct.UP,action:zt(d$,e,!1)},{keyCode:ct.DOWN,action:zt(d$,e,!0)},...r?[{keyCode:ct.UP,action:zt(U4,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ct.DOWN,action:zt(U4,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ct.RIGHT,action:zt(G$,e,!0)},{keyCode:ct.LEFT,action:zt(G$,e,!1)},{keyCode:ct.UP,action:zt(CR,e,!1)},{keyCode:ct.DOWN,action:zt(CR,e,!0)},{keyCode:ct.UP,action:zt(CR,e,!1)},{keyCode:ct.UP,action:zt(oR,e,!1)},{keyCode:ct.DOWN,action:zt(oR,e,!0)},{keyCode:ct.RIGHT,action:zt(fv,e,!0)},{keyCode:ct.LEFT,action:zt(fv,e,!1)},{keyCode:ct.UP,action:zt(C$,e,!1)},{keyCode:ct.DOWN,action:zt(C$,e,!0)},{keyCode:ct.RIGHT,action:zt(jD,e,t,!0)},{keyCode:ct.LEFT,action:zt(jD,e,t,!1)},{keyCode:ct.RIGHT,ctrlKey:!r,altKey:r,action:zt($4,e,t)},{keyCode:ct.LEFT,ctrlKey:!r,altKey:r,action:zt(XZ,e,t)},{keyCode:ct.UP,action:zt(Z4,e,!1)},{keyCode:ct.DOWN,action:zt(Z4,e,!0)},...c?[{keyCode:ct.UP,action:zt(Wm,e,!1)},{keyCode:ct.DOWN,action:zt(Wm,e,!0)}]:[]],o).each(u=>{o.preventDefault()})},ij=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Y$(e,t,o)})},Ud=(e,t)=>({container:e,offset:t}),Q4=_n.DOM,eT=e=>t=>e===t?-1:0,lj=e=>t=>e.isBlock(t)||vt(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",SR=(e,t,o)=>{if(ze(e)&&t>=0)return N.some(Ud(e,t));{const r=Cu(Q4);return N.from(r.backwards(e,t,eT(e),o)).map(c=>Ud(c.container,c.container.data.length))}},wR=(e,t,o)=>{if(ze(e)&&t>=e.length)return N.some(Ud(e,t));{const r=Cu(Q4);return N.from(r.forwards(e,t,eT(e),o)).map(c=>Ud(c.container,0))}},xR=(e,t,o)=>{if(!ze(e))return N.none();const r=e.data;if(t>=0&&t<=r.length)return N.some(Ud(e,t));{const c=Cu(Q4);return N.from(c.backwards(e,t,eT(e),o)).bind(u=>{const f=u.container.data;return xR(u.container,t+f.length,o)})}},ER=(e,t,o)=>{if(!ze(e))return N.none();const r=e.data;if(t<=r.length)return N.some(Ud(e,t));{const c=Cu(Q4);return N.from(c.forwards(e,t,eT(e),o)).bind(u=>ER(u.container,t-r.length,o))}},TR=(e,t,o,r,c)=>{const u=Cu(e,lj(e));return N.from(u.backwards(t,o,r,c))},uj=e=>e.collapsed&&ze(e.startContainer),dj=e=>Ya(e.toString().replace(/\u00A0/g," ")),X$=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,hr=(e,t)=>e.substring(t.length),mj=(e,t,o,r=!1)=>{let c;const u=o.charAt(0);for(c=t-1;c>=0;c--){const f=e.charAt(c);if(!r&&X$(f))return N.none();if(u===f&&xs(e,o,c,t))break}return N.some(c)},kR=(e,t,o,r=!1)=>{if(!uj(t))return N.none();const c={text:"",offset:0},u=(b,v,w)=>(c.text=w+c.text,c.offset+=v,mj(c.text,c.offset,o,r).getOr(v)),f=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return TR(e,t.startContainer,t.startOffset,u,f).bind(b=>{const v=t.cloneRange();if(v.setStart(b.container,b.offset),v.setEnd(t.endContainer,t.endOffset),v.collapsed)return N.none();const w=dj(v);return w.lastIndexOf(o)!==0?N.none():N.some({text:hr(w,o),range:v,trigger:o})})},fj=e=>e.nodeType===qv,J$=e=>e.nodeType===Zh,tT=e=>{if(fj(e))return Ud(e,e.data.length);{const t=e.childNodes;return t.length>0?tT(t[t.length-1]):Ud(e,t.length)}},_R=(e,t)=>{const o=e.childNodes;return o.length>0&&t<o.length?_R(o[t],0):o.length>0&&J$(e)&&o.length===t?tT(o[o.length-1]):Ud(e,t)},dS=(e,t)=>{const o=e.getParent(t.container,e.isBlock)??e.getRoot();return TR(e,t.container,t.offset,(r,c)=>c===0?-1:c,o).filter(r=>{const c=r.container.data.charAt(r.offset-1);return!X$(c)}).isSome()},gj=e=>t=>{const o=_R(t.startContainer,t.startOffset);return!dS(e,o)},hj=(e,t,o)=>cc(o.triggers,r=>kR(e,t,r)),pj=(e,t)=>{const o=t(),r=e.selection.getRng();return hj(e.dom,r,o).bind(c=>Q$(e,t,c))},Q$=(e,t,o,r={})=>{const c=t(),f=e.selection.getRng().startContainer.nodeValue??"",b=ge(c.lookupByTrigger(o.trigger),w=>o.text.length>=w.minChars&&w.matches.getOrThunk(()=>gj(e.dom))(o.range,f,o.text));if(b.length===0)return N.none();const v=Promise.all(Mt(b,w=>w.fetch(o.text,w.maxResults,r).then(O=>({matchText:o.text,items:O,columns:w.columns,onAction:w.onAction,highlightOn:w.highlightOn}))));return N.some({lookupData:v,context:o})},bj=ay("type"),vj=Ww("fetch"),yj=Ww("onAction"),Cj=e=>sh("columns",e),Sj=Ra([bj,ay("trigger"),lk("minChars",1),Cj(1),lk("maxResults",10),Z5("matches"),vj,yj,uk("highlightOn",[],ny)]),wj=e=>oh("Autocompleter",Sj,e),xj=()=>{const e={},t={},o={},r={},c={},u={},f={},b={},v={},w=(I,U)=>(H,j)=>{I[H.toLowerCase()]={...j,type:U}},k=(I,U)=>(H,j)=>{I[H.toLowerCase()]={type:U,...j}},O=(I,U)=>r[I.toLowerCase()]=U,R=(I,U)=>f[I.toLowerCase()]=U;return{addButton:w(e,"button"),addGroupToolbarButton:w(e,"grouptoolbarbutton"),addToggleButton:w(e,"togglebutton"),addMenuButton:w(e,"menubutton"),addSplitButton:w(e,"splitbutton"),addMenuItem:w(t,"menuitem"),addNestedMenuItem:w(t,"nestedmenuitem"),addToggleMenuItem:w(t,"togglemenuitem"),addAutocompleter:w(o,"autocompleter"),addContextMenu:w(c,"contextmenu"),addContextToolbar:w(u,"contexttoolbar"),addContextForm:k(u,"contextform"),addSidebar:w(b,"sidebar"),addView:w(v,"views"),addIcon:O,addContext:R,getAll:()=>({buttons:e,menuItems:t,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:b,views:v,contexts:f})}},Ej=e=>{const t=e.ui.registry.getAll().popups,o=lc(t,f=>wj(f).fold(b=>{throw new Error(Eu(b))},Yo)),r=gg(Mc(o,f=>f.trigger)),c=za(o);return{dataset:o,triggers:r,lookupByTrigger:f=>ge(c,b=>b.trigger===f)}},Tj=(e,t)=>{const o=su(t.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),t.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},kj=e=>{const t=Bc(),o=Nt(!1),r=t.isSet,c=()=>{r()&&(_m(e),o.set(!1),t.clear())},u=O=>{r()||t.set({trigger:O.trigger,matchLength:O.text.length})},f=ya(()=>Ej(e)),b=O=>t.get().map(R=>kR(e.dom,e.selection.getRng(),R.trigger,!0).bind(I=>Q$(e,f,I,O))).getOrThunk(()=>pj(e,f)),v=O=>{b(O).fold(c,R=>{u(R.context),R.lookupData.then(I=>{t.get().map(U=>{const H=R.context;U.trigger===H.trigger&&(t.set({...U,matchLength:H.text.length}),o.get()?(my(e,{range:H.range}),Bp(e,{lookupData:I})):(o.set(!0),my(e,{range:H.range}),Mp(e,{lookupData:I})))})})})},w=(O,R)=>{const I=O.compareBoundaryPoints(window.Range.START_TO_START,R),U=O.compareBoundaryPoints(window.Range.END_TO_END,R);return I>=0&&U<=0},k=()=>t.get().bind(({trigger:O})=>{const R=e.selection.getRng();return kR(e.dom,R,O,o.get()).filter(({range:I})=>w(R,I)).map(({range:I})=>I)});e.addCommand("mceAutocompleterReload",(O,R)=>{const I=tn(R)?R.fetchOptions:{};v(I)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{k().each(O=>{my(e,{range:O})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>k().isSome()),Tj(e,{cancelIfNecessary:c,load:v})},eI=cu().browser.isSafari(),AR=e=>ym(q.fromDom(e)),tI=(e,t)=>{var o;return e.startOffset===0&&e.endOffset===((o=t.textContent)==null?void 0:o.length)},nT=(e,t)=>N.from(e.getParent(t.container(),"details")),nI=(e,t)=>nT(e,t).isSome(),Aj=(e,t)=>{const o=N.from(e.getParent(t.startContainer,"details")),r=N.from(e.getParent(t.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>N.from(e.select("summary",u)[0]));return N.some({startSummary:c,startDetails:o,endDetails:r})}else return N.none()},oI=(e,t)=>y(t).exists(o=>o.isEqual(e)),Oj=(e,t)=>E(t).exists(o=>os(o.getNode())&&p(t,o).exists(r=>r.isEqual(e))||o.isEqual(e)),sI=(e,t)=>t.startSummary.exists(o=>oI(e,o)),Dj=(e,t)=>t.startSummary.exists(o=>Oj(e,o)),rI=(e,t)=>t.startDetails.exists(o=>p(o,e).forall(r=>t.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),aI=(e,t,o)=>o.startDetails.exists(r=>m(e,t).forall(c=>!r.contains(c.container()))),cI=(e,t)=>{const o=t.getNode();as(o)||e.selection.setCursorLocation(o,t.offset())},iI=(e,t,o)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?y(c):E(c)).each(f=>cI(e,f))}else cI(e,t)},Rj=(e,t)=>{const o=v=>v.contains(e.startContainer),r=v=>v.contains(e.endContainer),c=t.startSummary.exists(o),u=t.startSummary.exists(r),f=t.startDetails.forall(v=>t.endDetails.forall(w=>v!==w));return(c||u)&&!(c&&u)||f},lI=(e,t,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=Ce.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),v=nT(r,f),w=b&&r.isEmpty(b),k=ie(b==null?void 0:b.previousSibling),O=ie(b==null?void 0:b.nextSibling);return w&&(t?O:k)&&mh(!t,u,f).exists(U=>nI(r,U)&&!Kd(v,nT(r,U)))?!0:mh(t,u,f).fold(De,R=>{const I=nT(r,R);if(nI(r,R)&&!Kd(v,I)){if(t||iI(e,R,!1),b&&w){if(t&&k)return!0;if(!t&&O)return!0;iI(e,R,t),e.dom.remove(b)}return!0}else return!1})}else return!1},uI=(e,t,o,r)=>{const u=e.selection.getRng(),f=Ce.fromRangeStart(u),b=e.getBody();return r==="selection"?Rj(u,t):o?Dj(f,t)||aI(b,f,t):sI(f,t)||rI(f,t)},Mj=(e,t,o)=>Aj(e.dom,e.selection.getRng()).fold(()=>lI(e,t,o),r=>uI(e,r,t,o)||lI(e,t,o)),Bj=(e,t,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=Ce.fromRangeStart(u);return R3(c)?(o==="selection"&&tI(u,c)||x6(t,f,c)?AR(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:v,anchorOffset:w,focusNode:k,focusOffset:O}=b??{};const R=()=>{ve(v)&&ve(w)&&ve(k)&&ve(O)&&(b==null||b.setBaseAndExtent(v,w,k,O))},I=()=>{v=b==null?void 0:b.anchorNode,w=b==null?void 0:b.anchorOffset,k=b==null?void 0:b.focusNode,O=b==null?void 0:b.focusOffset},U=(j,oe)=>{le(j.childNodes,se=>{Yy(se)&&oe.appendChild(se)})},H=e.dom.create("span",{"data-mce-bogus":"1"});U(c,H),c.appendChild(H),R(),(o==="word"||o==="line")&&(b==null||b.modify("extend",t?"right":"left",o)),!r.isCollapsed()&&tI(r.getRng(),H)?AR(c):(e.execCommand(t?"ForwardDelete":"Delete"),I(),U(H,c),R()),e.dom.remove(H)}),!0):!1},Nh=(e,t,o)=>Mj(e,t,o)||eI&&Bj(e,t,o)?N.some(Dt):N.none(),dI=e=>(t,o,r={})=>{const c=t.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Dt,inputType:o},f=O2(new InputEvent(e));return t.dispatch(e,{...f,...u,...r})},mS=dI("input"),fS=dI("beforeinput"),mI=cu(),fI=mI.os,gI=fI.isMacOS()||fI.isiOS(),hI=mI.browser.isFirefox(),Pj=(e,t,o)=>{const r=o.keyCode===ct.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";j4([{keyCode:ct.BACKSPACE,action:zt(_c,e)},{keyCode:ct.BACKSPACE,action:zt(E4,e,!1)},{keyCode:ct.DELETE,action:zt(E4,e,!0)},{keyCode:ct.BACKSPACE,action:zt(x4,e,!1)},{keyCode:ct.DELETE,action:zt(x4,e,!0)},{keyCode:ct.BACKSPACE,action:zt(GD,e,t,!1)},{keyCode:ct.DELETE,action:zt(GD,e,t,!0)},{keyCode:ct.BACKSPACE,action:zt(j_,e,!1)},{keyCode:ct.DELETE,action:zt(j_,e,!0)},{keyCode:ct.BACKSPACE,action:zt(Nh,e,!1,u)},{keyCode:ct.DELETE,action:zt(Nh,e,!0,u)},...gI?[{keyCode:ct.BACKSPACE,altKey:!0,action:zt(Nh,e,!1,f(!0))},{keyCode:ct.DELETE,altKey:!0,action:zt(Nh,e,!0,f(!0))},{keyCode:ct.BACKSPACE,metaKey:!0,action:zt(Nh,e,!1,f(!1))}]:[{keyCode:ct.BACKSPACE,ctrlKey:!0,action:zt(Nh,e,!1,f(!0))},{keyCode:ct.DELETE,ctrlKey:!0,action:zt(Nh,e,!0,f(!0))}],{keyCode:ct.BACKSPACE,action:zt(k4,e,!1)},{keyCode:ct.DELETE,action:zt(k4,e,!0)},{keyCode:ct.BACKSPACE,action:zt(I4,e,!1)},{keyCode:ct.DELETE,action:zt(I4,e,!0)},{keyCode:ct.BACKSPACE,action:zt(Rs,e,!1)},{keyCode:ct.DELETE,action:zt(Rs,e,!0)},{keyCode:ct.BACKSPACE,action:zt(S1,e,!1)},{keyCode:ct.DELETE,action:zt(S1,e,!0)},{keyCode:ct.BACKSPACE,action:zt(YD,e,!1)},{keyCode:ct.DELETE,action:zt(YD,e,!0)},{keyCode:ct.BACKSPACE,action:zt(T4,e,!1)},{keyCode:ct.DELETE,action:zt(T4,e,!0)},{keyCode:ct.BACKSPACE,action:zt(k1,e,!1)},{keyCode:ct.DELETE,action:zt(k1,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),fS(e,r).isDefaultPrevented()||(b(),mS(e,r))})},$j=(e,t,o,r)=>Mh([{keyCode:ct.BACKSPACE,action:zt(wD,e)},{keyCode:ct.DELETE,action:zt(wD,e)},...gI?[{keyCode:ct.BACKSPACE,altKey:!0,action:zt(sS,e)},{keyCode:ct.DELETE,altKey:!0,action:zt(sS,e)},...o?[{keyCode:hI?224:91,action:zt(()=>(Z8(e,r),sS(e)))}]:[]]:[{keyCode:ct.BACKSPACE,ctrlKey:!0,action:zt(sS,e)},{keyCode:ct.DELETE,ctrlKey:!0,action:zt(sS,e)}]],t),Ij=(e,t)=>{let o=!1,r=[];e.on("keydown",c=>{o=c.keyCode===ct.BACKSPACE,r=qD(e),c.isDefaultPrevented()||Pj(e,t,c)}),e.on("keyup",c=>{c.isDefaultPrevented()||($j(e,c,o,r),r.length=0),o=!1})},Lj=(e,t)=>{const o=q.fromDom(e),r=q.fromDom(t),c=uu("span"),u=Me(En,o),f=v=>bs(v)&&tr(v,"font-size").isSome(),b=[...f(r)?[r]:[],...ad(r,f,u)];le(b.slice(1),v=>{J1(v,"font-size"),Ks(v,"data-mce-style"),c(v)&&yg(v)&&ui(v)})},Fj=e=>{for(;e;){if(Ye(e)||ze(e)&&e.data&&/[\r\n\s]/.test(e.data))return N.from(q.fromDom(e));e=e.nextSibling}return N.none()},bv=(e,t)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const u=v=>/^(ul|ol|dl)$/.test(mn(v)),f=v=>u(v)?N.from(v):Yh(v,u),b=v=>o.isEmpty(v.dom);Fj(t.firstChild).each(v=>{f(v).fold(()=>{if(b(v)){const w=Bh(v,0).element;bs(w)&&!Zi(w)&&Hn(w,q.fromText(us))}},w=>{Gr(w,q.fromText(us))})})}const c=o.createRng();if(t.normalize(),t.hasChildNodes()){const u=new ys(t,t);let f=t,b;for(;b=u.current();){if(ze(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else os(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(c.setStartBefore(t),c.setEndBefore(t)):(c.setStartAfter(t),c.setEndAfter(t)):(c.setStart(t,0),c.setEnd(t,0));e.selection.setRng(c),Ji(e,c)},gS=(e,t)=>{const o=e.getRoot();let r,c=t;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},OR=e=>N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),tX=e=>OR(e).fold(Xe(""),t=>t.nodeName.toUpperCase()),Hj=e=>OR(e).filter(t=>Aa(q.fromDom(t))).isSome(),vv=e=>{e.innerHTML='<br data-mce-bogus="1">'},pI=(e,t,o)=>{const r=e.dom;N.from(o.style).map(r.parseStyle).each(v=>{const k={...Cg(q.fromDom(t)),...v};r.setStyles(t,k)});const c=N.from(o.class).map(v=>v.split(/\s+/)),u=N.from(t.className).map(v=>ge(v.split(/\s+/),w=>w!==""));_s(c,u,(v,w)=>{const k=ge(w,R=>!vt(v,R)),O=[...v,...k];r.setAttrib(t,"class",O.join(" "))});const f=["style","class"],b=nu(o,(v,w)=>!vt(f,w));r.setAttribs(t,b)},yv=(e,t)=>{if(zs(e).toLowerCase()===t.tagName.toLowerCase()){const r=Ki(e);pI(e,t,r)}},bI=(e,t,o,r,c=!0,u,f)=>{const b=e.dom,v=e.schema,w=zs(e),k=o?o.nodeName.toUpperCase():"";let O=t;const R=v.getTextInlineElements();let I;u||k==="TABLE"||k==="HR"?I=b.create(u||w,f||{}):I=o.cloneNode(!1);let U=I;if(!c)b.setAttrib(I,"style",null),b.setAttrib(I,"class",null);else{do if(R[O.nodeName]){if(M(O)||gs(O))continue;const H=O.cloneNode(!1);b.setAttrib(H,"id",""),I.hasChildNodes()?(H.appendChild(I.firstChild),I.appendChild(H)):(U=H,I.appendChild(H))}while((O=O.parentNode)&&O!==r);I.nodeName!=="LI"&&Lj(I,U)}return yv(e,I),vv(U),I},vI=(e,t)=>e.dom.getParent(t,np),yI=(e,t,o)=>{let r=t;for(;r&&r!==e&&ie(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return np(c);r=c}return!1},zj=(e,t,o)=>!t&&o.nodeName.toLowerCase()===zs(e)&&e.dom.isEmpty(o)&&yI(e.getBody(),o,r=>Yt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),Vj=(e,t,o)=>{var u,f;const r=t(zs(e)),c=vI(e,o);c&&(e.dom.insertAfter(r,c),bv(e,r),(((f=(u=o.parentElement)==null?void 0:u.childNodes)==null?void 0:f.length)??0)>1&&e.dom.remove(o))},Uj=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,CI=e=>{var t;return((t=e.parentNode)==null?void 0:t.firstChild)===e},SI=(e,t)=>{const o=e==null?void 0:e.parentNode;return ve(o)&&o.nodeName===t},oT=e=>ve(e)&&/^(OL|UL|LI)$/.test(e.nodeName),DR=e=>ve(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Zj=e=>oT(e)&&oT(e.parentNode),sT=e=>{const t=e.parentNode;return DR(t)?t:e},hS=(e,t,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ye(r);)r=r[o?"nextSibling":"previousSibling"];return r===t},wI=e=>cn(Mc(Cg(q.fromDom(e)),(t,o)=>`${o}: ${t};`),(t,o)=>t+o,""),Wj=(e,t,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;Zj(o)&&(c="LI");const v=DR(r)?wI(r):void 0;let w=DR(r)&&v?t(c,{style:wI(r)}):t(c);if(hS(o,r,!0)&&hS(o,r,!1))if(SI(o,"LI")){const k=sT(o);u.insertAfter(w,k),CI(o)?u.remove(k):u.remove(o)}else u.replace(w,o);else if(hS(o,r,!0))SI(o,"LI")?(u.insertAfter(w,sT(o)),w.appendChild(u.doc.createTextNode(" ")),w.appendChild(o)):b.insertBefore(w,o),u.remove(r);else if(hS(o,r,!1))u.insertAfter(w,sT(o)),u.remove(r);else{o=sT(o);const k=f.cloneRange();k.setStartAfter(r),k.setEndAfter(o);const O=k.extractContents();if(c==="LI"&&Uj(O,"LI")){const R=ge(Mt(w.children,q.fromDom),ao(uu("br")));w=O.firstChild,u.insertAfter(O,o),le(R,I=>mu(q.fromDom(w),I)),v&&w.setAttribute("style",v)}else u.insertAfter(O,o),u.insertAfter(w,o);u.remove(r)}bv(e,w)},jj=e=>{le(t0(q.fromDom(e),Qn),t=>{const o=t.dom;o.nodeValue=Ya(o.data)})},Gj=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},nX=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),RR=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,qj=(e,t)=>e.nodeName===t||e.nextSibling&&e.nextSibling.nodeName===t,MR=(e,t)=>ve(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",Kj=(e,t,o)=>{var f;const r=[];if(!o)return;let c=o;for(;c=c.firstChild;){if(e.isBlock(c))return;Ye(c)&&!t[c.nodeName.toLowerCase()]&&r.push(c)}let u=r.length;for(;u--;)c=r[u],(!c.hasChildNodes()||c.firstChild===c.lastChild&&((f=c.firstChild)==null?void 0:f.nodeValue)===""||nX(e,c))&&e.remove(c)},BR=(e,t,o)=>ze(t)?e?o===1&&t.data.charAt(o-1)===rr?0:o:o===t.data.length-1&&t.data.charAt(o)===rr?t.data.length:o:o,xI=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,BR(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,BR(!1,e.endContainer,e.endOffset)),t},Yj=e=>{let t=e;do ze(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},NR=(e,t,o,r,c)=>{var v;const u=e.dom,f=gS(u,r)??u.getRoot();let b=u.getParent(r,u.isBlock);if(!b||!MR(u,b)){if(b=b||f,!b.hasChildNodes()){const R=u.create(t);return yv(e,R),b.appendChild(R),o.setStart(R,0),o.setEnd(R,0),R}let w=r;for(;w&&w.parentNode!==b;)w=w.parentNode;let k;for(;w&&!u.isBlock(w);)k=w,w=w.previousSibling;const O=(v=k==null?void 0:k.parentElement)==null?void 0:v.nodeName;if(k&&O&&e.schema.isValidChild(O,t.toLowerCase())){const R=k.parentNode,I=u.create(t);for(yv(e,I),R.insertBefore(I,k),w=k;w&&!u.isBlock(w);){const U=w.nextSibling;I.appendChild(w),w=U}o.setStart(r,c),o.setEnd(r,c)}}return r},Gm=(e,t)=>{t.normalize();const o=t.lastChild;(!o||Ye(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(t,"br")},EI=(e,t)=>{const o=ab(e);return gn(t)?!1:Y(o)?vt(He.explode(o),t.nodeName.toLowerCase()):o},pS={insert:(e,t)=>{let o,r,c,u,f=!1;const b=e.dom,v=e.schema,w=v.getNonEmptyElements(),k=e.selection.getRng(),O=zs(e),R=q.fromDom(k.startContainer),I=Bi(R,k.startOffset),U=I.exists(Ee=>Cl(Ee)&&!Li(Ee)),H=k.collapsed&&U,j=(Ee,Qe)=>bI(e,o,Je,Oe,ux(e),Ee,Qe),oe=Ee=>{const Qe=BR(Ee,o,r);if(ze(o)&&(Ee?Qe>0:Qe<o.data.length))return!1;if((o.parentNode===Je||o===Je)&&f&&!Ee||Ee&&Ye(o)&&o===Je.firstChild)return!0;if(RR(o,"TABLE")||RR(o,"HR"))return qj(o,"BR")?!Ee:f&&!Ee||!f&&Ee;const It=new ys(o,Je);ze(o)&&(Ee&&Qe===0?It.prev():!Ee&&Qe===o.data.length&&It.next());let Lt;for(;Lt=It.current();){if(Ye(Lt)){if(!Lt.getAttribute("data-mce-bogus")){const On=Lt.nodeName.toLowerCase();if(w[On]&&On!=="br")return!1}}else if(ze(Lt)&&!kg(Lt.data))return!1;Ee?It.prev():It.next()}return!0},se=()=>{let Ee;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&St!=="HGROUP"?Ee=j(O):Ee=j(),EI(e,u)&&MR(b,u)&&b.isEmpty(Je,void 0,{includeZwsp:!0})?Ee=b.split(u,Je):b.insertAfter(Ee,Je),bv(e,Ee),Ee};rE(b,k).each(Ee=>{k.setStart(Ee.startContainer,Ee.startOffset),k.setEnd(Ee.endContainer,Ee.endOffset)}),o=k.startContainer,r=k.startOffset;const ae=!!(t&&t.shiftKey),Se=!!(t&&t.ctrlKey);Ye(o)&&o.hasChildNodes()&&!H&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&ze(o)?r=o.data.length:r=0);const Oe=gS(b,o);if(!Oe||Gj(e,o))return;ae||(o=NR(e,O,k,o,r));let Je=b.getParent(o,b.isBlock)||b.getRoot();u=ve(Je==null?void 0:Je.parentNode)?b.getParent(Je.parentNode,b.isBlock):null,c=Je?Je.nodeName.toUpperCase():"";const St=u?u.nodeName.toUpperCase():"";if(St==="LI"&&!Se){const Ee=u;Je=Ee,u=Ee.parentNode,c=St}if(Ye(u)&&zj(e,ae,Je))return Vj(e,j,Je);if(/^(LI|DT|DD)$/.test(c)&&Ye(u)&&b.isEmpty(Je)){Wj(e,j,u,Je,O);return}if(!H&&(Je===e.getBody()||!MR(b,Je)))return;const xe=Je.parentNode;let me;if(H)me=j(O),I.fold(()=>{Hn(R,q.fromDom(me))},Ee=>{Gr(Ee,q.fromDom(me))}),e.selection.setCursorLocation(me,0);else if(pd(Je))me=Wi(Je),b.isEmpty(Je)&&vv(Je),yv(e,me),bv(e,me);else if(oe(!1))me=se();else if(oe(!0)&&xe){const Ee=Ce.fromRangeStart(k),Qe=__(Ee),It=q.fromDom(Je),On=pE(It,Ee,e.schema)?o6(It,Ee,e.schema).bind(Bo=>N.from(Bo.getNode())):N.none();me=xe.insertBefore(j(),Je);const lo=RR(Je,"HR")||Qe?me:On.getOr(Je);bv(e,lo)}else{const Ee=xI(k).cloneRange();Ee.setEndAfter(Je);const Qe=Ee.extractContents();jj(Qe),Yj(Qe),me=Qe.firstChild,Je===me?ve(xe)&&b.insertAfter(Qe,xe):b.insertAfter(Qe,Je),Kj(b,w,me),Gm(b,Je),b.isEmpty(Je)&&vv(Je),me.normalize(),b.isEmpty(me)?(b.remove(me),se()):(yv(e,me),bv(e,me))}b.setAttrib(me,"id",""),e.dispatch("NewBlock",{newBlock:me})},fakeEventName:"insertParagraph"},PR=(e,t,o)=>{const r=new ys(t,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||ze(c)&&c.length>0)return!0;return!1},$R=(e,t,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),Ji(e,r)},TI=(e,t)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;rE(r,c).each(I=>{c.setStart(I.startContainer,I.startOffset),c.setEnd(I.endContainer,I.endOffset)});let b=c.startOffset,v=c.startContainer;if(Ye(v)&&v.hasChildNodes()){const I=b>v.childNodes.length-1;v=v.childNodes[Math.min(b,v.childNodes.length-1)]||v,I&&ze(v)?b=v.data.length:b=0}let w=r.getParent(v,r.isBlock);const k=w&&w.parentNode?r.getParent(w.parentNode,r.isBlock):null,O=k?k.nodeName.toUpperCase():"",R=!!(t&&t.ctrlKey);O==="LI"&&!R&&(w=k),ze(v)&&b>=v.data.length&&(PR(e.schema,v,w||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),Kg(r,c,u),$R(e,u,f),e.undoManager.add()},Jj=(e,t)=>{const o=q.fromTag("br");Gr(q.fromDom(t),o),e.undoManager.add()},Qj=(e,t)=>{tG(e.getBody(),t)||El(q.fromDom(t),q.fromTag("br"));const o=q.fromTag("br");El(q.fromDom(t),o),$R(e,o.dom,!1),e.undoManager.add()},eG=e=>os(e.getNode()),tG=(e,t)=>eG(Ce.after(t))?!0:m(e,Ce.after(t)).map(o=>os(o.getNode())).getOr(!1),kI=e=>e&&e.nodeName==="A"&&"href"in e,_I=e=>e.fold(De,kI,kI,De),nG=e=>{const t=Me(e1,e),o=Ce.fromRangeStart(e.selection.getRng());return Vd(t,e.getBody(),o).filter(_I)},oG=(e,t)=>{t.fold(Dt,Me(Jj,e),Me(Qj,e),Dt)},OI={insert:(e,t)=>{const o=nG(e);o.isSome()?o.each(Me(oG,e)):TI(e,t)},fakeEventName:"insertLineBreak"},DI=(e,t)=>OR(e).filter(o=>t.length>0&&Ic(q.fromDom(o),t)).isSome(),sG=e=>DI(e,ix(e)),rG=e=>DI(e,lx(e)),sl=ei.generate([{br:[]},{block:[]},{none:[]}]),aG=(e,t)=>rG(e),RI=e=>(t,o)=>Hj(t)===e,MI=(e,t)=>(o,r)=>tX(o)===e.toUpperCase()===t,rT=e=>{const t=gS(e.dom,e.selection.getStart());return gn(t)},bS=e=>MI("pre",e),cG=()=>MI("summary",!0),Cv=e=>(t,o)=>sb(t)===e,IR=(e,t)=>sG(e),aT=(e,t)=>t,iG=e=>{const t=zs(e),o=gS(e.dom,e.selection.getStart());return ve(o)&&e.schema.isValidChild(o.nodeName,t)},BI=e=>{const t=e.selection.getRng(),o=q.fromDom(t.startContainer),c=Bi(o,t.startOffset).map(u=>Cl(u)&&!Li(u));return t.collapsed&&c.getOr(!0)},Kl=(e,t)=>(o,r)=>cn(e,(u,f)=>u&&f(o,r),!0)?N.some(t):N.none(),lG=(e,t)=>f8([Kl([aG],sl.none()),Kl([bS(!0),rT],sl.none()),Kl([cG()],sl.br()),Kl([bS(!0),Cv(!1),aT],sl.br()),Kl([bS(!0),Cv(!1)],sl.block()),Kl([bS(!0),Cv(!0),aT],sl.block()),Kl([bS(!0),Cv(!0)],sl.br()),Kl([RI(!0),aT],sl.br()),Kl([RI(!0)],sl.block()),Kl([IR],sl.br()),Kl([aT],sl.br()),Kl([iG],sl.block()),Kl([BI],sl.block())],[e,!!(t&&t.shiftKey)]).getOr(sl.none()),cT=(e,t,o)=>{t.mode.isReadOnly()||(t.selection.isCollapsed()||S6(t),!(ve(o)&&fS(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,o),ve(o)&&mS(t,e.fakeEventName)))},NI=(e,t)=>{if(e.mode.isReadOnly())return;const o=()=>cT(OI,e,t),r=()=>cT(pS,e,t),c=lG(e,t);switch(rb(e)){case"linebreak":c.fold(o,o,Dt);break;case"block":c.fold(r,r,Dt);break;case"invert":c.fold(r,o,Dt);break;default:c.fold(o,r,Dt);break}},PI=cu(),uG=PI.os.isiOS()&&PI.browser.isSafari(),LR=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),FN(e.undoManager),e.undoManager.transact(()=>{NI(e,t)}))},iT=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(ze(t)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=t.data.charAt(e.startOffset-1);return o.test(r)}else return!1},$I=e=>{let t=N.none();const o=c=>{t=N.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),t.fold(Dt,f=>c.selection.moveToBookmark(f)),LR(c,u),t=N.none()};e.on("keydown",c=>{c.keyCode===ct.ENTER&&(uG&&iT(e.selection.getRng())?o(e):LR(e,c))}),e.on("keyup",c=>{c.keyCode===ct.ENTER&&t.each(()=>r(e,c))})},II=(e,t,o)=>{const r=Fn.os.isMacOS()||Fn.os.isiOS();Mh([{keyCode:ct.END,action:zt(m$,e,!0)},{keyCode:ct.HOME,action:zt(m$,e,!1)},...r?[]:[{keyCode:ct.HOME,action:zt(U4,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ct.END,action:zt(U4,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ct.END,action:zt(rR,e,!0)},{keyCode:ct.HOME,action:zt(rR,e,!1)},{keyCode:ct.END,action:zt(Rh,e,!0,t)},{keyCode:ct.HOME,action:zt(Rh,e,!1,t)}],o).each(c=>{o.preventDefault()})},dG=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||II(e,t,o)})},mG=e=>{e.on("input",t=>{t.isComposing||m6(e)})},lT=cu(),fG=(e,t,o)=>{Mh([{keyCode:ct.PAGE_UP,action:zt(Rh,e,!1,t)},{keyCode:ct.PAGE_DOWN,action:zt(Rh,e,!0,t)}],o)},FR=e=>e.stopImmediatePropagation(),LI=e=>e.keyCode===ct.PAGE_UP||e.keyCode===ct.PAGE_DOWN,HR=(e,t,o)=>{o&&!e.get()?t.on("NodeChange",FR,!0):!o&&e.get()&&t.off("NodeChange",FR),e.set(o)},gG=(e,t)=>{if(lT.os.isMacOS())return;const o=Nt(!1);e.on("keydown",r=>{LI(r)&&HR(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||fG(e,t,r),LI(r)&&o.get()&&(HR(o,e,!1),e.nodeChanged())})},FI=(e,t)=>e===t||e.contains(t),hG=(e,t)=>!FI(e.getBody(),t.startContainer)||!FI(e.getBody(),t.endContainer)?!0:zF(e.dom,t),pG=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||jn(t.getTargetRanges(),o=>!hG(e,o)))&&t.preventDefault()})},HI=(e,t)=>{const o=t.container(),r=t.offset();return ze(o)?(o.insertData(r,e),N.some(Ce(o,r+e.length))):Kp(t).map(c=>{const u=q.fromText(e);return t.isAtEnd()?El(c,u):Gr(c,u),Ce(u.dom,e.length)})},O1=Me(HI,us),zI=Me(HI," "),bG=(e,t,o)=>mH(e,t,o)?O1(t):zI(t),VI=e=>t=>t.fold(o=>p(e.dom,Ce.before(o)),o=>y(o),o=>E(o),o=>m(e.dom,Ce.after(o))),vG=(e,t,o)=>r=>mH(e,r,o)?O1(t):zI(t),UI=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},yG=(e,t)=>e.isEditable(e.getParent(t,"summary")),ZI=e=>{const t=Ce.fromRangeStart(e.selection.getRng()),o=q.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Me(e1,e),c=Ce.fromRangeStart(e.selection.getRng());return Vd(r,e.getBody(),c).bind(VI(o)).map(u=>()=>vG(o,t,e.schema)(u).each(UI(e)))}else return N.none()},CG=e=>{const t=()=>{const o=q.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ce.fromRangeStart(e.selection.getRng());bG(o,r,e.schema).each(UI(e))};return dc(Fn.browser.isFirefox()&&e.selection.isEditable()&&yG(e.dom,e.selection.getRng().startContainer),t)},SG=(e,t)=>{j4([{keyCode:ct.SPACEBAR,action:zt(ZI,e)},{keyCode:ct.SPACEBAR,action:zt(CG,e)}],t).each(o=>{t.preventDefault(),fS(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),mS(e,"insertText",{data:" "}))})},sX=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||SG(e,t)})},uT=e=>_x(e)?[{keyCode:ct.TAB,action:zt(K$,e,!0)},{keyCode:ct.TAB,shiftKey:!0,action:zt(K$,e,!1)}]:[],wG=(e,t)=>{Mh([...uT(e)],t).each(o=>{t.preventDefault()})},xG=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||wG(e,t)})},EG=e=>{if(e.addShortcut("Meta+P","","mcePrint"),kj(e),$d(e))return Nt(null);{const t=YZ(e);return pG(e),r$(e),ij(e,t),Ij(e,t),$I(e),sX(e),mG(e),xG(e),dG(e,t),gG(e,t),t}},TG=(e,t)=>{const o=GC(e);o===null||YO(e,o)||e.undoManager.transact(()=>{tn(t.styles)&&e.dom.setStyles(o,t.styles),tn(t.attrs)&&hn(t.attrs,(r,c)=>e.dom.setAttrib(o,c,r))})},zR=(e,t)=>()=>{const o=GC(e);return ve(o)&&o.nodeName===t},kG=e=>{e.addCommand("InsertUnorderedList",(t,o)=>{iD(e,"UL",o)}),e.addCommand("InsertOrderedList",(t,o)=>{iD(e,"OL",o)}),e.addCommand("InsertDefinitionList",(t,o)=>{iD(e,"DL",o)}),e.addCommand("RemoveList",()=>{v4(e)}),e.addCommand("mceListUpdate",(t,o)=>{tn(o)&&TG(e,o)}),e.addCommand("mceListBackspaceDelete",(t,o)=>{dD(e,o)}),e.addQueryStateHandler("InsertUnorderedList",zR(e,"UL")),e.addQueryStateHandler("InsertOrderedList",zR(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",zR(e,"DL"))},_G=e=>{e.on("keydown",t=>{t.keyCode===ct.BACKSPACE?dD(e,!1)&&t.preventDefault():t.keyCode===ct.DELETE&&dD(e,!0)&&t.preventDefault()})},WI=e=>e.type===3,jI=e=>e.length===0,AG=e=>{const t=(c,u)=>{const f=Lr.create("li");le(c,b=>f.append(b)),u?e.insert(f,u,!0):e.append(f)},o=(c,u)=>WI(u)?[...c,u]:!jI(c)&&!WI(u)?(t(c,u),[]):c,r=cn(e.children(),o,[]);jI(r)||t(r)},OG=e=>{e.on("PreInit",()=>{const{parser:t}=e;t.addNodeFilter("ul,ol",o=>le(o,AG))})},DG=e=>{e.on("keydown",t=>{t.keyCode!==ct.TAB||ct.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?YC(e):jP(e))&&t.preventDefault()})})},RG=e=>{Ry(e)&&DG(e)},yo=e=>{_G(e),kG(e),OG(e),RG(e)};class MG{constructor(t){Ie(this,"editor");Ie(this,"lastPath",[]);this.editor=t;let o;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",c=>{const u=t.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Zf(f,o))&&t.dispatch("SelectionChange"),o=f}),t.on("contextmenu",()=>{eE(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const c=t.selection.getStart(!0);c&&Gy(t)&&!r.isSameElementPath(c)&&t.dom.isChildOf(c,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",c=>{!c.isDefaultPrevented()&&Gy(t)&&(t.selection.getNode().nodeName==="IMG"?Bu.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!Cx(o)&&!Yi(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const f=[];o.dom.getParent(c,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...t,element:c,parents:f})}}isSameElementPath(t){let o;const r=this.editor,c=Lo(r.dom.getParents(t,et,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const VR="x-tinymce/html",dT=Xe(VR),vS="<!-- "+VR+" -->",GI=e=>vS+e,BG=e=>e.replace(vS,""),qI=e=>e.indexOf(vS)!==-1,NG=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),KI=(e,t)=>{let o="<"+e;const r=Mc(t,(c,u)=>u+'="'+yc.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},mT=(e,t,o)=>{const r=e.split(/\n\n/),c=KI(t,o),u="</"+t+">",f=Mt(r,v=>v.split(/\n/).join("<br />")),b=v=>c+v+u;return f.length===1?f[0]:Mt(f,b).join("")},YI="%MCEPASTEBIN%",PG=(e,t)=>{const{dom:o,selection:r}=e,c=e.getBody();t.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},YI);Fn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},UR=(e,t)=>{const o=e.dom;if(ZR(e)){let r;const c=t.get();for(;r=ZR(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}t.set(null)},ZR=e=>e.dom.get("mcepastebin"),$G=e=>ve(e)&&e.id==="mcepastebin",IG=e=>{const t=e.dom,o=(f,b)=>{f.appendChild(b),t.remove(b,!0)},[r,...c]=ge(e.getBody().childNodes,$G);le(c,f=>{o(r,f)});const u=t.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=t.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},XI=e=>e===YI,JI=e=>{const t=Nt(null);return{create:()=>PG(e,t),remove:()=>UR(e,t),getEl:()=>ZR(e),getHtml:()=>IG(e),getLastRng:t.get}},QI=(e,t)=>(He.each(t,o=>{ac(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),LG=e=>{const t=Nr(),o=Zb({},t);let r="";const c=t.getVoidElements(),u=He.makeMap("script noscript style textarea video audio iframe object"," "),f=t.getBlockElements(),b=v=>{const w=v.name,k=v;if(w==="br"){r+=`
`;return}if(w!=="wbr"){if(c[w]&&(r+=" "),u[w]){r+=" ";return}if(v.type===3&&(r+=v.value),!(v.name in t.getVoidElements())){let O=v.firstChild;if(O)do b(O);while(O=O.next)}f[w]&&k.next&&(r+=`
`,w==="p"&&(r+=`
`))}};return e=QI(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},WR=e=>(e=QI(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":us],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),FG=e=>{let t=0;return()=>e+t++},HG=e=>{const t=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return He.hasOwn(o,t)?"image/"+o[t]:"image/"+t},zG=(e,t)=>{const o=Zb({sanitize:bb(e),sandbox_iframes:lh(e),sandbox_iframes_exclusions:xd(e),convert_unsafe_embeds:Ed(e)},e.schema);o.addNodeFilter("meta",c=>{He.each(c,u=>{u.remove()})});const r=o.parse(t,{forced_root_block:!1,isRootContent:!0});return fh({validate:!0},e.schema).serialize(r)},fT=(e,t)=>({content:e,cancelled:t}),VG=(e,t,o)=>{const r=e.dom.create("div",{style:"display:none"},t),c=ex(e,r,o);return fT(c.node.innerHTML,c.isDefaultPrevented())},e7=(e,t,o)=>{const r=Qw(e,t,o),c=zG(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?VG(e,c,o):fT(c,r.isDefaultPrevented())},UG=(e,t,o)=>e7(e,t,o),yS=(e,t)=>(e.insertContent(t,{merge:xx(e),paste:!0}),!0),jR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),t7=(e,t)=>jR(t)&&jn(Dy(e),o=>Zr(t.toLowerCase(),`.${o.toLowerCase()}`)),ZG=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),WG=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),jG=(e,t,o)=>!e.selection.isCollapsed()&&jR(t)?WG(e,t,o):!1,GG=(e,t,o)=>t7(e,t)?ZG(e,t,o):!1,n7=(e,t)=>{He.each([jG,GG,yS],o=>!o(e,t,yS))},qG=(e,t,o)=>{o||!Ty(e)?yS(e,t):n7(e,t)},o7=FG("mceclip"),gT=e=>{const t=hv();return P$(t,e),Y4(t),t},hT=(e,t,o,r,c)=>{const u=UG(e,t,o);if(!u.cancelled){const f=u.content,b=()=>qG(e,f,r);c?fS(e,"insertFromPaste",{dataTransfer:gT(f)}).isDefaultPrevented()||(b(),mS(e,"insertFromPaste")):b()}},Sv=(e,t,o,r)=>{const c=o||qI(t);hT(e,BG(t),c,!1,r)},GR=(e,t,o)=>{const r=e.dom.encode(t).replace(/\r\n/g,`
`),c=i0(r,Ik(e)),u=mT(c,zs(e),Ki(e));hT(e,u,!1,!0,o)},s7=e=>{const t={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},Yl=(e,t)=>t in e&&e[t].length>0,r7=e=>Yl(e,"text/html")||Yl(e,"text/plain"),wv=(e,t)=>{const o=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ve(o)?e.dom.encode(o[1]):void 0},CS=(e,t,o,r)=>{const c=o7(),u=dx(e)&&ve(o.name),f=u?wv(e,o.name):c,b=u?o.name:void 0,v=t.create(c,o,r,f,b);return t.add(v),v},KG=(e,t)=>{bA(t.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=t.file,b=e.editorUpload.blobCache,w=b.getByData(u,r)??CS(e,b,f,u);Sv(e,`<img src="${w.blobUri()}">`,!1,!0)})},YG=e=>e.type==="paste",xv=e=>Promise.all(Mt(e,t=>vA(t).then(o=>({file:t,uri:o})))),XG=e=>{const t=Dy(e);return o=>Wt(o.type,"image/")&&jn(t,r=>HG(r)===o.type)},qR=(e,t)=>{const o=t.items?Gn(Fo(t.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=t.files?Fo(t.files):[];return ge(o.length>0?o:r,XG(e))},a7=(e,t,o)=>{const r=YG(t)?t.clipboardData:t.dataTransfer;if(pb(e)&&r){const c=qR(e,r);if(c.length>0)return t.preventDefault(),xv(c).then(u=>{o&&e.selection.setRng(o),le(u,f=>{KG(e,f)})}),!0}return!1},c7=e=>{var t,o;return Fn.os.isAndroid()&&((o=(t=e.clipboardData)==null?void 0:t.items)==null?void 0:o.length)===0},i7=e=>ct.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,SS=(e,t,o,r,c)=>{let u=WR(o);const f=Yl(t,dT())||qI(o),b=!f&&NG(u),v=jR(u);(XI(u)||!u.length||b&&!v)&&(r=!0),(r||v)&&(Yl(t,"text/plain")&&b?u=t["text/plain"]:u=LG(u)),!XI(u)&&(r?GR(e,u,c):Sv(e,u,f,c))},l7=(e,t,o)=>{let r;const c=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",u=>{i7(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||c7(u))return;const f=o.get()==="text"||r;r=!1;const b=s7(u.clipboardData);!r7(b)&&a7(e,u,c())||(Yl(b,"text/html")?(u.preventDefault(),SS(e,b,b["text/html"],f,!0)):Yl(b,"text/plain")&&Yl(b,"text/uri-list")?(u.preventDefault(),SS(e,b,b["text/plain"],f,!0)):(t.create(),Bu.setEditorTimeout(e,()=>{const v=t.getHtml();t.remove(),SS(e,b,v,f,!1)},0)))})},JG=e=>{const t=c=>Wt(c,"webkit-fake-url"),o=c=>Wt(c,"data:"),r=c=>{var u;return((u=c.data)==null?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!pb(e)&&r(f))for(const b of c){const v=b.attr("src");Y(v)&&!b.attr("data-mce-object")&&v!==Fn.transparentSrc&&(t(v)||!ky(e)&&o(v))&&b.remove()}})},QG=(e,t,o)=>{l7(e,t,o),JG(e)},u7=(e,t)=>{t.get()==="text"?(t.set("html"),tx(e,!1)):(t.set("text"),tx(e,!0)),e.focus()},eq=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{u7(e,t)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&Sv(e,r.html,r.internal,!1),r.text&&GR(e,r.text,!1)})},d7=(e,t,o)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",o),e.setData(dT(),t),!0}catch{return!1}else return!1},pT=(e,t,o,r)=>{d7(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):o(t.html,r)},KR=e=>(t,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},t);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const v=r.createRng();v.selectNodeContents(f),c.setRng(v),Bu.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},m7=e=>({html:GI(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),tq=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),f7=e=>!e.selection.isCollapsed()||tq(e),g7=(e,t)=>o=>{!o.isDefaultPrevented()&&f7(e)&&e.selection.isEditable()&&pT(o,m7(e),KR(e),()=>{if(Fn.browser.isChromium()||Fn.browser.isFirefox()){const r=e.selection.getRng();Bu.setEditorTimeout(e,()=>{e.selection.setRng(r),Uu(e,t)},0)}else Uu(e,t)})},YR=e=>t=>{!t.isDefaultPrevented()&&f7(e)&&pT(t,m7(e),KR(e),Dt)},nq=(e,t)=>{e.on("cut",g7(e,t)),e.on("copy",YR(e))},XR=(e,t)=>Od.getCaretRangeFromPoint(t.clientX??0,t.clientY??0,e.getDoc()),h7=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},p7=(e,t)=>{t&&e.selection.setRng(t),e.focus()},b7=e=>jn(e.files,t=>/^image\//.test(t.type)),oq=(e,t,o,r)=>{const c=e.getParent(o,f=>ms(t,f));if(!ie(e.getParent(o,"summary")))return!0;if(c&&Yt(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ie(f.querySelector(c.nodeName.toLowerCase()))}else return!1},sq=e=>{e.on("input",t=>{const o=r=>ie(r.querySelector("summary"));if(t.inputType==="deleteByDrag"){const r=ge(e.dom.select("details"),o);le(r,c=>{os(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(vm().dom),c.prepend(u)})}})},bT=(e,t)=>{Y5(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),pb(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&b7(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=XR(e,o);if(gn(r))return;const c=s7(o.dataTransfer),u=Yl(c,dT());if((!r7(c)||h7(c))&&a7(e,o,r))return;const f=c[dT()],b=f||c["text/html"]||c["text/plain"],v=oq(e.dom,e.schema,r.startContainer,c),w=t.get();w&&!v||b&&(o.preventDefault(),Bu.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||w&&v)&&e.execCommand("Delete"),p7(e,r);const k=WR(b);c["text/html"]?Sv(e,k,u,!0):GR(e,k,!0)})}))}),e.on("dragstart",o=>{t.set(!0)}),e.on("dragover dragend",o=>{pb(e)&&!t.get()&&(o.preventDefault(),p7(e,XR(e,o))),o.type==="dragend"&&t.set(!1)}),sq(e)},rq=e=>{const t=c=>u=>{c(e,u)},o=Mk(e);ne(o)&&e.on("PastePreProcess",t(o));const r=Bk(e);ne(r)&&e.on("PastePostProcess",t(r))},aq=(e,t)=>{e.on("PastePreProcess",o=>{o.content=t(e,o.content,o.internal)})},v7=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,JR=e=>He.trim(e).replace(v7,bi).toLowerCase(),cq=(e,t,o)=>{const r=Ey(e);if(o||r==="all"||!Pk(e))return t;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,v,w,k)=>{const O=u.parseStyle(u.decode(w)),R={};for(let U=0;U<c.length;U++){const H=O[c[U]];let j=H,oe=u.getStyle(f,c[U],!0);/color/.test(c[U])&&(j=JR(j),oe=JR(oe)),oe!==j&&(R[c[U]]=H)}const I=u.serializeStyle(R,"span");return I?v+' style="'+I+'"'+k:v+k})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,v)=>f+' style="'+b+'"'+v),t},iq=e=>{(Fn.browser.isChromium()||Fn.browser.isSafari())&&aq(e,cq)},lq=(e,t)=>{const o=Nt(!1),r=Nt($k(e)?"text":"html"),c=JI(e);iq(e),eq(e,r),rq(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>r.get()==="text"),e.on("PreInit",()=>{nq(e,t),bT(e,o),QG(e,c,r)})},uq=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},dq=e=>{e.parser.addNodeFilter("details",t=>{const o=ih(e);le(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const o=wd(e);le(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},y7=e=>{uq(e),dq(e)},mq=os,C7=ze,fq=e=>Vo(e.dom),gq=e=>pc(e.dom),S7=e=>t=>En(q.fromDom(e),t),hq=(e,t,o)=>bo(q.fromDom(e),r=>gq(r)||o.isBlock(mn(r)),S7(t)).getOr(q.fromDom(t)).dom,w7=(e,t)=>bo(q.fromDom(e),fq,S7(t)),x7=(e,t,o)=>{const r=new ys(e,t),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!mq(f);f=c())Wo(f)&&(u=f);return u},E7=(e,t,o)=>{const c=Ce.fromRangeStart(e).getNode(),u=hq(c,t,o),f=x7(c,u,!1),b=x7(c,u,!0),v=document.createRange();return w7(f,u).fold(()=>{C7(f)?v.setStart(f,0):v.setStartBefore(f)},w=>v.setStartBefore(w.dom)),w7(b,u).fold(()=>{C7(b)?v.setEnd(b,b.data.length):v.setEndAfter(b)},w=>v.setEndAfter(w.dom)),v},T7=e=>{const t=E7(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(pA(t))},pq=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),T7(e))})};var Ev;(function(e){e.Before="before",e.After="after"})(Ev||(Ev={}));const bq=(e,t)=>Math.abs(e.left-t),wS=(e,t)=>Math.abs(e.right-t),vq=(e,t)=>e>=t.top&&e<=t.bottom,yq=(e,t)=>e.top<t.bottom&&e.bottom>t.top,k7=(e,t)=>{const o=Dw(e,t)/Math.min(e.height,t.height);return yq(e,t)&&o>.5},Cq=(e,t)=>{const o=ge(e,r=>vq(t,r));return yp(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=_e(e,f=>k7(f,r));return[c,u]})},Sq=(e,t)=>({node:e.node,position:bq(e,t)<wS(e,t)?Ev.Before:Ev.After}),wq=(e,t,o)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),QR=(e,t,o,r)=>{const c=O=>Wo(O.node)?N.some(O):Ye(O.node)?QR(Fo(O.node.childNodes),t,o,!1):N.none(),u=(O,R,I)=>c(R).filter(U=>Math.abs(I(O,t,o)-I(U,t,o))<2&&ze(U.node)),f=(O,R)=>{const I=_i(O,(U,H)=>R(U,t,o)-R(H,t,o));return cc(I,c).map(U=>r&&!ze(U.node)&&I.length>1?u(U,I[1],R).getOr(U):U)},[b,v]=Cq(ID(e),o),{pass:w,fail:k}=_e(v,O=>O.top<o);return f(b,wq).orThunk(()=>f(k,z2)).orThunk(()=>f(w,z2))},xq=(e,t,o,r)=>{const c=(u,f)=>{const b=w=>Ye(w)&&w.classList.contains("mce-drag-container"),v=ge(u.dom.childNodes,ao(b));return f.fold(()=>QR(v,o,r,!0),w=>{const k=ge(v,O=>O!==w.dom);return QR(k,o,r,!0)}).orThunk(()=>(En(u,e)?N.none():Mi(u)).bind(k=>c(k,N.some(u))))};return c(t,N.none())},vT=(e,t,o)=>{const r=q.fromDom(e),c=Sl(r),f=q.fromPoint(c,t,o).filter(b=>ai(r,b)).getOr(r);return xq(r,f,t,o)},e5=(e,t,o)=>vT(e,t,o).filter(r=>Wp(r.node)).map(r=>Sq(r,t)),t5=e=>{const t=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,c=o.defaultView;return{top:t.top+((c==null?void 0:c.scrollY)??0)-r.clientTop,left:t.left+((c==null?void 0:c.scrollX)??0)-r.clientLeft}},Eq=e=>e.inline?t5(e.getBody()):{left:0,top:0},Tq=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},kq=e=>{const t=e.getBody(),o=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},c={left:t.scrollLeft||o.scrollLeft,top:t.scrollTop||o.scrollTop};return e.inline?r:c},rX=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const o=t5(e.getContentAreaContainer()),r=kq(e);return{left:t.pageX-o.left+r.left,top:t.pageY-o.top+r.top}}return{left:t.pageX,top:t.pageY}},_q=(e,t,o)=>({pageX:o.left-e.left+t.left,pageY:o.top-e.top+t.top}),Aq=(e,t)=>_q(Eq(e),Tq(e),rX(e,t)),yT=e=>({target:e,srcElement:e}),CT=(e,t,o,r)=>({...t,dataTransfer:r,type:e,...yT(o)}),Oq=(e,t,o)=>{const r=Qs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Dt,stopImmediatePropagation:Dt,stopPropagation:Dt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...yT(t)}},Dq=(e,t)=>{const o=GW(e);return t==="dragstart"?(A$(o),fR(o)):t==="drop"?(UW(o),Y4(o)):(ZW(o),gR(o)),o},Rq=(e,t,o,r)=>{const c=Dq(o,e);return as(r)?Oq(e,t,c):CT(e,r,t,c)},xS=32,Mq=100,Tv=8,ES=16,_7=Vo,Bq=V2(_7,pc),A7=(e,t,o)=>_7(o)&&o!==t&&e.isEditable(o.parentElement),Nq=(e,t,o)=>gn(t)||t===o||e.dom.isChildOf(t,o)?!1:e.dom.isEditable(t),aX=(e,t,o,r)=>{const c=e.dom,u=t.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},Pq=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},ST=(e,t)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+t,behavior:"smooth"})},O7=ST("left",-xS),n5=ST("left",xS),wT=ST("top",-xS),TS=ST("top",xS),D7=(e,t,o,r,c,u,f,b,v,w,k,O)=>{let R=0,I=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+o>c&&(R=t.pageX+o-c),t.pageY+r>u&&(I=t.pageY+r-u),e.style.width=o-R+"px",e.style.height=r-I+"px";const U=v.clientHeight,H=v.clientWidth,j=f+v.getBoundingClientRect().top,oe=b+v.getBoundingClientRect().left;k.on(se=>{se.intervalId.clear(),se.dragging&&O&&(f+Tv>=U?se.intervalId.set(TS(w)):f-Tv<=0?se.intervalId.set(wT(w)):b+Tv>=H?se.intervalId.set(n5(w)):b-Tv<=0?se.intervalId.set(O7(w)):j+ES>=window.innerHeight?se.intervalId.set(TS(window)):j-ES<=0?se.intervalId.set(wT(window)):oe+ES>=window.innerWidth?se.intervalId.set(n5(window)):oe-ES<=0&&se.intervalId.set(O7(window)))})},R7=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},$q=(e,t)=>{const o=e.getParent(t.parentNode,e.isBlock);R7(t),o&&o!==e.getRoot()&&e.isEmpty(o)&&ym(q.fromDom(o))},Iq=e=>e.button===0,Lq=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),M7=(e,t)=>o=>{if(Iq(o)){const r=so(t.dom.getParents(o.target),Bq).getOr(null);if(ve(r)&&A7(t.dom,t.getBody(),r)){const c=t.dom.getPos(r),u=t.getBody(),f=t.getDoc().documentElement;e.set({element:r,dataTransfer:hv(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(t.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(t.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:aX(t,r,r.offsetWidth,r.offsetHeight),intervalId:mg(Mq)})}}},Fq=(e,t,o)=>{e._selectionOverrides.hideFakeCaret(),e5(e.getBody(),t,o).fold(()=>e.selection.placeCaretAt(t,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===Ev.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(t,o)})},kv=(e,t,o,r,c)=>{t==="dragstart"&&P$(r,e.dom.getOuterHTML(o));const u=Rq(t,o,r,c);return e.dispatch(t,u)},Hq=(e,t)=>{const o=ot((c,u)=>Fq(t,c,u),0);t.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=kv(t,"dragstart",u.element,u.dataTransfer,c);if(ve(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,t.focus()}if(u.dragging){const b=c.currentTarget===t.getDoc().documentElement,v=Lq(u,Aq(t,c));Pq(u.ghost,t.getBody()),D7(u.ghost,v,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,t.getContentAreaContainer(),t.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},zq=e=>{const t=e.getSel();if(ve(t)){const r=t.getRangeAt(0).startContainer;return ze(r)?r.parentNode:r}else return null},o5=(e,t)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(Nq(t,zq(t.selection),r.element)){const c=t.getDoc().elementFromPoint(o.clientX,o.clientY)??t.getBody();kv(t,"drop",c,r.dataTransfer,o).isDefaultPrevented()||t.undoManager.transact(()=>{$q(t.dom,r.element),N$(r.dataTransfer).each(f=>t.insertContent(f)),t._selectionOverrides.hideFakeCaret()})}kv(t,"dragend",t.getBody(),r.dataTransfer,o)}}),B7(e)},s5=(e,t,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>kv(t,"dragend",r.element,r.dataTransfer),c=>kv(t,"dragend",r.element,r.dataTransfer,c))}),B7(e)},cX=(e,t)=>o=>s5(e,t,N.some(o)),B7=e=>{e.on(t=>{t.intervalId.clear(),R7(t.ghost)}),e.clear()},N7=e=>{const t=Bc(),o=_n.DOM,r=document,c=M7(t,e),u=Hq(t,e),f=o5(t,e),b=cX(t,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",v=>{v.keyCode===ct.ESC&&s5(t,e,N.none())})},Vq=e=>{const t=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(vt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&i4(e,"Dropped file type is not supported"))}},o=c=>{oE(e,c.target)&&t(c)},r=()=>{const c=_n.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];le(v,w=>{c.bind(f,w,o),u.bind(b,w,t)}),e.on("remove",()=>{le(v,w=>{c.unbind(f,w,o),u.unbind(b,w,t)})})};e.on("init",()=>{Bu.setEditorTimeout(e,r,0)})},r5=e=>{N7(e),Ak(e)&&Vq(e)},Uq=e=>{const t=ot(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=ng(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},Zq=e=>{e.on("init",()=>{e.on("focusin",t=>{const o=t.target;if(hi(o)){const r=Dd(e.getBody(),o),c=Vo(r)?r:o;e.selection.getNode()!==c&&Vm(e,c).each(u=>e.selection.setRng(u))}})})},kS=Vo,a5=(e,t)=>Dd(e.getBody(),t),xT=e=>{const t=e.selection,o=e.dom,r=e.getBody(),c=Gt(e,r,o.isBlock,()=>$b(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const v=xe=>ve(xe)&&o.hasClass(xe,"mce-offscreen-selection"),w=xe=>xe!==r&&(kS(xe)||hi(xe))&&o.isChildOf(xe,r)&&o.isEditable(xe.parentNode),k=xe=>{xe&&t.setRng(xe)},O=(xe,me,Ee,Qe=!0)=>e.dispatch("ShowCaret",{target:me,direction:xe,before:Ee}).isDefaultPrevented()?null:(Qe&&t.scrollIntoView(me,xe===-1),c.show(Ee,me)),R=xe=>{xe.hasAttribute("data-mce-caret")&&(Wi(xe),t.scrollIntoView(xe))},I=()=>{e.on("click",me=>{o.isEditable(me.target)||(me.preventDefault(),e.focus())}),e.on("blur NewBlock",Oe),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",me=>{const Ee=me.target,Qe=a5(e,Ee);kS(Qe)?(me.preventDefault(),Vm(e,Qe).each(Se)):w(Ee)&&Vm(e,Ee).each(Se)},!0),e.on("mousedown",me=>{const Ee=me.target;if(Ee!==r&&Ee.nodeName!=="HTML"&&!o.isChildOf(Ee,r)||!OV(e,me.clientX,me.clientY))return;Oe(),St();const Qe=a5(e,Ee);kS(Qe)?(me.preventDefault(),Vm(e,Qe).each(Se)):e5(r,me.clientX,me.clientY).each(It=>{me.preventDefault();const Lt=O(1,It.node,It.position===Ev.Before,!1);k(Lt),Za(Qe)?Qe.focus():e.getBody().focus()})}),e.on("keypress",me=>{ct.modifierPressed(me)||kS(t.getNode())&&me.preventDefault()}),e.on("GetSelectionRange",me=>{let Ee=me.range;if(b){if(!b.parentNode){b=null;return}Ee=Ee.cloneRange(),Ee.selectNode(b),me.range=Ee}}),e.on("focusin",me=>{if(!hi(me.target)&&e.getBody().contains(me.target)&&me.target!==e.getBody()&&!e.dom.isEditable(me.target.parentNode)){c.isShowing()&&c.hide(),me.target.contains(e.selection.getNode())||(e.selection.select(me.target,!0),e.selection.collapse(!0));const Ee=Se(e.selection.getRng(),!0);Ee&&e.selection.setRng(Ee)}}),e.on("SetSelectionRange",me=>{me.range=j(me.range);const Ee=Se(me.range,me.forward);Ee&&(me.range=Ee)});const xe=me=>Ye(me)&&me.id==="mcepastebin";e.on("AfterSetSelectionRange",me=>{const Ee=me.range,Qe=Ee.startContainer.parentElement;!H(Ee)&&!xe(Qe)&&St(),v(Qe)||Oe()}),r5(e),Uq(e),Zq(e)},U=xe=>Zc(xe)||wc(xe)||Cm(xe),H=xe=>U(xe.startContainer)||U(xe.endContainer),j=xe=>{const me=e.schema.getVoidElements(),Ee=o.createRng(),Qe=xe.startContainer,It=xe.startOffset,Lt=xe.endContainer,On=xe.endOffset;return Yt(me,Qe.nodeName.toLowerCase())?It===0?Ee.setStartBefore(Qe):Ee.setStartAfter(Qe):Ee.setStart(Qe,It),Yt(me,Lt.nodeName.toLowerCase())?On===0?Ee.setEndBefore(Lt):Ee.setEndAfter(Lt):Ee.setEnd(Lt,On),Ee},oe=(xe,me)=>{const Ee=q.fromDom(e.getBody()),Qe=e.getDoc(),It=pu(Ee,"#"+u).getOrThunk(()=>{const lo=q.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Qe);return ds(lo,"id",u),Hn(Ee,lo),lo}),Lt=o.createRng();$i(It),li(It,[q.fromText(us,Qe),q.fromDom(me),q.fromText(us,Qe)]),Lt.setStart(It.dom.firstChild,1),Lt.setEnd(It.dom.lastChild,0),di(It,{top:o.getPos(xe,e.getBody()).y+"px"}),q1(It);const On=t.getSel();return On&&(On.removeAllRanges(),On.addRange(Lt)),Lt},se=xe=>{const me=e.getDoc().createElement("div");me.style.width=xe.style.width,me.style.height=xe.style.height;const Ee=xe.getAttribute("width");Ee&&me.setAttribute("width",Ee);const Qe=xe.getAttribute("height");return Qe&&me.setAttribute("height",Qe),me},ae=xe=>{const me=op(xe)?se(xe):xe.cloneNode(!0),Ee=e.dispatch("ObjectSelected",{target:xe,targetClone:me});if(Ee.isDefaultPrevented())return null;const Qe=oe(xe,Ee.targetClone),It=q.fromDom(xe);return le(Br(q.fromDom(e.getBody()),`*[${f}]`),Lt=>{En(It,Lt)||Ks(Lt,f)}),o.getAttrib(xe,f)||xe.setAttribute(f,"1"),b=xe,St(),Qe},Se=(xe,me)=>{if(!xe)return null;if(xe.collapsed){if(!H(xe)){const Lt=me?1:-1,On=Mm(Lt,r,xe),lo=On.getNode(!me);if(ve(lo)){if(Wp(lo))return O(Lt,lo,me?!On.isAtEnd():!1,!1);if(Ml(lo)&&Vo(lo.nextSibling)){const qo=o.createRng();return qo.setStart(lo,0),qo.setEnd(lo,0),qo}}const Bo=On.getNode(me);if(ve(Bo)){if(Wp(Bo))return O(Lt,Bo,me?!1:!On.isAtEnd(),!1);if(Ml(Bo)&&Vo(Bo.previousSibling)){const qo=o.createRng();return qo.setStart(Bo,1),qo.setEnd(Bo,1),qo}}}return null}let Ee=xe.startContainer,Qe=xe.startOffset;const It=xe.endOffset;if(ze(Ee)&&Qe===0&&kS(Ee.parentNode)&&(Ee=Ee.parentNode,Qe=o.nodeIndex(Ee),Ee=Ee.parentNode),!Ye(Ee))return null;if(It===Qe+1&&Ee===xe.endContainer){const Lt=Ee.childNodes[Qe];if(w(Lt))return ae(Lt)}return null},Oe=()=>{b&&b.removeAttribute(f),pu(q.fromDom(e.getBody()),"#"+u).each(Ao),b=null},Je=()=>{c.destroy(),b=null},St=()=>{c.hide()};return $d(e)||I(),{showCaret:O,showBlockCaretContainer:R,hideFakeCaret:St,destroy:Je}},P7=(e,t)=>{let o=t;for(let r=e.previousSibling;ze(r);r=r.previousSibling)o+=r.data.length;return o},c5=(e,t,o,r,c)=>{if(ze(o)&&(r<0||r>o.data.length))return[];const u=c&&ze(o)?[P7(o,r)]:[r];let f=o;for(;f!==t&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===t?u.reverse():[]},i5=(e,t,o,r,c,u,f=!1)=>{const b=c5(e,t,o,r,f),v=c5(e,t,c,u,f);return{start:b,end:v}},$7=(e,t)=>{const o=t.slice(),r=o.pop();return pr(r)?cn(o,(u,f)=>u.bind(b=>N.from(b.childNodes[f])),N.some(e)).bind(u=>ze(u)&&(r<0||r>u.data.length)?N.none():N.some({node:u,offset:r})):N.none()},l5=(e,t)=>$7(e,t.start).bind(({node:o,offset:r})=>$7(e,t.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),Wq=(e,t,o,r=!1)=>i5(e,t,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),_v=(e,t,o)=>{if(t&&e.isEmpty(t)&&!o(t)){const r=t.parentNode;e.remove(t,ze(t.firstChild)&&kg(t.firstChild.data)),_v(e,r,o)}},ET=(e,t,o,r=!0)=>{const c=t.startContainer.parentNode,u=t.endContainer.parentNode;t.deleteContents(),r&&!o(t.startContainer)&&(ze(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),ze(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),_v(e,c,o),c!==u&&_v(e,u,o))},Av=(e,t)=>N.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),u5=(e,t,o)=>{const r=e.dynamicPatternsLookup({text:o,block:t});return{...e,blockPatterns:mk(r).concat(e.blockPatterns),inlinePatterns:Dp(r).concat(e.inlinePatterns)}},d5=(e,t,o,r)=>{const c=e.createRng();return c.setStart(t,0),c.setEnd(o,r),c.toString()},I7=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),TT=(e,t)=>{const o=e.createRng();return o.setStartAfter(t.start),o.setEndBefore(t.end),o},L7=(e,t,o)=>{const r=l5(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),v=b.parentNode,w=f.parentNode;return{prefix:t,end:w.insertBefore(I7(e,t+"-end"),f),start:v.insertBefore(I7(e,t+"-start"),b)}},F7=(e,t,o)=>{_v(e,e.get(t.prefix+"-end"),o),_v(e,e.get(t.prefix+"-start"),o)},_S=e=>e.start.length===0,jq=e=>(t,o)=>{const c=t.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},H7=(e,t,o,r)=>{const c=t.start;return TR(e,r.container,r.offset,jq(c),o).bind(f=>{var w;const b=((w=o.textContent)==null?void 0:w.indexOf(c))??-1;if(b!==-1&&f.offset>=b+c.length){const k=e.createRng();return k.setStart(f.container,f.offset-c.length),k.setEnd(f.container,f.offset),N.some(k)}else{const k=f.offset-c.length;return xR(f.container,k,o).map(O=>{const R=e.createRng();return R.setStart(O.container,O.offset),R.setEnd(f.container,f.offset),R}).filter(O=>O.toString()===c).orThunk(()=>H7(e,t,o,Ud(f.container,0)))}})},Gq=(e,t,o,r,c,u=!1)=>{if(t.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),N.some(f)}return SR(o,r,c).bind(f=>H7(e,t,c,f).bind(v=>{var w;if(u){if(v.endContainer===f.container&&v.endOffset===f.offset)return N.none();if(f.offset===0&&((w=v.endContainer.textContent)==null?void 0:w.length)===v.endOffset)return N.none()}return N.some(v)}))},z7=(e,t,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,v=o.position.offset;return xR(b,v-o.pattern.end.length,t).bind(w=>{const k=i5(c,u,w.container,w.offset,b,v,r);if(_S(f))return N.some({matches:[{pattern:f,startRng:k,endRng:k}],position:w});{const O=kT(e,o.remainingPatterns,w.container,w.offset,t,r),R=O.getOr({matches:[],position:w}),I=R.position;return Gq(c,f,I.container,I.offset,t,O.isNone()).map(H=>{const j=Wq(c,u,H,r);return{matches:R.matches.concat([{pattern:f,startRng:j,endRng:k}]),position:Ud(H.startContainer,H.startOffset)}})}})},kT=(e,t,o,r,c,u)=>{const f=e.dom;return SR(o,r,f.getRoot()).bind(b=>{const v=d5(f,c,o,r);for(let w=0;w<t.length;w++){const k=t[w];if(!Zr(v,k.end))continue;const O=t.slice();O.splice(w,1);const R=z7(e,c,{pattern:k,remainingPatterns:O,position:b},u);if(R.isNone()&&r>0)return kT(e,t,o,r-1,c,u);if(R.isSome())return R}return N.none()})},V7=(e,t,o)=>{e.selection.setRng(o),t.type==="inline-format"?le(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},qq=(e,t,o,r)=>{const c=TT(e.dom,o);ET(e.dom,c,r),V7(e,t,c)},Kq=(e,t,o,r,c)=>{const u=e.dom,f=TT(u,r),b=TT(u,o);ET(u,b,c),ET(u,f,c);const v={prefix:o.prefix,start:o.end,end:r.start},w=TT(u,v);V7(e,t,w)},Yq=(e,t)=>{const o=Ns("mce_textpattern"),r=yn(t,(c,u)=>{const f=L7(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return yn(r,(c,u)=>{const f=r.length-c.length-1,b=_S(u.pattern)?u.endMarker:L7(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},Xq=e=>_i(e,(t,o)=>o.end.length-t.end.length),Jq=(e,t)=>{const o=Ha(e,r=>jn(t,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===t.length?o?e:t:e.length>t.length?e:t},U7=(e,t,o,r,c,u)=>{const f=kT(e,c.inlinePatterns,o,r,t,u).fold(()=>[],v=>v.matches),b=kT(e,Xq(c.inlinePatterns),o,r,t,u).fold(()=>[],v=>v.matches);return Jq(f,b)},m5=(e,t)=>{if(t.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=Yq(o,t);le(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=v=>v===f;_S(u.pattern)?qq(e,u.pattern,u.endMarker,b):Kq(e,u.pattern,u.startMarker,u.endMarker,b),F7(o,u.endMarker,b),F7(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},Z7=(e,t,o)=>wR(t,0,t).map(r=>{const c=r.container;return ER(c,o.start.length,t).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),ET(e,f,b=>b===t)}),c}),_T=e=>(t,o)=>{const r=t.dom,c=o.pattern,u=l5(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,v)=>{const w=v.get(b);return dn(w)&&ps(w).exists(k=>Yt(k,"block"))};return Av(t,u).each(b=>{c.type==="block-format"?f(c.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,b,c),t.formatter.apply(c.format)}):c.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,b,c),t.execCommand(c.cmd,!1,c.value)})}),!0},Qq=e=>_i(e,(t,o)=>o.start.length-t.start.length),W7=e=>(t,o)=>{const r=Qq(t),c=o.replace(us," ");return so(r,u=>e(u,o,c))},j7=(e,t)=>(o,r,c,u,f=r.textContent??"")=>{const b=o.dom,v=zs(o);return b.is(r,v)?e(c.blockPatterns,f).map(w=>t&&He.trim(f).length===w.start.length?[]:[{pattern:w,range:i5(b,b.getRoot(),r,0,r,0,u)}]).getOr([]):[]},eK=e=>/^\s[^\s]/.test(e),tK=_T((e,t,o)=>{Z7(e,t,o).each(r=>{const c=q.fromDom(r),u=ma(c);eK(u)&&n2(c,u.slice(1))})}),AT=W7((e,t,o)=>t.indexOf(e.start)===0||o.indexOf(e.start)===0),nK=j7(AT,!0),oK=(e,t)=>{const o=e.selection.getRng();return Av(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=u5(t,r,r.textContent??""),f=U7(e,r,o.startContainer,c,u,!0),b=nK(e,r,u,!0);return{inlineMatches:f,blockMatches:b}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},sK=(e,t)=>{if(t.length===0)return;const o=e.selection.getBookmark();le(t,r=>tK(e,r)),e.selection.moveToBookmark(o)},rK=_T(Z7),aK=W7((e,t,o)=>t===e.start||o===e.start),cK=j7(aK,!1),iK=(e,t)=>{const o=e.selection.getRng();return Av(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=d5(e.dom,r,o.startContainer,c),f=u5(t,r,u);return cK(e,r,f,!1,u)}).filter(r=>r.length>0)},lK=(e,t)=>{le(t,o=>rK(e,o))},uK=(e,t)=>oK(e,t).fold(De,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{B0(e),m5(e,o),sK(e,r);const c=e.selection.getRng(),u=SR(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Ju&&(b.deleteData(f.offset-1,1),_v(e.dom,b.parentNode,v=>v===e.dom.getRoot()))})}),!0)),G7=(e,t)=>{const o=e.selection.getRng();Av(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=d5(e.dom,r,o.startContainer,c),f=u5(t,r,u),b=U7(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{m5(e,b)})})},dK=(e,t)=>iK(e,t).fold(De,o=>(e.undoManager.transact(()=>{lK(e,o)}),!0)),f5=(e,t,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1},mK=(e,t)=>f5(e,t,(o,r)=>o===r.keyCode&&!ct.modifierPressed(r)),fK=(e,t)=>f5(e,t,(o,r)=>o.charCodeAt(0)===r.charCode),q7=e=>{const t=[",",".",";",":","!","?"],o=[32],r=()=>fk(Ex(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),wt(e)),c=()=>ch(e);e.on("keydown",f=>{if(f.keyCode===13&&!ct.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=Rp(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&uK(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=Rp(r(),"space");(b.blockPatterns.length>0||c())&&dK(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=Rp(r(),"space");(f.inlinePatterns.length>0||c())&&G7(e,f)}};e.on("keyup",f=>{mK(o,f)&&u()}),e.on("keypress",f=>{fK(t,f)&&Bu.setEditorTimeout(e,u)})},AS=e=>{q7(e)},gK=e=>{const t=He.each,o=ct.BACKSPACE,r=ct.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Fn.browser,v=b.isFirefox(),w=b.isChromium()||b.isSafari(),k=Fn.deviceType.isiPhone()||Fn.deviceType.isiPad(),O=Fn.os.isMacOS()||Fn.os.isiOS(),R=(ke,Ge)=>{try{e.getDoc().execCommand(ke,!1,String(Ge))}catch{}},I=ke=>ke.isDefaultPrevented(),U=()=>{const ke=ut=>{const wn=c.create("body"),en=ut.cloneContents();return wn.appendChild(en),u.serializer.serialize(wn,{format:"html"})},Ge=ut=>{const wn=ke(ut),en=c.createRng();en.selectNode(e.getBody());const po=ke(en);return wn===po};e.on("keydown",ut=>{const wn=ut.keyCode;if(!I(ut)&&(wn===r||wn===o)&&e.selection.isEditable()){const en=e.selection.isCollapsed(),po=e.getBody();if(en&&!kt(e.schema,po)||!en&&!Ge(e.selection.getRng()))return;ut.preventDefault(),e.setContent(""),po.firstChild&&c.isBlock(po.firstChild)?e.selection.setCursorLocation(po.firstChild,0):e.selection.setCursorLocation(po,0),e.nodeChanged()}})},H=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},j=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",ke=>{var ut;let Ge;if(ke.target===e.getDoc().documentElement)if(Ge=u.getRng(),((ut=e.getDoc().getSelection())==null?void 0:ut.anchorNode)!==null&&e.getBody().focus(),ke.type==="mousedown"){if(Zc(Ge.startContainer))return;u.placeCaretAt(ke.clientX,ke.clientY)}else u.setRng(Ge)})},oe=()=>{e.on("keydown",ke=>{if(!I(ke)&&ke.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Ge=u.getNode(),ut=Ge.previousSibling;if(Ge.nodeName==="HR"){c.remove(Ge),ke.preventDefault();return}ut&&ut.nodeName&&ut.nodeName.toLowerCase()==="hr"&&(c.remove(ut),ke.preventDefault())}}})},se=()=>{Range.prototype.getClientRects||e.on("mousedown",ke=>{if(!I(ke)&&ke.target.nodeName==="HTML"){const Ge=e.getBody();Ge.blur(),Bu.setEditorTimeout(e,()=>{Ge.focus()})}})},ae=()=>{const ke=gb(e);e.on("click",Ge=>{const ut=Ge.target;/^(IMG|HR)$/.test(ut.nodeName)&&c.isEditable(ut)&&(Ge.preventDefault(),e.selection.select(ut),e.nodeChanged()),ut.nodeName==="A"&&c.hasClass(ut,ke)&&ut.childNodes.length===0&&c.isEditable(ut.parentNode)&&(Ge.preventDefault(),u.select(ut))})},Se=()=>{const ke=Ge=>Ge.nodeName==="IMG"&&e.dom.isEditable(Ge);e.on("mousedown",Ge=>{_s(N.from(Ge.clientX),N.from(Ge.clientY),(ut,wn)=>{var Ql;const en=e.getDoc().caretPositionFromPoint(ut,wn),po=((Ql=en==null?void 0:en.offsetNode)==null?void 0:Ql.childNodes[en.offset-(en.offset>0?1:0)])||(en==null?void 0:en.offsetNode);if(ve(po)&&ke(po)){const Ac=po.getBoundingClientRect();Ge.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(po),Ge.clientX<Ac.left||Ge.clientY<Ac.top?e.selection.collapse(!0):(Ge.clientX>Ac.right||Ge.clientY>Ac.bottom)&&e.selection.collapse(!1)}})})},Oe=()=>{const ke=()=>{const ut=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const wn=u.getStart();wn!==e.getBody()&&(c.setAttrib(wn,"style",null),t(ut,en=>{wn.setAttributeNode(en.cloneNode(!0))}))}},Ge=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",ut=>{let wn;return!I(ut)&&(ut.keyCode===8||ut.keyCode===46)&&Ge()?(wn=ke(),e.getDoc().execCommand("delete",!1),wn(),ut.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",ut=>{if(!I(ut)&&Ge()){const wn=ke();Bu.setEditorTimeout(e,()=>{wn()})}})},Je=()=>{e.on("keydown",ke=>{if(!I(ke)&&ke.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Ge=u.getNode().previousSibling;if(Ge&&Ge.nodeName&&Ge.nodeName.toLowerCase()==="table")return ke.preventDefault(),!1}return!0})},St=()=>{e.on("keydown",ke=>{if(I(ke)||ke.keyCode!==ct.BACKSPACE)return;let Ge=u.getRng();const ut=Ge.startContainer,wn=Ge.startOffset,en=c.getRoot();let po=ut;if(!(!Ge.collapsed||wn!==0)){for(;po.parentNode&&po.parentNode.firstChild===po&&po.parentNode!==en;)po=po.parentNode;po.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,po),Ge=c.createRng(),Ge.setStart(ut,0),Ge.setEnd(ut,0),u.setRng(Ge))}})},xe=()=>{const ke=uu("figcaption");e.on("keydown",Ge=>{if(Ge.keyCode===ct.LEFT||Ge.keyCode===ct.RIGHT){const ut=q.fromDom(e.selection.getNode());ke(ut)&&e.selection.isCollapsed()&&Lc(ut).bind(wn=>{var en;return e.selection.getRng().startOffset===0&&Ge.keyCode===ct.LEFT?ii(wn):e.selection.getRng().endOffset===((en=ut.dom.textContent)==null?void 0:en.length)&&Ge.keyCode===ct.RIGHT?du(wn):N.none()}).each(wn=>{e.selection.setCursorLocation(wn.dom,0)})}})},me=()=>{const ke=()=>{R("StyleWithCSS",!1),R("enableInlineTableEditing",!1),bx(e)||R("enableObjectResizing",!1)};Lp(e)||e.on("BeforeExecCommand mousedown",ke)},Ee=()=>{const ke=()=>{t(c.select("a:not([data-mce-block])"),Ge=>{var en;let ut=Ge.parentNode;const wn=c.getRoot();if((ut==null?void 0:ut.lastChild)===Ge){for(;ut&&!c.isBlock(ut);){if(((en=ut.parentNode)==null?void 0:en.lastChild)!==ut||ut===wn)return;ut=ut.parentNode}c.add(ut,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ge=>{(Ge.type==="setcontent"||Ge.command==="mceInsertLink")&&ke()})},Qe=()=>{e.on("init",()=>{R("DefaultParagraphSeparator",zs(e))})},It=ke=>{const Ge=ke.getBody(),ut=ke.selection.getRng();return ut.startContainer===ut.endContainer&&ut.startContainer===Ge&&ut.startOffset===0&&ut.endOffset===Ge.childNodes.length},Lt=()=>{e.on("keyup focusin mouseup",ke=>{!ct.modifierPressed(ke)&&!It(e)&&u.normalize()},!0)},On=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},lo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Bo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ke=>{let Ge;ke.target.nodeName==="HTML"&&(Ge=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ge),e.selection.normalize(),e.nodeChanged())}))},qo=()=>{O&&e.on("keydown",ke=>{ct.metaKeyPressed(ke)&&!ke.shiftKey&&(ke.keyCode===37||ke.keyCode===39)&&(ke.preventDefault(),e.selection.getSel().modify("move",ke.keyCode===37?"backward":"forward","lineboundary"))})},zr=()=>{e.on("click",ke=>{let Ge=ke.target;do if(Ge.tagName==="A"){ke.preventDefault();return}while(Ge=Ge.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ei=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ke=>{ke.preventDefault()})})},nt=()=>{f.addNodeFilter("br",ke=>{let Ge=ke.length;for(;Ge--;)ke[Ge].attr("class")==="Apple-interchange-newline"&&ke[Ge].remove()})},At=Dt,Xn=()=>{if(!v||e.removed)return!1;const ke=e.selection.getSel();return!ke||!ke.rangeCount||ke.rangeCount===0},Zn=()=>{w&&(j(),ae(),Ei(),H(),k&&(lo(),Bo(),zr())),v&&(se(),me(),On(),qo())},sa=()=>{St(),U(),Fn.windowsPhone||Lt(),w&&(j(),ae(),Qe(),Ei(),Je(),nt(),k?(lo(),Bo(),zr()):H()),v&&(xe(),Se(),oe(),se(),Oe(),me(),Ee(),On(),qo(),Je())};return $d(e)?Zn():sa(),{refreshContentEditable:At,isHidden:Xn}};class g5 extends Error{constructor(o,r){super(o);Ie(this,"url");this.url=r}}const h5={},hK=(e,t,o)=>new Promise((r,c)=>{const u=q.fromTag("script");Rr(u,{type:"text/javascript",src:e,...o});const f=()=>{Ao(u)};Qv(u,"load",()=>{f(),r()}),Qv(u,"error",()=>{f(),c(new Error(`Failed to load script url: ${e}`))}),Hn(LS(t),u)}),K7=async(e,t)=>{const o=Kn.ScriptLoader.getScriptAttributes(e);return await hK(e,t,o).catch(()=>Promise.reject(new g5(`Failed to load component url: ${e}`,e))),e},pK=e=>Mc(e,(t,o)=>wo(h5,t).getOrThunk(()=>{if(gn(window.customElements.get(o))){const r=K7(t,G1());return h5[t]=r,r}else return Promise.resolve(t)}).catch(r=>(delete h5[t],Promise.reject(r)))),Y7=(e,t)=>{const o=ic(za(e));return Mt(o,r=>K7(r,q.fromDom(t)))},bK=e=>{const t=e.schema.getComponentUrls();return e.inline?pK(t):Y7(t,e.getDoc())},X7=async e=>{const t=bK(e),o=ge(await Promise.allSettled(t),r=>r.status==="rejected");o.length>0&&le(o,r=>{if(r.reason instanceof g5){const{url:c}=r.reason;BV(e,c)}})},vK=e=>{X7(e)},p5=_n.DOM,yK=(e,t)=>{const o=q.fromDom(e.getBody()),r=Xv(Ar(o)),c=q.fromTag("style");ds(c,"type","text/css"),Hn(c,q.fromText(t)),Hn(r,c),e.on("remove",()=>{Ao(c)})},CK=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,b5=e=>nu(e,t=>as(t)===!1),J7=e=>{const t=e.options.get,o=e.editorUpload.blobCache;return b5({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:CK(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:xd(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},Q7=e=>{const t=e.options.get;return b5({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},SK=e=>{const t=e.options.get;return{...J7(e),...Q7(e),...b5({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},wK=e=>{const t=Zb(J7(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let v=b.attr(r);if(v&&!b.attr(u)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;r==="style"?(v=c.serializeStyle(c.parseStyle(v),b.name),v.length||(v=null),b.attr(u,v),b.attr(r,v)):r==="tabindex"?(b.attr(u,v),b.attr(r,null)):b.attr(u,e.convertURL(v,r,b.name))}}}),t.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),_y(e)&&t.addNodeFilter("#cdata",o=>{let r=o.length;for(;r--;){const c=o[r];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode(c.value??"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Lr("br",1))}}),t},eL=e=>{const t=Dk(e);t&&Bu.setEditorTimeout(e,()=>{let o;t===!0?o=e:o=e.editorManager.get(t),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},v5=e=>{const t=e.dom.getRoot();!e.inline&&(!Gy(e)||e.selection.getStart(!0)===t)&&y(t).each(o=>{const r=o.getNode(),c=Wa(r)?y(r).getOr(o):o;e.selection.setRng(c.toRange())})},tL=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Yw(e),e.focus(!0),v5(e),e.nodeChanged({initial:!0});const t=Ok(e);ne(t)&&t.call(e,e),eL(e),Jf(e)&&vP(e,!0)},OT=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,xK=(e,t,o)=>{const{pass:r,fail:c}=_e(t,b=>tinymce.Resource.has(Th(b))),f=[...r.map(b=>{const v=tinymce.Resource.get(Th(b));return Y(v)?Promise.resolve(OT(e).loadRawCss(b,v)):Promise.resolve()}),OT(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},nL=e=>{const t=OT(e),o=vy(e),r=e.contentCSS,c=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let v="";He.each(e.contentStyles,w=>{v+=w+`\r
`}),e.dom.addStyle(v)}const f=Promise.all(xK(e,r,o)).then(u).catch(u),b=Nf(e);return b&&yK(e,b),f},EK=e=>{const t=e.getDoc(),o=e.getBody();Kw(e),wx(e)||(t.body.spellcheck=!1,p5.setAttrib(o,"spellcheck","false")),e.quirks=gK(e),zn(e);const r=Ck(e);r!==void 0&&(o.dir=r);const c=Rk(e);c&&e.on("BeforeSetContent",u=>{He.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},oL=e=>{$d(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},DT=e=>{e.removed!==!0&&(oL(e),tL(e))},TK=e=>{let t=!1;const o=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(o),t=!0,e.setProgressState(!1)}},sL=e=>{const t=e.getElement();let o=e.getDoc();e.inline&&(p5.addClass(t,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();r.disabled=!0,e.readonly=Lp(e),e._editableRoot=fb(e),!Yi(e)&&e.hasEditableRoot()&&(e.inline&&p5.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=p1(e),e.schema=Nr(Q7(e)),e.dom=_n(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:gx(e),referrerPolicy:ib(e),crossOrigin:Bf(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=wK(e),e.serializer=pO(SK(e),e),e.selection=gO(e.dom,e.getWin(),e.serializer,e),e.annotator=mM(e),e.formatter=EP(e),e.undoManager=oU(e),e._nodeChangeDispatcher=new MG(e),e._selectionOverrides=xT(e),yo(e),TW(e),y7(e),OW(e),$d(e)||(pq(e),AS(e));const c=EG(e);QD(e,c),Zu(e),cU(e),lq(e,c);const u=iV(e);EK(e),vK(e),u.fold(()=>{const f=TK(e);nL(e).then(()=>{DT(e),f()})},f=>{e.setProgressState(!0),nL(e).then(()=>{f().then(b=>{e.setProgressState(!1),DT(e),s4(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),DT(e),s4(e)})})})},OS=_n.DOM,RT=(e,t,o,r)=>{const c=q.fromTag("iframe");return r.each(u=>ds(c,"tabindex",u)),Rr(c,o),Rr(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...Fn.browser.isFirefox()?{title:t}:{}}),Hc(c,"tox-edit-area__iframe"),c},rL=e=>{let t=fy(e)+"<html><head>";gy(e)!==e.editorManager.documentBaseURL&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=rx(e),r=ax(e),c=e.translate(hb(e)),u=Fn.browser.isFirefox()?"":`aria-label="${c}"`;return cx(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+cx(e)+'" />'),t+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" ${u}><br></body></html>`,t},aL=(e,t)=>{const o=hb(e),r=e.translate(o),c=Pi(q.fromDom(e.getElement()),"tabindex").bind(Hh),u=RT(e.id,r,sx(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=u,e.iframeHTML=rL(e),OS.add(t.iframeContainer,u)},cL=e=>{const t=e.iframeElement,o=()=>{e.contentDocument=t.contentDocument,sL(e)};if(Up(e)||Fn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=Qv(q.fromDom(t),"load",()=>{r.unbind(),o()});t.srcdoc=e.iframeHTML}},kK=(e,t)=>{aL(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=OS.isHidden(t.editorContainer)),e.getElement().style.display="none",OS.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,cL(e)},iL=_n.DOM,_K=(e,t,o)=>{const r=Eh.get(o),c=Eh.urls[o]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(o=He.trim(o),r&&He.inArray(t,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,ne(u.init)&&(u.init(e,c),t.push(o))}catch(u){NV(e,o,u)}}},AK=e=>{const t=o=>{o.keyCode===ct.ESC&&!o.defaultPrevented&&ox(e).isDefaultPrevented()&&o.preventDefault()};document.addEventListener("keyup",t),e.inline||e.on("keyup",t),e.on("remove",()=>{document.removeEventListener("keyup",t),e.inline||e.off("keyup",t)})},qm=e=>e.replace(/^\-/,""),lL=e=>{const t=[];le(Fp(e),o=>{_K(e,t,qm(o))})},OK=e=>{const t=He.trim($p(e)),o=e.ui.registry.getAll().icons,r={...c4.get("default").icons,...c4.get(t).icons};hn(r,(c,u)=>{Yt(o,u)||e.ui.registry.addIcon(u,c)})},uL=e=>{const t=ku(e);if(Y(t)){const o=u1.get(t);e.theme=o(e,u1.urls[t])||{},ne(e.theme.init)&&e.theme.init(e,u1.urls[t]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},DK=e=>{const t=db(e),o=Qb.get(t);e.model=o(e,Qb.urls[t])},RK=e=>{BO.init(e)},y5=e=>{const t=e.theme.renderUI;return t?t():mL(e)},MT=e=>{const t=e.getElement(),r=ku(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r},dL=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),MK=e=>{const t=iL.create("div");return iL.insertAfter(t,e),dL(t,t)},mL=e=>{const t=e.getElement();return e.inline?dL(null):MK(t)},fL=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,Y(ku(e))?y5(e):ne(ku(e))?MT(e):mL(e)},BK=(e,t)=>{const o={show:N.from(t.show).getOr(Dt),hide:N.from(t.hide).getOr(Dt),isEnabled:N.from(t.isEnabled).getOr(et),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Jf(e))||N.from(t.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},gL=async e=>{e.dispatch("ScriptsLoaded"),OK(e),AK(e),uL(e),DK(e),RK(e),lL(e);const t=await fL(e);BK(e,N.from(t.api).getOr({})),e.editorContainer=t.editorContainer,WV(e),e.inline?sL(e):kK(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},D1=_n.DOM,hL=e=>e.charAt(0)==="-",NK=(e,t)=>{const o=hx(t),r=px(t);if(!Sc.hasCode(o)&&o!=="en"){const c=Jo(r)?r:`${t.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{m1(t,c,o)})}},PK=(e,t)=>{const o=ku(e);if(Y(o)&&!hL(o)&&!Yt(u1.urls,o)){const r=vx(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${t}.js`;u1.load(o,c).catch(()=>{cP(e,c,o)})}},$K=(e,t)=>{const o=db(e);if(o!=="plugin"&&!Yt(Qb.urls,o)){const r=xk(e),c=Y(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${t}.js`;Qb.load(o,c).catch(()=>{MV(e,c,o)})}},pL=(e,t)=>{BO.load(e,t)},BT=e=>N.from(py(e)).filter(Jo).map(t=>({url:t,name:N.none()})),NT=(e,t,o)=>N.from(t).filter(r=>Jo(r)&&!c4.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:N.some(r)})),IK=(e,t,o)=>{const r=NT(t,"default",o),c=BT(t).orThunk(()=>NT(t,$p(t),""));le(uc([r,c]),u=>{e.add(u.url).catch(()=>{RV(t,u.url,u.name.getOrUndefined())})})},bL=(e,t)=>{const o=(r,c)=>{r!=="licensekeymanager"&&Eh.load(r,c).catch(()=>{aP(e,c,r)})};hn(xy(e),(r,c)=>{o(c,r),e.options.set("plugins",Fp(e).concat(c))}),le(Fp(e),r=>{r=He.trim(r),r&&!Eh.urls[r]&&!hL(r)&&o(r,`plugins/${r}/plugin${t}.js`)})},vL=e=>{const t=ku(e);return!Y(t)||ve(u1.get(t))},LK=e=>{const t=db(e);return ve(Qb.get(t))},yL=(e,t)=>{const o=Kn.ScriptLoader,r=()=>{!e.removed&&vL(e)&&LK(e)&&gL(e)};PK(e,t),$K(e,t),pL(e,t),NK(o,e),IK(o,e,t),bL(e,t),o.loadQueue().then(r,r)},FK=(e,t)=>C2.forElement(e,{contentCssCors:wy(t),referrerPolicy:ib(t)}),HK=e=>{const t=e.id;Sc.setCode(hx(e));const o=()=>{D1.unbind(window,"ready",o),e.render()};if(!Vg.Event.domLoaded){D1.bind(window,"ready",o);return}if(!e.getElement())return;const r=q.fromDom(e.getElement()),c=Cn(r);e.on("remove",()=>{Bs(r.dom.attributes,f=>Ks(r,f.name)),Rr(r,c)}),e.ui.styleSheetLoader=FK(r,e),Ip(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||D1.getParent(t,"form");u&&(e.formElement=u,Sy(e)&&!fi(e.getElement())&&(D1.insertAfter(D1.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},D1.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),kk(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=rP(e),e.notificationManager=HC(e),kx(e)&&e.on("GetContent",f=>{f.save&&(f.content=D1.encode(f.content))}),_k(e)&&e.on("submit",()=>{e.initialized&&e.save()}),mb(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),yL(e,e.suffix)},CL=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],zK=e=>{var t;return Intl.Segmenter?`${(t=new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value)==null?void 0:t.segment}`:e.trim()[0]},SL=(e,t)=>{let o=5381;for(let r=0;r<e.length;r++)o=(o<<5)+o+e.charCodeAt(r);return(o>>>0)%(t+1)},wL=e=>{const t=SL(e??"",CL.length-1);return CL[t]},xL=(e,t,o)=>{const r=o/2;return`<svg height="${o}" width="${o}" xmlns="http://www.w3.org/2000/svg"><circle cx="${r}" cy="${r}" r="${r}" fill="${t}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${r}">`+e+"</text></svg>"},EL=(e,t,o)=>"data:image/svg+xml,"+encodeURIComponent(xL(e,t,o)),PT=(e,t={size:36})=>EL(zK(e.name),wL(e.id),t.size),TL=Ra([Cd("id"),km("name"),km("avatar"),An("custom")]),C5=e=>{const t={};return hn(e,(o,r)=>{o.each(c=>{t[r]=c})}),t},kL=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const t=Mt(e,c=>oh("Invalid user object",TL,c)),{errors:o,values:r}=va(t);if(o.length>0){const c=Mt(o,(u,f)=>`User at index ${f}: ${Eu(u)}`);console.warn(`User validation errors:
`+c.join(`
`))}return Mt(r,c=>{const{id:u,name:f,avatar:b,...v}=c;return{id:u,name:f.getOr(u),avatar:b.getOr(PT({id:u,name:f.getOr(u)})),...C5(v)}})},_L=e=>{const t=new Map,o=new Map,r=w=>N.from(t.get(w)),c=(w,k)=>{t.set(k,w)},u=(w,k)=>N.from(o.get(w)).each(({reject:O})=>{O(k),o.delete(w)}),f=(w,k)=>N.from(o.get(w)).each(({resolve:O})=>{O(k),o.delete(w)}),b=w=>{const k=Dx(e);if(Array.isArray(w)){if(!k)return Ku(w,R=>Promise.resolve({id:R,name:R,avatar:PT({id:R,name:R})}))}else return{};const O=ic(ge(w,R=>!r(R).isSome()));return le(O,R=>{const I=new Promise((U,H)=>{o.set(R,{resolve:U,reject:H})});c(I,R)}),O.length>0&&k(O).then(kL).then(R=>{const I=new Set(Mt(R,U=>U.id));le(R,U=>f(U.id,U)),le(O,U=>{I.has(U)||u(U,new Error(`User ${U} not found`))})}).catch(R=>{le(O,I=>u(I,R instanceof Error?R:new Error("Network error")))}),cn(w,(R,I)=>(R[I]=r(I).getOr(Promise.resolve({id:I,name:I,avatar:PT({id:I,name:I})})),R),{})},v=Ox(e);return Object.freeze({userId:v,fetchUsers:b})},AL=e=>_L(e),VK=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,Jf(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),nx(e,t))},UK=e=>e._editableRoot,OL=(e,t)=>({sections:Xe(e),options:Xe(t)}),S5=cu().deviceType,w5=S5.isPhone(),DL=S5.isTablet(),R1=e=>{if(gn(e))return[];{const t=dn(e)?e:e.split(/[ ,]/),o=Mt(t,ls);return ge(o,Jo)}},x5=(e,t)=>{const o=Qm(t,(r,c)=>vt(e,c));return OL(o.t,o.f)},$T=(e,t,o={})=>{const r=e.sections(),c=wo(r,t).getOr({});return He.extend({},o,c)},IT=(e,t)=>Yt(e.sections(),t),RL=(e,t)=>IT(e,t)?e.sections()[t]:{},ML=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:wo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),E5=(e,t)=>{const o=t.external_plugins??{};return e&&e.external_plugins?He.extend({},e.external_plugins,o):o},BL=(e,t)=>[...R1(e),...R1(t)],NL=(e,t,o,r)=>e&&IT(t,"mobile")?r:o,ZK=(e,t,o,r)=>{const c=R1(o.forced_plugins),u=R1(r.plugins),f=RL(t,"mobile"),b=f.plugins?R1(f.plugins):u,v=NL(e,t,u,b),w=BL(c,v);return He.extend(r,{forced_plugins:c,plugins:w})},PL=(e,t)=>e&&IT(t,"mobile"),WK=(e,t,o,r,c)=>{const u=e?{mobile:ML(c.mobile??{},t)}:{},f=x5(["mobile"],Gd(u,c)),b=He.extend(o,r,f.options(),PL(e,f)?$T(f,"mobile"):{},{external_plugins:E5(r,f.options())});return ZK(e,f,r,b)},jK=(e,t)=>{const o=qd(t);return WK(w5||DL,w5,o,e,o)},GK=(e,t)=>qN(e,t),$L=e=>{const t=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{le("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&t("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},qK=e=>{const t=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return jn(c,u=>ve(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},IL=e=>{$L(e),qK(e)},LT=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const o=e.getDoc();let r;try{o.execCommand(t)}catch{r=!0}if(t==="paste"&&!o.queryCommandEnabled(t)&&(r=!0),r||!o.queryCommandSupported(t)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Fn.os.isMacOS()||Fn.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},KK=(e,t,o,r)=>{const c=q.fromDom(e.getRoot());return lC(c,Ce.fromRangeStart(t),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Na(c,Ce.fromRangeEnd(t),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},LL=e=>{if(typeof e!="string"){const t=He.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},YK=(e,t)=>{const o=e.selection,r=e.dom;return/^ | $/.test(t)?KK(r,o.getRng(),t,e.schema):t},DS=(e,t)=>{if(e.selection.isEditable()){const{content:o,details:r}=LL(t);kC(e,{...r,content:YK(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=Yf(e,c.content,r);IA(e,u,c),e.addVisual()})}},T5=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,o,r)=>{DS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,o,r)=>{DS(e,e.dom.encode(r))},insertHTML:(t,o,r)=>{DS(e,r)},mceInsertContent:(t,o,r)=>{DS(e,r)},mceSetContent:(t,o,r)=>{e.setContent(r)},mceReplaceContent:(t,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Nk(e))}})},XK={"font-size":"size","font-family":"face"},JK=uu("font"),FL=(e,t,o)=>{const r=u=>tr(u,e).orThunk(()=>JK(u)?wo(XK,e).bind(f=>Pi(u,f)):N.none()),c=u=>En(q.fromDom(t),u);return o0(q.fromDom(o),u=>r(u),c)},QK=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),eY=(e,t)=>N.from(_n.DOM.getStyle(t,e,!0)),HL=e=>(t,o)=>N.from(o).map(q.fromDom).filter(bs).bind(r=>FL(e,t,r.dom).or(eY(e,r.dom))).getOr(""),tY=HL("font-size"),nY=T(QK,HL("font-family")),zL=e=>y(e.getBody()).bind(t=>{const o=t.container();return N.from(ze(o)?o.parentNode:o)}),VL=e=>N.from(e.selection.getRng()).bind(t=>{const o=e.getBody();return t.startContainer===o&&t.startOffset===0?N.none():N.from(e.selection.getStart(!0))}),oY=(e,t)=>VL(e).orThunk(Me(zL,e)).map(q.fromDom).filter(bs).bind(t),k5=(e,t)=>oY(e,Ko(N.some,t)),UL=(e,t)=>{if(/^[0-9.]+$/.test(t)){const o=parseInt(t,10);if(o>=1&&o<=7){const r=Ay(e),c=Oy(e);return c.length>0?c[o-1]||t:r[o-1]||t}else return t}else return t},sY=e=>{const t=e.split(/\s*,\s*/);return Mt(t,o=>o.indexOf(" ")!==-1&&!(Wt(o,'"')||Wt(o,"'"))?`'${o}'`:o).join(",")},Wu=(e,t)=>{const o=UL(e,t);e.formatter.toggle("fontname",{value:sY(o)}),e.nodeChanged()},n=e=>k5(e,t=>nY(e.getBody(),t.dom)).getOr(""),s=(e,t)=>{e.formatter.toggle("fontsize",{value:UL(e,t)}),e.nodeChanged()},a=e=>k5(e,t=>tY(e.getBody(),t.dom)).getOr(""),i=e=>k5(e,t=>{const o=q.fromDom(e.getBody()),r=o0(t,u=>tr(u,"line-height"),Me(En,o)),c=()=>{const u=parseFloat(Ts(t,"line-height")),f=parseFloat(Ts(t,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),d=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},g=e=>{const t=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{t(o)},"ForeColor,HiliteColor":(o,r,c)=>{t(o,{value:c})},BackColor:(o,r,c)=>{t("hilitecolor",{value:c})},FontName:(o,r,c)=>{Wu(e,c)},FontSize:(o,r,c)=>{s(e,c)},LineHeight:(o,r,c)=>{d(e,c)},Lang:(o,r,c)=>{t(o,{value:c.code,customValue:c.customCode??null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(o,r,c)=>{t(Y(c)?c:"p")},mceToggleFormat:(o,r,c)=>{t(c)}})},h=e=>{const t=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>t(o),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>n(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>a(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>i(e))},C=e=>{g(e),h(e)},S=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},x=e=>{e.editorCommands.addCommands({Indent:()=>{Y8(e)},Outdent:()=>{og(e)}}),e.editorCommands.addCommands({Outdent:()=>G8(e),Indent:()=>wW(e)},"state")},_=e=>{const t=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=Y(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");tn(u)&&Y(u.href)&&(u.href=u.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},D=(e,t,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(t)?t:c.getParent(r,u,o);return N.from(f).map(q.fromDom)},P=(e,t)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=t?e.selection.getStart():e.selection.getEnd(),u=t?r.startContainer:r.endContainer,f=gS(o,u);if(!f||!f.isContentEditable)return;const b=t?Gr:El,v=zs(e);D(e,c,f,u).each(w=>{const k=bI(e,u,w.dom,f,!1,v);b(w,q.fromDom(k)),e.selection.setCursorLocation(k,0),e.dispatch("NewBlock",{newBlock:k}),mS(e,"insertParagraph")})},F=e=>P(e,!0),z=e=>P(e,!1),G=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{F(e)},InsertNewBlockAfter:()=>{z(e)}})},J=e=>{e.editorCommands.addCommands({insertParagraph:()=>{cT(pS,e)},mceInsertNewLine:(t,o,r)=>{NI(e,r)},InsertLineBreak:(t,o,r)=>{cT(OI,e)}})},W=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Ye(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(t,o,r)=>{e.selection.select(r)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),pc);if(t){const o=e.dom.createRng();o.selectNodeContents(t),e.selection.setRng(o)}}})},ee=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,o,r)=>{SM(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},re=e=>{IL(e),LT(e),S(e),W(e),T5(e),_(e),x(e),G(e),J(e),C(e),ee(e)},fe=["toggleview"],be=e=>vt(fe,e.toLowerCase());class Ke{constructor(t){Ie(this,"editor");Ie(this,"commands",{state:{},exec:{},value:{}});this.editor=t}execCommand(t,o=!1,r,c){const u=this.editor,f=t.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():gF(u)),u.dispatch("BeforeExecCommand",{command:t,ui:o,value:r}).isDefaultPrevented()))return!1;const w=this.commands.exec[f];return ne(w)?(w(f,o,r,c),u.dispatch("ExecCommand",{command:t,ui:o,value:r,args:c}),!0):!1}queryCommandState(t){if(!be(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=t.toLowerCase(),r=this.commands.state[o];return ne(r)?r(o):!1}queryCommandValue(t){if(!be(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=t.toLowerCase(),r=this.commands.value[o];return ne(r)?r(o):""}addCommands(t,o="exec"){const r=this.commands;hn(t,(c,u)=>{le(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(t,o,r){const c=t.toLowerCase();this.commands.exec[c]=(u,f,b,v)=>o.call(r??this.editor,f,b,v)}removeCommand(t,o){const r=t.toLowerCase();o?delete this.commands[o][r]:(delete this.commands.exec[r],delete this.commands.state[r],delete this.commands.value[r])}queryCommandSupported(t){const o=t.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(t,o,r){this.commands.state[t.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(t,o,r){this.commands.value[t.toLowerCase()]=()=>o.call(r??this.editor)}}const Re=He.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class $e{constructor(t){Ie(this,"settings");Ie(this,"scope");Ie(this,"toggleEvent");Ie(this,"bindings",{});this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||De}static isNative(t){return!!Re[t.toLowerCase()]}fire(t,o){return this.dispatch(t,o)}dispatch(t,o){const r=t.toLowerCase(),c=S0(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const v=u[f];if(!v.removed){if(v.once&&this.off(r,v.func),c.isImmediatePropagationStopped())return c;if(v.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(t,o,r,c){if(o===!1&&(o=De),o){const u={func:o,removed:!1};c&&He.extend(u,c);const f=t.toLowerCase().split(" ");let b=f.length;for(;b--;){const v=f[b];let w=this.bindings[v];w||(w=[],this.toggleEvent(v,!0)),r?w=[u,...w]:w=[...w,u],this.bindings[v]=w}}return this}off(t,o){if(t){const r=t.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return hn(this.bindings,(b,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(f){if(!o)f.length=0;else{const b=_e(f,v=>v.func===o);f=b.fail,this.bindings[u]=f,le(b.pass,v=>{v.removed=!0})}f.length||(this.toggleEvent(t,!1),delete this.bindings[u])}}}else hn(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(t,o,r){return this.on(t,o,r,{once:!0})}has(t){t=t.toLowerCase();const o=this.bindings[t];return!(!o||o.length===0)}}const Ne=e=>(e._eventDispatcher||(e._eventDispatcher=new $e({scope:e,toggleEvent:(t,o)=>{$e.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,o)}})),e._eventDispatcher),Tt={fire(e,t,o){return _C("fire"),this.dispatch(e,t,o)},dispatch(e,t,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return S0(e.toLowerCase(),t??{},r);const c=Ne(r).dispatch(e,t);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,t,o){return Ne(this).on(e,t,o)},off(e,t){return Ne(this).off(e,t)},once(e,t){return Ne(this).once(e,t)},hasEventListeners(e){return Ne(this).has(e)}},gt=_n.DOM;let sn;const _t=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const o=ub(e);return o?(e.eventRoot||(e.eventRoot=gt.select(o)[0]),e.eventRoot):e.getBody()},Xt=e=>!e.hidden&&!Jf(e),ht=(e,t,o)=>{Xt(e)?e.dispatch(t,o):Jf(e)&&HV(e,o)},Ae=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const o=_t(e,t);if(ub(e)){if(sn||(sn={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||sn&&(hn(sn,(c,u)=>{e.dom.unbind(_t(e,u))}),sn=null)})),sn[t])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const v=f[b].getBody();(v===u||gt.isChildOf(u,v))&&ht(f[b],t,c)}};sn[t]=r,gt.bind(o,t,r)}else{const r=c=>{ht(e,t,c)};gt.bind(o,t,r),e.delegates[t]=r}},Ze={...Tt,bindPendingEventDelegates(){const e=this;He.each(e._pendingNativeEvents,t=>{Ae(e,t)})},toggleNativeEvent(e,t){const o=this;e==="focus"||e==="blur"||o.removed||(t?o.initialized?Ae(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(_t(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),o=e.dom;e.delegates&&(hn(e.delegates,(r,c)=>{e.dom.unbind(_t(e,c),c,r)}),delete e.delegates),!e.inline&&t&&o&&(t.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(t),o.unbind(e.getContainer()))}},$t=e=>Y(e)?{value:e.split(/[ ,]/),valid:!0}:Vn(e,Y)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Jt=e=>{const t=(()=>{switch(e){case"array":return dn;case"boolean":return an;case"function":return ne;case"number":return pr;case"object":return tn;case"string":return Y;case"string[]":return $t;case"object[]":return o=>Vn(o,tn);case"regexp":return o=>ac(o,RegExp);default:return et}})();return o=>Pn(o,t,`The value must be a ${e}.`)},Ct=e=>Y(e.processor),Kt=(e,t)=>{const o=Xu(t.message)?"":`. ${t.message}`;return e+o},ro=e=>e.valid,Pn=(e,t,o="")=>{const r=t(e);return an(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},nc=(e,t,o)=>{if(!as(t)){const r=Pn(t,o);if(ro(r))return r.value;console.error(Kt(`Invalid default value passed for the "${e}" option`,r))}},Go=(e,t,o=t)=>{const r={},c={},u=(I,U,H)=>{const j=Pn(U,H);return ro(j)?(c[I]=j.value,!0):(console.warn(Kt(`Invalid value passed for the ${I} option`,j)),!1)},f=(I,U)=>{const H=Ct(U)?Jt(U.processor):U.processor,j=nc(I,U.default,H);r[I]={...U,default:j,processor:H},wo(c,I).orThunk(()=>wo(t,I)).each(se=>u(I,se,H))},b=I=>Yt(r,I);return{register:f,isRegistered:b,get:I=>wo(c,I).orThunk(()=>wo(r,I).map(U=>U.default)).getOrUndefined(),set:(I,U)=>{if(b(I)){const H=r[I];return H.immutable?(console.error(`"${I}" is an immutable option and cannot be updated`),!1):u(I,U,H.processor)}else return console.warn(`"${I}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:I=>{const U=b(I);return U&&delete c[I],U},isSet:I=>Yt(c,I),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(I,U)=>an(U)||pr(U)||Y(U)||ie(U)||dn(U)||Qc(U)?U:Object.prototype.toString.call(U))))}catch(I){console.error(I)}}}},Yc=(e,t)=>{e.dom.contentEditable="true"},Hr=(e,t)=>{const o=q.fromDom(e.getBody());t?(e.readonly=!0,e.hasEditableRoot()&&Yc(o),$O(e)):(e.readonly=!1,bP(e))},$a=e=>e.readonly,Xc=e=>{const t=e.undoManager.add();ve(t)&&(e.undoManager.undo(),e.undoManager.reset())},Xl=e=>jn(e,t=>t.type==="characterData"||t.type==="childList"),Ph=e=>{const t=r=>{$a(e)&&Xl(r)&&Xc(e)},o=new MutationObserver(t);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{$a(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&$a(e)&&r.preventDefault()}),e.on("compositionstart",()=>{$a(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if($a(e)){const r=o.takeRecords();t(r)}o.disconnect()})},Km=["design","readonly"],M1=(e,t,o,r)=>{const c=o[t.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&Hr(e,u.editorReadOnly),t.set(r),hk(e,r)},ag=(e,t,o,r)=>{if(!(r===o.get()||e.initialized&&Jf(e))){if(!Yt(t,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?M1(e,o,t,r):e.on("init",()=>M1(e,o,t,r))}},RS=(e,t,o)=>{if(vt(Km,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${t}:`,r)}}}}},_5=e=>{const t=Nt("design"),o=Nt({design:{activate:Dt,deactivate:Dt,editorReadOnly:!1},readonly:{activate:Dt,deactivate:Dt,editorReadOnly:!0}});return Ph(e),zV(e),{isReadOnly:()=>$a(e),set:r=>ag(e,o.get(),t,r),get:()=>t.get(),register:(r,c)=>{o.set(RS(o.get(),r,c))}}},$h=He.each,Ov=He.explode,FT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},A5=He.makeMap("alt,ctrl,shift,meta,access"),ZL=e=>e in A5,rY=e=>{const t={},o=Fn.os.isMacOS()||Fn.os.isiOS();$h(Ov(e.toLowerCase(),"+"),u=>{ZL(u)?t[u]=!0:/^[0-9]{2,}$/.test(u)?t.keyCode=parseInt(u,10):(t.charCode=u.charCodeAt(0),t.keyCode=FT[u]||u.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let c;for(c in A5)t[c]?r.push(c):t[c]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,o?t.ctrl=!0:t.shift=!0),t.meta&&(o?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class HT{constructor(t){Ie(this,"editor");Ie(this,"shortcuts",{});Ie(this,"pendingPatterns",[]);this.editor=t;const o=this;t.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&($h(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(t,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return $h(Ov(He.trim(t)),b=>{const v=u.createShortcut(b,o,f,c);u.shortcuts[v.id]=v}),!0}remove(t){const o=this.createShortcut(t);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(t){const o=this,r=t;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:He.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,o,r,c){const u=He.map(Ov(t,">"),rY);return u[u.length-1]=He.extend(u[u.length-1],{func:r,scope:c||this.editor}),He.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,o){return!o||o.ctrl!==t.ctrlKey||o.meta!==t.metaKey||o.alt!==t.altKey||o.shift!==t.shiftKey?!1:t.keyCode===o.keyCode||t.charCode&&t.charCode===o.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const MS=()=>{const e=xj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},ju=_n.DOM,B1=He.extend,WL=He.each;class BS{constructor(t,o,r){Ie(this,"baseUri");Ie(this,"id");Ie(this,"editorUid");Ie(this,"plugins",{});Ie(this,"documentBaseURI");Ie(this,"baseURI");Ie(this,"contentCSS",[]);Ie(this,"contentStyles",[]);Ie(this,"ui");Ie(this,"mode");Ie(this,"options");Ie(this,"editorUpload");Ie(this,"userLookup");Ie(this,"shortcuts");Ie(this,"loadedCSS",{});Ie(this,"editorCommands");Ie(this,"suffix");Ie(this,"editorManager");Ie(this,"hidden");Ie(this,"inline");Ie(this,"hasVisual");Ie(this,"isNotDirty",!1);Ie(this,"annotator");Ie(this,"bodyElement");Ie(this,"bookmark");Ie(this,"composing",!1);Ie(this,"container");Ie(this,"contentAreaContainer");Ie(this,"contentDocument");Ie(this,"contentWindow");Ie(this,"delegates");Ie(this,"destroyed",!1);Ie(this,"dom");Ie(this,"editorContainer");Ie(this,"eventRoot");Ie(this,"formatter");Ie(this,"formElement");Ie(this,"formEventDelegate");Ie(this,"hasHiddenInput",!1);Ie(this,"iframeElement",null);Ie(this,"iframeHTML");Ie(this,"initialized",!1);Ie(this,"notificationManager");Ie(this,"orgDisplay");Ie(this,"orgVisibility");Ie(this,"parser");Ie(this,"quirks");Ie(this,"readonly",!1);Ie(this,"removed",!1);Ie(this,"schema");Ie(this,"selection");Ie(this,"serializer");Ie(this,"startContent","");Ie(this,"targetElm");Ie(this,"theme");Ie(this,"model");Ie(this,"undoManager");Ie(this,"windowManager");Ie(this,"licenseKeyManager");Ie(this,"_beforeUnload");Ie(this,"_eventDispatcher");Ie(this,"_nodeChangeDispatcher");Ie(this,"_pendingNativeEvents",[]);Ie(this,"_selectionOverrides");Ie(this,"_skinLoaded",!1);Ie(this,"_editableRoot",!0);Ie(this,"bindPendingEventDelegates");Ie(this,"toggleNativeEvent");Ie(this,"unbindAllNativeEvents");Ie(this,"fire");Ie(this,"dispatch");Ie(this,"on");Ie(this,"off");Ie(this,"once");Ie(this,"hasEventListeners");this.editorManager=r,B1(this,Ze);const c=this;this.id=t,this.editorUid=ou(),this.hidden=!1;const u=jK(r.defaultOptions,o);this.options=Go(c,u,o),Pp(c),this.userLookup=AL(this);const f=this.options.get;f("deprecation_warnings")&&gz(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const v=f("base_url");v&&r._setBaseUrl(v),this.baseUri=r.baseURI;const w=ib(c);w&&(Kn.ScriptLoader._setReferrerPolicy(w),_n.DOM.styleSheetLoader._setReferrerPolicy(w)),Kn.ScriptLoader._setCrossOrigin(I=>Bf(c)(I,"script")),_n.DOM.styleSheetLoader._setCrossOrigin(I=>Bf(c)(I,"stylesheet"));const k=wy(c);ve(k)&&_n.DOM.styleSheetLoader._setContentCssCors(k),sr.languageLoad=f("language_load"),sr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Lu(gy(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Ip(c),this.hasVisual=Hp(c),this.shortcuts=new HT(this),this.editorCommands=new Ke(this),re(this);const O=f("cache_suffix");O&&(Fn.cacheSuffix=O.replace(/^[\?\&]+/,"")),this.ui={registry:MS(),styleSheetLoader:void 0,show:Dt,hide:Dt,setEnabled:Dt,isEnabled:et},this.mode=_5(c),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),r.dispatch("SetupEditor",{editor:this});const R=Pf(c);ne(R)&&R.call(c,c)}render(){HK(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return $b(this)}translate(t){return Sc.translate(t)}getParam(t,o,r){const c=this.options;return c.isRegistered(t)||(ve(r)?c.register(t,{processor:r,default:o}):c.register(t,{processor:et,default:o})),!c.isSet(t)&&!as(o)?o:c.get(t)}hasPlugin(t,o){return vt(Fp(this),t)?o?Eh.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,o,r){this.editorCommands.addCommand(t,o,r)}addQueryStateHandler(t,o,r){this.editorCommands.addQueryStateHandler(t,o,r)}addQueryValueHandler(t,o,r){this.editorCommands.addQueryValueHandler(t,o,r)}addShortcut(t,o,r,c){this.shortcuts.add(t,o,r,c)}execCommand(t,o,r,c){return this.editorCommands.execCommand(t,o,r,c)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(ju.show(t.getContainer()),ju.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(ju.hide(t.getContainer()),ju.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,o){this.dispatch("ProgressState",{state:t,time:o})}load(t={}){const o=this,r=o.getElement();if(!o.removed&&r){const c={...t,load:!0},u=fi(r)?r.value:r.innerHTML;o.setContent(u,c),c.no_events||o.dispatch("LoadContent",{...c,element:r})}}save(t={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...t,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,fi(r))r.value=u;else{(t.is_removing||!o.inline)&&(r.innerHTML=u);const b=ju.getParent(o.id,"form");b&&WL(b.elements,v=>v.name===o.id?(v.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(t,o){bO(this,t,o)}getContent(t){return EV(this,t)}insertContent(t,o){o&&(t=B1({content:t},o)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?bO(this,this.startContent,{initial:!0,format:"raw"}):bO(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const o=!this.isNotDirty;this.isNotDirty=!t,t&&t!==o&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||ju.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ju.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const o=t.iframeElement;o&&(t.contentWindow=o.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const o=t.getWin();o&&(t.contentDocument=o.document)}return t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement??(t==null?void 0:t.body)??null}convertURL(t,o,r){const c=this,u=c.options.get,f=_u(c);if(ne(f))return f.call(c,t,r,!0,o);if(!u("convert_urls")||r==="link"||tn(r)&&r.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const b=new Lu(t);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?t:u("relative_urls")?c.documentBaseURI.toRelative(t):(t=c.documentBaseURI.toAbsolute(t,u("remove_script_host")),t)}addVisual(t){GK(this,t)}setEditableRoot(t){VK(this,t)}hasEditableRoot(){return UK(this)}remove(){yO(this)}destroy(t){sP(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const N1=_n.DOM,Dv=He.each;let O5=!1,P1,Ia=[];const Gu=e=>{const t=e.type;Dv(Zd.get(),o=>{switch(t){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},$1=e=>{if(e!==O5){const t=_n.DOM;e?(t.bind(window,"resize",Gu),t.bind(window,"scroll",Gu)):(t.unbind(window,"resize",Gu),t.unbind(window,"scroll",Gu)),O5=e}},zT=e=>{const t=Ia;return Ia=ge(Ia,o=>e!==o),Zd.activeEditor===e&&(Zd.activeEditor=Ia.length>0?Ia[0]:null),Zd.focusedEditor===e&&(Zd.focusedEditor=null),t.length!==Ia.length},D5=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(zT(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},aY=document.compatMode!=="CSS1Compat",Zd={...Tt,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:ou(),majorVersion:"8",minorVersion:"3.1",releaseDate:"2025-12-17",i18n:Sc,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",o="",r=Lu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)t=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const v=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){v.indexOf(".min")!==-1&&(o=".min"),t=b.substring(0,b.lastIndexOf("/"));break}}if(!t&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),t=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Lu(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new Lu(e.baseURL),e.suffix=o,bM(e),le(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],u=>Object.defineProperty(e,u,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&hn(r,(c,u)=>{sr.PluginManager.urls[u]=c})},init(e){const t=this;let o;const r=He.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(k,O)=>k.inline&&O.tagName.toLowerCase()in r,u=k=>{let O=k.id;return O||(O=wo(k,"name").filter(R=>!N1.get(R)).getOrThunk(N1.uniqueId),k.setAttribute("id",O)),O},f=k=>{const O=e[k];if(O)return O.apply(t,[])},b=k=>Fn.browser.isIE()||Fn.browser.isEdge()?(l4("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):aY?(l4("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Y(k.selector)?N1.select(k.selector):ve(k.target)?[k.target]:[];let v=k=>{o=k};const w=()=>{let k=0;const O=[];let R;const I=(U,H,j)=>{const oe=new BS(U,H,t);O.push(oe),oe.on("init",()=>{++k===R.length&&v(O)}),oe.targetElm=oe.targetElm||j,oe.render()};N1.unbind(window,"ready",w),f("onpageload"),R=ic(b(e)),He.each(R,U=>{D5(t.get(U.id))}),R=He.grep(R,U=>!t.get(U.id)),R.length===0?v([]):Dv(R,U=>{c(e,U)?l4("Could not initialize inline editor on invalid inline target element",U):I(u(U),e,U)})};return N1.bind(window,"ready",w),new Promise(k=>{o?k(o):v=O=>{k(O)}})},get(e){return arguments.length===0?Ia.slice(0):Y(e)?so(Ia,t=>t.id===e).getOr(null):pr(e)&&Ia[e]?Ia[e]:null},add(e){const t=this,o=t.get(e.id);return o===e||(o===null&&Ia.push(e),$1(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),P1||(P1=r=>{const c=t.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",P1))),e},createEditor(e,t){return this.add(new BS(e,t,this))},remove(e){const t=this;let o;if(!e){for(let r=Ia.length-1;r>=0;r--)t.remove(Ia[r]);return}if(Y(e)){Dv(N1.select(e),r=>{o=t.get(r.id),o&&t.remove(o)});return}return o=e,ie(t.get(o.id))?null:(zT(o)&&t.dispatch("RemoveEditor",{editor:o}),Ia.length===0&&window.removeEventListener("beforeunload",P1),o.remove(),$1(Ia.length>0),o)},execCommand(e,t,o){const r=this,c=tn(o)?o.id??o.index:o;switch(e){case"mceAddEditor":{if(!r.get(c)){const u=o.options;new BS(c,u,r).render()}return!0}case"mceRemoveEditor":{const u=r.get(c);return u&&u.remove(),!0}case"mceToggleEditor":{const u=r.get(c);return u?(u.isHidden()?u.show():u.hide(),!0):(r.execCommand("mceAddEditor",!1,o),!0)}}return r.activeEditor?r.activeEditor.execCommand(e,t,o):!1},triggerSave:()=>{Dv(Ia,e=>{e.save()})},addI18n:(e,t)=>{Sc.add(e,t)},translate:e=>Sc.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Lu(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Lu(this.baseURL)},_addLicenseKeyManager:e=>BO.add(e)};Zd.setup();const cY=(()=>{const e=Bc(),t=u=>({items:u,types:bt(u),getType:f=>wo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:t,write:o,read:r,clear:c}})(),Rv=Math.min,Mv=Math.max,VT=Math.round,La=(e,t,o)=>{let r=t.x,c=t.y;const u=e.w,f=e.h,b=t.w,v=t.h,w=(o||"").split("");return w[0]==="b"&&(c+=v),w[1]==="r"&&(r+=b),w[0]==="c"&&(c+=VT(v/2)),w[1]==="c"&&(r+=VT(b/2)),w[3]==="b"&&(c-=f),w[4]==="r"&&(r-=u),w[3]==="c"&&(c-=VT(f/2)),w[4]==="c"&&(r-=VT(u/2)),I1(r,c,u,f)},Bv=(e,t,o,r)=>{for(let c=0;c<r.length;c++){const u=La(e,t,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},iY=(e,t,o)=>I1(e.x-t,e.y-o,e.w+t*2,e.h+o*2),jL=(e,t)=>{const o=Mv(e.x,t.x),r=Mv(e.y,t.y),c=Rv(e.x+e.w,t.x+t.w),u=Rv(e.y+e.h,t.y+t.h);return c-o<0||u-r<0?null:I1(o,r,c-o,u-r)},M5=(e,t,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=t.x+t.w,v=t.y+t.h,w=Mv(0,t.x-r),k=Mv(0,t.y-c),O=Mv(0,u-b),R=Mv(0,f-v);return r+=w,c+=k,o&&(u+=w,f+=k,r-=O,c-=R),u-=O,f-=R,I1(r,c,u-r,f-c)},I1=(e,t,o,r)=>({x:e,y:t,w:o,h:r}),uY={inflate:iY,relativePosition:La,findBestRelativePosition:Bv,intersect:jL,clamp:M5,create:I1,fromClientRect:e=>I1(e.left,e.top,e.width,e.height)},Ym=(e,t,o=1e3)=>{let r=!1,c=null;const u=w=>(...k)=>{r||(r=!0,c!==null&&(window.clearTimeout(c),c=null),w.apply(null,k))},f=u(e),b=u(t);return{start:(...w)=>{!r&&c===null&&(c=window.setTimeout(()=>b.apply(null,w),o))},resolve:f,reject:b}},GL=(()=>{const e={},t={},o={};return{load:(v,w)=>{const k=`Script at URL "${w}" failed to load`,O=`Script at URL "${w}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const R=new Promise((I,U)=>{const H=Ym(I,U);t[v]=H.resolve,Kn.ScriptLoader.loadScript(w).then(()=>H.start(O),()=>H.reject(k))});return e[v]=R,R}},add:(v,w)=>{t[v]!==void 0&&(t[v](w),delete t[v]),e[v]=Promise.resolve(w),o[v]=w},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v],delete o[v]}}})(),qL=()=>(()=>{let e={},t=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{t.push(r),e[r]=String(c)},key:r=>t[r],removeItem:r=>{t=t.filter(c=>c===r),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),o})();let L1;try{const e="__storage_test__";L1=window.localStorage,L1.setItem(e,e),L1.removeItem(e)}catch{L1=qL()}var KL=L1;const cg={geom:{Rect:uY},util:{Delay:Bu,Tools:He,VK:ct,URI:Lu,EventDispatcher:$e,Observable:Tt,I18n:Sc,LocalStorage:KL,ImageUploader:SP},dom:{EventUtils:Vg,TreeWalker:ys,TextSeeker:Cu,DOMUtils:_n,ScriptLoader:Kn,RangeUtils:Od,Serializer:pO,StyleSheetLoader:Bg,ControlSelection:AF,BookmarkManager:Nb,Selection:gO,Event:Vg.Event},html:{Styles:gd,Entities:yc,Node:Lr,Schema:Nr,DomParser:Zb,Writer:w_,Serializer:fh},Env:Fn,AddOnManager:sr,Annotator:mM,Formatter:EP,UndoManager:oU,EditorCommands:Ke,WindowManager:rP,NotificationManager:HC,EditorObservable:Ze,Shortcuts:HT,Editor:BS,FocusManager:hM,EditorManager:Zd,DOM:_n.DOM,ScriptLoader:Kn.ScriptLoader,PluginManager:Eh,ThemeManager:u1,ModelManager:Qb,IconManager:c4,Resource:GL,FakeClipboard:cY,trim:He.trim,isArray:He.isArray,is:He.is,toArray:He.toArray,makeMap:He.makeMap,each:He.each,map:He.map,grep:He.grep,inArray:He.inArray,extend:He.extend,walk:He.walk,resolve:He.resolve,explode:He.explode,_addCacheSuffix:He._addCacheSuffix},B5=He.extend(Zd,cg),YL=e=>{try{xn.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(B5),YL(B5)})()})(wX);var PX=wX.exports;const $X=NX(PX);(function(){const xn=Object.getPrototypeOf,Tn=(n,s,a)=>{var i;return a(n,s.prototype)?!0:((i=n.constructor)==null?void 0:i.name)===s.name},Bn=n=>{const s=typeof n;return n===null?"null":s==="object"&&Array.isArray(n)?"array":s==="object"&&Tn(n,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Ln=n=>s=>Bn(s)===n,No=n=>s=>typeof s===n,_o=n=>s=>n===s,ws=(n,s)=>Dn(n)&&Tn(n,s,(a,i)=>xn(a)===i),Et=Ln("string"),Dn=Ln("object"),ki=n=>ws(n,Object),ra=Ln("array"),sc=_o(null),xr=No("boolean"),Zs=_o(void 0),rc=n=>n==null,oo=n=>!rc(n),Rt=No("function"),Fa=No("number"),ac=(n,s)=>{if(ra(n)){for(let a=0,i=n.length;a<i;++a)if(!s(n[a]))return!1;return!0}return!1},Y=()=>{},tn=n=>()=>n(),Qc=(n,s)=>(...a)=>n(s.apply(null,a)),dn=(n,s)=>a=>n(s(a)),ie=n=>()=>n,an=n=>n,as=(n,s)=>n===s;function gn(n,...s){return(...a)=>{const i=s.concat(a);return n.apply(null,i)}}const ve=n=>s=>!n(s),ne=n=>()=>{throw new Error(n)},pr=n=>n(),Vn=ie(!1),Dt=ie(!0),Wu=class Wu{constructor(s,a){Ie(this,"tag");Ie(this,"value");this.tag=s,this.value=a}static some(s){return new Wu(!0,s)}static none(){return Wu.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?Wu.some(s(this.value)):Wu.none()}bind(s){return this.tag?s(this.value):Wu.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:Wu.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return oo(s)?Wu.some(s):Wu.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Wu,"singletonNone",new Wu(!1));let T=Wu;const Ko=Array.prototype.slice,Xe=Array.prototype.indexOf,Yo=Array.prototype.push,Vt=(n,s)=>Xe.call(n,s),Me=(n,s)=>{const a=Vt(n,s);return a===-1?T.none():T.some(a)},ao=(n,s)=>Vt(n,s)>-1,Qs=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];if(s(d,a))return!0}return!1},Io=(n,s)=>{const a=[];for(let i=0;i<n;i++)a.push(s(i));return a},hs=(n,s)=>{const a=[];for(let i=0;i<n.length;i+=s){const d=Ko.call(n,i,i+s);a.push(d)}return a},De=(n,s)=>{const a=n.length,i=new Array(a);for(let d=0;d<a;d++){const g=n[d];i[d]=s(g,d)}return i},et=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];s(d,a)}},N=(n,s)=>{for(let a=n.length-1;a>=0;a--){const i=n[a];s(i,a)}},Rc=(n,s)=>{const a=[],i=[];for(let d=0,g=n.length;d<g;d++){const h=n[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},co=(n,s)=>{const a=[];for(let i=0,d=n.length;i<d;i++){const g=n[i];s(g,i)&&a.push(g)}return a},cs=(n,s,a)=>(N(n,(i,d)=>{a=s(a,i,d)}),a),So=(n,s,a)=>(et(n,(i,d)=>{a=s(a,i,d)}),a),aa=(n,s,a)=>{for(let i=0,d=n.length;i<d;i++){const g=n[i];if(s(g,i))return T.some(g);if(a(g,i))break}return T.none()},vt=(n,s)=>aa(n,s,Vn),jn=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];if(s(d,a))return T.some(a)}return T.none()},Mt=n=>{const s=[];for(let a=0,i=n.length;a<i;++a){if(!ra(n[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+n);Yo.apply(s,n[a])}return s},le=(n,s)=>Mt(De(n,s)),Bs=(n,s)=>{for(let a=0,i=n.length;a<i;++a){const d=n[a];if(s(d,a)!==!0)return!1}return!0},_e=n=>{const s=Ko.call(n,0);return s.reverse(),s},ge=(n,s)=>co(n,a=>!ao(s,a)),nn=(n,s)=>{const a={};for(let i=0,d=n.length;i<d;i++){const g=n[i];a[String(g)]=s(g,i)}return a},yn=n=>[n],cn=(n,s)=>{const a=Ko.call(n,0);return a.sort(s),a},Ws=(n,s)=>s>=0&&s<n.length?T.some(n[s]):T.none(),so=n=>Ws(n,0),il=n=>Ws(n,n.length-1),Lh=Rt(Array.from)?Array.from:n=>Ko.call(n),ca=(n,s)=>{for(let a=0;a<n.length;a++){const i=s(n[a],a);if(i.isSome())return i}return T.none()},Gn=Object.keys,Ha=Object.hasOwnProperty,Lo=(n,s)=>{const a=Gn(n);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=n[g];s(h,g)}},is=(n,s)=>Ku(n,(a,i)=>({k:i,v:s(a,i)})),Ku=(n,s)=>{const a={};return Lo(n,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},_i=n=>(s,a)=>{n[a]=s},Ur=(n,s,a,i)=>{Lo(n,(d,g)=>{(s(d,g)?a:i)(d,g)})},ps=(n,s)=>{const a={},i={};return Ur(n,s,_i(a),_i(i)),{t:a,f:i}},js=(n,s)=>{const a={};return Ur(n,s,_i(a),Y),a},Fo=(n,s)=>{const a=[];return Lo(n,(i,d)=>{a.push(s(i,d))}),a},cc=(n,s)=>{const a=Gn(n);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=n[g];if(s(h,g,n))return T.some(h)}return T.none()},ic=n=>Fo(n,an),bt=(n,s)=>$n(n,s)?T.from(n[s]):T.none(),$n=(n,s)=>Ha.call(n,s),hn=(n,s)=>$n(n,s)&&n[s]!==void 0&&n[s]!==null,pa={generate:n=>{if(!ra(n))throw new Error("cases must be an array");if(n.length===0)throw new Error("there must be at least one case");const s=[],a={};return et(n,(i,d)=>{const g=Gn(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ra(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...S)=>{const x=S.length;if(x!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+x);return{fold:(...D)=>{if(D.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+D.length);return D[d].apply(null,S)},match:D=>{const P=Gn(D);if(s.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+P.join(","));if(!Bs(s,z=>ao(P,z)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+s.join(", "));return D[h].apply(null,S)},log:D=>{console.log(D,{constructors:s,constructor:h,params:S})}}}}),a}},pt=n=>{let s=n;return{get:()=>s,set:d=>{s=d}}},ll=n=>{let s=T.none(),a=[];const i=x=>ll(_=>{d(D=>{_(x(D))})}),d=x=>{h()?S(x):a.push(x)},g=x=>{h()||(s=T.some(x),C(a),a=[])},h=()=>s.isSome(),C=x=>{et(x,S)},S=x=>{s.each(_=>{setTimeout(()=>{x(_)},0)})};return n(g),{get:d,map:i,isReady:h}},nu={nu:ll,pure:n=>ll(s=>{s(n)})},Mc=n=>{setTimeout(()=>{throw n},0)},za=n=>{const s=S=>{n().then(S,Mc)};return{map:S=>za(()=>n().then(S)),bind:S=>za(()=>n().then(x=>S(x).toPromise())),anonBind:S=>za(()=>n().then(()=>S.toPromise())),toLazy:()=>nu.nu(s),toCached:()=>{let S=null;return za(()=>(S===null&&(S=n()),S))},toPromise:n,get:s}},Xo={nu:n=>za(()=>new Promise(n)),pure:n=>za(()=>Promise.resolve(n))},ef=n=>{const s=g=>g(n),a=ie(n),i=()=>d,d={tag:!0,inner:n,fold:(g,h)=>h(n),isValue:Dt,isError:Vn,map:g=>Nt.value(g(n)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(n)},toOptional:()=>T.some(n)};return d},Yu=n=>{const s=()=>a,a={tag:!1,inner:n,fold:(i,d)=>i(n),isValue:Vn,isError:Dt,map:s,mapError:i=>Nt.error(i(n)),bind:s,exists:Vn,forall:Dt,getOr:an,or:an,getOrThunk:pr,orThunk:pr,getOrDie:ne(String(n)),each:Y,toOptional:T.none};return a},Nt={value:ef,error:Yu,fromOption:(n,s)=>n.fold(()=>Yu(s),ef)},ba=n=>({...n,toCached:()=>ba(n.toCached()),bindFuture:S=>ba(n.bind(x=>x.fold(_=>Xo.pure(Nt.error(_)),_=>S(_)))),bindResult:S=>ba(n.map(x=>x.bind(S))),mapResult:S=>ba(n.map(x=>x.map(S))),mapError:S=>ba(n.map(x=>x.mapError(S))),foldResult:(S,x)=>n.map(_=>_.fold(S,x)),withTimeout:(S,x)=>ba(Xo.nu(_=>{let D=!1;const P=setTimeout(()=>{D=!0,_(Nt.error(x()))},S);n.get(F=>{D||(clearTimeout(P),_(F))})}))}),ul=n=>ba(Xo.nu(n)),Fh=n=>ba(Xo.pure(Nt.value(n))),jd={nu:ul,wrap:ba,pure:Fh,value:Fh,error:n=>ba(Xo.pure(Nt.error(n))),fromResult:n=>ba(Xo.pure(n)),fromFuture:n=>ba(n.map(Nt.value)),fromPromise:n=>ul(s=>{n.then(a=>{s(Nt.value(a))},a=>{s(Nt.error(a))})})},dl=typeof window<"u"?window:Function("return this;")(),Ai=(n,s,a,i)=>{const d=n+s;return d>i?a:d<a?i:d},Ns=(n,s,a)=>Math.min(Math.max(n,s),a),ou=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let dg=0;const st=n=>{const a=new Date().getTime(),i=Math.floor(ou()*1e9);return dg++,n+"_"+i+dg+String(a)},Va=(n,s)=>s,Gd=(n,s)=>ki(n)&&ki(s)?uo(n,s):s,qd=n=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)$n(d,g)&&(a[g]=n(a[g],d[g]))}return a},uo=qd(Gd),Kd=qd(Va),uc=(n,s,a=as)=>n.exists(i=>a(i,s)),_s=(n,s,a=as)=>dc(n,s,a).getOr(n.isNone()&&s.isNone()),Oi=n=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<n.length;i++)n[i].each(a);return s},Yd=n=>{const s=[];for(let a=0;a<n.length;a++){const i=n[a];if(i.isSome())s.push(i.getOrDie());else return T.none()}return T.some(s)},dc=(n,s,a)=>n.isSome()&&s.isSome()?T.some(a(n.getOrDie(),s.getOrDie())):T.none(),Tr=(n,s,a,i)=>n.isSome()&&s.isSome()&&a.isSome()?T.some(i(n.getOrDie(),s.getOrDie(),a.getOrDie())):T.none(),ti=(n,s)=>n!=null?T.some(s(n)):T.none(),va=(n,s)=>n?T.some(s):T.none(),z1=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),mg=(n,s)=>{let a=s??dl;for(let i=0;i<n.length&&a!==void 0&&a!==null;++i)a=a[n[i]];return a},Bc=(n,s)=>{const a=n.split(".");return mg(a,s)};pa.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ml=n=>{const s=[],a=[];return et(n,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},fl=n=>{const s=pt(T.none()),a=()=>s.get().each(n);return{clear:()=>{a(),s.set(T.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(T.some(C))}}},fg=()=>fl(n=>n.destroy()),xs=()=>fl(n=>n.unbind()),Wt=()=>{const n=fl(Y);return{...n,on:a=>n.get().each(a)}},Zr=(n,s)=>n+s,kr=(n,s)=>n.substring(s),ls=(n,s,a)=>s===""||n.length>=s.length&&n.substr(a,a+s.length)===s,nf=(n,s)=>Xu(n,s)?kr(n,s.length):n,Xd=(n,s)=>ni(n,s)?n:Zr(n,s),Jo=(n,s,a=0,i)=>{const d=n.indexOf(s,a);return d!==-1?Zs(i)?!0:d+s.length<=i:!1},Xu=(n,s)=>ls(n,s,0),ni=(n,s)=>ls(n,s,n.length-s.length),ot=(n=>s=>s.replace(n,""))(/^\s+|\s+$/g),su=n=>n.length>0,ya=n=>!su(n),Ju=n=>{const s=parseFloat(n);return isNaN(s)?T.none():T.some(s)},us=(n,s)=>{let a=null,i=null;return{cancel:()=>{sc(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,sc(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,n.apply(null,C)},s))}}},zh=(n,s)=>{let a=null;return{cancel:()=>{sc(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{sc(a)&&(a=setTimeout(()=>{a=null,n.apply(null,g)},s))}}},oi=(n,s)=>{let a=null;const i=()=>{sc(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,n.apply(null,g)},s)}}},Nc=n=>{let s=!1,a;return(...i)=>(s||(s=!0,a=n.apply(null,i)),a)},gg="\uFEFF",hg=" ",gl=(n,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,n),new Error(d)}return hl(i.childNodes[0])},pg=(n,s)=>{const i=(s||document).createElement(n);return hl(i)},Jd=(n,s)=>{const i=(s||document).createTextNode(n);return hl(i)},hl=n=>{if(n==null)throw new Error("Node cannot be null or undefined");return{dom:n}},We={fromHtml:gl,fromTag:pg,fromText:Jd,fromDom:hl,fromPoint:(n,s,a)=>T.from(n.dom.elementFromPoint(s,a)).map(hl)},Qd=(n,s)=>{s.fold(a=>{n.setStartBefore(a.dom)},(a,i)=>{n.setStart(a.dom,i)},a=>{n.setStartAfter(a.dom)})},of=(n,s)=>{s.fold(a=>{n.setEndBefore(a.dom)},(a,i)=>{n.setEnd(a.dom,i)},a=>{n.setEndAfter(a.dom)})},si=(n,s,a)=>{const i=n.document.createRange();return Qd(i,s),of(i,a),i},ru=(n,s,a,i,d)=>{const g=n.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},em=n=>({left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}),Ca=n=>{const s=n.getClientRects(),a=s.length>0?s[0]:n.getBoundingClientRect();return a.width>0||a.height>0?T.some(a).map(em):T.none()},ed=n=>{const s=n.getBoundingClientRect();return s.width>0||s.height>0?T.some(s).map(em):T.none()},au=pa.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pl=(n,s,a)=>s(We.fromDom(a.startContainer),a.startOffset,We.fromDom(a.endContainer),a.endOffset),mo=(n,s)=>s.match({domRange:a=>({ltr:ie(a),rtl:T.none}),relative:(a,i)=>({ltr:Nc(()=>si(n,a,i)),rtl:Nc(()=>T.some(si(n,i,a)))}),exact:(a,i,d,g)=>({ltr:Nc(()=>ru(n,a,i,d,g)),rtl:Nc(()=>T.some(ru(n,d,g,a,i)))})}),tm=(n,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>au.rtl(We.fromDom(d.endContainer),d.endOffset,We.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>pl(n,au.ltr,a)):pl(n,au.ltr,a)},Wr=(n,s)=>{const a=mo(n,s);return tm(n,a)},B=(n,s)=>Wr(n,s).match({ltr:(i,d,g,h)=>{const C=n.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=n.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});au.ltr,au.rtl;const V=9,X=11,ye=1,yt=3,ln=(n,s)=>{const a=n.dom;if(a.nodeType!==ye)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Po=n=>n.nodeType!==ye&&n.nodeType!==V&&n.nodeType!==X||n.childElementCount===0,Sa=(n,s)=>{const a=s===void 0?document:s.dom;return Po(a)?[]:De(a.querySelectorAll(n),We.fromDom)},Pc=(n,s)=>{const a=s===void 0?document:s.dom;return Po(a)?T.none():T.from(a.querySelector(n)).map(We.fromDom)},un=(n,s)=>n.dom===s.dom,$=(n,s)=>{const a=n.dom,i=s.dom;return a===i?!1:a.contains(i)},K=(n,s,a,i)=>{const d=n.isiOS()&&/ipad/i.test(a)===!0,g=n.isiOS()&&!d,h=n.isiOS()||n.isAndroid(),C=h||i("(pointer:coarse)"),S=d||!g&&h&&i("(min-device-width:768px)"),x=g||h&&!S,_=s.isSafari()&&n.isiOS()&&/safari/i.test(a)===!1,D=!x&&!S&&!_;return{isiPad:ie(d),isiPhone:ie(g),isTablet:ie(S),isPhone:ie(x),isTouch:ie(C),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:ie(_),isDesktop:ie(D)}},te=(n,s)=>{for(let a=0;a<n.length;a++){const i=n[a];if(i.test(s))return i}},we=(n,s)=>{const a=te(n,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return on(i(1),i(2))},Ue=(n,s)=>{const a=String(s).toLowerCase();return n.length===0?dt():we(n,a)},dt=()=>on(0,0),on=(n,s)=>({major:n,minor:s}),Jn={nu:on,detect:Ue,unknown:dt},qn=(n,s)=>ca(s.brands,a=>{const i=a.brand.toLowerCase();return vt(n,d=>{var g;return i===((g=d.brand)==null?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Jn.nu(parseInt(a.version,10),0)}))}),Ps=(n,s)=>{const a=String(s).toLowerCase();return vt(n,i=>i.search(a))},As=(n,s)=>Ps(n,s).map(a=>{const i=Jn.detect(a.versionRegexes,s);return{current:a.name,version:i}}),sf=(n,s)=>Ps(n,s).map(a=>{const i=Jn.detect(a.versionRegexes,s);return{current:a.name,version:i}}),rf=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ri=n=>s=>Jo(s,n),V1=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>Jo(n,"edge/")&&Jo(n,"chrome")&&Jo(n,"safari")&&Jo(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rf],search:n=>Jo(n,"chrome")&&!Jo(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>Jo(n,"msie")||Jo(n,"trident")},{name:"Opera",versionRegexes:[rf,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ri("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ri("firefox")},{name:"Safari",versionRegexes:[rf,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(Jo(n,"safari")||Jo(n,"mobile/"))&&Jo(n,"applewebkit")}],$S=[{name:"Windows",search:ri("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>Jo(n,"iphone")||Jo(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ri("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ri("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ri("linux"),versionRegexes:[]},{name:"Solaris",search:ri("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ri("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ri("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Iv={browsers:ie(V1),oses:ie($S)},L5="Edge",XT="Chromium",JT="IE",QT="Opera",cu="Firefox",e3="Safari",t3=()=>Lv({current:void 0,version:Jn.unknown()}),Lv=n=>{const s=n.current,a=n.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(L5),isChromium:i(XT),isIE:i(JT),isOpera:i(QT),isFirefox:i(cu),isSafari:i(e3)}},Fv={unknown:t3,nu:Lv},F5="Windows",n3="iOS",Hv="Android",iu="Linux",bl="macOS",af="Solaris",o3="FreeBSD",Fn="ChromeOS",s3=()=>zv({current:void 0,version:Jn.unknown()}),zv=n=>{const s=n.current,a=n.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(F5),isiOS:i(n3),isAndroid:i(Hv),isMacOS:i(bl),isLinux:i(iu),isSolaris:i(af),isFreeBSD:i(o3),isChromeOS:i(Fn)}},Es={unknown:s3,nu:zv},U1={detect:(n,s,a)=>{const i=Iv.browsers(),d=Iv.oses(),g=s.bind(S=>qn(i,S)).orThunk(()=>As(i,n)).fold(Fv.unknown,Fv.nu),h=sf(d,n).fold(Es.unknown,Es.nu),C=K(h,g,n,a);return{browser:g,os:h,deviceType:C}}},a3=n=>window.matchMedia(n).matches;let Vv=Nc(()=>U1.detect(window.navigator.userAgent,T.from(window.navigator.userAgentData),a3));const jr=()=>Vv(),bg=(n,s)=>Bc(n,s),c3=(n,s)=>{const a=bg(n,s);if(a==null)throw new Error(n+" not available on this browser");return a},He=Object.getPrototypeOf,$c=n=>c3("HTMLElement",n),Z1=n=>{const s=Bc("ownerDocument.defaultView",n);return Dn(n)&&($c(s).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(He(n).constructor.name))},Di=n=>n.dom.nodeName.toLowerCase(),Vh=n=>n.dom.nodeType,Uv=n=>s=>Vh(s)===n,q=n=>mc(n)&&Z1(n.dom),mc=Uv(ye),nm=Uv(yt),Zv=Uv(V),vg=Uv(X),ia=n=>s=>mc(s)&&Di(s)===n,fc=n=>We.fromDom(n.dom.ownerDocument),Wv=n=>Zv(n)?n:fc(n),jv=n=>We.fromDom(Wv(n).dom.documentElement),Uh=n=>We.fromDom(Wv(n).dom.defaultView),Ua=n=>T.from(n.dom.parentNode).map(We.fromDom),Gv=n=>Ua(n),lu=n=>T.from(n.dom.parentElement).map(We.fromDom),Zh=(n,s)=>{const a=Rt(s)?s:Vn;let i=n.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=We.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},qv=n=>T.from(n.dom.offsetParent).map(We.fromDom),Ic=n=>T.from(n.dom.previousSibling).map(We.fromDom),Kv=n=>T.from(n.dom.nextSibling).map(We.fromDom),vl=n=>De(n.dom.childNodes,We.fromDom),om=(n,s)=>{const a=n.dom.childNodes;return T.from(a[s]).map(We.fromDom)},En=n=>om(n,0),ai=(n,s)=>({element:n,offset:s}),W1=(n,s)=>{const a=vl(n);return a.length>0&&s<a.length?ai(a[s],0):ai(n,s)},IS=(n,s,a,i)=>{const g=fc(n).dom.createRange();return g.setStart(n.dom,s),g.setEnd(a.dom,i),g},mn=(n,s,a,i)=>{const d=IS(n,s,a,i),g=un(n,a)&&s===i;return d.collapsed&&!g},td=n=>vg(n)&&oo(n.dom.host),Gs=n=>We.fromDom(n.dom.getRootNode()),yl=n=>td(n)?n:We.fromDom(Wv(n).dom.body),Cl=n=>bs(n).isSome(),bs=n=>{const s=Gs(n);return td(s)?T.some(s):T.none()},Qn=n=>We.fromDom(n.dom.host),i3=n=>{if(oo(n.target)){const s=We.fromDom(n.target);if(mc(s)&&l3(s)&&n.composed&&n.composedPath){const a=n.composedPath();if(a)return so(a)}}return T.from(n.target)},l3=n=>oo(n.dom.shadowRoot),uu=(n,s,a,i,d,g,h)=>({target:n,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),Ri=n=>{const s=We.fromDom(i3(n).getOr(n.target)),a=()=>n.stopPropagation(),i=()=>n.preventDefault(),d=Qc(i,a);return uu(s,n.clientX,n.clientY,a,i,d,n)},Sl=(n,s)=>a=>{n(a)&&s(Ri(a))},er=(n,s,a,i,d)=>{const g=Sl(a,i);return n.dom.addEventListener(s,g,d),{unbind:gn(Mi,n,s,g,d)}},nd=(n,s,a,i)=>er(n,s,a,i,!1),Lc=(n,s,a,i)=>er(n,s,a,i,!0),Mi=(n,s,a,i)=>{n.dom.removeEventListener(s,a,i)},ci=Dt,eo=(n,s,a)=>nd(n,s,ci,a),ii=(n,s,a)=>Lc(n,s,ci,a),du=Ri,la=()=>We.fromDom(document),br=(n,s=!1)=>n.dom.focus({preventScroll:s}),vs=n=>n.dom.blur(),Bi=n=>{const s=Gs(n).dom;return n.dom===s.activeElement},_r=(n=la())=>T.from(n.dom.activeElement).map(We.fromDom),qs=n=>_r(Gs(n)).filter(s=>n.dom.contains(s.dom)),cf=(n,s)=>{Ua(n).each(i=>{i.dom.insertBefore(s.dom,n.dom)})},LS=(n,s)=>{Kv(n).fold(()=>{Ua(n).each(d=>{Ar(d,s)})},i=>{cf(i,s)})},Yv=(n,s)=>{En(n).fold(()=>{Ar(n,s)},i=>{n.dom.insertBefore(s.dom,i.dom)})},Ar=(n,s)=>{n.dom.appendChild(s.dom)},Xv=(n,s,a)=>{om(n,a).fold(()=>{Ar(n,s)},i=>{cf(i,s)})},FS=(n,s)=>{et(s,a=>{Ar(n,a)})},lf=(n,s,a)=>{if(Et(a)||xr(a)||Fa(a))n.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",n),new Error("Attribute value was not simple")},Pt=(n,s,a)=>{lf(n.dom,s,a)},Jv=(n,s)=>{const a=n.dom;Lo(s,(i,d)=>{lf(a,d,i)})},ir=(n,s)=>{const a=n.dom.getAttribute(s);return a===null?void 0:a},Or=(n,s)=>T.from(ir(n,s)),Dr=(n,s)=>{const a=n.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},Ho=(n,s)=>{n.dom.removeAttribute(s)},uf=n=>So(n.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),j1=n=>{n.dom.textContent="",et(vl(n),s=>{Ni(s)})},Ni=n=>{const s=n.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},wl=(n,s)=>We.fromDom(n.dom.cloneNode(s)),Qv=n=>wl(n,!1),G1=n=>wl(n,!0),q1=(n,s)=>{const i=(s||document).createElement("div");return i.innerHTML=n,vl(We.fromDom(i))},od=n=>n.dom.innerHTML,xl=(n,s)=>{const i=fc(n).dom,d=We.fromDom(i.createDocumentFragment()),g=q1(s,i);FS(d,g),j1(n),Ar(n,d)},u3=n=>{const s=We.fromTag("div"),a=We.fromDom(n.dom.cloneNode(!0));return Ar(s,a),od(s)},Gr=n=>{if(td(n))return"#shadow-root";{const s=Qv(n);return u3(s)}},El=n=>new Promise((s,a)=>{const i=()=>{g(),s(n)},d=[eo(n,"load",i),eo(n,"error",()=>{g(),a("Unable to load data from image: "+n.dom.src)})],g=()=>et(d,h=>h.unbind());n.dom.complete&&i()}),mu=n=>n.style!==void 0&&Rt(n.style.getPropertyValue),Hn=n=>{const s=nm(n)?n.dom.parentNode:n.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return bs(We.fromDom(s)).fold(()=>a.body.contains(s),dn(Hn,Qn))},Fc=()=>HS(We.fromDom(document)),HS=n=>{const s=n.dom.body;if(s==null)throw new Error("Body is not available yet");return We.fromDom(s)},K1=(n,s,a)=>{if(!Et(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",n),new Error("CSS value must be a string: "+a);mu(n)&&n.style.setProperty(s,a)},li=(n,s)=>{mu(n)&&n.style.removeProperty(s)},Ht=(n,s,a)=>{const i=n.dom;K1(i,s,a)},ds=(n,s)=>{const a=n.dom;Lo(s,(i,d)=>{K1(a,d,i)})},Rr=(n,s)=>{const a=n.dom;Lo(s,(i,d)=>{i.fold(()=>{li(a,d)},g=>{K1(a,d,g)})})},zo=(n,s)=>{const a=n.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Hn(n)?Pi(a,s):d},Pi=(n,s)=>mu(n)?n.style.getPropertyValue(s):"",Qo=(n,s)=>{const a=n.dom,i=Pi(a,s);return T.from(i).filter(d=>d.length>0)},Ks=n=>{const s={},a=n.dom;if(mu(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},yg=(n,s,a)=>{const i=We.fromTag(n);return Ht(i,s,a),Qo(i,s).isSome()},Cn=(n,s)=>{const a=n.dom;li(a,s),uc(Or(n,"style").map(ot),"")&&Ho(n,"style")},$i=n=>n.dom.offsetWidth,Ao=(n,s)=>{const a=(C,S)=>{if(!Fa(S)&&!S.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+S);const x=C.dom;mu(x)&&(x.style[n]=S+"px")},i=C=>{const S=s(C);if(S<=0||S===null){const x=zo(C,n);return parseFloat(x)||0}return S},d=i,g=(C,S)=>So(S,(x,_)=>{const D=zo(C,_),P=D===void 0?0:parseInt(D,10);return isNaN(P)?x:x+P},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,S,x)=>{const _=g(C,x);return S>_?S-_:0}}},ui=Ao("height",n=>{const s=n.dom;return Hn(n)?s.getBoundingClientRect().height:s.offsetHeight}),lr=n=>ui.get(n),ua=n=>ui.getOuter(n),Wh=(n,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=ui.max(n,s,a);Ht(n,"max-height",i+"px")},zS=n=>n.offsetWidth<=0&&n.offsetHeight<=0,jh=n=>!zS(n.dom),Gh=Ao("width",n=>{const s=n.dom;return Hn(n)?s.getBoundingClientRect().width:s.offsetWidth}),df=(n,s)=>Gh.set(n,s),da=n=>Gh.get(n),sd=n=>Gh.getOuter(n),d3=(n,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Gh.max(n,s,a);Ht(n,"max-width",i+"px")},mf=(n,s)=>({left:n,top:s,translate:(i,d)=>mf(n+i,s+d)}),fo=mf,Y1=n=>{const s=n.getBoundingClientRect();return fo(s.left,s.top)},X1=(n,s)=>n!==void 0?n:s!==void 0?s:0,gc=n=>{const s=n.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===n.dom)return fo(a.offsetLeft,a.offsetTop);const g=X1(i==null?void 0:i.pageYOffset,d.scrollTop),h=X1(i==null?void 0:i.pageXOffset,d.scrollLeft),C=X1(d.clientTop,a.clientTop),S=X1(d.clientLeft,a.clientLeft);return di(n).translate(h-S,g-C)},di=n=>{const s=n.dom,i=s.ownerDocument.body;return i===s?fo(i.offsetLeft,i.offsetTop):Hn(n)?Y1(s):fo(0,0)},Ts=n=>{const s=n!==void 0?n.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return fo(a,i)},sm=(n,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(n,s)},Cg=((n,s)=>{const a=g=>{if(!n(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>n(g)?T.from(g.dom.nodeValue):T.none();return{get:a,getOption:i,set:(g,h)=>{if(!n(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(nm,"text"),J1=n=>Cg.get(n),e2=(n,s)=>a=>H5(a)==="rtl"?s:n,H5=n=>zo(n,"direction")==="rtl"?"rtl":"ltr",Tl=(n,s)=>{const a=ir(n,s);return a===void 0||a===""?[]:a.split(" ")},m3=(n,s,a)=>{const d=Tl(n,s).concat([a]);return Pt(n,s,d.join(" ")),!0},VS=(n,s,a)=>{const i=co(Tl(n,s),d=>d!==a);return i.length>0?Pt(n,s,i.join(" ")):Ho(n,s),!1};var kl=(n,s,a,i,d)=>n(a,i)?T.some(a):Rt(d)&&d(a)?T.none():s(a,i,d);const US=(n,s,a)=>{let i=n.dom;const d=Rt(a)?a:Vn;for(;i.parentNode;){i=i.parentNode;const g=We.fromDom(i);if(s(g))return T.some(g);if(d(g))break}return T.none()},Sg=(n,s,a)=>kl((d,g)=>g(d),US,n,s,a),qh=(n,s)=>{const a=n.dom;return a.parentNode?Kh(We.fromDom(a.parentNode),i=>!un(n,i)&&s(i)):T.none()},Kh=(n,s)=>{const a=d=>s(We.fromDom(d));return vt(n.dom.childNodes,a).map(We.fromDom)},t2=(n,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=We.fromDom(i.childNodes[d]);if(s(g))return T.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return T.none()};return a(n.dom)},ZS=n=>Pc(n),Ii=(n,s,a)=>US(n,i=>ln(i,s),a),f3=(n,s)=>qh(n,a=>ln(a,s)),rm=(n,s)=>Kh(n,a=>ln(a,s)),io=(n,s)=>Pc(s,n),ma=(n,s,a)=>kl((d,g)=>ln(d,g),Ii,n,s,a),fu=(n,s)=>{n.dom.checked=s},n2=n=>n.dom.checked,am=n=>n.dom.classList!==void 0,o2=n=>Tl(n,"class"),WS=(n,s)=>m3(n,"class",s),gu=(n,s)=>VS(n,"class",s),hu=(n,s)=>ao(o2(n),s)?gu(n,s):WS(n,s),bo=(n,s)=>{am(n)?n.dom.classList.add(s):WS(n,s)},jS=n=>{(am(n)?n.dom.classList:o2(n)).length===0&&Ho(n,"class")},ns=(n,s)=>{am(n)?n.dom.classList.remove(s):gu(n,s),jS(n)},Yh=(n,s)=>{const a=am(n)?n.dom.classList.toggle(s):hu(n,s);return jS(n),a},$s=(n,s)=>am(n)&&n.dom.classList.contains(s),pu=(n,s)=>{et(s,a=>{bo(n,a)})},qr=(n,s)=>{et(s,a=>{ns(n,a)})},rd=(n,s)=>{et(s,a=>{Yh(n,a)})},Q1=(n,s)=>Bs(s,a=>$s(n,a)),GS=n=>{const s=n.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},s2=n=>am(n)?GS(n):o2(n),g3=n=>n.dom.textContent,Hc=n=>n.dom.value,cm=(n,s)=>{if(s===void 0)throw new Error("Value.set was undefined");n.dom.value=s},ur=(n,s,a)=>co(Zh(n,a),s),Mr=(n,s)=>Sa(s,n),e0=(n,s,a)=>Sg(n,s,a).isSome(),Xh=(n,s,a)=>ma(n,s,a).isSome(),qS=n=>Rt(n)?n:Vn,KS=(n,s,a)=>{let i=n.dom;const d=qS(a);for(;i.parentNode;){i=i.parentNode;const g=We.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return T.none()},Li=(n,s,a)=>{const i=s(n),d=qS(a);return i.orThunk(()=>d(n)?T.none():KS(n,s,d))},ff={create:(n,s,a,i)=>({start:n,soffset:s,finish:a,foffset:i})},ad=pa.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),h3=(n,s,a,i)=>n.fold(s,a,i),t0=n=>n.fold(an,an,an),p3=ad.before,Br=ad.on,wg=ad.after,b3={before:p3,on:Br,after:wg,cata:h3,getStart:t0},xg=pa.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),n0=n=>xg.exact(n.start,n.soffset,n.finish,n.foffset),YS=n=>n.match({domRange:s=>We.fromDom(s.startContainer),relative:(s,a)=>b3.getStart(s),exact:(s,a,i,d)=>s}),r2=xg.domRange,XS=xg.relative,JS=xg.exact,o0=n=>{const s=YS(n);return Uh(s)},QS=ff.create,Eg={domRange:r2,relative:XS,exact:JS,exactFromRange:n0,getWin:o0,range:QS},v3=n=>T.from(n.getSelection()),a2=n=>{if(n.rangeCount>0){const s=n.getRangeAt(0),a=n.getRangeAt(n.rangeCount-1);return T.some(ff.create(We.fromDom(s.startContainer),s.startOffset,We.fromDom(a.endContainer),a.endOffset))}else return T.none()},y3=n=>{if(n.anchorNode===null||n.focusNode===null)return a2(n);{const s=We.fromDom(n.anchorNode),a=We.fromDom(n.focusNode);return mn(s,n.anchorOffset,a,n.focusOffset)?T.some(ff.create(s,n.anchorOffset,a,n.focusOffset)):a2(n)}},C3=n=>v3(n).filter(s=>s.rangeCount>0).bind(y3),c2=(n,s)=>{const a=B(n,s);return Ca(a)},i2=(n,s)=>{const a=B(n,s);return ed(a)},S3={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},w3=(()=>{const n="[0-9]+",a="[eE]"+("[+-]?"+n),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",n+i+d(n)+d(a),i+n+d(a),n+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),x3=(n,s)=>Qs(s,a=>Qs(S3[a],i=>n===i)),s0=(n,s)=>T.from(w3.exec(n)).bind(i=>{const d=Number(i[1]),g=i[2];return x3(g,s)?T.some({value:d,unit:g}):T.none()}),E3=(n,s)=>s0(n,s).map(({value:a,unit:i})=>a+i),Fi=n=>{const s=n===void 0?window:n;return jr().browser.isFirefox()?T.none():T.from(s.visualViewport)},Tg=(n,s,a,i)=>({x:n,y:s,width:a,height:i,right:n+a,bottom:s+i}),r0=n=>{const s=n===void 0?window:n,a=s.document,i=Ts(We.fromDom(a));return Fi(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return Tg(i.left,i.top,g,h)},d=>Tg(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},Jh=(n,s)=>n.view(s).fold(ie([]),i=>{const d=n.owner(i),g=Jh(n,d);return[i].concat(g)}),T3=(n,s)=>{const a=s.owner(n),i=Jh(s,a);return T.some(i)};var cd=Object.freeze({__proto__:null,view:n=>{var a;return(n.dom===document?T.none():T.from((a=n.dom.defaultView)==null?void 0:a.frameElement)).map(We.fromDom)},owner:n=>fc(n)});const Qh=n=>{const s=la(),a=Ts(s);return T3(n,cd).fold(gn(gc,n),d=>{const g=di(n),h=cs(d,(C,S)=>{const x=di(S);return{left:C.left+x.left,top:C.top+x.top}},{left:0,top:0});return fo(h.left+g.left+a.left,h.top+g.top+a.top)})},im=(n,s,a)=>({point:n,width:s,height:a}),_3=(n,s,a,i)=>({x:n,y:s,width:a,height:i}),Ys=(n,s,a,i)=>({x:n,y:s,width:a,height:i,right:n+a,bottom:s+i}),Is=n=>{const s=gc(n),a=sd(n),i=ua(n);return Ys(s.left,s.top,a,i)},lm=n=>{const s=Qh(n),a=sd(n),i=ua(n);return Ys(s.left,s.top,a,i)},id=(n,s)=>{const a=Math.max(n.x,s.x),i=Math.max(n.y,s.y),d=Math.min(n.right,s.right),g=Math.min(n.bottom,s.bottom),h=d-a,C=g-i;return Ys(a,i,h,C)},l2=(n,s)=>So(s,(a,i)=>id(a,i),n),Kr=()=>r0(window),u2=(n,s)=>un(n.element,s.event.target),um=n=>(uc(Qo(n,"position"),"fixed")?T.none():qv(n)).orThunk(()=>{const i=We.fromTag("span");return Ua(n).bind(d=>{Ar(d,i);const g=qv(i);return Ni(i),g})}),a0=n=>um(n).map(gc).getOrThunk(()=>fo(0,0)),zc=(n,s)=>{const a=T.from(ir(n,"id")).getOrThunk(()=>{const i=st("aria");return Pt(s,"id",i),i});Pt(n,"aria-describedby",a)},d2=n=>{Ho(n,"aria-describedby")};var hc;(function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"})(hc||(hc={}));const ys=(n,s,a)=>n.stype===hc.Error?s(n.serror):a(n.svalue),c0=n=>{const s=[],a=[];return et(n,i=>{ys(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},kg=(n,s)=>n.stype===hc.Error?{stype:hc.Error,serror:s(n.serror)}:n,tw=(n,s)=>n.stype===hc.Value?{stype:hc.Value,svalue:s(n.svalue)}:n,m2=(n,s)=>n.stype===hc.Value?s(n.svalue):n,nw=(n,s)=>n.stype===hc.Error?s(n.serror):n,ow=n=>({stype:hc.Value,svalue:n}),i0=n=>({stype:hc.Error,serror:n}),Ye={fromResult:n=>n.fold(i0,ow),toResult:n=>ys(n,Nt.error,Nt.value),svalue:ow,partition:c0,serror:i0,bind:m2,bindError:nw,map:tw,mapError:kg,fold:ys},Za=n=>Dn(n)&&Gn(n).length>100?" removed due to size":JSON.stringify(n,null,2),A3=n=>{const s=n.length>10?n.slice(0,10).concat([{path:[],getErrorInfo:ie("... (only showing first ten failures)")}]):n;return De(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},wa=(n,s)=>Ye.serror([{path:n,getErrorInfo:s}]),mi=(n,s,a)=>wa(n,()=>'Could not find valid *required* value for "'+s+'" in '+Za(a)),u0=(n,s)=>wa(n,()=>'Choice schema did not contain choice key: "'+s+'"'),O3=(n,s,a)=>wa(n,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Za(s)),dm=(n,s)=>wa(n,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),D3=(n,s)=>wa(n,ie(s)),Wa=n=>{const s=(i,d)=>Ye.bindError(n(d),g=>D3(i,g)),a=ie("val");return{extract:s,toString:a}},sw=Wa(Ye.svalue),fi=ie(sw),ze=(n,s)=>Wa(a=>{const i=typeof a;return n(a)?Ye.svalue(a):Ye.serror(`Expected type: ${s} but got: ${i}`)}),f2=ze(Fa,"number"),nr=ze(Et,"string"),rn=ze(xr,"boolean"),ld=ze(Rt,"function"),Ag=n=>{if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(s=>Ag(n[s]));default:return!1}},os=Wa(n=>Ag(n)?Ye.svalue(n):Ye.serror("Expected value to be acceptable for sending via postMessage")),gi=()=>({tag:"required",process:{}}),ep=n=>({tag:"defaultedThunk",process:n}),pc=n=>ep(ie(n)),Vo=()=>({tag:"option",process:{}}),ud=n=>({tag:"mergeWithThunk",process:n}),Og=n=>ud(ie(n)),g2=(n,s,a,i)=>({tag:"field",key:n,newKey:s,presence:a,prop:i}),h2=(n,s)=>({tag:"custom",newKey:n,instantiator:s}),hi=(n,s,a)=>{switch(n.tag){case"field":return s(n.key,n.newKey,n.presence,n.prop);case"custom":return a(n.newKey,n.instantiator)}},tp=(n,s)=>Ye.svalue(uo(s,Kd.apply(void 0,n))),np=n=>Qc(Ye.serror,Mt)(n),op={consolidateObj:(n,s)=>{const a=Ye.partition(n);return a.errors.length>0?np(a.errors):tp(a.values,s)},consolidateArr:n=>{const s=Ye.partition(n);return s.errors.length>0?np(s.errors):Ye.svalue(s.values)}},p2=(n,s,a,i)=>bt(s,a).fold(()=>mi(n,a,s),i),d0=(n,s,a,i)=>{const d=bt(n,s).getOrThunk(()=>a(n));return i(d)},M3=(n,s,a)=>a(bt(n,s)),B3=(n,s,a,i)=>{const d=bt(n,s).map(g=>g===!0?a(n):g);return i(d)},b2=(n,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>Ye.svalue(T.none()),S=>{const x=d.extract(s.concat([i]),S);return Ye.map(x,T.some)});switch(n.tag){case"required":return p2(s,a,i,g);case"defaultedThunk":return d0(a,i,n.process,g);case"option":return M3(a,i,h);case"defaultedOptionThunk":return B3(a,i,n.process,h);case"mergeWithThunk":return d0(a,i,ie({}),C=>{const S=uo(n.process(a),C);return g(S)})}},N3=(n,s,a)=>{const i={},d=[];for(const g of a)hi(g,(h,C,S,x)=>{const _=b2(S,n,s,h,x);Ye.fold(_,D=>{d.push(...D)},D=>{i[C]=D})},(h,C)=>{i[h]=C(s)});return d.length>0?Ye.serror(d):Ye.svalue(i)},sp=n=>({extract:(i,d)=>n().extract(i,d),toString:()=>n().toString()}),V5=n=>Gn(js(n,oo)),bc=n=>{const s=kt(n),a=cs(n,(d,g)=>hi(g,h=>uo(d,{[h]:!0}),ie(d)),{});return{extract:(d,g)=>{const h=xr(g)?[]:V5(g),C=co(h,S=>!hn(a,S));return C.length===0?s.extract(d,g):dm(d,C)},toString:s.toString}},kt=n=>({extract:(i,d)=>N3(i,d,n),toString:()=>`obj{
`+De(n,d=>hi(d,(g,h,C,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),Cs=n=>({extract:(i,d)=>{const g=De(d,(h,C)=>n.extract(i.concat(["["+C+"]"]),h));return op.consolidateArr(g)},toString:()=>"array("+n.toString()+")"}),Dg=(n,s)=>{const a=s!==void 0?s:an;return{extract:(g,h)=>{const C=[];for(const S of n){const x=S.extract(g,h);if(x.stype===hc.Value)return{stype:hc.Value,svalue:a(x.svalue)};C.push(x)}return op.consolidateArr(C)},toString:()=>"oneOf("+De(n,g=>g.toString()).join(", ")+")"}},aw=(n,s)=>{const a=(g,h)=>Cs(Wa(n)).extract(g,h);return{extract:(g,h)=>{const C=Gn(h),S=a(g,C);return Ye.bind(S,x=>{const _=De(x,D=>g2(D,D,gi(),s));return kt(_).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},gf=(n,s)=>{const a=Nc(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},Rg=Qc(Cs,kt),v2=(n,s,a,i)=>bt(a,i).fold(()=>O3(n,a,i),g=>g.extract(n.concat(["branch: "+i]),s)),hf=(n,s)=>({extract:(d,g)=>bt(g,n).fold(()=>u0(d,n),C=>v2(d,g,s,C)),toString:()=>"chooseOn("+n+"). Possible values: "+Gn(s)}),cw=()=>Cs(sw),bu=n=>Wa(s=>n(s).fold(Ye.serror,Ye.svalue)),iw=(n,s)=>aw(a=>Ye.fromResult(n(a)),s),y2=(n,s,a)=>{const i=s.extract([n],a);return Ye.mapError(i,d=>({input:a,errors:d}))},es=(n,s,a)=>Ye.toResult(y2(n,s,a)),pi=n=>n.fold(s=>{throw new Error(Mg(s))},an),xa=(n,s,a)=>pi(es(n,s,a)),Mg=n=>`Errors: 
`+A3(n.errors).join(`
`)+`

Input object: `+Za(n.input),Ea=(n,s)=>hf(n,is(s,kt)),pf=(n,s)=>gf(n,s),dr=g2,Ta=h2,m0=n=>bu(s=>ao(n,s)?Nt.value(s):Nt.error(`Unsupported value: "${s}", choose one of "${n.join(", ")}".`)),Be=n=>dr(n,n,gi(),fi()),ja=(n,s)=>dr(n,n,gi(),s),rp=n=>ja(n,f2),ms=n=>ja(n,nr),Hi=(n,s)=>dr(n,n,gi(),m0(s)),vc=n=>ja(n,ld),P3=(n,s)=>dr(n,n,Vo(),Wa(a=>Ye.serror("The field: "+n+" is forbidden. "+s))),vu=(n,s)=>dr(n,n,gi(),kt(s)),lw=(n,s)=>dr(n,n,gi(),Rg(s)),Ga=(n,s)=>dr(n,n,gi(),Cs(s)),to=n=>dr(n,n,Vo(),fi()),_l=(n,s)=>dr(n,n,Vo(),s),Bg=n=>_l(n,f2),fs=n=>_l(n,nr),C2=(n,s)=>_l(n,m0(s)),S2=n=>_l(n,rn),zi=n=>_l(n,ld),f0=(n,s)=>_l(n,Cs(s)),qa=(n,s)=>_l(n,kt(s)),$3=(n,s)=>_l(n,bc(s)),de=(n,s)=>dr(n,n,pc(s),fi()),Vc=(n,s,a)=>dr(n,n,pc(s),a),ap=(n,s)=>Vc(n,s,f2),ss=(n,s)=>Vc(n,s,nr),ka=(n,s,a)=>Vc(n,s,m0(a)),or=(n,s)=>Vc(n,s,rn),xo=(n,s)=>Vc(n,s,ld),uw=(n,s)=>Vc(n,s,os),mm=(n,s,a)=>Vc(n,s,Cs(a)),fm=(n,s,a)=>Vc(n,s,kt(a)),Ng=(n,s)=>{const a={};return Lo(n,(i,d)=>{ao(s,d)||(a[d]=i)}),a},cp=(n,s)=>({[n]:s}),w2=n=>{const s={};return et(n,a=>{s[a.key]=a.value}),s},x2=(n,s)=>Ng(n,s),gm=(n,s)=>cp(n,s),Pg=n=>w2(n),dw=(n,s)=>n.length===0?Nt.value(s):Nt.value(uo(s,Kd.apply(void 0,n))),E2=n=>Nt.error(Mt(n)),I3=(n,s)=>{const a=ml(n);return a.errors.length>0?E2(a.errors):dw(a.values,s)},Yr=ie,yc=Yr("touchstart"),ks=Yr("touchmove"),hm=Yr("touchend"),ip=Yr("touchcancel"),Ka=Yr("mousedown"),$g=Yr("mousemove"),Xs=Yr("mouseout"),g0=Yr("mouseup"),Uc=Yr("mouseover"),Vi=Yr("focusin"),T2=Yr("focusout"),mr=Yr("keydown"),Ig=Yr("keyup"),Al=Yr("input"),bf=Yr("change"),vf=Yr("click"),L3=Yr("transitioncancel"),h0=Yr("transitionend"),dd=Yr("transitionstart"),lp=Yr("selectstart"),Eo=n=>ie("alloy."+n),mw={tap:Eo("tap")},md=Eo("focus"),Lg=Eo("blur.post"),p0=Eo("paste.post"),fd=Eo("receive"),Nr=Eo("execute"),yf=Eo("focus.item"),Fg=mw.tap,b0=Eo("longpress"),v0=Eo("sandbox.close"),y0=Eo("typeahead.cancel"),up=Eo("system.init"),fw=Eo("system.touchmove"),k2=Eo("system.touchend"),_2=Eo("system.scroll"),Hg=Eo("system.resize"),Ol=Eo("system.attached"),bi=Eo("system.detached"),gd=Eo("system.dismissRequested"),gw=Eo("system.repositionRequested"),C0=Eo("focusmanager.shifted"),A2=Eo("slotcontainer.visibility"),hw=Eo("system.external.element.scroll"),O2=Eo("change.tab"),S0=Eo("dismiss.tab"),w0=Eo("highlight"),x0=Eo("dehighlight"),Dl=n=>Gr(n),dp="unknown";var zg;(function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"})(zg||(zg={}));const Cf=pt({}),pw=(n,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();ao(["mousemove","mouseover","mouseout",up()],n)||console.log(n,{event:n,time:d-i,target:s.dom,sequence:De(a,g=>ao(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Dl(g.target)+")":g.outcome)})}}},Vg=(n,s,a)=>{switch(bt(Cf.get(),n).orThunk(()=>{const d=Gn(Cf.get());return ca(d,g=>n.indexOf(g)>-1?T.some(Cf.get()[g]):T.none())}).getOr(zg.NORMAL)){case zg.NORMAL:return a(E0());case zg.LOGGING:{const d=pw(n,s),g=a(d);return d.write(),g}case zg.STOP:return!0}},_a=["alloy/data/Fields","alloy/debugging/Debugging"],F3=()=>{const n=new Error;if(n.stack!==void 0){const s=n.stack.split(`
`);return vt(s,a=>a.indexOf("alloy")>0&&!Qs(_a,i=>a.indexOf(i)>-1)).getOr(dp)}else return dp},D2={logEventCut:Y,logEventStopped:Y,logNoParent:Y,logEventNoHandlers:Y,logEventResponse:Y,write:Y},R2=(n,s,a)=>Vg(n,s,a),E0=ie(D2),bw=ie([Be("menu"),Be("selectedMenu")]),Sf=ie([Be("item"),Be("selectedItem")]);ie(kt(Sf().concat(bw())));const vw=ie(kt(Sf())),mp=vu("initSize",[Be("numColumns"),Be("numRows")]),M2=()=>ja("markers",vw()),yw=()=>vu("markers",[Be("backgroundMenu")].concat(bw()).concat(Sf())),_n=n=>vu("markers",De(n,Be)),T0=(n,s,a)=>(F3(),dr(s,s,a,bu(i=>Nt.value((...d)=>i.apply(void 0,d))))),Nn=n=>T0("onHandler",n,pc(Y)),Cc=n=>T0("onKeyboardHandler",n,pc(T.none)),pm=n=>T0("onHandler",n,gi()),fp=n=>T0("onKeyboardHandler",n,gi()),Kn=(n,s)=>Ta(n,ie(s)),Cw=n=>Ta(n,an),Sw=ie(mp),H3=(n,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:wf(h.slice(0,1).concat(h.slice(3)))}),n},wf=n=>De(n,s=>ni(s,"/*")?s.substring(0,s.length-2):s),gp=(n,s)=>{const a=n.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:wf(g)}),n},ww=(n,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:wf(g.slice(1))}),n},z3=(n,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{n.apply(null,g),a=null},s)}}},V3=5,xw=400,Ew=n=>{const s=n.raw;return s.touches===void 0||s.touches.length!==1?T.none():T.some(s.touches[0])},U3=(n,s)=>{const a=Math.abs(n.clientX-s.x),i=Math.abs(n.clientY-s.y);return a>V3||i>V3},Z3=n=>{const s=Wt(),a=pt(!1),i=z3(x=>{n.triggerEvent(b0(),x),a.set(!0)},xw),d=x=>(Ew(x).each(_=>{i.cancel();const D={x:_.clientX,y:_.clientY,target:x.target};i.schedule(x),a.set(!1),s.set(D)}),T.none()),g=x=>(i.cancel(),Ew(x).each(_=>{s.on(D=>{U3(_,D)&&s.clear()})}),T.none()),h=x=>{i.cancel();const _=D=>un(D.target,x.target);return s.get().filter(_).map(D=>a.get()?(x.prevent(),!1):n.triggerEvent(Fg(),x))},C=Pg([{key:yc(),value:d},{key:ks(),value:g},{key:hm(),value:h}]);return{fireIfReady:(x,_)=>bt(C,_).bind(D=>D(x))}};var xf;(function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"})(xf||(xf={}));const Sc="placeholder",sr=pa.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),bm=n=>$n(n,"uiType"),Ui=(n,s,a,i)=>n.exists(d=>d!==a.owner)?sr.single(!0,ie(a)):bt(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Gn(i)+`]
Namespace: `+n.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),yu=(n,s,a,i)=>bm(a)&&a.uiType===Sc?Ui(n,s,a,i):sr.single(!1,ie(a)),Ug=(n,s,a,i)=>yu(n,s,a,i).fold((g,h)=>{const C=bm(a)?h(s,a.config,a.validated):h(s),S=bt(C,"components").getOr([]),x=le(S,_=>Ug(n,s,_,i));return[{...C,components:x}]},(g,h)=>{if(bm(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(an)(C)}else return h(s)}),Zg=(n,s,a,i)=>le(a,d=>Ug(n,s,d,i)),k0=(n,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+n);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:ie(n),required:g,used:i,replace:d}},W3=(n,s,a,i)=>{const d=is(i,(h,C)=>k0(C,h)),g=Zg(n,s,a,d);return Lo(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+n.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},_0=sr.single,B2=sr.multiple,N2=ie(Sc),hp=pa.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),hd=de("factory",{sketch:an}),A0=de("schema",[]),pp=Be("name"),O0=dr("pname","pname",ep(n=>"<alloy."+st(n.name)+">"),fi()),Tw=Ta("schema",()=>[to("preprocess")]),Cu=de("defaults",ie({})),D0=de("overrides",ie({})),kw=kt([hd,A0,pp,O0,Cu,D0]),j3=kt([hd,A0,pp,Cu,D0]),G3=kt([hd,A0,pp,O0,Cu,D0]),_w=kt([hd,Tw,pp,Be("unit"),O0,Cu,D0]),P2=n=>n.fold(T.some,T.none,T.some,T.some),Su=n=>{const s=a=>a.name;return n.fold(s,s,s,s)},Aw=n=>n.fold(an,an,an,an),Zi=(n,s)=>a=>{const i=xa("Converting part type",s,a);return n(i)},fa=Zi(hp.required,kw),vi=Zi(hp.external,j3),Aa=Zi(hp.optional,G3),R0=Zi(hp.group,_w),Ef=ie("entirety");var M0=Object.freeze({__proto__:null,required:fa,external:vi,optional:Aa,group:R0,asNamedPart:P2,name:Su,asCommon:Aw,original:Ef});const $2=(n,s,a,i)=>uo(s.defaults(n,a,i),a,{uid:n.partUids[s.name]},s.overrides(n,a,i)),q3=(n,s,a)=>{const i={},d={};return et(a,g=>{g.fold(h=>{i[h.pname]=_0(!0,(C,S,x)=>h.factory.sketch($2(C,h,S,x)))},h=>{const C=s.parts[h.name];d[h.name]=ie(h.factory.sketch($2(s,h,C[Ef()]),C))},h=>{i[h.pname]=_0(!1,(C,S,x)=>h.factory.sketch($2(C,h,S,x)))},h=>{i[h.pname]=B2(!0,(C,S,x)=>{const _=C[h.name];return De(_,D=>h.factory.sketch(uo(h.defaults(C,D,x),D,h.overrides(C,D))))})})}),{internals:ie(i),externals:ie(d)}},vm=(n,s)=>{const a={};return et(s,i=>{P2(i).each(d=>{const g=ym(n,d.pname);a[d.name]=h=>{const C=xa("Part: "+d.name+" in "+n,kt(d.schema),h);return{...g,config:h,validated:C}}})}),a},ym=(n,s)=>({uiType:N2(),owner:n,name:s}),I2=(n,s,a)=>({uiType:N2(),owner:n,name:s,config:a,validated:{}}),rr=n=>le(n,s=>s.fold(T.none,T.some,T.none,T.none).map(a=>vu(a.name,a.schema.concat([Cw(Ef())]))).toArray()),bp=n=>De(n,Su),Ya=(n,s,a)=>q3(n,s,a),B0=(n,s,a)=>W3(T.some(n),s,s.components,a),vo=(n,s,a)=>{const i=s.partUids[a];return n.getSystem().getByUid(i).toOptional()},Rl=(n,s,a)=>vo(n,s,a).getOrDie("Could not find part: "+a),pd=(n,s,a)=>{const i={},d=s.partUids,g=n.getSystem();return et(a,h=>{i[h]=ie(g.getByUid(d[h]))}),i},Ml=(n,s)=>{const a=n.getSystem();return is(s.partUids,(i,d)=>ie(a.getByUid(i)))},Zc=n=>Gn(n.partUids),N0=(n,s,a)=>{const i={},d=s.partUids,g=n.getSystem();return et(a,h=>{i[h]=ie(g.getByUid(d[h]).getOrDie())}),i},Ow=(n,s)=>{const a=bp(s);return Pg(De(a,i=>({key:i,value:n+"-"+i})))},bd=n=>dr("partUids","partUids",ud(s=>Ow(s.uid,n)),fi());var Tf=Object.freeze({__proto__:null,generate:vm,generateOne:I2,schemas:rr,names:bp,substitutes:Ya,components:B0,defaultUids:Ow,defaultUidsSchema:bd,getAllParts:Ml,getAllPartNames:Zc,getPart:vo,getPartOrDie:Rl,getParts:pd,getPartsOrDie:N0});const L2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],wc=(n,s,a,i=1)=>{const d=n*i,g=s*i,h=S=>bt(a,S).getOr([]),C=(S,x,_)=>{const D=ge(L2,_);return{offset:fo(S,x),classesOn:le(_,h),classesOff:le(D,h)}};return{southeast:()=>C(-n,s,["top","alignLeft"]),southwest:()=>C(n,s,["top","alignRight"]),south:()=>C(-n/2,s,["top","alignCentre"]),northeast:()=>C(-n,-s,["bottom","alignLeft"]),northwest:()=>C(n,-s,["bottom","alignRight"]),north:()=>C(-n/2,-s,["bottom","alignCentre"]),east:()=>C(n,-s/2,["valignCentre","left"]),west:()=>C(-n,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},Cm=()=>wc(0,0,{}),Pr=(n,s,a,i,d,g,h,C=!1)=>({x:n,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),Wi=pa.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),P0=(n,s,a,i,d,g,h,C,S)=>n.fold(s,a,i,d,g,h,C,S),kf=(n,s,a,i)=>n.fold(s,s,i,i,s,i,a,a),Sm=(n,s,a,i)=>n.fold(s,i,s,i,a,a,s,i),vp=Wi.southeast,F2=Wi.southwest,$0=Wi.northeast,_f=Wi.northwest,wm=Wi.south,H2=Wi.north,yp=Wi.east,z2=Wi.west,Dw=(n,s)=>{switch(s){case 1:return n.x;case 0:return n.x+n.width;case 2:return n.y;case 3:return n.y+n.height}},ar=(n,s)=>nn(["left","right","top","bottom"],a=>bt(s,a).map(i=>Dw(n,i))),xm=(n,s,a)=>{const i=(S,x)=>s[S].map(_=>{const D=S==="top"||S==="bottom",P=D?a.top:a.left,z=(S==="left"||S==="top"?Math.max:Math.min)(_,x)+P;return D?Ns(z,n.y,n.bottom):Ns(z,n.x,n.right)}).getOr(x),d=i("left",n.x),g=i("top",n.y),h=i("right",n.right),C=i("bottom",n.bottom);return Ys(d,g,h-d,C-g)},Em="layout",Rw=n=>n.x,I0=(n,s)=>n.x+n.width/2-s.width/2,V2=(n,s)=>n.x+n.width-s.width,Cp=(n,s)=>n.y-s.height,L0=n=>n.y+n.height,Mw=(n,s)=>n.y+n.height/2-s.height/2,K3=n=>n.x+n.width,Sp=(n,s)=>n.x-s.width,Js=(n,s,a)=>Pr(Rw(n),L0(n),a.southeast(),vp(),"southeast",ar(n,{left:1,top:3}),Em),Ls=(n,s,a)=>Pr(V2(n,s),L0(n),a.southwest(),F2(),"southwest",ar(n,{right:0,top:3}),Em),$r=(n,s,a)=>Pr(Rw(n),Cp(n,s),a.northeast(),$0(),"northeast",ar(n,{left:1,bottom:2}),Em),vr=(n,s,a)=>Pr(V2(n,s),Cp(n,s),a.northwest(),_f(),"northwest",ar(n,{right:0,bottom:2}),Em),Wo=(n,s,a)=>Pr(I0(n,s),Cp(n,s),a.north(),H2(),"north",ar(n,{bottom:2}),Em),Fs=(n,s,a)=>Pr(I0(n,s),L0(n),a.south(),wm(),"south",ar(n,{top:3}),Em),Wg=(n,s,a)=>Pr(K3(n),Mw(n,s),a.east(),yp(),"east",ar(n,{left:0}),Em),U2=(n,s,a)=>Pr(Sp(n,s),Mw(n,s),a.west(),z2(),"west",ar(n,{right:1}),Em),Z2=()=>[Js,Ls,$r,vr,Fs,Wo,Wg,U2],Bw=()=>[Ls,Js,vr,$r,Fs,Wo,Wg,U2],F0=()=>[$r,vr,Js,Ls,Wo,Fs],W2=()=>[vr,$r,Ls,Js,Wo,Fs],j2=()=>[Js,Ls,$r,vr,Fs,Wo],H0=()=>[Ls,Js,vr,$r,Fs,Wo],G2="data-alloy-placement",jg=(n,s)=>{Pt(n,G2,s)},Nw=n=>Or(n,G2),wp=n=>Ho(n,G2),Bl="layout-inset",z0=n=>n.x,xp=(n,s)=>n.x+n.width/2-s.width/2,Gg=(n,s)=>n.x+n.width-s.width,Af=n=>n.y,Ep=(n,s)=>n.y+n.height-s.height,V0=(n,s)=>n.y+n.height/2-s.height/2,Tp=(n,s,a)=>Pr(Gg(n,s),Ep(n,s),a.insetSouthwest(),_f(),"southwest",ar(n,{right:0,bottom:3}),Bl),U0=(n,s,a)=>Pr(z0(n),Ep(n,s),a.insetSoutheast(),$0(),"southeast",ar(n,{left:1,bottom:3}),Bl),Of=(n,s,a)=>Pr(Gg(n,s),Af(n),a.insetNorthwest(),F2(),"northwest",ar(n,{right:0,top:2}),Bl),Oa=(n,s,a)=>Pr(z0(n),Af(n),a.insetNortheast(),vp(),"northeast",ar(n,{left:1,top:2}),Bl),Xr=(n,s,a)=>Pr(xp(n,s),Af(n),a.insetNorth(),wm(),"north",ar(n,{top:2}),Bl),qg=(n,s,a)=>Pr(xp(n,s),Ep(n,s),a.insetSouth(),H2(),"south",ar(n,{bottom:3}),Bl),Ce=(n,s,a)=>Pr(Gg(n,s),V0(n,s),a.insetEast(),z2(),"east",ar(n,{right:0}),Bl),kp=(n,s,a)=>Pr(z0(n),V0(n,s),a.insetWest(),yp(),"west",ar(n,{left:1}),Bl),Y3=n=>{switch(n){case"north":return Xr;case"northeast":return Oa;case"northwest":return Of;case"south":return qg;case"southeast":return U0;case"southwest":return Tp;case"east":return Ce;case"west":return kp}},Da=(n,s,a,i,d)=>Nw(i).map(Y3).getOr(Xr)(n,s,a,i,d),Kg=n=>{switch(n){case"north":return qg;case"northeast":return U0;case"northwest":return Tp;case"south":return Xr;case"southeast":return Oa;case"southwest":return Of;case"east":return kp;case"west":return Ce}},Nl=(n,s,a,i,d)=>Nw(i).map(Kg).getOr(Xr)(n,s,a,i,d),q2=(n,s)=>{Wh(n,Math.floor(s))},K2=ie((n,s)=>{q2(n,s),ds(n,{"overflow-x":"hidden","overflow-y":"auto"})}),Df=ie((n,s)=>{q2(n,s)}),_p=ie((n,s)=>{d3(n,Math.floor(s))});var vd;(function(n){n.TopToBottom="toptobottom",n.BottomToTop="bottomtotop"})(vd||(vd={}));const Z0="data-alloy-vertical-dir",X3=n=>e0(n,s=>mc(s)&&ir(s,"data-alloy-vertical-dir")===vd.BottomToTop);var Jr;(function(n){n[n.HighlightMenuAndItem=0]="HighlightMenuAndItem",n[n.HighlightJustMenu=1]="HighlightJustMenu",n[n.HighlightNone=2]="HighlightNone"})(Jr||(Jr={}));const Pl={init:()=>xc({readState:ie("No State required")})},xc=n=>n,J3={can:Dt,abort:Vn,run:Y},Yg=n=>{if(!hn(n,"can")&&!hn(n,"abort")&&!hn(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return{...J3,...n}},Pw=(n,s)=>(...a)=>So(n,(i,d)=>i&&s(d).apply(void 0,a),!0),W0=(n,s)=>(...a)=>So(n,(i,d)=>i||s(d).apply(void 0,a),!1),Q3=n=>Rt(n)?{can:Dt,abort:Vn,run:n}:n,$w=n=>{const s=Pw(n,d=>d.can),a=W0(n,d=>d.abort);return{can:s,abort:a,run:(...d)=>{et(n,g=>{g.run.apply(void 0,d)})}}},fn=(n,s)=>{G0(n,n.element,s,{})},xt=(n,s,a)=>{G0(n,n.element,s,a)},Xg=n=>{fn(n,Nr())},j0=(n,s,a)=>{G0(n,s,a,{})},G0=(n,s,a,i)=>{const d={target:s,...i};n.getSystem().triggerEvent(a,s,d)},ek=(n,s,a,i)=>{const d={...i,target:s};n.getSystem().triggerEvent(a,s,d)},Y2=(n,s,a,i)=>{n.getSystem().triggerEvent(a,s,i.event)},Uo=n=>Pg(n),q0=(n,s)=>({key:n,value:Yg({abort:s})}),K0=(n,s)=>({key:n,value:Yg({can:s})}),X2=n=>({key:n,value:Yg({run:(s,a)=>{a.event.prevent()}})}),Te=(n,s)=>({key:n,value:Yg({run:s})}),Jg=(n,s,a)=>({key:n,value:Yg({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),Rf=n=>s=>Te(n,s),wu=n=>s=>({key:n,value:Yg({run:(a,i)=>{u2(a,i)&&s(a,i)}})}),ji=(n,s)=>Te(n,(a,i)=>{a.getSystem().getByUid(s).each(d=>{Y2(d,d.element,n,i)})}),xu=(n,s,a)=>{const i=s.partUids[a];return ji(n,i)},Qg=(n,s)=>Te(n,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Li(d.target,C=>a.getSystem().getByDom(C).toOptional(),Vn).getOr(a));s(a,g,i)}),Mf=n=>Te(n,(s,a)=>{a.cut()}),tk=n=>Te(n,(s,a)=>{a.stop()}),eh=(n,s)=>wu(n)(s),Oo=wu(Ol()),Gi=wu(bi()),J2=wu(up()),Tm=Rf(Nr()),$l=n=>({classes:Zs(n.classes)?[]:n.classes,attributes:Zs(n.attributes)?{}:n.attributes,styles:Zs(n.styles)?{}:n.styles}),Qr=(n,s)=>({...n,attributes:{...n.attributes,...s.attributes},styles:{...n.styles,...s.styles},classes:n.classes.concat(s.classes)}),Iw=(n,s,a)=>Tm(i=>{a(i,n,s)}),Q2=(n,s,a)=>J2((i,d)=>{a(i,n,s)}),Lw=(n,s,a,i,d,g)=>{const h=bc(n),C=qa(s,[$3("config",n)]);return Fw(h,C,s,a,i,d,g)},nk=(n,s,a,i,d,g)=>{const h=n,C=qa(s,[_l("config",n)]);return Fw(h,C,s,a,i,d,g)},ok=(n,s,a)=>H3((d,...g)=>{const h=[d].concat(g);return d.config({name:ie(n)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+a)},C=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},a,s),ey=n=>({key:n,value:void 0}),Fw=(n,s,a,i,d,g,h)=>{const C=D=>hn(D,a)?D[a]():T.none(),S=is(d,(D,P)=>ok(a,D,P)),_={...is(g,(D,P)=>gp(D,P)),...S,revoke:gn(ey,a),config:D=>{const P=xa(a+"-config",n,D);return{key:a,value:{config:P,me:_,configAsRaw:Nc(()=>xa(a+"-config",n,D)),initialConfig:D,state:h}}},schema:ie(s),exhibit:(D,P)=>dc(C(D),bt(i,"exhibit"),(F,z)=>z(P,F.config,F.state)).getOrThunk(()=>$l({})),name:ie(a),handlers:D=>C(D).map(P=>bt(i,"events").getOr(()=>({}))(P.config,P.state)).getOr({})};return _},Ve=n=>Pg(n),ty=bc([Be("fields"),Be("name"),de("active",{}),de("apis",{}),de("state",Pl),de("extra",{})]),yr=n=>{const s=xa("Creating behaviour: "+n.name,ty,n);return Lw(s.fields,s.name,s.active,s.apis,s.extra,s.state)},ny=bc([Be("branchKey"),Be("branches"),Be("name"),de("active",{}),de("apis",{}),de("state",Pl),de("extra",{})]),oy=n=>{const s=xa("Creating behaviour: "+n.name,ny,n);return nk(Ea(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},sy=ie(void 0),sk=(n,s)=>{const a=Uo(s);return yr({fields:[Be("enabled")],name:n,active:{events:ie(a)}})},Ut=(n,s)=>{const a=sk(n,s);return{key:n,value:{config:{},me:a,configAsRaw:ie({}),initialConfig:{},state:Pl}}},Hw=n=>({init:()=>{const a=pt(n);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(n),readState:()=>a.get()}}}),zw=(n,s)=>{s.ignore||(br(n.element),s.onFocus(n))};var Vw=Object.freeze({__proto__:null,focus:zw,blur:(n,s)=>{s.ignore||vs(n.element)},isFocused:n=>Bi(n.element)}),Uw=Object.freeze({__proto__:null,exhibit:(n,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return $l(a)},events:n=>Uo([Te(md(),(s,a)=>{zw(s,n),a.stop()})].concat(n.stopMousedown?[Te(Ka(),(s,a)=>{a.event.prevent()})]:[]))}),ck=[Nn("onFocus"),de("stopMousedown",!1),de("ignore",!1)];const Zt=yr({fields:ck,name:"focusing",active:Uw,apis:Vw}),ry=[8],yd=[9],yi=[13],Y0=[27],Ra=[32],th=[37],Ap=[38],X0=[39],nh=[40],oh=ie("tooltipping.close.all"),Eu=ie("dismiss.popups"),Hs=ie("reposition.popups"),Cd=ie("mouse.released"),Zw=(n,s,a)=>{const i=_e(n.slice(0,s)),d=_e(n.slice(s+1));return vt(i.concat(d),a)},ay=(n,s,a)=>{const i=_e(n.slice(0,s));return vt(i,a)},Ww=(n,s,a)=>{const i=n.slice(0,s),d=n.slice(s+1);return vt(d.concat(i),a)},ik=(n,s,a)=>{const i=n.slice(s+1);return vt(i,a)},An=n=>s=>{const a=s.raw;return ao(n,a.which)},qi=n=>s=>Bs(n,a=>a(s)),km=n=>n.raw.shiftKey===!0,Z5=n=>n.raw.ctrlKey===!0,sh=ve(km),Rn=(n,s)=>({matches:n,classification:s}),lk=(n,s)=>vt(n,i=>i.matches(s)).map(i=>i.classification),uk=(n,s,a,i)=>{const d=Mr(n.element,"."+s.highlightClass);et(d,g=>{Qs(i,C=>un(C.element,g))||(ns(g,s.highlightClass),n.getSystem().getByDom(g).each(C=>{s.onDehighlight(n,C),fn(C,x0())}))})},W5=(n,s,a)=>uk(n,s,a,[]),j5=(n,s,a,i)=>{Rp(n,s,a,i)&&(ns(i.element,s.highlightClass),s.onDehighlight(n,i),fn(i,x0()))},Op=(n,s,a,i)=>{uk(n,s,a,[i]),Rp(n,s,a,i)||(bo(i.element,s.highlightClass),s.onHighlight(n,i),fn(i,w0()))},dk=(n,s,a)=>{J0(n,s).each(i=>{Op(n,s,a,i)})},mk=(n,s,a)=>{cy(n,s).each(i=>{Op(n,s,a,i)})},Dp=(n,s,a,i)=>{gk(n,s,a,i).fold(d=>{throw d},d=>{Op(n,s,a,d)})},fk=(n,s,a,i)=>{const d=qw(n,s);vt(d,i).each(h=>{Op(n,s,a,h)})},Rp=(n,s,a,i)=>$s(i.element,s.highlightClass),jw=(n,s,a)=>io(n.element,"."+s.highlightClass).bind(i=>n.getSystem().getByDom(i).toOptional()),gk=(n,s,a,i)=>{const d=Mr(n.element,"."+s.itemClass);return T.from(d[i]).fold(()=>Nt.error(new Error("No element found with index "+i)),n.getSystem().getByDom)},J0=(n,s,a)=>io(n.element,"."+s.itemClass).bind(i=>n.getSystem().getByDom(i).toOptional()),cy=(n,s,a)=>{const i=Mr(n.element,"."+s.itemClass);return(i.length>0?T.some(i[i.length-1]):T.none()).bind(g=>n.getSystem().getByDom(g).toOptional())},iy=(n,s,a,i)=>{const d=Mr(n.element,"."+s.itemClass);return jn(d,h=>$s(h,s.highlightClass)).bind(h=>{const C=Ai(h,i,0,d.length-1);return n.getSystem().getByDom(d[C]).toOptional()})},Gw=(n,s,a)=>iy(n,s,a,-1),hk=(n,s,a)=>iy(n,s,a,1),qw=(n,s,a)=>{const i=Mr(n.element,"."+s.itemClass);return Oi(De(i,d=>n.getSystem().getByDom(d).toOptional()))};var ly=Object.freeze({__proto__:null,dehighlightAll:W5,dehighlight:j5,highlight:Op,highlightFirst:dk,highlightLast:mk,highlightAt:Dp,highlightBy:fk,isHighlighted:Rp,getHighlighted:jw,getFirst:J0,getLast:cy,getPrevious:Gw,getNext:hk,getCandidates:qw}),Kw=[Be("highlightClass"),Be("itemClass"),Nn("onHighlight"),Nn("onDehighlight")];const zn=yr({fields:Kw,name:"highlighting",apis:ly}),Yw=(n,s,a)=>{s.exists(d=>a.exists(g=>un(g,d)))||xt(n,C0(),{prevFocus:s,newFocus:a})},uy=()=>{const n=a=>qs(a.element);return{get:n,set:(a,i)=>{const d=n(a);a.getSystem().triggerFocus(i,a.element);const g=n(a);Yw(a,d,g)}}},Q0=()=>{const n=a=>zn.getHighlighted(a).map(i=>i.element);return{get:n,set:(a,i)=>{const d=n(a);a.getSystem().getByDom(i).fold(Y,h=>{zn.highlight(a,h)});const g=n(a);Yw(a,d,g)}}},Sd=(n,s,a,i,d)=>{const g=()=>n.concat([de("focusManager",uy()),Vc("focusInside","onFocus",bu(x=>ao(["onFocus","onEnterOrSpace","onApi"],x)?Nt.value(x):Nt.error("Invalid value for focusInside"))),Kn("handler",S),Kn("state",s),Kn("sendFocusIn",d)]),h=(x,_,D,P,F)=>{const z=D(x,_,P,F);return lk(z,_.event).bind(G=>G(x,_,P,F))},S={schema:g,processKey:h,toEvents:(x,_)=>{const D=x.focusInside!==xf.OnFocusMode?T.none():d(x).map(z=>Te(md(),(G,J)=>{z(G,x,_),J.stop()})),P=(z,G)=>{const J=An(Ra.concat(yi))(G.event);x.focusInside===xf.OnEnterOrSpaceMode&&J&&u2(z,G)&&d(x).each(W=>{W(z,x,_),G.stop()})},F=[Te(mr(),(z,G)=>{h(z,G,a,x,_).fold(()=>{P(z,G)},J=>{G.stop()})}),Te(Ig(),(z,G)=>{h(z,G,i,x,_).each(J=>{G.stop()})})];return Uo(D.toArray().concat(F))}};return S},dy=n=>{const s=[to("onEscape"),to("onEnter"),de("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),de("firstTabstop",0),de("useTabstopAt",Dt),to("visibilitySelector")].concat([n]),a=(W,ee)=>{const re=W.visibilitySelector.bind(fe=>ma(ee,fe)).getOr(ee);return lr(re)>0},i=(W,ee)=>{const re=Mr(W.element,ee.selector),fe=co(re,be=>a(ee,be));return T.from(fe[ee.firstTabstop])},d=(W,ee)=>ee.focusManager.get(W).bind(re=>ma(re,ee.selector)),g=(W,ee)=>a(W,ee)&&W.useTabstopAt(ee),h=(W,ee,re)=>{i(W,ee).each(fe=>{ee.focusManager.set(W,fe)})},C=(W,ee,re,fe,be)=>be(ee,re,Ke=>g(fe,Ke)).fold(()=>fe.cyclic?T.some(!0):T.none(),Ke=>(fe.focusManager.set(W,Ke),T.some(!0))),S=(W,ee,re,fe)=>{const be=co(Mr(W.element,re.selector),Ke=>a(re,Ke));return d(W,re).bind(Ke=>jn(be,gn(un,Ke)).bind($e=>C(W,be,$e,re,fe)))},x=(W,ee,re)=>{const fe=re.cyclic?Zw:ay;return S(W,ee,re,fe)},_=(W,ee,re)=>{const fe=re.cyclic?Ww:ik;return S(W,ee,re,fe)},D=W=>Gv(W).bind(En).exists(ee=>un(ee,W)),P=(W,ee,re)=>d(W,re).filter(fe=>!re.useTabstopAt(fe)).bind(fe=>(D(fe)?x:_)(W,ee,re)),F=(W,ee,re)=>re.onEnter.bind(fe=>fe(W,ee)),z=(W,ee,re)=>(W.getSystem().broadcastOn([oh()],{closedTooltip:()=>{ee.stop()}}),ee.isStopped()?T.none():re.onEscape.bind(fe=>fe(W,ee))),G=ie([Rn(qi([km,An(yd)]),x),Rn(An(yd),_),Rn(qi([sh,An(yi)]),F)]),J=ie([Rn(An(Y0),z),Rn(An(yd),P)]);return Sd(s,Pl.init,G,J,()=>T.some(h))};var pk=dy(Ta("cyclic",Vn)),Xw=dy(Ta("cyclic",Dt));const rh=n=>ia("input")(n)&&ir(n,"type")!=="radio"||ia("textarea")(n),Jw=(n,s,a)=>(j0(n,a,Nr()),T.some(!0)),Mp=(n,s,a)=>rh(a)&&An(Ra)(s.event)?T.none():Jw(n,s,a),Bp=(n,s)=>T.some(!0),my=[de("execute",Mp),de("useSpace",!1),de("useEnter",!0),de("useControlEnter",!1),de("useDown",!1)],_m=(n,s,a)=>a.execute(n,s,n.element),Qw=(n,s,a,i)=>{const d=a.useSpace&&!rh(n.element)?Ra:[],g=a.useEnter?yi:[],h=a.useDown?nh:[],C=d.concat(g).concat(h);return[Rn(An(C),_m)].concat(a.useControlEnter?[Rn(qi([Z5,An(yi)]),_m)]:[])},ex=(n,s,a,i)=>a.useSpace&&!rh(n.element)?[Rn(An(Ra),Bp)]:[];var tx=Sd(my,Pl.init,Qw,ex,()=>T.none());const nx=()=>{const n=Wt();return xc({readState:()=>n.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{n.set({numRows:d,numColumns:g})},getNumRows:()=>n.get().map(d=>d.numRows),getNumColumns:()=>n.get().map(d=>d.numColumns)})};var ox=Object.freeze({__proto__:null,flatgrid:nx,init:n=>n.state(n)});const eb=n=>(s,a,i,d)=>{const g=n(s.element);return ob(g,s,a,i,d)},tb=(n,s)=>{const a=e2(n,s);return eb(a)},Np=(n,s)=>{const a=e2(s,n);return eb(a)},nb=n=>(s,a,i,d)=>ob(n,s,a,i,d),ob=(n,s,a,i,d)=>i.focusManager.get(s).bind(h=>n(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),lt=nb,Am=nb,Tu=nb,Pp=(n,s)=>jn(n,s).map(a=>({index:a,candidates:n})),sx=(n,s,a)=>{const i=h=>un(h,s),d=Mr(n,a),g=co(d,jh);return Pp(g,i)},fy=(n,s)=>jn(n,a=>un(s,a)),gy=(n,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<n.length?T.some(n[C]):T.none()})},rx=(n,s,a,i,d)=>gy(n,s,i,(g,h)=>{const S=g===a-1?n.length-g*i:i,x=Ai(h,d,0,S-1);return T.some({row:g,column:x})}),ax=(n,s,a,i,d)=>gy(n,s,i,(g,h)=>{const C=Ai(g,d,0,a-1),x=C===a-1?n.length-C*i:i,_=Ns(h,0,x-1);return T.some({row:C,column:_})}),cx=(n,s,a,i)=>rx(n,s,a,i,1),sb=(n,s,a,i)=>rx(n,s,a,i,-1),zs=(n,s,a,i)=>ax(n,s,a,i,-1),Ki=(n,s,a,i)=>ax(n,s,a,i,1),rb=[Be("selector"),de("execute",Mp),Cc("onEscape"),de("captureTab",!1),Sw()],ix=(n,s,a)=>{io(n.element,s.selector).each(i=>{s.focusManager.set(n,i)})},lx=(n,s)=>s.focusManager.get(n).bind(a=>ma(a,s.selector)),ux=(n,s,a,i)=>lx(n,a).bind(d=>a.execute(n,s,d)),ab=n=>(s,a,i,d)=>sx(s,a,i.selector).bind(g=>n(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),hy=(n,s,a)=>a.captureTab?T.some(!0):T.none(),dx=(n,s,a)=>a.onEscape(n,s),mx=ab(sb),$p=ab(cx),py=ab(zs),cb=ab(Ki),by=ie([Rn(An(th),tb(mx,$p)),Rn(An(X0),Np(mx,$p)),Rn(An(Ap),lt(py)),Rn(An(nh),Am(cb)),Rn(qi([km,An(yd)]),hy),Rn(qi([sh,An(yd)]),hy),Rn(An(Ra.concat(yi)),ux)]),bk=ie([Rn(An(Y0),dx),Rn(An(Ra),Bp)]);var fx=Sd(rb,nx,by,bk,()=>T.some(ix));const gx=(n,s,a,i,d)=>{const g=C=>Di(C)==="button"&&ir(C,"disabled")==="disabled",h=(C,S,x)=>d(C,S,i,0,x.length-1,x[S],_=>g(x[_])?h(C,_,x):T.from(x[_]));return sx(n,a,s).bind(C=>{const S=C.index,x=C.candidates;return h(S,S,x)})},ib=(n,s,a,i)=>gx(n,s,a,i,(d,g,h,C,S,x,_)=>{const D=Ns(g+h,C,S);return D===d?T.from(x):_(D)}),Bf=(n,s,a,i)=>gx(n,s,a,i,(d,g,h,C,S,x,_)=>{const D=Ai(g,h,C,S);return D===d?T.none():_(D)}),hx=[Be("selector"),de("getInitial",T.none),de("execute",Mp),Cc("onEscape"),de("executeOnMove",!1),de("allowVertical",!0),de("allowHorizontal",!0),de("cycles",!0)],px=(n,s)=>s.focusManager.get(n).bind(a=>ma(a,s.selector)),lb=(n,s,a)=>px(n,a).bind(i=>a.execute(n,s,i)),vk=(n,s,a)=>{s.getInitial(n).orThunk(()=>io(n.element,s.selector)).each(i=>{s.focusManager.set(n,i)})},yk=(n,s,a)=>(a.cycles?Bf:ib)(n,a.selector,s,-1),Nf=(n,s,a)=>(a.cycles?Bf:ib)(n,a.selector,s,1),vy=n=>(s,a,i,d)=>n(s,a,i,d).bind(()=>i.executeOnMove?lb(s,a,i):T.some(!0)),Ck=(n,s,a)=>a.onEscape(n,s),Sk=(n,s,a,i)=>{const d=[...a.allowHorizontal?th:[]].concat(a.allowVertical?Ap:[]),g=[...a.allowHorizontal?X0:[]].concat(a.allowVertical?nh:[]);return[Rn(An(d),vy(tb(yk,Nf))),Rn(An(g),vy(Np(yk,Nf))),Rn(An(yi),lb),Rn(An(Ra),lb)]},bx=ie([Rn(An(Ra),Bp),Rn(An(Y0),Ck)]);var wk=Sd(hx,Pl.init,Sk,bx,()=>T.some(vk));const yy=(n,s,a)=>T.from(n[s]).bind(i=>T.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),ub=(n,s,a,i)=>{const g=n[s].length,h=Ai(a,i,0,g-1);return yy(n,s,h)},Cy=(n,s,a,i)=>{const d=Ai(a,i,0,n.length-1),g=n[d].length,h=Ns(s,0,g-1);return yy(n,d,h)},ku=(n,s,a,i)=>{const g=n[s].length,h=Ns(a+i,0,g-1);return yy(n,s,h)},vx=(n,s,a,i)=>{const d=Ns(a+i,0,n.length-1),g=n[d].length,h=Ns(s,0,g-1);return yy(n,d,h)},db=(n,s,a)=>ub(n,s,a,1),xk=(n,s,a)=>ub(n,s,a,-1),Om=(n,s,a)=>Cy(n,a,s,-1),Ek=(n,s,a)=>Cy(n,a,s,1),Tk=(n,s,a)=>ku(n,s,a,-1),q5=(n,s,a)=>ku(n,s,a,1),K5=(n,s,a)=>vx(n,a,s,-1),ah=(n,s,a)=>vx(n,a,s,1),Ip=[vu("selectors",[Be("row"),Be("cell")]),de("cycles",!0),de("previousSelector",T.none),de("execute",Mp)],Sy=(n,s,a)=>{s.previousSelector(n).orThunk(()=>{const d=s.selectors;return io(n.element,d.cell)}).each(d=>{s.focusManager.set(n,d)})},kk=(n,s,a)=>qs(n.element).bind(i=>a.execute(n,s,i)),_k=(n,s)=>De(n,a=>Mr(a,s.selectors.cell)),mb=(n,s)=>(a,i,d)=>{const g=d.cycles?n:s;return ma(i,d.selectors.row).bind(h=>{const C=Mr(h,d.selectors.cell);return fy(C,i).bind(S=>{const x=Mr(a,d.selectors.row);return fy(x,h).bind(_=>{const D=_k(x,d);return g(D,_,S).map(P=>P.cell)})})})},yx=mb(xk,Tk),Cx=mb(db,q5),Lp=mb(Om,K5),fb=mb(Ek,ah),wy=ie([Rn(An(th),tb(yx,Cx)),Rn(An(X0),Np(yx,Cx)),Rn(An(Ap),lt(Lp)),Rn(An(nh),Am(fb)),Rn(An(Ra.concat(yi)),kk)]),Fp=ie([Rn(An(Ra),Bp)]);var xy=Sd(Ip,Pl.init,wy,Fp,()=>T.some(Sy));const Ak=[Be("selector"),de("execute",Mp),de("moveOnTab",!1)],Hp=(n,s,a)=>a.focusManager.get(n).bind(i=>a.execute(n,s,i)),Sx=(n,s,a)=>{io(n.element,s.selector).each(i=>{s.focusManager.set(n,i)})},gb=(n,s,a)=>Bf(n,a.selector,s,-1),hb=(n,s,a)=>Bf(n,a.selector,s,1),Pf=(n,s,a,i)=>a.moveOnTab?Tu(gb)(n,s,a,i):T.none(),Ok=(n,s,a,i)=>a.moveOnTab?Tu(hb)(n,s,a,i):T.none(),_u=ie([Rn(An(Ap),Tu(gb)),Rn(An(nh),Tu(hb)),Rn(qi([km,An(yd)]),Pf),Rn(qi([sh,An(yd)]),Ok),Rn(An(yi),Hp),Rn(An(Ra),Hp)]),Dk=ie([Rn(An(Ra),Bp)]);var wx=Sd(Ak,Pl.init,_u,Dk,()=>T.some(Sx));const Rk=[Cc("onSpace"),Cc("onEnter"),Cc("onShiftEnter"),Cc("onLeft"),Cc("onRight"),Cc("onTab"),Cc("onShiftTab"),Cc("onUp"),Cc("onDown"),Cc("onEscape"),de("stopSpaceKeyup",!1),to("focusIn")],Y5=(n,s,a)=>[Rn(An(Ra),a.onSpace),Rn(qi([sh,An(yi)]),a.onEnter),Rn(qi([km,An(yi)]),a.onShiftEnter),Rn(qi([km,An(yd)]),a.onShiftTab),Rn(qi([sh,An(yd)]),a.onTab),Rn(An(Ap),a.onUp),Rn(An(nh),a.onDown),Rn(An(th),a.onLeft),Rn(An(X0),a.onRight),Rn(An(Ra),a.onSpace)],pb=(n,s,a)=>[...a.stopSpaceKeyup?[Rn(An(Ra),Bp)]:[],Rn(An(Y0),a.onEscape)];var Mk=Sd(Rk,Pl.init,Y5,pb,n=>n.focusIn);const Bk=pk.schema(),Nk=Xw.schema(),Ey=wk.schema(),Pk=fx.schema(),xx=xy.schema(),Ty=tx.schema(),$k=wx.schema(),Ik=Mk.schema();var ky=Object.freeze({__proto__:null,acyclic:Bk,cyclic:Nk,flow:Ey,flatgrid:Pk,matrix:xx,execution:Ty,menu:$k,special:Ik});const Ex=n=>hn(n,"setGridSize"),wt=oy({branchKey:"mode",branches:ky,name:"keying",active:{events:(n,s)=>n.handler.toEvents(n,s)},apis:{focusIn:(n,s,a)=>{s.sendFocusIn(s).fold(()=>{n.getSystem().triggerFocus(n.element,n.element)},i=>{i(n,s,a)})},setGridSize:(n,s,a,i,d)=>{Ex(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:ox}),zp=st("alloy-premade"),Tx=n=>(Object.defineProperty(n.element.dom,zp,{value:n.uid,writable:!0}),gm(zp,n)),Lk=n=>$n(n.dom,zp),_y=n=>bt(n,zp),Vp=n=>ww((s,...a)=>n(s.getApis(),s,...a),n),bb=n=>n.getSystem().isConnected(),Up=n=>{fn(n,bi());const s=n.components();et(s,Up)},ch=n=>{const s=n.components();et(s,ch),fn(n,Ol())},Ay=(n,s)=>{n.getSystem().addToWorld(s),Hn(n.element)&&ch(s)},Oy=n=>{Up(n),n.getSystem().removeFromWorld(n)},kx=(n,s)=>{Ar(n.element,s.element)},Dy=n=>{et(n.components(),s=>Ni(s.element)),j1(n.element),n.syncComponents()},_x=(n,s,a)=>{const i=n.components();Dy(n);const d=a(s),g=ge(i,d);et(g,h=>{Up(h),n.getSystem().removeFromWorld(h)}),et(d,h=>{bb(h)?kx(n,h):(n.getSystem().addToWorld(h),kx(n,h),Hn(n.element)&&ch(h))}),n.syncComponents()},ih=(n,s,a)=>{const i=n.components(),d=le(s,C=>_y(C).toArray());et(i,C=>{ao(d,C)||Oy(C)});const g=a(s),h=ge(i,g);et(h,C=>{bb(C)&&Oy(C)}),et(g,C=>{bb(C)||Ay(n,C)}),n.syncComponents()},wd=(n,s)=>{lh(n,s,Ar)},lh=(n,s,a)=>{n.getSystem().addToWorld(s),a(n.element,s.element),Hn(n.element)&&ch(s),n.syncComponents()},xd=n=>{Up(n),Ni(n.element),n.getSystem().removeFromWorld(n)},Ed=n=>{const s=Ua(n.element).bind(a=>n.getSystem().getByDom(a).toOptional());xd(n),s.each(a=>{a.syncComponents()})},Ax=n=>{const s=n.components();et(s,xd),j1(n.element),n.syncComponents()},Zp=(n,s)=>{Ox(n,s,Ar)},Yi=(n,s)=>{Ox(n,s,LS)},Ox=(n,s,a)=>{a(n,s.element);const i=vl(s.element);et(i,d=>{s.getByDom(d).each(ch)})},Dx=n=>{const s=vl(n.element);et(s,a=>{n.getByDom(a).each(Up)}),Ni(n.element)},Ry=(n,s,a)=>om(n,s).map(d=>{if(a.exists(h=>!un(h,d))){const h=a.map(Di).getOr("span"),C=We.fromTag(h);return cf(d,C),C}else return d}),My=(n,s,a)=>{a.fold(()=>Ar(n,s),i=>{un(i,s)||(cf(i,s),Ni(i))})},Rx=(n,s,a)=>{const i=De(s,a),d=vl(n);return et(d.slice(i.length),Ni),i},Mx=(n,s,a,i)=>{const d=om(n,s),g=i(a,d),h=Ry(n,s,d);return My(n,g.element,h),g},Fk=(n,s,a)=>Rx(n,s,(i,d)=>Mx(n,d,i,a)),Bx=(n,s)=>Rx(n,s,(a,i)=>{const d=om(n,i);return My(n,a,d),a}),$f=(n,s)=>{const a=Gs(s),i=_r(a).bind(g=>{const h=C=>un(g,C);return h(s)?T.some(s):t2(s,h)}),d=n(s);return i.each(g=>{_r(a).filter(h=>un(h,g)).fold(()=>{br(g)},Y)}),d},By=(n,s)=>{$f(()=>{_x(n,s,()=>De(s,n.getSystem().build))},n.element)},Nx=(n,s)=>{$f(()=>{ih(n,s,()=>Fk(n.element,s,n.getSystem().buildOrPatch))},n.element)},Ny=(n,s,a,i)=>{Oy(s);const d=Mx(n.element,a,i,n.getSystem().buildOrPatch);Ay(n,d),n.syncComponents()},Py=(n,s,a)=>{const i=n.getSystem().build(a);lh(n,i,s)},$y=(n,s,a,i)=>{Ed(s),Py(n,(d,g)=>Xv(d,g,a),i)},Hk=(n,s,a,i)=>(s.reuseDom?Nx:By)(n,i),If=(n,s,a,i)=>{Py(n,Ar,i)},Lf=(n,s,a,i)=>{Py(n,Yv,i)},vb=(n,s,a,i)=>{const d=yb(n);vt(d,h=>un(i.element,h.element)).each(Ed)},yb=(n,s)=>n.components(),Px=(n,s,a,i,d)=>{const g=yb(n);return T.from(g[i]).map(h=>(d.fold(()=>Ed(h),C=>{(s.reuseDom?Ny:$y)(n,h,i,C)}),h))};var $x=Object.freeze({__proto__:null,append:If,prepend:Lf,remove:vb,replaceAt:Px,replaceBy:(n,s,a,i,d)=>{const g=yb(n);return jn(g,i).bind(h=>Px(n,s,a,h,d))},set:Hk,contents:yb});const Gt=yr({fields:[or("reuseDom",!0)],name:"replacing",apis:$x}),Cb=(n,s,a)=>un(s,n.element)&&!un(s,a),Wc=Uo([K0(md(),(n,s)=>{const a=s.event,i=a.originator,d=a.target;return Cb(n,i,d)?(console.warn(md()+` did not get interpreted by the desired target. 
Originator: `+Dl(i)+`
Target: `+Dl(d)+`
Check the `+md()+" event handlers"),!1):!0})]);var Wp=Object.freeze({__proto__:null,events:Wc});const Vk=ie("alloy-id-"),Sb=ie("data-alloy-id"),Uk=Vk(),Iy=Sb(),Ly=(n,s)=>{const a=st(Uk+n);return jp(s,a),a},jp=(n,s)=>{Object.defineProperty(n.dom,Iy,{value:s,writable:!0})},Il=n=>{const s=mc(n)?n.dom[Iy]:null;return T.from(s)},uh=n=>st(n),Zk=an,Ff=n=>{const s=d=>`The component must be in a context to execute: ${d}`+(n?`
`+Dl(n().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:ie("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Vn}},Gp=Ff(),wb=(n,s)=>{const a=De(s,d=>qa(d.name(),[Be("config"),de("state",Pl)])),i=es("component.behaviours",kt(a),n.behaviours).fold(d=>{throw new Error(Mg(d)+`
Complete spec:
`+JSON.stringify(n,null,2))},an);return{list:s,data:is(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return ie(g)})}},cr=n=>n.list,Wk=n=>n.data,Fy=(n,s)=>{const a={};return Lo(n,(i,d)=>{Lo(i,(g,h)=>{const C=bt(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},Dm=(n,s,a,i)=>{const d={...s};et(a,_=>{d[_.name()]=_.exhibit(n,i)});const g=Fy(d,(_,D)=>({name:_,modification:D})),h=_=>cs(_,(D,P)=>({...P.modification,...D}),{}),C=cs(g.classes,(_,D)=>D.modification.concat(_),[]),S=h(g.attributes),x=h(g.styles);return $l({classes:C,attributes:S,styles:x})},Au=(n,s,a,i)=>{try{const d=cn(a,(g,h)=>{const C=g[s],S=h[s],x=i.indexOf(C),_=i.indexOf(S);if(x===-1)throw new Error("The ordering for "+n+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(_===-1)throw new Error("The ordering for "+n+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return x<_?-1:_<x?1:0});return Nt.value(d)}catch(d){return Nt.error([d])}},Hy=(n,s)=>({handler:n,purpose:s}),Ix=(n,s)=>({cHandler:n,purpose:s}),jk=(n,s)=>Ix(gn.apply(void 0,[n.handler].concat(s)),n.purpose),xb=n=>n.cHandler,qp=(n,s)=>({name:n,handler:s}),Rm=(n,s)=>{const a={};return et(n,i=>{a[i.name()]=i.handlers(s)}),a},Eb=(n,s,a)=>{const i={...a,...Rm(s,n)};return Fy(i,qp)},Tb=(n,s,a,i)=>{const d=Eb(n,a,i);return kb(d,s)},Mm=n=>{const s=Q3(n);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Kp=(n,s)=>Nt.error(["The event ("+n+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(De(s,a=>a.name),null,2)]),zy=(n,s,a)=>{const i=s[a];return i?Au("Event: "+a,"name",n,i).map(d=>{const g=De(d,h=>h.handler);return $w(g)}):Kp(a,n)},kb=(n,s)=>{const a=Fo(n,(i,d)=>(i.length===1?Nt.value(i[0].handler):zy(i,s,d)).map(h=>{const C=Mm(h),S=i.length>1?co(s[d],x=>Qs(i,_=>_.name===x)).join(" > "):i[0].name;return gm(d,Hy(C,S))}));return I3(a,{})},Ll="alloy.base.behaviour",Lx=kt([dr("dom","dom",gi(),kt([Be("tag"),de("styles",{}),de("classes",[]),de("attributes",{}),to("value"),to("innerHtml")])),Be("components"),Be("uid"),de("events",{}),de("apis",{}),dr("eventOrder","eventOrder",Og({[Nr()]:["disabling",Ll,"toggling","typeaheadevents"],[md()]:[Ll,"focusing","keying"],[up()]:[Ll,"disabling","toggling","representing","tooltipping"],[Al()]:[Ll,"representing","streaming","invalidating"],[bi()]:[Ll,"representing","item-events","toolbar-button-events","tooltipping"],[Ka()]:["focusing",Ll,"item-type-events"],[yc()]:["focusing",Ll,"item-type-events"],[Uc()]:["item-type-events","tooltipping"],[fd()]:["receiving","reflecting","tooltipping"]}),fi()),to("domModification")]),Ou=n=>es("custom.definition",Lx,n),Vy=n=>({...n.dom,uid:n.uid,domChildren:De(n.components,s=>s.element)}),_b=n=>n.domModification.fold(()=>$l({}),$l),dh=n=>n.events,Yp=(n,s)=>{const a=Gn(n),i=Gn(s),d=ge(i,a),g=ps(n,(h,C)=>!$n(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},Ab=(n,s)=>{const{class:a,style:i,...d}=uf(s),{toSet:g,toRemove:h}=Yp(n.attributes,d),C=()=>{et(h,re=>Ho(s,re)),Jv(s,g)},S=Ks(s),{toSet:x,toRemove:_}=Yp(n.styles,S),D=()=>{et(_,re=>Cn(s,re)),ds(s,x)},P=s2(s),F=ge(P,n.classes),z=ge(n.classes,P),G=()=>{pu(s,z),qr(s,F)},J=re=>{xl(s,re)},W=()=>{const re=n.domChildren;Bx(s,re)},ee=()=>{const re=s,fe=n.value.getOrUndefined();fe!==Hc(re)&&cm(re,fe??"")};return C(),G(),D(),n.innerHtml.fold(W,J),ee(),s},Gk=n=>{const s=We.fromTag(n.tag);Jv(s,n.attributes),pu(s,n.classes),ds(s,n.styles),n.innerHtml.each(i=>xl(s,i));const a=n.domChildren;return FS(s,a),n.value.each(i=>{cm(s,i)}),s},Fx=(n,s)=>{try{const a=Ab(n,s);return T.some(a)}catch{return T.none()}},Ob=n=>n.innerHtml.isSome()&&n.domChildren.length>0,qk=(n,s)=>{const a=d=>Di(d)===n.tag&&!Ob(n)&&!Lk(d),i=s.filter(a).bind(d=>Fx(n,d)).getOrThunk(()=>Gk(n));return jp(i,n.uid),i},Uy=n=>{const s=bt(n,"behaviours").getOr({});return le(Gn(s),a=>{const i=s[a];return oo(i)?[i.me]:[]})},Fl=(n,s)=>wb(n,s),Zy=n=>{const s=Uy(n);return Fl(n,s)},Kk=(n,s,a)=>{const i=Vy(n),d=_b(n),g={"alloy.base.modification":d},h=s.length>0?Dm(a,g,s,i):d;return Qr(i,h)},Hx=(n,s,a)=>{const i={"alloy.base.behaviour":dh(n)};return Tb(a,n.eventOrder,s,i).getOrDie()},zx=(n,s)=>{const a=()=>re,i=pt(Gp),d=pi(Ou(n)),g=Zy(n),h=cr(g),C=Wk(g),S=Kk(d,h,C),x=qk(S,s),_=Hx(d,h,C),D=pt(d.components),P=fe=>{i.set(fe)},F=()=>{i.set(Ff(a))},z=()=>{const fe=vl(x),be=le(fe,Ke=>i.get().getByDom(Ke).fold(()=>[],yn));D.set(be)},G=fe=>{const be=C;return(Rt(be[fe.name()])?be[fe.name()]:()=>{throw new Error("Could not find "+fe.name()+" in "+JSON.stringify(n,null,2))})()},J=fe=>Rt(C[fe.name()]),W=()=>d.apis,ee=fe=>C[fe]().map(be=>be.state.readState()).getOr("not enabled"),re={uid:n.uid,getSystem:i.get,config:G,hasConfigured:J,spec:n,readState:ee,getApis:W,connect:P,disconnect:F,element:x,syncComponents:z,components:D.get,events:_};return re},Vx=(n,s)=>{const a=bt(n,"components").getOr([]);return s.fold(()=>De(a,m),i=>De(a,(d,g)=>l(d,om(i,g))))},Yk=(n,s)=>{const{events:a,...i}=Zk(n),d=Vx(i,s),g={...i,events:{...Wp,...a},components:d};return Nt.value(zx(g,s))},$o=n=>{const s=We.fromText(n);return jc({element:s})},jc=n=>{const s=xa("external.component",bc([Be("element"),to("uid")]),n),a=pt(Ff()),i=C=>{a.set(C)},d=()=>{a.set(Ff(()=>h))},g=s.uid.getOrThunk(()=>uh("external"));jp(s.element,g);const h={uid:g,getSystem:a.get,config:T.none,hasConfigured:Vn,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:n,readState:ie("No state"),syncComponents:Y,components:ie([]),events:{}};return Tx(h)},mh=uh,Ci=n=>$n(n,"uid"),l=(n,s)=>_y(n).getOrThunk(()=>{const a=Ci(n)?n:{uid:mh(""),...n};return Yk(a,s).getOrDie()}),m=n=>l(n,T.none()),p=Tx;var M=Object.freeze({__proto__:null,block:(n,s,a,i)=>{Pt(n.element,"aria-busy",!0);const d=s.getRoot(n).getOr(n),g=Ve([wt.config({mode:"special",onTab:()=>T.some(!0),onShiftTab:()=>T.some(!0)}),Zt.config({})]),h=i(d,g),C=d.getSystem().build(h);Gt.append(d,p(C)),C.hasConfigured(wt)&&s.focus&&wt.focusIn(C),a.isBlocked()||s.onBlock(n),a.blockWith(()=>Gt.remove(d,C))},unblock:(n,s,a)=>{Ho(n.element,"aria-busy"),a.isBlocked()&&s.onUnblock(n),a.clear()},isBlocked:(n,s,a)=>a.isBlocked()}),L=[xo("getRoot",T.none),or("focus",!0),Nn("onBlock"),Nn("onUnblock")],Q=Object.freeze({__proto__:null,init:()=>{const n=fg(),s=a=>{n.set({destroy:a})};return xc({readState:n.isSet,blockWith:s,clear:n.clear,isBlocked:n.isSet})}});const ce=yr({fields:L,name:"blocking",apis:M,state:Q});var at=Object.freeze({__proto__:null,getCurrent:(n,s,a)=>s.find(n)});const tt=[Be("find")],Le=yr({fields:tt,name:"composing",apis:at});var Bt=Object.freeze({__proto__:null,getCoupled:(n,s,a,i)=>a.getOrCreate(n,s,i),getExistingCoupled:(n,s,a,i)=>a.getExisting(n,s,i)}),Qt=[ja("others",iw(Nt.value,fi()))],Yn=Object.freeze({__proto__:null,init:()=>{const n={},s=(g,h)=>{if(Gn(g.others).length===0)throw new Error("Cannot find any known coupled components");return bt(n,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const x=bt(h.others,C).getOrDie("No information found for coupled component: "+C)(g),_=g.getSystem().build(x);return n[C]=_,_}),i=(g,h,C)=>s(h,C).orThunk(()=>(bt(h.others,C).getOrDie("No information found for coupled component: "+C),T.none())),d=ie({});return xc({readState:d,getExisting:i,getOrCreate:a})}});const qt=yr({fields:Qt,name:"coupling",apis:Bt,state:Yn}),no=["input","button","textarea","select"],Os=(n,s,a)=>{(s.disabled()?Ma:Cr)(n,s)},Gc=(n,s)=>s.useNative===!0&&ao(no,Di(n.element)),Hf=n=>Dr(n.element,"disabled"),Bm=n=>{Pt(n.element,"disabled","disabled")},zf=n=>{Ho(n.element,"disabled")},go=n=>ir(n.element,"aria-disabled")==="true",gs=n=>{Pt(n.element,"aria-disabled","true")},Xa=n=>{Pt(n.element,"aria-disabled","false")},Ma=(n,s,a)=>{s.disableClass.each(d=>{bo(n.element,d)}),(Gc(n,s)?Bm:gs)(n),s.onDisabled(n)},Cr=(n,s,a)=>{s.disableClass.each(d=>{ns(n.element,d)}),(Gc(n,s)?zf:Xa)(n),s.onEnabled(n)},Td=(n,s)=>Gc(n,s)?Hf(n):go(n);var Wy=Object.freeze({__proto__:null,enable:Cr,disable:Ma,isDisabled:Td,onLoad:Os,set:(n,s,a,i)=>{(i?Ma:Cr)(n,s)}}),ea=Object.freeze({__proto__:null,exhibit:(n,s)=>$l({classes:s.disabled()?s.disableClass.toArray():[]}),events:(n,s)=>Uo([q0(Nr(),(a,i)=>Td(a,n)),Q2(n,s,Os)])}),Ux=[xo("disabled",Vn),de("useNative",!0),to("disableClass"),Nn("onDisabled"),Nn("onEnabled")];const ft=yr({fields:Ux,name:"disabling",active:ea,apis:Wy}),Ja=(n,s,a,i,d)=>{const g=h=>h+"px";return{position:n,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},Xk=n=>({...n,position:T.some(n.position)}),Zx=(n,s)=>{Rr(n,Xk(s))},Rb=(n,s)=>{const a=n.element;bo(a,s.transitionClass),ns(a,s.fadeOutClass),bo(a,s.fadeInClass),s.onShow(n)},jy=(n,s)=>{const a=n.element;bo(a,s.transitionClass),ns(a,s.fadeInClass),bo(a,s.fadeOutClass),s.onHide(n)},Vf=(n,s)=>n.y<s.bottom&&n.bottom>s.y,Wx=(n,s)=>n.y>=s.y,Gy=(n,s)=>n.bottom<=s.bottom,qy=(n,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-n.y}),jx=(n,s,a)=>({location:"bottom",leftX:s,bottomY:n.bottom-a.bounds.bottom}),Ky=n=>n.box.x-n.win.x,QL=(n,s,a)=>{const i=s.win,d=s.box,g=Ky(s);return ca(n,h=>{switch(h){case"bottom":return Gy(d,a.bounds)?T.none():T.some(jx(i,g,a));case"top":return Wx(d,a.bounds)?T.none():T.some(qy(i,g,a));default:return T.none()}}).getOr({location:"no-dock"})},eF=(n,s,a)=>Bs(n,i=>{switch(i){case"bottom":return Gy(s,a.bounds);case"top":return Wx(s,a.bounds)}}),tF=(n,s)=>{const a=s.optScrollEnv.fold(ie(n.bounds.y),i=>i.scrollElmTop+(n.bounds.y-i.currentScrollTop));return fo(n.bounds.x,a)},Yy=(n,s)=>{const a=s.optScrollEnv.fold(ie(n.y),i=>n.y+i.currentScrollTop-i.scrollElmTop);return fo(n.x,a)},Xy=(n,s,a)=>a.getInitialPos().map(i=>{const d=tF(i,s);return{box:Ys(d.left,d.top,da(n),lr(n)),location:i.location}}),X5=(n,s,a,i,d)=>{const g=Yy(s,a),h=Ys(g.left,g.top,s.width,s.height);i.setInitialPos({style:Ks(n),position:zo(n,"position")||"static",bounds:h,location:d.location})},J5=(n,s,a,i,d)=>{i.getInitialPos().fold(()=>X5(n,s,a,i,d),()=>Y)},Q5=(n,s,a)=>a.getInitialPos().bind(i=>{switch(a.clearInitialPos(),i.position){case"static":return T.some({morph:"static"});case"absolute":const d=um(n).getOr(Fc()),g=Is(d),h=d.dom.scrollTop??0;return T.some({morph:"absolute",positionCss:Ja("absolute",bt(i.style,"left").map(C=>s.x-g.x),bt(i.style,"top").map(C=>s.y-g.y+h),bt(i.style,"right").map(C=>g.right-s.right),bt(i.style,"bottom").map(C=>g.bottom-s.bottom))});default:return T.none()}}),eM=(n,s,a)=>Xy(n,s,a).filter(({box:i})=>eF(a.getModes(),i,s)).bind(({box:i})=>Q5(n,i,a)),Jy=n=>{switch(n.location){case"top":return T.some({morph:"fixed",positionCss:Ja("fixed",T.some(n.leftX),T.some(n.topY),T.none(),T.none())});case"bottom":return T.some({morph:"fixed",positionCss:Ja("fixed",T.some(n.leftX),T.none(),T.none(),T.some(n.bottomY))});default:return T.none()}},Mb=(n,s,a)=>{const i=Is(n),d=Kr(),g=QL(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(X5(n,i,s,a,g),Jy(g)):T.none()},Jk=(n,s,a)=>eM(n,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Xy(n,s,a)).bind(({box:i,location:d})=>{const g=Kr(),h=Ky({win:g,box:i}),C=d==="top"?qy(g,h,s):jx(g,h,s);return Jy(C)})),nF=(n,s,a)=>{const i=n.element;return uc(Qo(i,"position"),"fixed")?Jk(i,s,a):Mb(i,s,a)},oF=(n,s,a)=>{const i=n.element;return Xy(i,s,a).bind(({box:d})=>Q5(i,d,a))},tM=(n,s,a,i)=>{const d=Is(n),g=Kr(),h=Ky({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?(J5(n,d,s,a,C),Jy(C)):T.none()},Uf=(n,s,a)=>{a.setDocked(!1),et(["left","right","top","bottom","position"],i=>Cn(n.element,i)),s.onUndocked(n)},Qy=(n,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Zx(n.element,i),(d?s.onDocked:s.onUndocked)(n)},Gx=(n,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(n).each(h=>{const C=Vf(h,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(pu(n.element,[g.fadeOutClass]),g.onHide(n)):(C?Rb:jy)(n,g))})})},eC=(n,s,a,i,d)=>{Gx(n,s,a,i,!0),Qy(n,s,a,d.positionCss)},nM=(n,s,a,i,d)=>{switch(d.morph){case"static":return Uf(n,s,a);case"absolute":return Qy(n,s,a,d.positionCss);case"fixed":return eC(n,s,a,i,d)}},qx=(n,s,a)=>{const i=s.lazyViewport(n);Gx(n,s,a,i),nF(n,i,a).each(d=>{nM(n,s,a,i,d)})},Qk=(n,s,a)=>{const i=n.element;a.setDocked(!1);const d=s.lazyViewport(n);oF(n,d,a).each(g=>{switch(g.morph){case"static":{Uf(n,s,a);break}case"absolute":{Qy(n,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{qr(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(n)}),Kx(n,s,a)},Kx=(n,s,a)=>{n.getSystem().isConnected()&&qx(n,s,a)},oM=(n,s,a)=>{a.isDocked()&&Qk(n,s,a)},_d=n=>(s,a,i)=>{const d=a.lazyViewport(s);tM(s.element,d,i,n).each(h=>{eC(s,a,i,d,h)})},sF=_d(qy),rF=_d(jx);var e_=Object.freeze({__proto__:null,refresh:Kx,reset:oM,isDocked:(n,s,a)=>a.isDocked(),getModes:(n,s,a)=>a.getModes(),setModes:(n,s,a,i)=>a.setModes(i),forceDockToTop:sF,forceDockToBottom:rF}),sM=Object.freeze({__proto__:null,events:(n,s)=>Uo([eh(h0(),(a,i)=>{n.contextual.each(d=>{$s(a.element,d.transitionClass)&&(qr(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Te(_2(),(a,i)=>{Kx(a,n,s)}),Te(hw(),(a,i)=>{Kx(a,n,s)}),Te(Hg(),(a,i)=>{oM(a,n,s)})])}),t_=[qa("contextual",[ms("fadeInClass"),ms("fadeOutClass"),ms("transitionClass"),vc("lazyContext"),Nn("onShow"),Nn("onShown"),Nn("onHide"),Nn("onHidden")]),xo("lazyViewport",()=>({bounds:Kr(),optScrollEnv:T.none()})),mm("modes",["top","bottom"],nr),Nn("onDocked"),Nn("onUndocked")],rM=Object.freeze({__proto__:null,init:n=>{const s=pt(!1),a=pt(!0),i=Wt(),d=pt(n.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return xc({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const jo=yr({fields:t_,name:"docking",active:sM,apis:e_,state:rM}),n_=pa.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Yx=n=>s=>s.translate(-n.left,-n.top),nC=n=>s=>s.translate(n.left,n.top),Nm=n=>(s,a)=>So(n,(i,d)=>d(i),fo(s,a)),Xx=(n,s,a)=>n.fold(Nm([nC(a),Yx(s)]),Nm([Yx(s)]),Nm([])),Bb=(n,s,a)=>n.fold(Nm([nC(a)]),Nm([]),Nm([nC(s)])),o_=(n,s,a)=>n.fold(Nm([]),Nm([Yx(a)]),Nm([nC(s),Yx(a)])),aM=(n,s,a,i,d,g)=>{const h=Bb(n,d,g),C=Bb(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=i},cM=(n,s,a,i,d,g)=>{const h=Bb(n,d,g),C=Bb(s,d,g),S=Math.abs(h.left-C.left),x=Math.abs(h.top-C.top);return fo(S,x)},s_=(n,s,a)=>{const i=n.fold((d,g)=>({position:T.some("absolute"),left:T.some(d+"px"),top:T.some(g+"px")}),(d,g)=>({position:T.some("absolute"),left:T.some(d-a.left+"px"),top:T.some(g-a.top+"px")}),(d,g)=>({position:T.some("fixed"),left:T.some(d+"px"),top:T.some(g+"px")}));return{right:T.none(),bottom:T.none(),...i}},Jx=(n,s,a)=>n.fold((i,d)=>Pm(i+s,d+a),(i,d)=>Ru(i+s,d+a),(i,d)=>Xp(i+s,d+a)),Qx=(n,s,a,i)=>{const d=(g,h)=>(C,S)=>{const x=g(s,a,i);return h(C.getOr(x.left),S.getOr(x.top))};return n.fold(d(o_,Pm),d(Bb,Ru),d(Xx,Xp))},Pm=n_.offset,Ru=n_.absolute,Xp=n_.fixed,iM=(n,s)=>{const a=ir(n,s);return Zs(a)?NaN:parseInt(a,10)},aF=(n,s)=>{const a=n.element,i=iM(a,s.leftAttr),d=iM(a,s.topAttr);return isNaN(i)||isNaN(d)?T.none():T.some(fo(i,d))},cF=(n,s,a)=>{const i=n.element;Pt(i,s.leftAttr,a.left+"px"),Pt(i,s.topAttr,a.top+"px")},lM=(n,s)=>{const a=n.element;Ho(a,s.leftAttr),Ho(a,s.topAttr)},iF=(n,s,a,i)=>aF(n,s).fold(()=>a,d=>Xp(d.left+i.left,d.top+i.top)),uM=(n,s,a,i,d,g)=>{const h=iF(n,s,a,i),C=s.mustSnap?mM(n,s,h,d,g):Nb(n,s,h,d,g),S=Xx(h,d,g);return cF(n,s,S),C.fold(()=>({coord:Xp(S.left,S.top),extra:T.none()}),x=>({coord:x.output,extra:x.extra}))},lF=(n,s)=>{lM(n,s)},dM=(n,s,a,i)=>ca(n,d=>{const g=d.sensor;return aM(s,g,d.range.left,d.range.top,a,i)?T.some({output:Qx(d.output,s,a,i),extra:d.extra}):T.none()}),mM=(n,s,a,i,d)=>{const g=s.getSnapPoints(n);return dM(g,a,i,d).orThunk(()=>So(g,(S,x)=>{const _=x.sensor,D=cM(a,_,x.range.left,x.range.top,i,d);return S.deltas.fold(()=>({deltas:T.some(D),snap:T.some(x)}),P=>{const F=(D.left+D.top)/2,z=(P.left+P.top)/2;return F<=z?{deltas:T.some(D),snap:T.some(x)}:S})},{deltas:T.none(),snap:T.none()}).snap.map(S=>({output:Qx(S.output,a,i,d),extra:S.extra})))},Nb=(n,s,a,i,d)=>{const g=s.getSnapPoints(n);return dM(g,a,i,d)},fM=(n,s,a)=>({coord:Qx(n.output,n.output,s,a),extra:n.extra});var dF=Object.freeze({__proto__:null,snapTo:(n,s,a,i)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=fc(n.element),h=Ts(g),C=a0(d),S=fM(i,h,C),x=s_(S.coord,h,C);Rr(d,x)}}});const Ir=(n,s)=>fm(n,{},De(s,a=>P3(a.name(),"Cannot configure "+a.name()+" for "+n)).concat([Ta("dump",an)])),oC=n=>n.dump,ha=(n,s)=>({...Ve(s),...n.dump}),Mu={field:Ir,augment:ha,get:oC},mF=(n,s)=>(n.length>0?[vu("parts",n)]:[]).concat([Be("uid"),de("dom",{}),de("components",[]),Cw("originalSpec"),de("debug.sketcher",{})]).concat(s),gM=(n,s,a,i,d)=>{const g=mF(i,d);return xa(n+" [SpecSchema]",bc(g.concat(s)),a)},fF=(n,s,a,i)=>{const d=tE(i),g=gM(n,s,d,[],[]);return a(g,d)},r_=(n,s,a,i,d)=>{const g=tE(d),h=rr(a),C=bd(a),S=gM(n,s,g,h,[C]),x=Ya(n,S,a),_=B0(n,S,x.internals());return i(S,_,g,x.externals())},eE=n=>$n(n,"uid"),tE=n=>eE(n)?n:{...n,uid:uh("uid")},gF=n=>n.uid!==void 0,vY=bc([Be("name"),Be("factory"),Be("configFields"),de("apis",{}),de("extraApis",{})]),hM=bc([Be("name"),Be("factory"),Be("configFields"),Be("partFields"),de("apis",{}),de("extraApis",{})]),Xi=n=>{const s=xa("Sketcher for "+n.name,vY,n),a=g=>fF(s.name,s.configFields,s.factory,g),i=is(s.apis,Vp),d=is(s.extraApis,(g,h)=>gp(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},Ec=n=>{const s=xa("Sketcher for "+n.name,hM,n),a=h=>r_(s.name,s.configFields,s.partFields,s.factory,h),i=vm(s.name,s.partFields),d=is(s.apis,Vp),g=is(s.extraApis,(h,C)=>gp(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Ad=Xi({name:"Container",factory:n=>{const{attributes:s,...a}=n.dom;return{uid:n.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:n.components,behaviours:oC(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[de("components",[]),Ir("containerBehaviours",[]),de("events",{}),de("domModification",{}),de("eventOrder",{})]}),a_="data-initial-z-index",hF=n=>{Ua(n.element).filter(mc).each(s=>{Or(s,a_).fold(()=>Cn(s,"z-index"),a=>Ht(s,"z-index",a)),Ho(s,a_)})},pF=n=>{Ua(n.element).filter(mc).each(s=>{Qo(s,"z-index").each(a=>{Pt(s,a_,a)}),Ht(s,"z-index",zo(n.element,"z-index"))})},pM=(n,s)=>{n.getSystem().addToGui(s),pF(s)},Pb=n=>{hF(n),n.getSystem().removeFromGui(n)},nE=(n,s,a)=>n.getSystem().build(Ad.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var bF=qa("snaps",[Be("getSnapPoints"),Nn("onSensor"),Be("leftAttr"),Be("topAttr"),de("lazyViewport",Kr),de("mustSnap",!1)]);const sC=[de("useFixed",Vn),Be("blockerClass"),de("getTarget",an),de("onDrag",Y),de("repositionTarget",!0),de("onDrop",Y),xo("getBounds",Kr),bF],oE=n=>Tr(Qo(n,"left"),Qo(n,"top"),Qo(n,"position"),(s,a,i)=>(i==="fixed"?Xp:Pm)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=gc(n);return Ru(s.left,s.top)}),c_=(n,s,a,i,d)=>{const g=d.bounds,h=Bb(s,a,i),C=Ns(h.left,g.x,g.x+g.width-d.width),S=Ns(h.top,g.y,g.y+g.height-d.height),x=Ru(C,S);return s.fold(()=>{const _=o_(x,a,i);return Pm(_.left,_.top)},ie(x),()=>{const _=Xx(x,a,i);return Xp(_.left,_.top)})},vF=(n,s,a,i,d,g,h)=>{const C=s.fold(()=>{const S=Jx(a,g.left,g.top),x=Xx(S,i,d);return Xp(x.left,x.top)},S=>{const x=uM(n,S,a,g,i,d);return x.extra.each(_=>{S.onSensor(n,_)}),x.coord});return c_(n,C,i,d,h)},yF=(n,s,a,i)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=fc(n.element),h=Ts(g),C=a0(d),S=oE(d),x=vF(n,s.snaps,S,h,C,i,a),_=s_(x,h,C);Rr(d,_)}s.onDrag(n,d,i)},bM=(n,s)=>({bounds:n.getBounds(),height:ua(s.element),width:sd(s.element)}),i_=(n,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>bM(s,n));g.each(C=>{yF(n,s,h,C)})},vM=(n,s,a,i)=>{s.each(Pb),a.snaps.each(g=>{lF(n,g)});const d=a.getTarget(n.element);i.reset(),a.onDrop(n,d)},l_=n=>(s,a)=>{const i=d=>{a.setStartData(bM(s,d))};return Uo([Te(_2(),d=>{a.getStartData().each(()=>i(d))}),...n(s,a,i)])},CF=n=>Uo([Te(Ka(),n.forceDrop),Te(g0(),n.drop),Te($g(),(s,a)=>{n.move(a.event)}),Te(Xs(),n.delayDrop)]);var wF=Object.freeze({__proto__:null,getData:n=>T.from(fo(n.x,n.y)),getDelta:(n,s)=>fo(s.left-n.left,s.top-n.top)});const yM=(n,s,a)=>[Te(Ka(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>vM(i,T.some(x),n,s),C=z3(h,200),S={drop:h,delayDrop:C.schedule,forceDrop:h,move:D=>{C.cancel(),i_(i,n,s,wF,D)}},x=nE(i,n.blockerClass,CF(S));(()=>{a(i),pM(i,x)})()})],xF=[...sC,Kn("dragger",{handlers:l_(yM)})],EF=n=>Uo([Te(yc(),n.forceDrop),Te(hm(),n.drop),Te(ip(),n.drop),Te(ks(),(s,a)=>{n.move(a.event)})]),$b=n=>{const s=n[0];return T.some(fo(s.clientX,s.clientY))};var sE=Object.freeze({__proto__:null,getData:n=>{const a=n.raw.touches;return a.length===1?$b(a):T.none()},getDelta:(n,s)=>fo(s.left-n.left,s.top-n.top)});const SM=(n,s,a)=>{const i=Wt(),d=g=>{vM(g,i.get(),n,s),i.clear()};return[Te(yc(),(g,h)=>{h.stop();const C=()=>d(g),S={drop:C,delayDrop:Y,forceDrop:C,move:D=>{i_(g,n,s,sE,D)}},x=nE(g,n.blockerClass,EF(S));i.set(x),(()=>{a(g),pM(g,x)})()}),Te(ks(),(g,h)=>{h.stop(),i_(g,n,s,sE,h.event)}),Te(hm(),(g,h)=>{h.stop(),d(g)}),Te(ip(),d)]},ct=[...sC,Kn("dragger",{handlers:l_(SM)})],Jp=(n,s,a)=>[...yM(n,s,a),...SM(n,s,a)],TF=[...sC,Kn("dragger",{handlers:l_(Jp)})];var _F=Object.freeze({__proto__:null,mouse:xF,touch:ct,mouseOrTouch:TF}),xM=Object.freeze({__proto__:null,init:()=>{let n=T.none(),s=T.none();const a=()=>{n=T.none(),s=T.none()},i=(S,x)=>{const _=n.map(D=>S.getDelta(D,x));return n=T.some(x),_},d=(S,x)=>S.getData(x).bind(_=>i(S,_)),g=S=>{s=T.some(S)},h=()=>s,C=ie({});return xc({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const Zf=oy({branchKey:"mode",branches:_F,name:"dragging",active:{events:(n,s)=>n.dragger.handlers(n,s)},extra:{snap:n=>({sensor:n.sensor,range:n.range,output:n.output,extra:T.from(n.extra)})},state:xM,apis:dF}),OF=["input","textarea"],m_=n=>{const s=Di(n);return ao(OF,s)},EM=(n,s)=>{const a=s.getRoot(n).getOr(n.element);ns(a,s.invalidClass),s.notify.each(i=>{m_(n.element)&&Pt(n.element,"aria-invalid",!1),i.getContainer(n).each(d=>{xl(d,i.validHtml)}),i.onValid(n)})},TM=(n,s,a,i)=>{const d=s.getRoot(n).getOr(n.element);bo(d,s.invalidClass),s.notify.each(g=>{m_(n.element)&&Pt(n.element,"aria-invalid",!0),g.getContainer(n).each(h=>{xl(h,i)}),g.onInvalid(n,i)})},f_=(n,s,a)=>s.validator.fold(()=>Xo.pure(Nt.value(!0)),i=>i.validate(n)),g_=(n,s,a)=>(s.notify.each(i=>{i.onValidate(n)}),f_(n,s).map(i=>n.getSystem().isConnected()?i.fold(d=>(TM(n,s,a,d),Nt.error(d)),d=>(EM(n,s),Nt.value(d))):Nt.error("No longer in system")));var h_=Object.freeze({__proto__:null,markValid:EM,markInvalid:TM,query:f_,run:g_,isInvalid:(n,s)=>{const a=s.getRoot(n).getOr(n.element);return $s(a,s.invalidClass)}}),rE=Object.freeze({__proto__:null,events:(n,s)=>n.validator.map(a=>Uo([Te(a.onEvent,i=>{g_(i,n,s).get(an)})].concat(a.validateOnLoad?[Oo(i=>{g_(i,n,s).get(Y)})]:[]))).getOr({})}),aE=[Be("invalidClass"),de("getRoot",T.none),qa("notify",[de("aria","alert"),de("getContainer",T.none),de("validHtml",""),Nn("onValid"),Nn("onInvalid"),Nn("onValidate")]),qa("validator",[Be("validate"),de("onEvent","input"),de("validateOnLoad",!0)])];const Ib=(n,s,a)=>{s.store.manager.onLoad(n,s,a)},Od=(n,s,a)=>{s.store.manager.onUnload(n,s,a)};var wY=Object.freeze({__proto__:null,onLoad:Ib,onUnload:Od,setValue:(n,s,a,i)=>{s.store.manager.setValue(n,s,a,i)},getValue:(n,s,a)=>s.store.manager.getValue(n,s,a),getState:(n,s,a)=>a}),MF=Object.freeze({__proto__:null,events:(n,s)=>{const a=n.resetOnDom?[Oo((i,d)=>{Ib(i,n,s)}),Gi((i,d)=>{Od(i,n,s)})]:[Q2(n,s,Ib)];return Uo(a)}});const cE=()=>{const n=pt(null),s=()=>({mode:"memory",value:n.get()}),a=()=>n.get()===null,i=()=>{n.set(null)};return xc({set:n.set,get:n.get,isNotSet:a,clear:i,readState:s})},BF=()=>xc({readState:Y}),kM=()=>{const n=pt({}),s=pt({});return xc({readState:()=>({mode:"dataset",dataByValue:n.get(),dataByText:s.get()}),lookup:h=>bt(n.get(),h).orThunk(()=>bt(s.get(),h)),update:h=>{const C=n.get(),S=s.get(),x={},_={};et(h,D=>{x[D.value]=D,bt(D,"meta").each(P=>{bt(P,"text").each(F=>{_[F]=D})})}),n.set({...C,...x}),s.set({...S,..._})},clear:()=>{n.set({}),s.set({})}})};var _M=Object.freeze({__proto__:null,memory:cE,dataset:kM,manual:BF,init:n=>n.store.manager.state(n)});const AM=(n,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(n,i),s.onSetValue(n,i)},NF=(n,s,a)=>{const i=s.store,d=i.getDataKey(n);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},OM=(n,s,a)=>{s.store.initialValue.each(d=>{AM(n,s,a,d)})},DM=(n,s,a)=>{a.clear()};var PF=[to("initialValue"),Be("getFallbackEntry"),Be("getDataKey"),Be("setValue"),Kn("manager",{setValue:AM,getValue:NF,onLoad:OM,onUnload:DM,state:kM})];const RM=(n,s,a)=>s.store.getValue(n),$F=(n,s,a,i)=>{s.store.setValue(n,i),s.onSetValue(n,i)},p_=(n,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(n,i)})};var MM=[Be("getValue"),de("setValue",Y),to("initialValue"),Kn("manager",{setValue:$F,getValue:RM,onLoad:p_,onUnload:Y,state:Pl.init})];const BM=(n,s,a,i)=>{a.set(i),s.onSetValue(n,i)},NM=(n,s,a)=>a.get(),IF=(n,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},LF=(n,s,a)=>{a.clear()};var FF=[to("initialValue"),Kn("manager",{setValue:BM,getValue:NM,onLoad:IF,onUnload:LF,state:cE})],HF=[Vc("store",{mode:"memory"},Ea("mode",{memory:FF,manual:MM,dataset:PF})),Nn("onSetValue"),de("resetOnDom",!1)];const it=yr({fields:HF,name:"representing",active:MF,apis:wY,extra:{setValueFrom:(n,s)=>{const a=it.getValue(s);it.setValue(n,a)}},state:_M}),Ji=yr({fields:aE,name:"invalidating",active:rE,apis:h_,extra:{validation:n=>s=>{const a=it.getValue(s);return Xo.pure(n(a))}}});var PM=Object.freeze({__proto__:null,exhibit:(n,s)=>$l({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const iE=pa.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),b_=(n,s,a,i,d,g)=>{const h=s.rect,C=h.x-a,S=h.y-i,x=h.width,_=h.height,D=d-(C+x),P=g-(S+_),F=T.some(C),z=T.some(S),G=T.some(D),J=T.some(P),W=T.none();return P0(s.direction,()=>Ja(n,F,z,W,W),()=>Ja(n,W,z,G,W),()=>Ja(n,F,W,W,J),()=>Ja(n,W,W,G,J),()=>Ja(n,F,z,W,W),()=>Ja(n,F,W,W,J),()=>Ja(n,F,z,W,W),()=>Ja(n,W,z,G,W))},v_=(n,s)=>n.fold(()=>{const a=s.rect;return Ja("absolute",T.some(a.x),T.some(a.y),T.none(),T.none())},(a,i,d,g)=>b_("absolute",s,a,i,d,g),(a,i,d,g)=>b_("fixed",s,a,i,d,g)),y_=(n,s)=>{const a=gn(Qh,s),i=n.fold(a,a,()=>{const h=Ts();return Qh(s).translate(-h.left,-h.top)}),d=sd(s),g=ua(s);return Ys(i.left,i.top,d,g)},VF=(n,s)=>s.fold(()=>n.fold(Kr,Kr,Ys),a=>n.fold(ie(a),ie(a),()=>{const i=$M(n,a.x,a.y);return Ys(i.left,i.top,a.width,a.height)})),$M=(n,s,a)=>{const i=fo(s,a),d=()=>{const g=Ts();return i.translate(-g.left,-g.top)};return n.fold(ie(i),ie(i),d)},C_=(n,s,a,i)=>n.fold(s,a,i);iE.none;const UF=iE.relative,lE=iE.fixed,ZF=(n,s)=>({anchorBox:n,origin:s}),IM=(n,s)=>ZF(n,s),Lr=pa.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),WF=(n,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,right:S,bottom:x,width:_,height:D}=n,P=h>=a&&h<=d,F=C>=i&&C<=g,z=P&&F,G=S<=d&&S>=a,J=x<=g&&x>=i,W=G&&J,ee=Math.min(_,h>=a?d-h:S-a),re=Math.min(D,C>=i?g-C:x-i);return{originInBounds:z,sizeInBounds:W,visibleW:ee,visibleH:re}},LM=(n,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,width:S,height:x}=n,_=Math.max(a,d-S),D=Math.max(i,g-x),P=Ns(h,a,_),F=Ns(C,i,D),z=Math.min(P+S,d)-P,G=Math.min(F+x,g)-F;return Ys(P,F,z,G)},FM=(n,s,a)=>{const i=ie(s.bottom-a.y),d=ie(a.bottom-s.y),g=kf(n,d,d,i),h=ie(s.right-a.x),C=ie(a.right-s.x);return{maxWidth:Sm(n,C,C,h),maxHeight:g}},jF=(n,s,a,i)=>{const d=n.bubble,g=d.offset,h=xm(i,n.restriction,g),C=n.x+g.left,S=n.y+g.top,x=Ys(C,S,s,a),{originInBounds:_,sizeInBounds:D,visibleW:P,visibleH:F}=WF(x,h),z=_&&D,G=z?x:LM(x,h),J=G.width>0&&G.height>0,{maxWidth:W,maxHeight:ee}=FM(n.direction,G,i),re={rect:G,maxHeight:ee,maxWidth:W,direction:n.direction,placement:n.placement,classes:{on:d.classesOn,off:d.classesOff},layout:n.label,testY:S};return z||n.alwaysFit?Lr.fit(re):Lr.nofit(re,P,F,J)},HM=(n,s,a,i,d,g)=>{const h=i.width,C=i.height,S=(_,D,P,F,z)=>{const G=_(a,i,d,n,g),J=jF(G,h,C,g);return J.fold(ie(J),(W,ee,re,fe)=>(z===fe?re>F||ee>P:!z&&fe)?J:Lr.nofit(D,P,F,z))};return So(s,(_,D)=>{const P=gn(S,D);return _.fold(ie(_),P)},Lr.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:vp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(an,an)},S_=["top","bottom","right","left"],uE="data-alloy-transition-timer",GF=(n,s)=>Q1(n,s.classes),qF=(n,s,a)=>a.exists(i=>{const d=n.mode;return d==="all"?!0:i[d]!==s[d]}),KF=(n,s)=>{const a=i=>parseFloat(i).toFixed(3);return cc(s,(i,d)=>{const g=n[d].map(a),h=i.map(a);return!_s(g,h)}).isSome()},zM=n=>{const s=g=>{const C=zo(n,g).split(/\s*,\s*/);return co(C,su)},a=g=>{if(Et(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return ni(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return So(d,(g,h,C)=>{const S=a(i[C])+a(h);return Math.max(g,S)},0)},YF=(n,s)=>{const a=xs(),i=xs();let d;const g=x=>{const _=x.raw.pseudoElement??"";return un(x.target,n)&&ya(_)&&ao(S_,x.raw.propertyName)},h=x=>{if(rc(x)||g(x)){a.clear(),i.clear();const _=x==null?void 0:x.raw.type;(rc(_)||_===h0())&&(clearTimeout(d),Ho(n,uE),qr(n,s.classes))}},C=eo(n,dd(),x=>{g(x)&&(C.unbind(),a.set(eo(n,h0(),h)),i.set(eo(n,L3(),h)))}),S=zM(n);window.requestAnimationFrame(()=>{d=setTimeout(h,S+17),Pt(n,uE,d)})},XF=(n,s)=>{pu(n,s.classes),Or(n,uE).each(a=>{clearTimeout(parseInt(a,10)),Ho(n,uE)}),YF(n,s)},VM=(n,s,a,i,d,g)=>{const h=qF(i,d,g);if(h||GF(n,i)){Ht(n,"position",a.position);const C=y_(s,n),S=v_(s,{...d,rect:C}),x=nn(S_,_=>S[_]);KF(a,x)&&(Rr(n,x),h&&XF(n,i),$i(n))}else qr(n,i.classes)},UM=n=>({width:Math.ceil(sd(n)),height:ua(n)}),ZM=(n,s,a,i)=>{Cn(s,"max-height"),Cn(s,"max-width");const d=UM(s);return HM(s,i.preference,n,d,a,i.bounds)},JF=(n,s)=>{const a=s.classes;qr(n,a.off),pu(n,a.on)},QF=(n,s,a)=>{const i=a.maxHeightFunction;i(n,s.maxHeight)},eH=(n,s,a)=>{const i=a.maxWidthFunction;i(n,s.maxWidth)},tH=(n,s,a)=>{const i=v_(a.origin,s);a.transition.each(d=>{VM(n,a.origin,i,d,s,a.lastPlacement)}),Zx(n,i)},WM=(n,s)=>{jg(n,s.placement)},w_=(n,s,a)=>n[s]===void 0?a:n[s],fh=(n,s,a,i,d,g,h,C)=>{const S=w_(h,"maxHeightFunction",K2()),x=w_(h,"maxWidthFunction",Y),_=n.anchorBox,D=n.origin,P={bounds:VF(D,g),origin:D,preference:i,maxHeightFunction:S,maxWidthFunction:x,lastPlacement:d,transition:C};return jM(_,s,a,P)},jM=(n,s,a,i)=>{const d=ZM(n,s,a,i);return tH(s,d,i),WM(s,d),JF(s,d),QF(s,d,i),eH(s,d,i),{layout:d.layout,placement:d.placement}},rC=an,gh=()=>qa("layouts",[Be("onLtr"),Be("onRtl"),to("onBottomLtr"),to("onBottomRtl")]),dE=(n,s,a,i,d,g,h)=>{const C=h.map(X3).getOr(!1),S=s.layouts.map(F=>F.onLtr(n)),x=s.layouts.map(F=>F.onRtl(n)),_=C?s.layouts.bind(F=>F.onBottomLtr.map(z=>z(n))).or(S).getOr(d):S.getOr(a),D=C?s.layouts.bind(F=>F.onBottomRtl.map(z=>z(n))).or(x).getOr(g):x.getOr(i);return e2(_,D)(n)},Lb=(n,s,a)=>{const i=s.hotspot,d=y_(a,i.element),g=dE(n.element,s,j2(),H0(),F0(),W2(),T.some(s.hotspot.element));return T.some(rC({anchorBox:d,bubble:s.bubble.getOr(Cm()),overrides:s.overrides,layouts:g}))};var nH=[Be("hotspot"),to("bubble"),de("overrides",{}),gh(),Kn("placement",Lb)];const oH=(n,s,a)=>{const i=$M(a,s.x,s.y),d=Ys(i.left,i.top,s.width,s.height),g=dE(n.element,s,Z2(),Bw(),Z2(),Bw(),T.none());return T.some(rC({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var GM=[Be("x"),Be("y"),de("height",0),de("width",0),de("bubble",Cm()),de("overrides",{}),gh(),Kn("placement",oH)];const qM=pa.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),sH=n=>n.fold(an,(s,a,i)=>s.translate(-a,-i)),rH=n=>n.fold(an,an),x_=n=>So(n,(s,a)=>s.translate(a.left,a.top),fo(0,0)),E_=n=>{const s=De(n,sH);return x_(s)},mE=n=>{const s=De(n,rH);return x_(s)},aH=qM.screen,hh=qM.absolute,KM=(n,s,a)=>{const i=Uh(a.root).dom,d=g=>{const h=fc(g),C=fc(n.element);return un(h,C)};return T.from(i.frameElement).map(We.fromDom).filter(d).map(gc)},T_=(n,s,a)=>{const i=fc(n.element),d=Ts(i),g=KM(n,s,a).getOr(d);return hh(g,d.left,d.top)},k_=(n,s,a,i)=>{const d=aH(fo(n,s));return T.some(im(d,a,i))},YM=(n,s,a,i,d)=>n.map(g=>{const h=[s,g.point],C=C_(i,()=>mE(h),()=>mE(h),()=>E_(h)),S=_3(C.left,C.top,g.width,g.height),x=a.showAbove?F0():j2(),_=a.showAbove?W2():H0(),D=dE(d,a,x,_,x,_,T.none());return rC({anchorBox:S,bubble:a.bubble.getOr(Cm()),overrides:a.overrides,layouts:D})}),aC=(n,s,a)=>{const i=T_(n,a,s);return s.node.filter(Hn).bind(d=>{const g=d.dom.getBoundingClientRect(),h=k_(g.left,g.top,g.width,g.height),C=s.node.getOr(n.element);return YM(h,i,s,a,C)})};var cC=[Be("node"),Be("root"),to("bubble"),gh(),de("overrides",{}),de("showAbove",!1),Kn("placement",aC)];const iC=(n,s)=>({element:n,offset:s}),__=(n,s)=>{const a=vl(n);if(a.length===0)return iC(n,s);if(s<a.length)return iC(a[s],0);{const i=a[a.length-1],d=nm(i)?J1(i).length:vl(i).length;return iC(i,d)}},Wf=(n,s)=>nm(n)?iC(n,s):__(n,s),$m=n=>n.foffset!==void 0,XM=(n,s)=>s.getSelection.getOrThunk(()=>()=>C3(n))().map(i=>{if($m(i)){const d=Wf(i.start,i.soffset),g=Wf(i.finish,i.foffset);return Eg.range(d.element,d.offset,g.element,g.offset)}else return i}),cH=(n,s,a)=>{const i=Uh(s.root).dom,d=T_(n,a,s),g=XM(i,s).bind(S=>{if($m(S))return i2(i,Eg.exactFromRange(S)).orThunk(()=>{const _=We.fromText(gg);cf(S.start,_);const D=c2(i,Eg.exact(_,0,_,1));return Ni(_),D}).bind(_=>k_(_.left,_.top,_.width,_.height));{const x=is(S,D=>D.dom.getBoundingClientRect()),_={left:Math.min(x.firstCell.left,x.lastCell.left),right:Math.max(x.firstCell.right,x.lastCell.right),top:Math.min(x.firstCell.top,x.lastCell.top),bottom:Math.max(x.firstCell.bottom,x.lastCell.bottom)};return k_(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),C=XM(i,s).bind(S=>$m(S)?mc(S.start)?T.some(S.start):lu(S.start):T.some(S.firstCell)).getOr(n.element);return YM(g,d,s,a,C)};var JM=[to("getSelection"),Be("root"),to("bubble"),gh(),de("overrides",{}),de("showAbove",!1),Kn("placement",cH)];const Nu="link-layout",fE=n=>n.x+n.width,QM=(n,s)=>n.x-s.width,A_=(n,s)=>n.y-s.height+n.height,O_=n=>n.y,D_=(n,s,a)=>Pr(fE(n),O_(n),a.southeast(),vp(),"southeast",ar(n,{left:0,top:2}),Nu),gE=(n,s,a)=>Pr(QM(n,s),O_(n),a.southwest(),F2(),"southwest",ar(n,{right:1,top:2}),Nu),R_=(n,s,a)=>Pr(fE(n),A_(n,s),a.northeast(),$0(),"northeast",ar(n,{left:0,bottom:3}),Nu),e6=(n,s,a)=>Pr(QM(n,s),A_(n,s),a.northwest(),_f(),"northwest",ar(n,{right:1,bottom:3}),Nu),t6=()=>[D_,gE,R_,e6],n6=()=>[gE,D_,e6,R_],hE=(n,s,a)=>{const i=y_(a,s.item.element),d=dE(n.element,s,t6(),n6(),t6(),n6(),T.none());return T.some(rC({anchorBox:i,bubble:Cm(),overrides:s.overrides,layouts:d}))};var M_=[Be("item"),gh(),de("overrides",{}),Kn("placement",hE)],pE=Ea("type",{selection:JM,node:cC,hotspot:nH,submenu:M_,makeshift:GM});const o6=[Ga("classes",nr),ka("mode","all",["all","layout","placement"])],iH=[de("useFixed",Vn),to("getBounds")],s6=[ja("anchor",pE),qa("transition",o6)],r6=()=>{const n=document.documentElement;return lE(0,0,n.clientWidth,n.clientHeight)},a6=n=>{const s=gc(n.element),a=n.element.dom.getBoundingClientRect();return UF(s.left,s.top,a.width,a.height)},c6=(n,s,a,i,d,g)=>{const h=IM(s.anchorBox,n);return fh(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},lH=(n,s,a,i,d)=>{const g=T.none();bE(n,s,a,i,d,g)},bE=(n,s,a,i,d,g)=>{const h=xa("placement.info",kt(s6),d),C=h.anchor,S=i.element,x=a.get(i.uid);$f(()=>{Ht(S,"position","fixed");const _=Qo(S,"visibility");Ht(S,"visibility","hidden");const D=s.useFixed()?r6():a6(n);C.placement(n,C,D).each(P=>{const F=g.orThunk(()=>s.getBounds.map(pr)),z=c6(D,P,F,i,x,h.transition);a.set(i.uid,z)}),_.fold(()=>{Cn(S,"visibility")},P=>{Ht(S,"visibility",P)}),Qo(S,"left").isNone()&&Qo(S,"top").isNone()&&Qo(S,"right").isNone()&&Qo(S,"bottom").isNone()&&uc(Qo(S,"position"),"fixed")&&Cn(S,"position")},S)};var uH=Object.freeze({__proto__:null,position:lH,positionWithinBounds:bE,getMode:(n,s,a)=>s.useFixed()?"fixed":"absolute",reset:(n,s,a,i)=>{const d=i.element;et(["position","left","right","top","bottom"],g=>Cn(d,g)),wp(d),a.clear(i.uid)}}),i6=Object.freeze({__proto__:null,init:()=>{let n={};return xc({readState:()=>n,clear:d=>{oo(d)?delete n[d]:n={}},set:(d,g)=>{n[d]=g},get:d=>bt(n,d)})}});const Ba=yr({fields:iH,name:"positioning",active:PM,apis:uH,state:i6}),dH=(n,s)=>s.universal?n:co(n,a=>ao(s.channels,a));var lC=Object.freeze({__proto__:null,events:n=>Uo([Te(fd(),(s,a)=>{const i=n.channels,d=Gn(i),g=a,h=dH(d,g);et(h,C=>{const S=i[C],x=S.schema,_=xa("channel["+C+`] data
Receiver: `+Dl(s.element),x,g.data);S.onReceive(s,_)})})])}),fH=[ja("channels",iw(Nt.value,bc([pm("onReceive"),de("schema",fi())])))];const Na=yr({fields:fH,name:"receiving",active:lC});var u6=Object.freeze({__proto__:null,events:(n,s)=>{const a=(i,d)=>{n.updateState.each(g=>{const h=g(i,d);s.set(h)}),n.renderComponents.each(g=>{const h=g(d,s.get());(n.reuseDom?Nx:By)(i,h)})};return Uo([Te(fd(),(i,d)=>{const g=d;if(!g.universal){const h=n.channel;ao(g.channels,h)&&a(i,g.data)}}),Oo((i,d)=>{n.initialData.each(g=>{a(i,g)})})])}}),hH=Object.freeze({__proto__:null,getState:(n,s,a)=>a}),pH=[Be("channel"),to("renderComponents"),to("updateState"),to("initialData"),or("reuseDom",!0)],vH=Object.freeze({__proto__:null,init:()=>{const n=pt(T.none()),s=()=>n.set(T.none());return{readState:()=>n.get().getOr("none"),get:n.get,set:n.set,clear:s}}});const qc=yr({fields:pH,name:"reflecting",active:u6,apis:hH,state:vH}),d6=(n,s,a,i)=>{a.get().each(h=>{Ax(n)});const d=s.getAttachPoint(n);wd(d,n);const g=n.getSystem().build(i);return wd(n,g),a.set(g),g},m6=(n,s,a,i)=>{const d=d6(n,s,a,i);return s.onOpen(n,d),d},f6=(n,s,a,i)=>a.get().map(()=>d6(n,s,a,i)),vE=(n,s,a,i,d)=>{B_(n,s),m6(n,s,a,i),d(),h6(n,s)},yE=(n,s,a)=>{a.get().each(i=>{Ax(n),Ed(n),s.onClose(n,i),a.clear()})},CE=(n,s,a)=>a.isOpen(),yH=(n,s,a,i)=>CE(n,s,a)&&a.get().exists(d=>s.isPartOf(n,d,i)),CH=(n,s,a)=>a.get(),SH=(n,s,a,i)=>{Qo(n.element,s).fold(()=>{Ho(n.element,a)},d=>{Pt(n.element,a,d)}),Ht(n.element,s,i)},wH=(n,s,a)=>{Or(n.element,a).fold(()=>Cn(n.element,s),i=>Ht(n.element,s,i))},B_=(n,s,a)=>{const i=s.getAttachPoint(n);Ht(n.element,"position",Ba.getMode(i)),SH(n,"visibility",s.cloakVisibilityAttr,"hidden")},g6=n=>Qs(["top","left","right","bottom"],s=>Qo(n,s).isSome()),h6=(n,s,a)=>{g6(n.element)||Cn(n.element,"position"),wH(n,"visibility",s.cloakVisibilityAttr)};var xH=Object.freeze({__proto__:null,cloak:B_,decloak:h6,open:m6,openWhileCloaked:vE,close:yE,isOpen:CE,isPartOf:yH,getState:CH,setContent:f6}),EH=Object.freeze({__proto__:null,events:(n,s)=>Uo([Te(v0(),(a,i)=>{yE(a,n,s)})])}),TH=[Nn("onOpen"),Nn("onClose"),Be("isPartOf"),Be("getAttachPoint"),de("cloakVisibilityAttr","data-precloak-visibility")],p6=Object.freeze({__proto__:null,init:()=>{const n=Wt(),s=ie("not-implemented");return xc({readState:s,isOpen:n.isSet,clear:n.clear,set:n.set,get:n.get})}});const In=yr({fields:TH,name:"sandboxing",active:EH,apis:xH,state:p6}),uC=(n,s)=>s.getAnimationRoot.fold(()=>n.element,a=>a(n)),jf=n=>n.dimension.property,Qp=(n,s)=>n.dimension.getDimension(s),SE=(n,s)=>{const a=uC(n,s);qr(a,[s.shrinkingClass,s.growingClass])},Im=(n,s)=>{ns(n.element,s.openClass),bo(n.element,s.closedClass),Ht(n.element,jf(s),"0px"),$i(n.element)},N_=(n,s)=>{ns(n.element,s.closedClass),bo(n.element,s.openClass),Cn(n.element,jf(s))},b6=(n,s,a,i)=>{a.setCollapsed(),Ht(n.element,jf(s),Qp(s,n.element)),SE(n,s),Im(n,s),s.onStartShrink(n),s.onShrunk(n)},e1=(n,s,a,i)=>{const d=i.getOrThunk(()=>Qp(s,n.element));a.setCollapsed(),Ht(n.element,jf(s),d),$i(n.element);const g=uC(n,s);ns(g,s.growingClass),bo(g,s.shrinkingClass),Im(n,s),s.onStartShrink(n)},P_=(n,s,a)=>{const i=Qp(s,n.element);(i==="0px"?b6:e1)(n,s,a,T.some(i))},v6=(n,s,a)=>{const i=uC(n,s),d=$s(i,s.shrinkingClass),g=Qp(s,n.element);N_(n,s);const h=Qp(s,n.element);(d?()=>{Ht(n.element,jf(s),g),$i(n.element)}:()=>{Im(n,s)})(),ns(i,s.shrinkingClass),bo(i,s.growingClass),N_(n,s),Ht(n.element,jf(s),h),a.setExpanded(),s.onStartGrow(n)},ph=(n,s,a)=>{if(a.isExpanded()){Cn(n.element,jf(s));const i=Qp(s,n.element);Ht(n.element,jf(s),i)}},kH=(n,s,a)=>{a.isExpanded()||v6(n,s,a)},_H=(n,s,a)=>{a.isExpanded()&&P_(n,s,a)},Hl=(n,s,a)=>{a.isExpanded()&&b6(n,s,a)},y6=(n,s,a)=>a.isExpanded(),C6=(n,s,a)=>a.isCollapsed(),$_=(n,s,a)=>{const i=uC(n,s);return $s(i,s.growingClass)===!0},S6=(n,s,a)=>{const i=uC(n,s);return $s(i,s.shrinkingClass)===!0};var OH=Object.freeze({__proto__:null,refresh:ph,grow:kH,shrink:_H,immediateShrink:Hl,hasGrown:y6,hasShrunk:C6,isGrowing:$_,isShrinking:S6,isTransitioning:(n,s,a)=>$_(n,s)||S6(n,s),toggleGrow:(n,s,a)=>{(a.isExpanded()?P_:v6)(n,s,a)},disableTransitions:SE,immediateGrow:(n,s,a)=>{a.isExpanded()||(N_(n,s),Ht(n.element,jf(s),Qp(s,n.element)),SE(n,s),a.setExpanded(),s.onStartGrow(n),s.onGrown(n))}}),x6=Object.freeze({__proto__:null,exhibit:(n,s,a)=>{const i=s.expanded;return $l(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:gm(s.dimension.property,"0px")})},events:(n,s)=>Uo([eh(h0(),(a,i)=>{i.event.raw.propertyName===n.dimension.property&&(SE(a,n),s.isExpanded()&&Cn(a.element,n.dimension.property),(s.isExpanded()?n.onGrown:n.onShrunk)(a))})])}),E6=[Be("closedClass"),Be("openClass"),Be("shrinkingClass"),Be("growingClass"),to("getAnimationRoot"),Nn("onShrunk"),Nn("onStartShrink"),Nn("onGrown"),Nn("onStartGrow"),de("expanded",!1),ja("dimension",Ea("property",{width:[Kn("property","width"),Kn("getDimension",n=>da(n)+"px")],height:[Kn("property","height"),Kn("getDimension",n=>lr(n)+"px")]}))],RH=Object.freeze({__proto__:null,init:n=>{const s=pt(n.expanded),a=()=>"expanded: "+s.get();return xc({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:gn(s.set,!1),setExpanded:gn(s.set,!0),readState:a})}});const Qa=yr({fields:E6,name:"sliding",active:x6,apis:OH,state:RH});var BH=Object.freeze({__proto__:null,events:(n,s)=>{const i=n.stream.streams.setup(n,s);return Uo([Te(n.event,i),Gi(()=>s.cancel())].concat(n.cancelEvent.map(d=>[Te(d,()=>s.cancel())]).getOr([])))}});const T6=n=>{const s=pt(null);return xc({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var F_=Object.freeze({__proto__:null,throttle:T6,init:n=>n.stream.streams.state(n)});const NH=(n,s)=>{const a=n.stream,i=oi(n.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var dC=[ja("stream",Ea("mode",{throttle:[Be("delay"),de("stopEvent",!0),Kn("streams",{setup:NH,state:T6})]})),de("event","input"),to("cancelEvent"),pm("onStream")];const Fb=yr({fields:dC,name:"streaming",active:BH,state:F_});var k6=Object.freeze({__proto__:null,exhibit:(n,s)=>$l({attributes:Pg([{key:s.tabAttr,value:"true"}])})}),$H=[de("tabAttr","data-alloy-tabstop")];const To=yr({fields:$H,name:"tabstopping",active:k6}),IH=(n,s,a)=>{const i=s.aria;i.update(n,i,a.get())},LH=(n,s,a)=>{s.toggleClass.each(i=>{a.get()?bo(n.element,i):ns(n.element,i)})},t1=(n,s,a,i)=>{const d=a.get();a.set(i),LH(n,s,a),IH(n,s,a),d!==i&&s.onToggled(n,i)},H_=(n,s,a)=>{t1(n,s,a,!a.get())},_6=(n,s,a)=>{t1(n,s,a,!0)},z_=(n,s,a)=>{t1(n,s,a,!1)},FH=(n,s,a)=>a.get(),V_=(n,s,a)=>{t1(n,s,a,s.selected)};var HH=Object.freeze({__proto__:null,onLoad:V_,toggle:H_,isOn:FH,on:_6,off:z_,set:t1}),A6=Object.freeze({__proto__:null,exhibit:()=>$l({}),events:(n,s)=>{const a=Iw(n,s,H_),i=Q2(n,s,V_);return Uo(Mt([n.toggleOnExecute?[a]:[],[i]]))}});const zH=(n,s,a)=>{Pt(n.element,"aria-pressed",a),s.syncWithExpanded&&Z_(n,s,a)},VH=(n,s,a)=>{Pt(n.element,"aria-selected",a)},U_=(n,s,a)=>{Pt(n.element,"aria-checked",a)},Z_=(n,s,a)=>{Pt(n.element,"aria-expanded",a)};var O6=[de("selected",!1),to("toggleClass"),de("toggleOnExecute",!0),Nn("onToggled"),Vc("aria",{mode:"none"},Ea("mode",{pressed:[de("syncWithExpanded",!1),Kn("update",zH)],checked:[Kn("update",U_)],expanded:[Kn("update",Z_)],selected:[Kn("update",VH)],none:[Kn("update",Y)]}))];const Sn=yr({fields:O6,name:"toggling",active:A6,apis:HH,state:Hw(!1)}),wE=st("tooltip.exclusive"),mC=st("tooltip.show"),fC=st("tooltip.hide"),gC=st("tooltip.immediateHide"),hC=st("tooltip.immediateShow"),D6=(n,s,a)=>{n.getSystem().broadcastOn([wE],{})};var ZH=Object.freeze({__proto__:null,hideAllExclusive:D6,immediateOpenClose:(n,s,a,i)=>fn(n,i?hC:gC),isEnabled:(n,s,a)=>a.isEnabled(),setComponents:(n,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Gt.set(d,i)})},setEnabled:(n,s,a,i)=>a.setEnabled(i)}),WH=Object.freeze({__proto__:null,events:(n,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(Ed(C),n.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){D6(h);const C=n.lazySink(h).getOrDie(),S=h.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:Uo(n.mode==="normal"?[Te(Uc(),x=>{fn(h,mC)}),Te(Xs(),x=>{fn(h,fC)})]:[]),behaviours:Ve([Gt.config({})])});s.setTooltip(S),wd(C,S),n.onShow(h,S),Ba.position(C,S,{anchor:n.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const S=n.lazySink(h).getOrDie();Ba.position(S,C,{anchor:n.anchor(h)})})},g=()=>{switch(n.mode){case"normal":return[Te(Vi(),h=>{fn(h,hC)}),Te(Lg(),h=>{fn(h,gC)}),Te(Uc(),h=>{fn(h,mC)}),Te(Xs(),h=>{fn(h,fC)})];case"follow-highlight":return[Te(w0(),(h,C)=>{fn(h,mC)}),Te(x0(),h=>{fn(h,fC)})];case"children-normal":return[Te(Vi(),(h,C)=>{qs(h.element).each(S=>{ln(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{fn(h,hC)},x=>{s.isShowing()&&(n.onShow(h,x),d(h))})})}),Te(Lg(),h=>{qs(h.element).fold(()=>{fn(h,gC)},Y)}),Te(Uc(),h=>{io(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{fn(h,mC)},S=>{s.isShowing()&&(n.onShow(h,S),d(h))})})}),Te(Xs(),h=>{io(h.element,"[data-mce-tooltip]:hover").fold(()=>{fn(h,fC)},Y)})];default:return[Te(Vi(),(h,C)=>{qs(h.element).each(S=>{ln(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{fn(h,hC)},x=>{s.isShowing()&&(n.onShow(h,x),d(h))})})}),Te(Lg(),h=>{qs(h.element).fold(()=>{fn(h,gC)},Y)})]}};return Uo(Mt([[J2(h=>{n.onSetup(h)}),Te(mC,h=>{s.resetTimer(()=>{i(h)},n.delayForShow())}),Te(fC,h=>{s.resetTimer(()=>{a(h)},n.delayForHide())}),Te(hC,h=>{s.resetTimer(()=>{i(h)},0)}),Te(gC,h=>{s.resetTimer(()=>{a(h)},0)}),Te(fd(),(h,C)=>{const S=C;S.universal||(ao(S.channels,wE)||ao(S.channels,oh()))&&(S.data.closedTooltip&&s.isShowing()&&S.data.closedTooltip(),a(h))}),Gi(h=>{a(h)})],g()]))}}),jH=[Be("lazySink"),Be("tooltipDom"),de("exclusive",!0),de("tooltipComponents",[]),xo("delayForShow",ie(300)),xo("delayForHide",ie(100)),xo("onSetup",Y),ka("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),de("anchor",n=>({type:"hotspot",hotspot:n,layouts:{onLtr:ie([Fs,Wo,Js,$r,Ls,vr]),onRtl:ie([Fs,Wo,Js,$r,Ls,vr])},bubble:wc(0,-2,{})})),Nn("onHide"),Nn("onShow")],GH=Object.freeze({__proto__:null,init:()=>{const n=pt(!0),s=Wt(),a=Wt(),i=()=>{s.on(clearTimeout)},d=(h,C)=>{i(),s.set(setTimeout(h,C))},g=ie("not-implemented");return xc({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>n.get(),setEnabled:h=>n.set(h)})}});const Do=yr({fields:jH,name:"tooltipping",active:WH,state:GH,apis:ZH});var j_=Object.freeze({__proto__:null,events:()=>Uo([q0(lp(),Dt)]),exhibit:()=>$l({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Dd=yr({fields:[],name:"unselecting",active:j_}),qH=n=>{const s=n.dom.attributes!==void 0?n.dom.attributes:[];return So(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},KH=n=>Array.prototype.slice.call(n.dom.classList,0),Rd=n=>{const s=We.fromHtml(n),a=vl(s),i=qH(s),d=KH(s),g=a.length===0?{}:{innerHtml:od(s)};return{tag:Di(s),classes:d,attributes:i,...g}},Un=n=>{const s=gF(n)&&hn(n,"uid")?n.uid:uh("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...n,uid:s})}},Sr=Tf,Qi=M0,YH=(n,s)=>{const a=pt(!1),i=pt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:n,setSource:s.set,getSource:s.get}},M6=n=>{const s=pt(!1);return{stop:()=>{s.set(!0)},cut:Y,isStopped:s.get,isCut:Vn,event:n,setSource:ne("Cannot set source of a broadcasted event"),getSource:ne("Cannot get source of a broadcasted event")}},B6=n=>n.raw.which===ry[0]&&!ao(["input","textarea"],Di(n.target))&&!Xh(n.target,'[contenteditable="true"]'),N6=(n,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=Z3(a),g=De(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),F=>eo(n,F,z=>{d.fireIfReady(z,F).each(J=>{J&&z.kill()}),a.triggerEvent(F,z)&&z.kill()})),h=Wt(),C=eo(n,"paste",F=>{d.fireIfReady(F,"paste").each(G=>{G&&F.kill()}),a.triggerEvent("paste",F)&&F.kill(),h.set(setTimeout(()=>{a.triggerEvent(p0(),F)},0))}),S=eo(n,"keydown",F=>{a.triggerEvent("keydown",F)?F.kill():a.stopBackspace&&B6(F)&&F.prevent()}),x=eo(n,"focusin",F=>{a.triggerEvent("focusin",F)&&F.kill()}),_=Wt(),D=eo(n,"focusout",F=>{a.triggerEvent("focusout",F)&&F.kill(),_.set(setTimeout(()=>{a.triggerEvent(Lg(),F)},0))});return{unbind:()=>{et(g,F=>{F.unbind()}),S.unbind(),x.unbind(),D.unbind(),C.unbind(),h.on(clearTimeout),_.on(clearTimeout)}}},Lm=(n,s)=>{const a=bt(n,"target").getOr(s);return pt(a)},zl=pa.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),G_=(n,s,a,i,d,g)=>{const h=n(s,i),C=YH(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),zl.complete()),S=>{const x=S.descHandler;return xb(x)(C),C.isStopped()?(g.logEventStopped(s,S.element,x.purpose),zl.stopped()):C.isCut()?(g.logEventCut(s,S.element,x.purpose),zl.complete()):Ua(S.element).fold(()=>(g.logNoParent(s,S.element,x.purpose),zl.complete()),D=>(g.logEventResponse(s,S.element,x.purpose),zl.resume(D)))})},n1=(n,s,a,i,d,g)=>G_(n,s,a,i,d,g).fold(Dt,h=>n1(n,s,a,h,d,g),Vn),XH=(n,s,a,i,d)=>{const g=Lm(a,i);return G_(n,s,a,i,g,d)},q_=(n,s,a)=>{const i=M6(s);return et(n,d=>{const g=d.descHandler;xb(g)(i)}),i.isStopped()},P6=(n,s,a,i)=>xE(n,s,a,a.target,i),xE=(n,s,a,i,d)=>{const g=Lm(a,i);return n1(n,s,a,i,g,d)},EE=(n,s)=>({element:n,descHandler:s}),$6=(n,s)=>({id:n,descHandler:s}),Vl=()=>{const n={},s=(h,C,S)=>{Lo(S,(x,_)=>{const D=n[_]!==void 0?n[_]:{};D[C]=jk(x,h),n[_]=D})},a=(h,C)=>Il(C).bind(S=>bt(h,S)).map(S=>EE(C,S));return{registerId:s,unregisterId:h=>{Lo(n,(C,S)=>{$n(C,h)&&delete C[h]})},filterByType:h=>bt(n,h).map(C=>Fo(C,(S,x)=>$6(x,S))).getOr([]),find:(h,C,S)=>bt(n,C).bind(x=>Li(S,_=>a(x,_),h))}},K_=()=>{const n=Vl(),s={},a=x=>{const _=x.element;return Il(_).getOrThunk(()=>Ly("uid-",x.element))},i=(x,_)=>{const D=s[_];if(D===x)g(x);else throw new Error('The tagId "'+_+'" is already used by: '+Dl(D.element)+`
Cannot use it for: `+Dl(x.element)+`
The conflicting element is`+(Hn(D.element)?" ":" not ")+"already in the DOM")},d=x=>{const _=a(x);hn(s,_)&&i(x,_);const D=[x];n.registerId(D,_,x.events),s[_]=x},g=x=>{Il(x.element).each(_=>{delete s[_],n.unregisterId(_)})};return{find:(x,_,D)=>n.find(x,_,D),filter:x=>n.filterByType(x),register:d,unregister:g,getById:x=>bt(s,x)}},Y_=n=>{const s=W=>Ua(n.element).fold(Dt,ee=>un(W,ee)),a=K_(),i=(W,ee)=>a.find(s,W,ee),d=N6(n.element,{triggerEvent:(W,ee)=>R2(W,ee.target,re=>P6(i,W,ee,re))}),g={debugInfo:ie("real"),triggerEvent:(W,ee,re)=>{R2(W,ee,fe=>xE(i,W,re,ee,fe))},triggerFocus:(W,ee)=>{Il(W).fold(()=>{br(W)},re=>{R2(md(),W,fe=>(XH(i,md(),{originator:ee,kill:Y,prevent:Y,target:W},W,fe),!1))})},triggerEscape:(W,ee)=>{g.triggerEvent("keydown",W.element,ee.event)},getByUid:W=>G(W),getByDom:W=>J(W),build:m,buildOrPatch:l,addToGui:W=>{S(W)},removeFromGui:W=>{x(W)},addToWorld:W=>{h(W)},removeFromWorld:W=>{C(W)},broadcast:W=>{P(W)},broadcastOn:(W,ee)=>{F(W,ee)},broadcastEvent:(W,ee)=>{z(W,ee)},isConnected:Dt},h=W=>{W.connect(g),nm(W.element)||(a.register(W),et(W.components(),h),g.triggerEvent(up(),W.element,{target:W.element}))},C=W=>{nm(W.element)||(et(W.components(),C),a.unregister(W)),W.disconnect()},S=W=>{wd(n,W)},x=W=>{Ed(W)},_=()=>{d.unbind(),Ni(n.element)},D=W=>{const ee=a.filter(fd());et(ee,re=>{const fe=re.descHandler;xb(fe)(W)})},P=W=>{D({universal:!0,data:W})},F=(W,ee)=>{D({universal:!1,channels:W,data:ee})},z=(W,ee)=>{const re=a.filter(W);return q_(re,ee)},G=W=>a.getById(W).fold(()=>Nt.error(new Error('Could not find component with uid: "'+W+'" in system.')),Nt.value),J=W=>{const ee=Il(W).getOr("not found");return G(ee)};return h(n),{root:n,element:n.element,destroy:_,add:S,remove:x,getByUid:G,getByDom:J,addToWorld:h,removeFromWorld:C,broadcast:P,broadcastOn:F,broadcastEvent:z}},I6=()=>{const n=(s,a)=>{a.stop(),Xg(s)};return[Te(vf(),n),Te(Fg(),n),Mf(yc()),Mf(Ka())]},X_=n=>{const s=a=>Tm((i,d)=>{a(i),d.stop()});return Uo(Mt([n.map(s).toArray(),I6()]))},fr=Xi({name:"Button",factory:n=>{const s=X_(n.action),a=n.dom.tag,i=g=>bt(n.dom,"attributes").bind(h=>bt(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:n.role.getOr(i("role").getOr("button"))}};return{uid:n.uid,dom:n.dom,components:n.components,events:s,behaviours:Mu.augment(n.buttonBehaviours,[Zt.config({}),wt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:n.eventOrder}},configFields:[de("uid",void 0),Be("dom"),de("components",[]),Mu.field("buttonBehaviours",[Zt,wt]),to("action"),to("role"),de("eventOrder",{})]}),JH=ie([de("shell",!1),Be("makeItem"),de("setupItem",Y),Mu.field("listBehaviours",[Gt])]),J_=Aa({name:"items",overrides:()=>({behaviours:Ve([Gt.config({})])})}),e9=ie([J_]),Q_=ie("CustomList"),eA=(n,s,a,i)=>{const d=(C,S)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},x=>{const _=Gt.contents(x),D=S.length,P=D-_.length,F=P>0?Io(P,()=>n.makeItem()):[],z=_.slice(D);et(z,J=>Gt.remove(x,J)),et(F,J=>Gt.append(x,J));const G=Gt.contents(x);et(G,(J,W)=>{n.setupItem(C,J,S[W],W)})})},g=n.shell?{behaviours:[Gt.config({})],components:[]}:{behaviours:[],components:s},h=C=>n.shell?T.some(C):vo(C,n,"items");return{uid:n.uid,dom:n.dom,components:g.components,behaviours:ha(n.listBehaviours,g.behaviours),apis:{setItems:d}}},L6=Ec({name:Q_(),configFields:JH(),partFields:e9(),factory:eA,apis:{setItems:(n,s,a)=>{n.setItems(s,a)}}}),Hb="aria-controls",F6=n=>Sg(n,a=>{if(!mc(a))return!1;const i=ir(a,"id");return i!==void 0&&i.indexOf(Hb)>-1}).bind(a=>{const i=ir(a,"id"),d=Gs(a);return io(d,`[${Hb}="${i}"]`)}),H6=()=>{const n=st(Hb);return{id:n,link:i=>{Pt(i,Hb,n)},unlink:i=>{Ho(i,Hb)}}},z6=(n,s)=>F6(s).exists(a=>bh(n,a)),bh=(n,s)=>e0(s,a=>un(a,n.element),Vn)||z6(n,s),V6="alloy.item-hover",U6="alloy.item-focus",Z6="alloy.item-toggled",W6=n=>{(qs(n.element).isNone()||Zt.isFocused(n))&&(Zt.isFocused(n)||Zt.focus(n),xt(n,V6,{item:n}))},j6=n=>{xt(n,U6,{item:n})},G6=(n,s)=>{xt(n,Z6,{item:n,state:s})},tA=ie(V6),t9=ie(U6),q6=ie(Z6),K6=n=>n.role.fold(()=>n.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),an),n9=(n,s)=>({aria:{mode:s?"selected":"checked"},...js(n,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{Rt(n.onToggled)&&n.onToggled(a,i),G6(a,i)}}),o9=n=>({dom:n.dom,domModification:{...n.domModification,attributes:{role:K6(n),...n.domModification.attributes,"aria-haspopup":n.hasSubmenu,...n.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Mu.augment(n.itemBehaviours,[n.toggling.fold(Sn.revoke,s=>Sn.config(n9(s,n.role.exists(a=>a==="option")))),Zt.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:s=>{j6(s)}}),wt.config({mode:"execution"}),it.config({store:{mode:"memory",initialValue:n.data}}),Ut("item-type-events",[...I6(),Te(Uc(),W6),Te(yf(),Zt.focus)])]),components:n.components,eventOrder:n.eventOrder});var nA=[Be("data"),Be("components"),Be("dom"),de("hasSubmenu",!1),to("toggling"),to("role"),Mu.field("itemBehaviours",[Sn,Zt,wt,it]),de("ignoreFocus",!1),de("domModification",{}),Kn("builder",o9),de("eventOrder",{})];const Y6=n=>({dom:n.dom,components:n.components,events:Uo([tk(yf())])});var X6=[Be("dom"),Be("components"),Kn("builder",Y6)];const oA=ie("item-widget"),sA=ie([fa({name:"widget",overrides:n=>({behaviours:Ve([it.config({store:{mode:"manual",getValue:s=>n.data,setValue:Y}})])})})]),J6=n=>{const s=Ya(oA(),n,sA()),a=B0(oA(),n,s.internals()),i=g=>vo(g,n,"widget").map(h=>(wt.focusIn(h),h)),d=(g,h)=>rh(h.event.target)?T.none():(n.autofocus&&h.setSource(g.element),T.none());return{dom:n.dom,components:a,domModification:n.domModification,events:Uo([Tm((g,h)=>{i(g).each(C=>{h.stop()})}),Te(Uc(),W6),Te(yf(),(g,h)=>{n.autofocus?i(g):Zt.focus(g)})]),behaviours:Mu.augment(n.widgetBehaviours,[it.config({store:{mode:"memory",initialValue:n.data}}),Zt.config({ignore:n.ignoreFocus,onFocus:g=>{j6(g)}}),wt.config({mode:"special",focusIn:n.autofocus?g=>{i(g)}:sy(),onLeft:d,onRight:d,onEscape:(g,h)=>!Zt.isFocused(g)&&!n.autofocus?(Zt.focus(g),T.some(!0)):(n.autofocus&&h.setSource(g.element),T.none())})])}};var rA=[Be("uid"),Be("data"),Be("components"),Be("dom"),de("autofocus",!1),de("ignoreFocus",!1),Mu.field("widgetBehaviours",[it,Zt,wt]),de("domModification",{}),bd(sA()),Kn("builder",J6)];const eB=Ea("type",{widget:rA,item:nA,separator:X6}),tB=(n,s)=>({mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:n.focusManager}),nB=(n,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+n.markers.item},previousSelector:s.previousSelector,focusManager:n.focusManager}),a9=(n,s)=>({mode:"menu",selector:"."+n.markers.item,moveOnTab:s.moveOnTab,focusManager:n.focusManager}),aA=ie([R0({factory:{sketch:n=>{const s=xa("menu.spec item",eB,n);return s.builder(s)}},name:"items",unit:"item",defaults:(n,s)=>$n(s,"uid")?s:{...s,uid:uh("item")},overrides:(n,s)=>({type:s.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}})})]),c9=ie([fs("role"),Be("value"),Be("items"),Be("dom"),Be("components"),de("eventOrder",{}),Ir("menuBehaviours",[zn,it,Le,wt]),Vc("movement",{mode:"menu",moveOnTab:!0},Ea("mode",{grid:[Sw(),Kn("config",tB)],matrix:[Kn("config",nB),Be("rowSelector"),de("previousSelector",T.none)],menu:[de("moveOnTab",!0),Kn("config",a9)]})),M2(),de("fakeFocus",!1),de("focusManager",uy()),Nn("onHighlight"),Nn("onDehighlight"),de("showMenuRole",!0)]),cA=ie("alloy.menu-focus"),oB=(n,s)=>{const a=Mr(n.element,'[role="menuitemradio"][aria-checked="true"]');et(a,i=>{un(i,s.element)||n.getSystem().getByDom(i).each(d=>{Sn.off(d)})})},o1=(n,s,a,i)=>({uid:n.uid,dom:n.dom,markers:n.markers,behaviours:ha(n.menuBehaviours,[zn.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight,onDehighlight:n.onDehighlight}),it.config({store:{mode:"memory",initialValue:n.value}}),Le.config({find:T.some}),wt.config(n.movement.config(n,n.movement))]),events:Uo([Te(t9(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{zn.highlight(d,C),g.stop(),xt(d,cA(),{menu:d,item:C})})}),Te(tA(),(d,g)=>{const h=g.event.item;zn.highlight(d,h)}),Te(q6(),(d,g)=>{const{item:h,state:C}=g.event;C&&ir(h.element,"role")==="menuitemradio"&&oB(d,h)})]),components:s,eventOrder:n.eventOrder,...n.showMenuRole?{domModification:{attributes:{role:n.role.getOr("menu")}}}:{}}),Gf=Ec({name:"Menu",configFields:c9(),partFields:aA(),factory:o1}),iA=n=>Ku(n,(s,a)=>({k:s,v:a})),pC=(n,s,a,i)=>bt(a,i).bind(d=>bt(n,d).bind(g=>{const h=pC(n,s,a,g);return T.some([g].concat(h))})).getOr([]),i9=(n,s)=>{const a={};Lo(n,(h,C)=>{et(h,S=>{a[S]=C})});const i=s,d=iA(s),g=is(d,(h,C)=>[C].concat(pC(a,i,d,C)));return is(a,h=>bt(g,h).getOr([h]))},sB=()=>{const n=pt({}),s=pt({}),a=pt({}),i=Wt(),d=pt({}),g=()=>{n.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),C=(be,Ke)=>{s.set({...s.get(),[be]:{type:"prepared",menu:Ke}})},S=(be,Ke,Re,$e)=>{i.set(be),n.set(Re),s.set(Ke),d.set($e);const Ne=i9($e,Re);a.set(Ne)},x=be=>cc(n.get(),(Ke,Re)=>Ke===be),_=(be,Ke,Re)=>G(be).bind($e=>x(be).bind(Ne=>Ke(Ne).map(Tt=>({triggeredMenu:$e,triggeringItem:Tt,triggeringPath:Re})))),D=(be,Ke)=>{const Re=co(W(be).toArray(),$e=>G($e).isSome());return bt(a.get(),be).bind($e=>{const Ne=_e(Re.concat($e)),Tt=le(Ne,(gt,sn)=>_(gt,Ke,Ne.slice(0,sn+1)).fold(()=>uc(i.get(),gt)?[]:[T.none()],_t=>[T.some(_t)]));return Yd(Tt)})},P=be=>bt(n.get(),be).map(Ke=>{const Re=bt(a.get(),be).getOr([]);return[Ke].concat(Re)}),F=be=>bt(a.get(),be).bind(Ke=>Ke.length>1?T.some(Ke.slice(1)):T.none()),z=be=>bt(a.get(),be),G=be=>J(be).bind(lA),J=be=>bt(s.get(),be),W=be=>bt(n.get(),be);return{setMenuBuilt:C,setContents:S,expand:P,refresh:z,collapse:F,lookupMenu:J,lookupItem:W,otherMenus:be=>{const Ke=d.get();return ge(Gn(Ke),be)},getPrimary:()=>i.get().bind(G),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:D}},lA=n=>n.type==="prepared"?T.some(n.menu):T.none(),uA={init:sB,extractPreparedMenu:lA},TE=st("tiered-menu-item-highlight"),dA=st("tiered-menu-item-dehighlight"),l9=(n,s)=>{const a=Wt(),i=(Ae,Ze,$t)=>is($t,(Jt,Ct)=>{const Kt=()=>Gf.sketch({...Jt,value:Ct,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:(ro,Pn)=>{xt(ro,TE,{menuComp:ro,itemComp:Pn})},onDehighlight:(ro,Pn)=>{xt(ro,dA,{menuComp:ro,itemComp:Pn})},focusManager:n.fakeFocus?Q0():uy()});return Ct===Ze?{type:"prepared",menu:Ae.getSystem().build(Kt())}:{type:"notbuilt",nbMenu:Kt}}),d=uA.init(),g=Ae=>{const Ze=i(Ae,n.data.primary,n.data.menus),$t=S();return d.setContents(n.data.primary,Ze,n.data.expansions,$t),d.getPrimary()},h=Ae=>it.getValue(Ae).value,C=(Ae,Ze,$t)=>ca(Ze,Jt=>{if(!Jt.getSystem().isConnected())return T.none();const Ct=zn.getCandidates(Jt);return vt(Ct,Kt=>h(Kt)===$t)}),S=Ae=>is(n.data.menus,(Ze,$t)=>le(Ze.items,Jt=>Jt.type==="separator"?[]:[Jt.data.value])),x=zn.highlight,_=(Ae,Ze)=>{x(Ae,Ze),zn.getHighlighted(Ze).orThunk(()=>zn.getFirst(Ze)).each($t=>{n.fakeFocus?zn.highlight(Ze,$t):j0(Ae,$t.element,yf())})},D=(Ae,Ze)=>Oi(De(Ze,$t=>Ae.lookupMenu($t).bind(Jt=>Jt.type==="prepared"?T.some(Jt.menu):T.none()))),P=(Ae,Ze,$t)=>{const Jt=D(Ze,Ze.otherMenus($t));et(Jt,Ct=>{qr(Ct.element,[n.markers.backgroundMenu]),n.stayInDom||Gt.remove(Ae,Ct)})},F=Ae=>a.get().getOrThunk(()=>{const Ze={},$t=Mr(Ae.element,`.${n.markers.item}`),Jt=co($t,Ct=>ir(Ct,"aria-haspopup")==="true");return et(Jt,Ct=>{Ae.getSystem().getByDom(Ct).each(Kt=>{const ro=h(Kt);Ze[ro]=Kt})}),a.set(Ze),Ze}),z=(Ae,Ze)=>{const $t=F(Ae);Lo($t,(Jt,Ct)=>{const Kt=ao(Ze,Ct);Pt(Jt.element,"aria-expanded",Kt)})},G=(Ae,Ze,$t)=>T.from($t[0]).bind(Jt=>Ze.lookupMenu(Jt).bind(Ct=>{if(Ct.type==="notbuilt")return T.none();{const Kt=Ct.menu,ro=D(Ze,$t.slice(1));return et(ro,Pn=>{bo(Pn.element,n.markers.backgroundMenu)}),Hn(Kt.element)||Gt.append(Ae,p(Kt)),qr(Kt.element,[n.markers.backgroundMenu]),_(Ae,Kt),P(Ae,Ze,$t),T.some(Kt)}}));let J;(function(Ae){Ae[Ae.HighlightSubmenu=0]="HighlightSubmenu",Ae[Ae.HighlightParent=1]="HighlightParent"})(J||(J={}));const W=(Ae,Ze,$t)=>{if($t.type==="notbuilt"){const Jt=Ae.getSystem().build($t.nbMenu());return d.setMenuBuilt(Ze,Jt),Jt}else return $t.menu},ee=(Ae,Ze,$t=J.HighlightSubmenu)=>{if(Ze.hasConfigured(ft)&&ft.isDisabled(Ze))return T.some(Ze);{const Jt=h(Ze);return d.expand(Jt).bind(Ct=>(z(Ae,Ct),T.from(Ct[0]).bind(Kt=>d.lookupMenu(Kt).bind(ro=>{const Pn=W(Ae,Kt,ro);return Hn(Pn.element)||Gt.append(Ae,p(Pn)),n.onOpenSubmenu(Ae,Ze,Pn,_e(Ct)),$t===J.HighlightSubmenu?(zn.highlightFirst(Pn),G(Ae,d,Ct)):(zn.dehighlightAll(Pn),T.some(Ze))}))))}},re=(Ae,Ze)=>{const $t=h(Ze);return d.collapse($t).bind(Jt=>(z(Ae,Jt),G(Ae,d,Jt).map(Ct=>(n.onCollapseMenu(Ae,Ze,Ct),Ct))))},fe=(Ae,Ze)=>{const $t=h(Ze);return d.refresh($t).bind(Jt=>(z(Ae,Jt),G(Ae,d,Jt)))},be=(Ae,Ze)=>rh(Ze.element)?T.none():ee(Ae,Ze,J.HighlightSubmenu),Ke=(Ae,Ze)=>rh(Ze.element)?T.none():re(Ae,Ze),Re=(Ae,Ze)=>re(Ae,Ze).orThunk(()=>n.onEscape(Ae,Ze).map(()=>Ae)),$e=Ae=>(Ze,$t)=>ma($t.getSource(),`.${n.markers.item}`).bind(Jt=>Ze.getSystem().getByDom(Jt).toOptional().bind(Ct=>Ae(Ze,Ct).map(Dt))),Ne=Uo([Te(cA(),(Ae,Ze)=>{const $t=Ze.event.item;d.lookupItem(h($t)).each(()=>{const Jt=Ze.event.menu;zn.highlight(Ae,Jt);const Ct=h(Ze.event.item);d.refresh(Ct).each(Kt=>P(Ae,d,Kt))})}),Tm((Ae,Ze)=>{const $t=Ze.event.target;Ae.getSystem().getByDom($t).each(Jt=>{h(Jt).indexOf("collapse-item")===0&&re(Ae,Jt),ee(Ae,Jt,J.HighlightSubmenu).fold(()=>{n.onExecute(Ae,Jt)},Y)})}),Oo((Ae,Ze)=>{g(Ae).each($t=>{Gt.append(Ae,p($t)),n.onOpenMenu(Ae,$t),n.highlightOnOpen===Jr.HighlightMenuAndItem?_(Ae,$t):n.highlightOnOpen===Jr.HighlightJustMenu&&x(Ae,$t)})}),Te(TE,(Ae,Ze)=>{n.onHighlightItem(Ae,Ze.event.menuComp,Ze.event.itemComp)}),Te(dA,(Ae,Ze)=>{n.onDehighlightItem(Ae,Ze.event.menuComp,Ze.event.itemComp)}),...n.navigateOnHover?[Te(tA(),(Ae,Ze)=>{const $t=Ze.event.item;fe(Ae,$t),ee(Ae,$t,J.HighlightParent),n.onHover(Ae,$t)})]:[]]),Tt=Ae=>zn.getHighlighted(Ae).bind(zn.getHighlighted),gt=Ae=>{Tt(Ae).each(Ze=>{re(Ae,Ze)})},sn=Ae=>{d.getPrimary().each(Ze=>{_(Ae,Ze)})},_t=Ae=>T.from(Ae.components()[0]).filter(Ze=>ir(Ze.element,"role")==="menu"),ht={collapseMenu:gt,highlightPrimary:sn,repositionMenus:Ae=>{d.getPrimary().bind($t=>Tt(Ae).bind(Jt=>{const Ct=h(Jt),Kt=ic(d.getMenus()),ro=Oi(De(Kt,uA.extractPreparedMenu));return d.getTriggeringPath(Ct,Pn=>C(Ae,ro,Pn))}).map(Jt=>({primary:$t,triggeringPath:Jt}))).fold(()=>{_t(Ae).each($t=>{n.onRepositionMenu(Ae,$t,[])})},({primary:$t,triggeringPath:Jt})=>{n.onRepositionMenu(Ae,$t,Jt)})}};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:ha(n.tmenuBehaviours,[wt.config({mode:"special",onRight:$e(be),onLeft:$e(Ke),onEscape:$e(Re),focusIn:(Ae,Ze)=>{d.getPrimary().each($t=>{j0(Ae,$t.element,yf())})}}),zn.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),Le.config({find:Ae=>zn.getHighlighted(Ae)}),Gt.config({})]),eventOrder:n.eventOrder,apis:ht,events:Ne}},rB=ie("collapse-item"),aB=(n,s,a)=>({primary:n,menus:s,expansions:a}),cB=(n,s)=>({primary:n,menus:gm(n,s),expansions:{}}),iB=n=>({value:st(rB()),meta:{text:n}}),s1=Xi({name:"TieredMenu",configFields:[fp("onExecute"),fp("onEscape"),pm("onOpenMenu"),pm("onOpenSubmenu"),Nn("onRepositionMenu"),Nn("onCollapseMenu"),de("highlightOnOpen",Jr.HighlightMenuAndItem),vu("data",[Be("primary"),Be("menus"),Be("expansions")]),de("fakeFocus",!1),Nn("onHighlightItem"),Nn("onDehighlightItem"),Nn("onHover"),yw(),Be("dom"),de("navigateOnHover",!0),de("stayInDom",!1),Ir("tmenuBehaviours",[wt,zn,Le,Gt]),de("eventOrder",{})],apis:{collapseMenu:(n,s)=>{n.collapseMenu(s)},highlightPrimary:(n,s)=>{n.highlightPrimary(s)},repositionMenus:(n,s)=>{n.repositionMenus(s)}},factory:l9,extraApis:{tieredData:aB,singleData:cB,collapseItem:iB}}),kE=ie("sink"),u9=ie(Aa({name:kE(),overrides:ie({dom:{tag:"div"},behaviours:Ve([Ba.config({useFixed:Dt})]),events:Uo([Mf(mr()),Mf(Ka()),Mf(vf())])})})),d9=bc([de("isExtraPart",Vn),qa("fireEventInstead",[de("event",gd())])]),mA=n=>{const s=xa("Dismissal",d9,n);return{[Eu()]:{schema:bc([Be("target")]),onReceive:(a,i)=>{In.isOpen(a)&&(In.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>In.close(a),g=>fn(a,g.event)))}}}},m9=bc([qa("fireEventInstead",[de("event",gw())]),vc("doReposition")]),_E=n=>{const s=xa("Reposition",m9,n);return{[Hs()]:{onReceive:a=>{In.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>fn(a,i.event))}}}},lB=(n,s)=>{const a=n.getHotspot(s).getOr(s),i="hotspot",d=n.getAnchorOverrides();return n.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},bC=(n,s,a)=>{const i=n.fetch;return i(a).map(s)},uB=(n,s,a,i,d,g,h)=>{const C=bC(n,s,i),S=dB(i,n);return C.map(x=>x.bind(_=>{const D=_.menus[_.primary];return T.from(D).each(P=>{n.listRole.each(F=>{P.role=F})}),T.from(s1.sketch({...g.menu(),uid:uh(""),data:_,highlightOnOpen:h,onOpenMenu:(P,F)=>{const z=S().getOrDie();Ba.position(z,F,{anchor:a}),In.decloak(d)},onOpenSubmenu:(P,F,z)=>{const G=S().getOrDie();Ba.position(G,z,{anchor:{type:"submenu",item:F}}),In.decloak(d)},onRepositionMenu:(P,F,z)=>{const G=S().getOrDie();Ba.position(G,F,{anchor:a}),et(z,J=>{Ba.position(G,J.triggeredMenu,{anchor:{type:"submenu",item:J.triggeringItem}})})},onEscape:()=>(Zt.focus(i),In.close(d),T.some(!0))}))}))},AE=(n,s,a,i,d,g,h)=>{const C=lB(n,a);return uB(n,s,C,a,i,d,h).map(x=>(x.fold(()=>{In.isOpen(i)&&In.close(i)},_=>{In.cloak(i),In.open(i,_),g(i)}),i))},f9=(n,s,a,i,d,g,h)=>(In.close(i),Xo.pure(i)),OE=(n,s,a,i,d,g)=>{const h=qt.getCoupled(a,"sandbox");return(In.isOpen(h)?f9:AE)(n,s,a,h,i,d,g)},g9=(n,s,a)=>{const i=Le.getCurrent(s).getOr(s),d=da(n.element);a?Ht(i.element,"min-width",d+"px"):df(i.element,d)},dB=(n,s)=>n.getSystem().getByUid(s.uid+"-"+kE()).map(a=>()=>Nt.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Nt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(n))),mB=n=>{In.getState(n).each(s=>{s1.repositionMenus(s)})},fB=(n,s,a)=>{const i=H6(),d=(C,S)=>{const x=lB(n,s);i.link(s.element),n.matchWidth&&g9(x.hotspot,S,n.useMinWidth),n.onOpen(x,C,S),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,S)},g=(C,S)=>{i.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,S)},h=dB(s,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:i.id}},behaviours:Mu.augment(n.sandboxBehaviours,[it.config({store:{mode:"memory",initialValue:s}}),In.config({onOpen:d,onClose:g,isPartOf:(C,S,x)=>bh(S,x)||bh(s,x),getAttachPoint:()=>h().getOrDie()}),Le.config({find:C=>In.getState(C).bind(S=>Le.getCurrent(S))}),Na.config({channels:{...mA({isExtraPart:Vn}),..._E({doReposition:mB})}})])}},h9=n=>{const s=qt.getCoupled(n,"sandbox");mB(s)},fA=()=>[de("sandboxClasses",[]),Mu.field("sandboxBehaviours",[Le,Na,In,it])],p9=ie([Be("dom"),Be("fetch"),Nn("onOpen"),Cc("onExecute"),de("getHotspot",T.some),de("getAnchorOverrides",ie({})),gh(),Ir("dropdownBehaviours",[Sn,qt,wt,Zt]),Be("toggleClass"),de("eventOrder",{}),to("lazySink"),de("matchWidth",!1),de("useMinWidth",!1),to("role"),to("listRole")].concat(fA())),b9=ie([vi({schema:[yw(),de("fakeFocus",!1)],name:"menu",defaults:n=>({onExecute:n.onExecute})}),u9()]),v9=(n,s,a,i)=>{const d=_=>bt(n.dom,"attributes").bind(D=>bt(D,_)),g=_=>{In.getState(_).each(D=>{s1.highlightPrimary(D)})},h=(_,D,P)=>OE(n,an,_,i,D,P),C=_=>{h(_,g,Jr.HighlightMenuAndItem).get(Y)},S={expand:_=>{Sn.isOn(_)||h(_,Y,Jr.HighlightNone).get(Y)},open:_=>{Sn.isOn(_)||h(_,Y,Jr.HighlightMenuAndItem).get(Y)},refetch:_=>qt.getExistingCoupled(_,"sandbox").fold(()=>h(_,Y,Jr.HighlightMenuAndItem).map(Y),P=>AE(n,an,_,P,i,Y,Jr.HighlightMenuAndItem).map(Y)),isOpen:Sn.isOn,close:_=>{Sn.isOn(_)&&h(_,Y,Jr.HighlightMenuAndItem).get(Y)},repositionMenus:_=>{Sn.isOn(_)&&h9(_)}},x=(_,D)=>(Xg(_),T.some(!0));return{uid:n.uid,dom:n.dom,components:s,behaviours:ha(n.dropdownBehaviours,[Sn.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),qt.config({others:{sandbox:_=>fB(n,_,{onOpen:()=>Sn.on(_),onClose:()=>Sn.off(_)})}}),wt.config({mode:"special",onSpace:x,onEnter:x,onDown:(_,D)=>{if(Kc.isOpen(_)){const P=qt.getCoupled(_,"sandbox");g(P)}else Kc.open(_);return T.some(!0)},onEscape:(_,D)=>Kc.isOpen(_)?(Kc.close(_),T.some(!0)):T.none()}),Zt.config({})]),events:X_(T.some(C)),eventOrder:{...n.eventOrder,[Nr()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":n.listRole.getOr("true"),...n.role.fold(()=>({}),_=>({role:_})),...n.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Kc=Ec({name:"Dropdown",configFields:p9(),partFields:b9(),factory:v9,apis:{open:(n,s)=>n.open(s),refetch:(n,s)=>n.refetch(s),expand:(n,s)=>n.expand(s),close:(n,s)=>n.close(s),isOpen:(n,s)=>n.isOpen(s),repositionMenus:(n,s)=>n.repositionMenus(s)}}),gB="form",y9=[Ir("formBehaviours",[it])],gA=n=>"<alloy.field."+n+">",C9=n=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),I2(gB,gA(C),S)),record:ie(g)}})(),a=n(s),i=s.record(),d=De(i,g=>fa({name:g,pname:gA(g)}));return r_(gB,y9,d,pB,a)},hB=(n,s)=>n.fold(()=>Nt.error(s),Nt.value),pB=(n,s)=>({uid:n.uid,dom:n.dom,components:s,behaviours:ha(n.formBehaviours,[it.config({store:{mode:"manual",getValue:a=>{const i=Ml(a,n);return is(i,(d,g)=>d().bind(h=>{const C=Le.getCurrent(h);return hB(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Dl(h.element)))}).map(it.getValue))},setValue:(a,i)=>{Lo(i,(d,g)=>{vo(a,n,g).each(h=>{Le.getCurrent(h).each(C=>{it.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>vo(a,n,i).bind(Le.getCurrent)}}),vh={getField:Vp((n,s,a)=>n.getField(s,a)),sketch:C9},zb=ie([Be("dom"),de("shell",!0),Ir("toolbarBehaviours",[Gt])]),w9=ie([Aa({name:"groups",overrides:()=>({behaviours:Ve([Gt.config({})])})})]),vC=(n,s,a,i)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},x=>{Gt.set(x,S)})},g=C=>n.shell?T.some(C):vo(C,n,"groups"),h=n.shell?{behaviours:[Gt.config({})],components:[]}:{behaviours:[],components:s};return{uid:n.uid,dom:n.dom,components:h.components,behaviours:ha(n.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:Y},domModification:{attributes:{role:"group"}}}},Md=Ec({name:"Toolbar",configFields:zb(),partFields:w9(),factory:vC,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)}}}),x9=ie([_n(["toggledClass"]),Be("lazySink"),vc("fetch"),zi("getBounds"),qa("fireDismissalEventInstead",[de("event",gd())]),gh(),Nn("onToggled")]),E9=ie([vi({name:"button",overrides:n=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ve([Sn.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:n.onToggled})])})}),vi({factory:Md,schema:zb(),name:"toolbar",overrides:n=>({toolbarBehaviours:Ve([wt.config({mode:"cyclic",onEscape:s=>(vo(s,n,"button").each(Zt.focus),T.none())})])})})]),Vb=Wt(),bB=(n,s)=>{Vb.set(!0),hA(n,s),Vb.clear()},hA=(n,s)=>{const a=qt.getCoupled(n,"toolbarSandbox");In.isOpen(a)?In.close(a):In.open(a,s.toolbar())},yC=(n,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(n).getOrDie();Ba.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:n,layouts:i,overrides:{maxWidthFunction:_p()}}},d)},vB=(n,s,a,i,d)=>{Md.setGroups(s,d),yC(n,s,a,i),Sn.on(n)},T9=(n,s,a)=>{const i=H6(),d=(h,C)=>{const S=Vb.get().getOr(!1);a.fetch().get(x=>{vB(n,C,a,s.layouts,x),i.link(n.element),S||wt.focusIn(C)})},g=()=>{Sn.off(n),Vb.get().getOr(!1)||Zt.focus(n),i.unlink(n.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Ve([wt.config({mode:"special",onEscape:h=>(In.close(h),T.some(!0))}),In.config({onOpen:d,onClose:g,isPartOf:(h,C,S)=>bh(C,S)||bh(n,S),getAttachPoint:()=>a.lazySink(n).getOrDie()}),Na.config({channels:{...mA({isExtraPart:Vn,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),..._E({doReposition:()=>{In.getState(qt.getCoupled(n,"toolbarSandbox")).each(h=>{yC(n,h,a,s.layouts)})}})}})])}},qf=Ec({name:"FloatingToolbarButton",factory:(n,s,a,i)=>({...fr.sketch({...i.button(),action:d=>{hA(d,i)},buttonBehaviours:Mu.augment({dump:i.button().buttonBehaviours},[qt.config({others:{toolbarSandbox:d=>T9(d,a,n)}})])}),apis:{setGroups:(d,g)=>{In.getState(qt.getCoupled(d,"toolbarSandbox")).each(h=>{vB(d,h,n,a.layouts,g)})},reposition:d=>{In.getState(qt.getCoupled(d,"toolbarSandbox")).each(g=>{yC(d,g,n,a.layouts)})},toggle:d=>{hA(d,i)},toggleWithoutFocusing:d=>{bB(d,i)},getToolbar:d=>In.getState(qt.getCoupled(d,"toolbarSandbox")),isOpen:d=>In.isOpen(qt.getCoupled(d,"toolbarSandbox"))}}),configFields:x9(),partFields:E9(),apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggleWithoutFocusing(s)},getToolbar:(n,s)=>n.getToolbar(s),isOpen:(n,s)=>n.isOpen(s)}}),yB=ie([de("prefix","form-field"),Ir("fieldBehaviours",[Le,it])]),k9=ie([Aa({schema:[Be("dom")],name:"label"}),Aa({factory:{sketch:n=>({uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}})},schema:[Be("text")],name:"aria-descriptor"}),fa({factory:{sketch:n=>{const s=x2(n,["factory"]);return n.factory.sketch(s)}},schema:[Be("factory")],name:"field"})]),_9=(n,s,a,i)=>{const d=ha(n.fieldBehaviours,[Le.config({find:C=>vo(C,n,"field")}),it.config({store:{mode:"manual",getValue:C=>Le.getCurrent(C).bind(it.getValue),setValue:(C,S)=>{Le.getCurrent(C).each(x=>{it.setValue(x,S)})}}})]),g=Uo([Oo((C,S)=>{const x=pd(C,n,["label","field","aria-descriptor"]);x.field().each(_=>{const D=st(n.prefix);x.label().each(P=>{Pt(P.element,"for",D),Pt(_.element,"id",D)}),x["aria-descriptor"]().each(P=>{const F=st(n.prefix);Pt(P.element,"id",F),Pt(_.element,"aria-describedby",F)})})})]),h={getField:C=>vo(C,n,"field"),getLabel:C=>vo(C,n,"label")};return{uid:n.uid,dom:n.dom,components:s,behaviours:d,events:g,apis:h}},pn=Ec({name:"FormField",configFields:yB(),partFields:k9(),factory:_9,apis:{getField:(n,s)=>n.getField(s),getLabel:(n,s)=>n.getLabel(s)}}),A9=ie([de("field1Name","field1"),de("field2Name","field2"),pm("onLockedChange"),_n(["lockClass"]),de("locked",!1),Mu.field("coupledFieldBehaviours",[Le,it]),xo("onInput",Y)]),O9=(n,s,a)=>vo(n,s,a).bind(Le.getCurrent),CB=(n,s)=>fa({factory:pn,name:n,overrides:a=>({fieldBehaviours:Ve([Ut("coupled-input-behaviour",[Te(Al(),i=>{O9(i,a,s).each(d=>{vo(i,a,"lock").each(g=>{Sn.isOn(g)&&a.onLockedChange(i,d,g),a.onInput(i)})})})])])})}),D9=ie([CB("field1","field2"),CB("field2","field1"),fa({factory:fr,schema:[Be("dom")],name:"lock",overrides:n=>({buttonBehaviours:Ve([Sn.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])})})]),R9=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,behaviours:Mu.augment(n.coupledFieldBehaviours,[Le.config({find:T.some}),it.config({store:{mode:"manual",getValue:d=>{const g=N0(d,n,["field1","field2"]);return{[n.field1Name]:it.getValue(g.field1()),[n.field2Name]:it.getValue(g.field2())}},setValue:(d,g)=>{const h=N0(d,n,["field1","field2"]);hn(g,n.field1Name)&&it.setValue(h.field1(),g[n.field1Name]),hn(g,n.field2Name)&&it.setValue(h.field2(),g[n.field2Name])}}})]),apis:{getField1:d=>vo(d,n,"field1"),getField2:d=>vo(d,n,"field2"),getLock:d=>vo(d,n,"lock")}}),Ds=Ec({name:"FormCoupledInputs",configFields:A9(),partFields:D9(),factory:R9,apis:{getField1:(n,s)=>n.getField1(s),getField2:(n,s)=>n.getField2(s),getLock:(n,s)=>n.getLock(s)}}),M9=(n,s)=>{const a=De(n.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=n.data.map(d=>gm("initialValue",d)).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:a,behaviours:ha(n.selectBehaviours,[Zt.config({}),it.config({store:{mode:"manual",getValue:d=>Hc(d.element),setValue:(d,g)=>{const h=so(n.options);vt(n.options,S=>S.value===g).isSome()?cm(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>cm(d.element,S.value))},...i}})])}},bA=Xi({name:"HtmlSelect",configFields:[Be("options"),Ir("selectBehaviours",[Zt,it]),de("selectClasses",[]),de("selectAttributes",{}),to("data")],factory:M9}),SB=(n,s,a,i,d)=>{const g=()=>n.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>j2(),onRtl:()=>H0()}}:{},C=x=>x.length===2,S=x=>C(x)?h:{};return s1.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(In.close(s),n.onEscape.map(x=>x(s)),T.some(!0)),onExecute:()=>T.some(!0),onOpenMenu:(x,_)=>{Ba.positionWithinBounds(g().getOrDie(),_,a,d())},onOpenSubmenu:(x,_,D,P)=>{const F=g().getOrDie();Ba.position(F,D,{anchor:{type:"submenu",item:_,...S(P)}})},onRepositionMenu:(x,_,D)=>{const P=g().getOrDie();Ba.positionWithinBounds(P,_,a,d()),et(D,F=>{const z=S(F.triggeringPath);Ba.position(P,F.triggeredMenu,{anchor:{type:"submenu",item:F.triggeringItem,...z}})})}})},B9=(n,s)=>{const a=(P,F)=>n.getRelated(P).exists(G=>bh(G,F)),i=(P,F)=>{In.setContent(P,F)},d=(P,F,z)=>{const G=T.none;g(P,F,z,G)},g=(P,F,z,G)=>{const J=n.lazySink(P).getOrDie();In.openWhileCloaked(P,F,()=>Ba.positionWithinBounds(J,P,z,G())),it.setValue(P,T.some({mode:"position",config:z,getBounds:G}))},h=(P,F,z)=>{C(P,F,z,T.none)},C=(P,F,z,G)=>{const J=SB(n,P,F,z,G);In.open(P,J),it.setValue(P,T.some({mode:"menu",menu:J}))},S=P=>{In.isOpen(P)&&(it.setValue(P,T.none()),In.close(P))},x=P=>In.getState(P),_=P=>{In.isOpen(P)&&it.getValue(P).each(F=>{switch(F.mode){case"menu":In.getState(P).each(s1.repositionMenus);break;case"position":const z=n.lazySink(P).getOrDie();Ba.positionWithinBounds(z,P,F.config,F.getBounds());break}})},D={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:S,getContent:x,reposition:_,isOpen:In.isOpen};return{uid:n.uid,dom:n.dom,behaviours:ha(n.inlineBehaviours,[In.config({isPartOf:(P,F,z)=>bh(F,z)||a(P,z),getAttachPoint:P=>n.lazySink(P).getOrDie(),onOpen:P=>{n.onShow(P)},onClose:P=>{n.onHide(P)}}),it.config({store:{mode:"memory",initialValue:T.none()}}),Na.config({channels:{...mA({isExtraPart:s.isExtraPart,...n.fireDismissalEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({})}),..._E({...n.fireRepositionEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({}),doReposition:_})}})]),eventOrder:n.eventOrder,apis:D}},rs=Xi({name:"InlineView",configFields:[Be("lazySink"),Nn("onShow"),Nn("onHide"),zi("onEscape"),Ir("inlineBehaviours",[In,it,Na]),qa("fireDismissalEventInstead",[de("event",gd())]),qa("fireRepositionEventInstead",[de("event",gw())]),de("getRelated",T.none),de("isExtraPart",Vn),de("eventOrder",T.none)],factory:B9,apis:{showAt:(n,s,a,i)=>{n.showAt(s,a,i)},showWithinBounds:(n,s,a,i,d)=>{n.showWithinBounds(s,a,i,d)},showMenuAt:(n,s,a,i)=>{n.showMenuAt(s,a,i)},showMenuWithinBounds:(n,s,a,i,d)=>{n.showMenuWithinBounds(s,a,i,d)},hide:(n,s)=>{n.hide(s)},isOpen:(n,s)=>n.isOpen(s),getContent:(n,s)=>n.getContent(s),setContent:(n,s,a)=>{n.setContent(s,a)},reposition:(n,s)=>{n.reposition(s)}}}),vA=ie([ss("type","text"),to("data"),de("inputAttributes",{}),de("inputStyles",{}),de("tag","input"),de("inputClasses",[]),Nn("onSetValue"),xo("fromInputValue",an),xo("toInputValue",an),de("styles",{}),de("eventOrder",{}),Ir("inputBehaviours",[it,Zt]),de("selectOnFocus",!0)]),wB=n=>Ve([Zt.config({onFocus:n.selectOnFocus?s=>{const a=s.element,i=Hc(a);n.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:Y})]),N9=n=>({...wB(n),...ha(n.inputBehaviours,[it.config({store:{mode:"manual",...n.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>n.fromInputValue(Hc(s.element)),setValue:(s,a)=>{Hc(s.element)!==a&&cm(s.element,n.toInputValue(a))}},onSetValue:n.onSetValue})])}),yA=n=>({tag:n.tag,attributes:{type:n.type,...n.inputAttributes},styles:n.inputStyles,classes:n.inputClasses}),xB=(n,s)=>({uid:n.uid,dom:yA(n),components:[],behaviours:N9(n),eventOrder:n.eventOrder}),Fm=Xi({name:"Input",configFields:vA(),factory:xB}),CA=vm(oA(),sA()),P9=(n,s)=>{const a=Or(n,"id").fold(()=>{const i=st("dialog-label");return Pt(s,"id",i),i},an);Pt(n,"aria-labelledby",a)},$9=ie([Be("lazySink"),to("dragBlockClass"),xo("getBounds",Kr),de("useTabstopAt",Dt),de("firstTabstop",0),de("eventOrder",{}),Ir("modalBehaviours",[wt]),Cc("onExecute"),fp("onEscape")]),DE={sketch:an},SA=ie([Aa({name:"draghandle",overrides:(n,s)=>({behaviours:Ve([Zf.config({mode:"mouse",getTarget:a=>Ii(a,'[role="dialog"]').getOr(a),blockerClass:n.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:n.getDragBounds})])})}),fa({schema:[Be("dom")],name:"title"}),fa({factory:DE,schema:[Be("dom")],name:"close"}),fa({factory:DE,schema:[Be("dom")],name:"body"}),Aa({factory:DE,schema:[Be("dom")],name:"footer"}),vi({factory:{sketch:(n,s)=>({...n,dom:s.dom,components:s.components})},schema:[de("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),de("components",[])],name:"blocker"})]),I9=(n,s,a,i)=>{const d=Wt(),g=z=>{d.set(z);const G=n.lazySink(z).getOrDie(),J=i.blocker(),W=G.getSystem().build({...J,components:J.components.concat([p(z)]),behaviours:Ve([Zt.config({}),Ut("dialog-blocker-events",[eh(Vi(),()=>{ce.isBlocked(z)?Y():wt.focusIn(z)})])])});wd(G,W),wt.focusIn(z)},h=z=>{d.clear(),Ua(z.element).each(G=>{z.getSystem().getByDom(G).each(J=>{Ed(J)})})},C=z=>Rl(z,n,"body"),S=z=>vo(z,n,"footer"),x=(z,G)=>{ce.block(z,G)},_=z=>{ce.unblock(z)},D=st("modal-events"),P={...n.eventOrder,[Ol()]:[D].concat(n.eventOrder["alloy.system.attached"]||[])},F=jr();return{uid:n.uid,dom:n.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:S,setIdle:_,setBusy:x},eventOrder:P,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ha(n.modalBehaviours,[Gt.config({}),wt.config({mode:"cyclic",onEnter:n.onExecute,onEscape:n.onEscape,useTabstopAt:n.useTabstopAt,firstTabstop:n.firstTabstop}),ce.config({getRoot:d.get}),Ut(D,[Oo(z=>{const G=Rl(z,n,"title").element,J=g3(G);F.os.isMacOS()&&oo(J)?Pt(z.element,"aria-label",J):P9(z.element,G)})])])}},gr=Ec({name:"ModalDialog",configFields:$9(),partFields:SA(),factory:I9,apis:{show:(n,s)=>{n.show(s)},hide:(n,s)=>{n.hide(s)},getBody:(n,s)=>n.getBody(s),getFooter:(n,s)=>n.getFooter(s),setBusy:(n,s,a)=>{n.setBusy(s,a)},setIdle:(n,s)=>{n.setIdle(s)}}}),L9=Aa({schema:[Be("dom")],name:"label"}),yh=n=>Aa({name:""+n+"-edge",overrides:s=>s.model.manager.edgeActions[n].fold(()=>({}),i=>({events:Uo([Jg(yc(),(d,g,h)=>i(d,h),[s]),Jg(Ka(),(d,g,h)=>i(d,h),[s]),Jg($g(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),F9=yh("top-left"),H9=yh("top"),EB=yh("top-right"),TB=yh("right"),z9=yh("bottom-right"),V9=yh("bottom"),U9=yh("bottom-left"),Si=yh("left"),Pu=fa({name:"thumb",defaults:ie({dom:{styles:{position:"absolute"}}}),overrides:n=>({events:Uo([xu(yc(),n,"spectrum"),xu(ks(),n,"spectrum"),xu(hm(),n,"spectrum"),xu(Ka(),n,"spectrum"),xu($g(),n,"spectrum"),xu(g0(),n,"spectrum")])})}),CC=n=>km(n.event),wA=fa({schema:[Ta("mouseIsDown",()=>pt(!1))],name:"spectrum",overrides:n=>{const a=n.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,n,h));return{behaviours:Ve([wt.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,n,CC(g)),onRight:(d,g)=>a.onRight(d,n,CC(g)),onUp:(d,g)=>a.onUp(d,n,CC(g)),onDown:(d,g)=>a.onDown(d,n,CC(g))}),To.config({}),Zt.config({})]),events:Uo([Te(yc(),i),Te(ks(),i),Te(Ka(),i),Te($g(),(d,g)=>{n.mouseIsDown.get()&&i(d,g)})])}}});var xA=[L9,Si,TB,H9,V9,F9,EB,U9,z9,Pu,wA];const SC=ie("slider.change.value"),kB=n=>n.type.indexOf("touch")!==-1,r1=n=>{const s=n.event.raw;if(kB(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?T.some(a.touches[0]).map(i=>fo(i.clientX,i.clientY)):T.none()}else{const a=s;return a.clientX!==void 0?T.some(a).map(i=>fo(i.clientX,i.clientY)):T.none()}},Z9="top",RE="right",TA="bottom",_B="left",Bd=n=>n.model.minX,a1=n=>n.model.minY,ME=n=>n.model.minX-1,el=n=>n.model.minY-1,na=n=>n.model.maxX,Nd=n=>n.model.maxY,ec=n=>n.model.maxX+1,BE=n=>n.model.maxY+1,ko=(n,s,a)=>s(n)-a(n),kA=n=>ko(n,na,Bd),Pd=n=>ko(n,Nd,a1),Ub=n=>kA(n)/2,_A=n=>Pd(n)/2,Ch=(n,s)=>s?n.stepSize*n.speedMultiplier:n.stepSize,NE=n=>n.snapToGrid,AB=n=>n.snapStart,PE=n=>n.rounded,$E=(n,s)=>n[s+"-edge"]!==void 0,AA=n=>$E(n,_B),OA=n=>$E(n,RE),IE=n=>$E(n,Z9),DA=n=>$E(n,TA),$u=n=>n.model.value.get(),Sh=(n,s)=>({x:n,y:s}),Iu=(n,s)=>{xt(n,SC(),{value:s})},W9=(n,s)=>{Iu(n,Sh(ME(s),el(s)))},j9=(n,s)=>{Iu(n,el(s))},G9=(n,s)=>{Iu(n,Sh(Ub(s),el(s)))},OB=(n,s)=>{Iu(n,Sh(ec(s),el(s)))},q9=(n,s)=>{Iu(n,ec(s))},K9=(n,s)=>{Iu(n,Sh(ec(s),_A(s)))},DB=(n,s)=>{Iu(n,Sh(ec(s),BE(s)))},Y9=(n,s)=>{Iu(n,BE(s))},RB=(n,s)=>{Iu(n,Sh(Ub(s),BE(s)))},wC=(n,s)=>{Iu(n,Sh(ME(s),BE(s)))},X9=(n,s)=>{Iu(n,ME(s))},J9=(n,s)=>{Iu(n,Sh(ME(s),_A(s)))},LE=(n,s,a,i)=>n<s?n:n>a?a:n===s?s-1:Math.max(s,n-i),FE=(n,s,a,i)=>n>a?n:n<s?s:n===a?a+1:Math.min(a,n+i),HE=(n,s,a)=>Math.max(s,Math.min(a,n)),MB=(n,s,a,i,d)=>d.fold(()=>{const g=n-s,h=Math.round(g/i)*i;return HE(s+h,s-1,a+1)},g=>{const h=(n-g)%i,C=Math.round(h/i),S=Math.floor((n-g)/i),x=Math.floor((a-g)/i),_=Math.min(x,S+C),D=g+_*i;return Math.max(g,D)}),Q9=(n,s,a)=>Math.min(a,Math.max(n,s))-s,BB=n=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:C,rounded:S,hasMinEdge:x,hasMaxEdge:_,minBound:D,maxBound:P,screenRange:F}=n,z=x?s-1:s,G=_?a+1:a;if(d<D)return z;if(d>P)return G;{const J=Q9(d,D,P),W=HE(J/F*i+s,z,G);return h&&W>=s&&W<=a?MB(W,s,a,g,C):S?Math.round(W):W}},NB=n=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:S,centerMinEdge:x,centerMaxEdge:_}=n;return d<s?g?0:x:d>a?h?C:_:(d-s)/i*S},RA="top",PB="right",$B="bottom",zE="left",Lu="width",ez="height",Fu=n=>n.element.dom.getBoundingClientRect(),Ul=(n,s)=>n[s],xC=n=>{const s=Fu(n);return Ul(s,zE)},IB=n=>{const s=Fu(n);return Ul(s,PB)},EC=n=>{const s=Fu(n);return Ul(s,RA)},MA=n=>{const s=Fu(n);return Ul(s,$B)},BA=n=>{const s=Fu(n);return Ul(s,Lu)},LB=n=>{const s=Fu(n);return Ul(s,ez)},FB=(n,s,a)=>(n+s)/2-a,HB=(n,s)=>{const a=Fu(n),i=Fu(s),d=Ul(a,zE),g=Ul(a,PB),h=Ul(i,zE);return FB(d,g,h)},zB=(n,s)=>{const a=Fu(n),i=Fu(s),d=Ul(a,RA),g=Ul(a,$B),h=Ul(i,RA);return FB(d,g,h)},VE=(n,s)=>{xt(n,SC(),{value:s})},NA=(n,s,a)=>{const i={min:Bd(s),max:na(s),range:kA(s),value:a,step:Ch(s),snap:NE(s),snapStart:AB(s),rounded:PE(s),hasMinEdge:AA(s),hasMaxEdge:OA(s),minBound:xC(n),maxBound:IB(n),screenRange:BA(n)};return BB(i)},tz=(n,s,a)=>{const i=NA(n,s,a);return VE(n,i),i},VB=(n,s)=>{const a=Bd(s);VE(n,a)},UB=(n,s)=>{const a=na(s);VE(n,a)},ZB=(n,s,a,i)=>{const g=(n>0?FE:LE)($u(a),Bd(a),na(a),Ch(a,i));return VE(s,g),T.some(g)},PA=n=>(s,a,i)=>ZB(n,s,a,i).map(Dt),nz=n=>r1(n).map(a=>a.left),oz=(n,s,a,i,d)=>{const h=BA(n),C=i.bind(_=>T.some(HB(_,n))).getOr(0),S=d.bind(_=>T.some(HB(_,n))).getOr(h),x={min:Bd(s),max:na(s),range:kA(s),value:a,hasMinEdge:AA(s),hasMaxEdge:OA(s),minBound:xC(n),maxBound:IB(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return NB(x)},$A=(n,s,a,i,d,g)=>{const h=oz(s,g,a,i,d);return xC(s)-xC(n)+h},WB=(n,s,a,i)=>{const d=$u(a),g=$A(n,i.getSpectrum(n),d,i.getLeftEdge(n),i.getRightEdge(n),a),h=da(s.element)/2;Ht(s.element,"left",g-h+"px")},Zb=PA(-1),UE=PA(1),sz=T.none,jB=T.none,GB={"top-left":T.none(),top:T.none(),"top-right":T.none(),right:T.some(q9),"bottom-right":T.none(),bottom:T.none(),"bottom-left":T.none(),left:T.some(X9)};var qB=Object.freeze({__proto__:null,setValueFrom:tz,setToMin:VB,setToMax:UB,findValueOfOffset:NA,getValueFromEvent:nz,findPositionOfValue:$A,setPositionFromValue:WB,onLeft:Zb,onRight:UE,onUp:sz,onDown:jB,edgeActions:GB});const TC=(n,s)=>{xt(n,SC(),{value:s})},kC=(n,s,a)=>{const i={min:a1(s),max:Nd(s),range:Pd(s),value:a,step:Ch(s),snap:NE(s),snapStart:AB(s),rounded:PE(s),hasMinEdge:IE(s),hasMaxEdge:DA(s),minBound:EC(n),maxBound:MA(n),screenRange:LB(n)};return BB(i)},IA=(n,s,a)=>{const i=kC(n,s,a);return TC(n,i),i},rz=(n,s)=>{const a=a1(s);TC(n,a)},az=(n,s)=>{const a=Nd(s);TC(n,a)},cz=(n,s,a,i)=>{const g=(n>0?FE:LE)($u(a),a1(a),Nd(a),Ch(a,i));return TC(s,g),T.some(g)},LA=n=>(s,a,i)=>cz(n,s,a,i).map(Dt),KB=n=>r1(n).map(a=>a.top),iz=(n,s,a,i,d)=>{const h=LB(n),C=i.bind(_=>T.some(zB(_,n))).getOr(0),S=d.bind(_=>T.some(zB(_,n))).getOr(h),x={min:a1(s),max:Nd(s),range:Pd(s),value:a,hasMinEdge:IE(s),hasMaxEdge:DA(s),minBound:EC(n),maxBound:MA(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return NB(x)},FA=(n,s,a,i,d,g)=>{const h=iz(s,g,a,i,d);return EC(s)-EC(n)+h},YB=(n,s,a,i)=>{const d=$u(a),g=FA(n,i.getSpectrum(n),d,i.getTopEdge(n),i.getBottomEdge(n),a),h=lr(s.element)/2;Ht(s.element,"top",g-h+"px")},lz=T.none,uz=T.none,dz=LA(-1),mz=LA(1),fz={"top-left":T.none(),top:T.some(j9),"top-right":T.none(),right:T.none(),"bottom-right":T.none(),bottom:T.some(Y9),"bottom-left":T.none(),left:T.none()};var gz=Object.freeze({__proto__:null,setValueFrom:IA,setToMin:rz,setToMax:az,findValueOfOffset:kC,getValueFromEvent:KB,findPositionOfValue:FA,setPositionFromValue:YB,onLeft:lz,onRight:uz,onUp:dz,onDown:mz,edgeActions:fz});const ZE=(n,s)=>{xt(n,SC(),{value:s})},_C=(n,s)=>({x:n,y:s}),XB=(n,s,a)=>{const i=NA(n,s,a.left),d=kC(n,s,a.top),g=_C(i,d);return ZE(n,g),g},hz=(n,s,a,i,d)=>{const g=n>0?FE:LE,h=s?$u(i).x:g($u(i).x,Bd(i),na(i),Ch(i,d)),C=s?g($u(i).y,a1(i),Nd(i),Ch(i,d)):$u(i).y;return ZE(a,_C(h,C)),T.some(h)},WE=(n,s)=>(a,i,d)=>hz(n,s,a,i,d).map(Dt),pz=(n,s)=>{const a=Bd(s),i=a1(s);ZE(n,_C(a,i))},JB=(n,s)=>{const a=na(s),i=Nd(s);ZE(n,_C(a,i))},bz=n=>r1(n),vz=(n,s,a,i)=>{const d=$u(a),g=$A(n,i.getSpectrum(n),d.x,i.getLeftEdge(n),i.getRightEdge(n),a),h=FA(n,i.getSpectrum(n),d.y,i.getTopEdge(n),i.getBottomEdge(n),a),C=da(s.element)/2,S=lr(s.element)/2;Ht(s.element,"left",g-C+"px"),Ht(s.element,"top",h-S+"px")},yz=WE(-1,!1),jE=WE(1,!1),Cz=WE(-1,!0),Sz=WE(1,!0),wz={"top-left":T.some(W9),top:T.some(G9),"top-right":T.some(OB),right:T.some(K9),"bottom-right":T.some(DB),bottom:T.some(RB),"bottom-left":T.some(wC),left:T.some(J9)};var xz=Object.freeze({__proto__:null,setValueFrom:XB,setToMin:pz,setToMax:JB,getValueFromEvent:bz,setPositionFromValue:vz,onLeft:yz,onRight:jE,onUp:Cz,onDown:Sz,edgeActions:wz});const Ez=[de("stepSize",1),de("speedMultiplier",10),de("onChange",Y),de("onChoose",Y),de("onInit",Y),de("onDragStart",Y),de("onDragEnd",Y),de("snapToGrid",!1),de("rounded",!0),to("snapStart"),ja("model",Ea("mode",{x:[de("minX",0),de("maxX",100),Ta("value",n=>pt(n.mode.minX)),Be("getInitialValue"),Kn("manager",qB)],y:[de("minY",0),de("maxY",100),Ta("value",n=>pt(n.mode.minY)),Be("getInitialValue"),Kn("manager",gz)],xy:[de("minX",0),de("maxX",100),de("minY",0),de("maxY",100),Ta("value",n=>pt({x:n.mode.minX,y:n.mode.minY})),Be("getInitialValue"),Kn("manager",xz)]})),Ir("sliderBehaviours",[wt,it]),Ta("mouseIsDown",()=>pt(!1))],Hu=Ec({name:"Slider",configFields:Ez,partFields:xA,factory:(n,s,a,i)=>{const d=be=>Rl(be,n,"thumb"),g=be=>Rl(be,n,"spectrum"),h=be=>vo(be,n,"left-edge"),C=be=>vo(be,n,"right-edge"),S=be=>vo(be,n,"top-edge"),x=be=>vo(be,n,"bottom-edge"),_=n.model,D=_.manager,P=(be,Ke)=>{D.setPositionFromValue(be,Ke,n,{getLeftEdge:h,getRightEdge:C,getTopEdge:S,getBottomEdge:x,getSpectrum:g})},F=(be,Ke)=>{_.value.set(Ke);const Re=d(be);P(be,Re)},z=(be,Ke)=>{F(be,Ke);const Re=d(be);return n.onChange(be,Re,Ke),T.some(!0)},G=be=>{D.setToMin(be,n)},J=be=>{D.setToMax(be,n)},W=be=>{const Ke=()=>{vo(be,n,"thumb").each($e=>{const Ne=_.value.get();n.onChoose(be,$e,Ne)})},Re=n.mouseIsDown.get();n.mouseIsDown.set(!1),Re&&Ke()},ee=(be,Ke)=>{Ke.stop(),n.mouseIsDown.set(!0),n.onDragStart(be,d(be))},re=(be,Ke)=>{Ke.stop(),n.onDragEnd(be,d(be)),W(be)},fe=be=>{vo(be,n,"spectrum").map(wt.focusIn)};return{uid:n.uid,dom:n.dom,components:s,behaviours:ha(n.sliderBehaviours,[wt.config({mode:"special",focusIn:fe}),it.config({store:{mode:"manual",getValue:be=>_.value.get(),setValue:F}}),Na.config({channels:{[Cd()]:{onReceive:W}}})]),events:Uo([Te(SC(),(be,Ke)=>{z(be,Ke.event.value)}),Oo((be,Ke)=>{const Re=_.getInitialValue();_.value.set(Re);const $e=d(be);P(be,$e);const Ne=g(be);n.onInit(be,$e,Ne,_.value.get())}),Te(yc(),ee),Te(hm(),re),Te(Ka(),(be,Ke)=>{fe(be),ee(be,Ke)}),Te(g0(),re)]),apis:{resetToMin:G,resetToMax:J,setValue:F,refresh:P},domModification:{styles:{position:"relative"}}}},apis:{setValue:(n,s,a)=>{n.setValue(s,a)},resetToMin:(n,s)=>{n.resetToMin(s)},resetToMax:(n,s)=>{n.resetToMax(s)},refresh:(n,s)=>{n.refresh(s)}}}),QB="container",Tz=[Ir("slotBehaviours",[])],eN=n=>"<alloy.field."+n+">",kz=n=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),I2(QB,eN(C),S)),record:ie(g)}})(),a=n(s),i=s.record(),d=De(i,g=>fa({name:g,pname:eN(g)}));return r_(QB,Tz,d,_z,a)},_z=(n,s)=>{const a=G=>Zc(n),i=(G,J)=>vo(G,n,J),d=(G,J)=>(W,ee)=>vo(W,n,ee).map(re=>G(re,ee)).getOr(J),g=G=>(J,W)=>{et(W,ee=>G(J,ee))},h=(G,J)=>ir(G.element,"aria-hidden")!=="true",C=(G,J)=>{if(!h(G)){const W=G.element;Cn(W,"display"),Ho(W,"aria-hidden"),xt(G,A2(),{name:J,visible:!0})}},S=(G,J)=>{if(h(G)){const W=G.element;Ht(W,"display","none"),Pt(W,"aria-hidden","true"),xt(G,A2(),{name:J,visible:!1})}},x=d(h,!1),_=d(S),D=g(_),P=G=>D(G,a()),F=d(C),z={getSlotNames:a,getSlot:i,isShowing:x,hideSlot:_,hideAllSlots:P,showSlot:F};return{uid:n.uid,dom:n.dom,components:s,behaviours:oC(n.slotBehaviours),apis:z}},oa={...is({getSlotNames:(n,s)=>n.getSlotNames(s),getSlot:(n,s,a)=>n.getSlot(s,a),isShowing:(n,s,a)=>n.isShowing(s,a),hideSlot:(n,s,a)=>n.hideSlot(s,a),hideAllSlots:(n,s)=>n.hideAllSlots(s),showSlot:(n,s,a)=>n.showSlot(s,a)},n=>Vp(n)),sketch:kz},Az=(n,s)=>So(n,(d,g)=>s(g,d.len).fold(ie(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,HA=(n,s,a)=>({within:n,extra:s,withinWidth:a}),tN=(n,s,a)=>{const i=Az(n,(C,S)=>{const x=a(C);return T.some({element:C,start:S,finish:S+x,width:x})}),d=co(i,C=>C.finish<=s),g=cs(d,(C,S)=>C+S.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},AC=n=>De(n,s=>s.element),Oz=(n,s,a)=>{const i=AC(n.concat(s));return HA(i,[],a)},Dz=(n,s,a,i)=>{const d=AC(n).concat([a]);return HA(d,AC(s),i)},Rz=(n,s,a)=>HA(AC(n),[],a),Mz=(n,s,a)=>{const i=tN(s,n,a);return i.extra.length===0?T.some(i):T.none()},Bz=(n,s,a,i)=>{const d=Mz(n,s,a).getOrThunk(()=>tN(s,n-a(i),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(i)?Oz(g,h,C):h.length>=1?Dz(g,h,i,C):Rz(g,h,C)},nN=(n,s)=>{const a=De(s,i=>p(i));Md.setGroups(n,a)},zA=n=>ca(n,s=>qs(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),oN=(n,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Rl(n,s,"primary"),g=qt.getCoupled(n,"overflowGroup");Ht(d.element,"visibility","hidden");const h=i.concat([g]),C=zA(h);a([]),nN(d,h);const S=da(d.element),x=Bz(S,s.builtGroups.get(),_=>Math.ceil(_.element.dom.getBoundingClientRect().width),g);x.extra.length===0?(Gt.remove(d,g),a([])):(nN(d,x.within),a(x.extra)),Cn(d.element,"visibility"),$i(d.element),C.each(Zt.focus)},sN=ie([Ir("splitToolbarBehaviours",[qt]),Ta("builtGroups",()=>pt([]))]),Nz=ie([_n(["overflowToggledClass"]),zi("getOverflowBounds"),Be("lazySink"),Ta("overflowGroups",()=>pt([])),Nn("onOpened"),Nn("onClosed")].concat(sN())),Pz=ie([fa({factory:Md,schema:zb(),name:"primary"}),vi({schema:zb(),name:"overflow"}),vi({name:"overflow-button"}),vi({name:"overflow-group"})]),$z=ie([Be("items"),_n(["itemSelector"]),Ir("tgroupBehaviours",[wt])]),Iz=ie([R0({name:"items",unit:"item"})]),Lz=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,behaviours:ha(n.tgroupBehaviours,[wt.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),GE=Ec({name:"ToolbarGroup",configFields:$z(),partFields:Iz(),factory:Lz}),rN=n=>De(n,s=>p(s)),aN=(n,s,a)=>{oN(n,a,i=>{a.overflowGroups.set(i),s.getOpt(n).each(d=>{qf.setGroups(d,rN(i))})})},Fz=(n,s,a,i)=>{const d=Un(qf.sketch({fetch:()=>Xo.nu(g=>{g(rN(n.overflowGroups.get()))}),layouts:{onLtr:()=>[Ls,Js],onRtl:()=>[Js,Ls],onBottomLtr:()=>[vr,$r],onBottomRtl:()=>[$r,vr]},getBounds:a.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>n[h?"onOpened":"onClosed"](g)}));return{uid:n.uid,dom:n.dom,components:s,behaviours:ha(n.splitToolbarBehaviours,[qt.config({others:{overflowGroup:()=>GE.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{n.builtGroups.set(De(h,g.getSystem().build)),aN(g,d,n)},refresh:g=>aN(g,d,n),toggle:g=>{d.getOpt(g).each(h=>{qf.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(qf.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(qf.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{qf.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(qf.getToolbar)},domModification:{attributes:{role:"group"}}}},cN=Ec({name:"SplitFloatingToolbar",configFields:Nz(),partFields:Pz(),factory:Fz,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s),getOverflow:(n,s)=>n.getOverflow(s)}}),Hz=ie([_n(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Nn("onOpened"),Nn("onClosed")].concat(sN())),zz=ie([fa({factory:Md,schema:zb(),name:"primary"}),fa({factory:Md,schema:zb(),name:"overflow",overrides:n=>({toolbarBehaviours:Ve([Qa.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:s=>{vo(s,n,"overflow-button").each(a=>{Sn.off(a)}),n.onClosed(s)},onGrown:s=>{n.onOpened(s)},onStartGrow:s=>{vo(s,n,"overflow-button").each(Sn.on)}}),wt.config({mode:"acyclic",onEscape:s=>(vo(s,n,"overflow-button").each(Zt.focus),T.some(!0))})])})}),vi({name:"overflow-button",overrides:n=>({buttonBehaviours:Ve([Sn.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),vi({name:"overflow-group"})]),Vz=(n,s)=>vo(n,s,"overflow").map(Qa.hasGrown).getOr(!1),OC=(n,s,a)=>{vo(n,s,"overflow-button").each(i=>{vo(n,s,"overflow").each(d=>{if(VA(n,s),Qa.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||wt.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||Zt.focus(i),g(h),s.onClosed=g}}Qa.toggleGrow(d)})})},VA=(n,s)=>{vo(n,s,"overflow").each(a=>{oN(n,s,i=>{const d=De(i,g=>p(g));Md.setGroups(a,d)}),vo(n,s,"overflow-button").each(i=>{Qa.hasGrown(a)&&Sn.on(i)}),Qa.refresh(a)})},Uz=(n,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const S=De(C,h.getSystem().build);n.builtGroups.set(S)};return{uid:n.uid,dom:n.dom,components:s,behaviours:ha(n.splitToolbarBehaviours,[qt.config({others:{overflowGroup:h=>GE.sketch({...i["overflow-group"](),items:[fr.sketch({...i["overflow-button"](),action:C=>{fn(h,d)}})]})}}),Ut("toolbar-toggle-events",[Te(d,h=>{OC(h,n,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),VA(h,n)},refresh:h=>VA(h,n),toggle:h=>{OC(h,n,!1)},toggleWithoutFocusing:h=>{OC(h,n,!0)},isOpen:h=>Vz(h,n)},domModification:{attributes:{role:"group"}}}},UA=Ec({name:"SplitSlidingToolbar",configFields:Hz(),partFields:zz(),factory:Uz,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},toggle:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s)}}),DC=(n,s)=>({uid:n.uid,dom:n.dom,components:n.components,events:X_(n.action),behaviours:ha(n.tabButtonBehaviours,[Zt.config({}),wt.config({mode:"execution",useSpace:!0,useEnter:!0}),it.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification}),iN=Xi({name:"TabButton",configFields:[de("uid",void 0),Be("value"),dr("dom","dom",ud(()=>({attributes:{role:"tab",id:st("aria"),"aria-selected":"false"}})),fi()),to("action"),de("domModification",{}),Ir("tabButtonBehaviours",[Zt,wt,it]),Be("view")],factory:DC}),Zz=ie([Be("tabs"),Be("dom"),de("clickToDismiss",!1),Ir("tabbarBehaviours",[zn,wt]),_n(["tabClass","selectedClass"])]),Wz=R0({factory:iN,name:"tabs",unit:"tab",overrides:n=>{const s=(i,d)=>{zn.dehighlight(i,d),xt(i,S0(),{tabbar:i,button:d})},a=(i,d)=>{zn.highlight(i,d),xt(i,O2(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(n.uid).getOrDie(),g=zn.isHighlighted(d,i);(g&&n.clickToDismiss?s:g?Y:a)(d,i)},domModification:{classes:[n.markers.tabClass]}}}}),lN=ie([Wz]),jz=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ha(n.tabbarBehaviours,[zn.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:(d,g)=>{Pt(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Pt(g.element,"aria-selected","false")}}),wt.config({mode:"flow",getInitial:d=>zn.getHighlighted(d).map(g=>g.element),selector:"."+n.markers.tabClass,executeOnMove:!0})])}),uN=Ec({name:"Tabbar",configFields:Zz(),partFields:lN(),factory:jz}),Gz=(n,s)=>({uid:n.uid,dom:n.dom,behaviours:ha(n.tabviewBehaviours,[Gt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),qz=Xi({name:"Tabview",configFields:[Ir("tabviewBehaviours",[Gt])],factory:Gz}),Kz=ie([de("selectFirst",!0),Nn("onChangeTab"),Nn("onDismissTab"),de("tabs",[]),Ir("tabSectionBehaviours",[])]),Yz=fa({factory:uN,schema:[Be("dom"),vu("markers",[Be("tabClass"),Be("selectedClass")])],name:"tabbar",defaults:n=>({tabs:n.tabs})}),Xz=fa({factory:qz,name:"tabview"}),Jz=ie([Yz,Xz]),dN=(n,s,a,i)=>{const d=h=>{const C=it.getValue(h);vo(h,n,"tabview").each(S=>{vt(n.tabs,_=>_.value===C).each(_=>{const D=_.view();Or(h.element,"id").each(P=>{Pt(S.element,"aria-labelledby",P)}),Gt.set(S,D),n.onChangeTab(S,h,D)})})},g=(h,C)=>{vo(h,n,"tabbar").each(S=>{C(S).each(Xg)})};return{uid:n.uid,dom:n.dom,components:s,behaviours:oC(n.tabSectionBehaviours),events:Uo(Mt([n.selectFirst?[Oo((h,C)=>{g(h,zn.getFirst)})]:[],[Te(O2(),(h,C)=>{const S=C.event.button;d(S)}),Te(S0(),(h,C)=>{const S=C.event.button;n.onDismissTab(h,S)})]])),apis:{getViewItems:h=>vo(h,n,"tabview").map(C=>Gt.contents(C)).getOr([]),showTab:(h,C)=>{g(h,x=>{const _=zn.getCandidates(x);return vt(_,P=>it.getValue(P)===C).filter(P=>!zn.isHighlighted(x,P))})}}}},c1=Ec({name:"TabSection",configFields:Kz(),partFields:Jz(),factory:dN,apis:{getViewItems:(n,s)=>n.getViewItems(s),showTab:(n,s,a)=>{n.showTab(s,a)}}}),qE=(n,s,a)=>{const i=it.getValue(a);it.setValue(s,i),WA(s)},ZA=(n,s)=>{const a=n.element,i=Hc(a),d=a.dom;ir(a,"type")!=="number"&&s(d,i)},WA=n=>{ZA(n,(s,a)=>s.setSelectionRange(a.length,a.length))},mN=(n,s)=>{ZA(n,(a,i)=>a.setSelectionRange(s,i.length))},fN=(n,s,a)=>{if(n.selectsOver){const i=it.getValue(s),d=n.getDisplayText(i),g=it.getValue(a);return n.getDisplayText(g).indexOf(d)===0?T.some(()=>{qE(n,s,a),mN(s,d.length)}):T.none()}else return T.none()},jA=ie("alloy.typeahead.itemexecute"),Qz=(n,s,a,i)=>{const d=(D,P,F)=>{n.previewing.set(!1);const z=qt.getCoupled(D,"sandbox");if(In.isOpen(z))Le.getCurrent(z).each(G=>{zn.getHighlighted(G).fold(()=>{F(G)},()=>{Y2(z,G.element,"keydown",P)})});else{const G=J=>{Le.getCurrent(J).each(F)};AE(n,h(D),D,z,i,G,Jr.HighlightMenuAndItem).get(Y)}},g=wB(n),h=D=>P=>P.map(F=>{const z=ic(F.menus),G=le(z,W=>co(W.items,ee=>ee.type==="item"));return it.getState(D).update(De(G,W=>W.data)),F}),C=D=>Le.getCurrent(D),S="typeaheadevents",x=[Zt.config({}),it.config({onSetValue:n.onSetValue,store:{mode:"dataset",getDataKey:D=>Hc(D.element),getFallbackEntry:D=>({value:D,meta:{}}),setValue:(D,P)=>{cm(D.element,n.model.getDisplayText(P))},...n.initialData.map(D=>gm("initialValue",D)).getOr({})}}),Fb.config({stream:{mode:"throttle",delay:n.responseTime,stopEvent:!1},onStream:(D,P)=>{const F=qt.getCoupled(D,"sandbox");if(Zt.isFocused(D)&&Hc(D.element).length>=n.minChars){const G=C(F).bind(W=>zn.getHighlighted(W).map(it.getValue));n.previewing.set(!0);const J=W=>{C(F).each(ee=>{G.fold(()=>{n.model.selectsOver&&zn.highlightFirst(ee)},re=>{zn.highlightBy(ee,fe=>it.getValue(fe).value===re.value),zn.getHighlighted(ee).orThunk(()=>(zn.highlightFirst(ee),T.none()))})})};AE(n,h(D),D,F,i,J,Jr.HighlightJustMenu).get(Y)}},cancelEvent:y0()}),wt.config({mode:"special",onDown:(D,P)=>(d(D,P,zn.highlightFirst),T.some(!0)),onEscape:D=>{const P=qt.getCoupled(D,"sandbox");return In.isOpen(P)?(In.close(P),T.some(!0)):T.none()},onUp:(D,P)=>(d(D,P,zn.highlightLast),T.some(!0)),onEnter:D=>{const P=qt.getCoupled(D,"sandbox"),F=In.isOpen(P);if(F&&!n.previewing.get())return C(P).bind(z=>zn.getHighlighted(z)).map(z=>(xt(D,jA(),{item:z}),!0));{const z=it.getValue(D);return fn(D,y0()),n.onExecute(P,D,z),F&&In.close(P),T.some(!0)}}}),Sn.config({toggleClass:n.markers.openClass,aria:{mode:"expanded"}}),qt.config({others:{sandbox:D=>fB(n,D,{onOpen:()=>Sn.on(D),onClose:()=>{n.lazyTypeaheadComp.get().each(P=>Ho(P.element,"aria-activedescendant")),Sn.off(D)}})}}),Ut(S,[Oo(D=>{n.lazyTypeaheadComp.set(T.some(D))}),Gi(D=>{n.lazyTypeaheadComp.set(T.none())}),Tm(D=>{const P=Y;OE(n,h(D),D,i,P,Jr.HighlightMenuAndItem).get(Y)}),Te(jA(),(D,P)=>{const F=qt.getCoupled(D,"sandbox");qE(n.model,D,P.event.item),fn(D,y0()),n.onItemExecute(D,F,P.event.item,it.getValue(D)),In.close(F),WA(D)})].concat(n.dismissOnBlur?[Te(Lg(),D=>{const P=qt.getCoupled(D,"sandbox");qs(P.element).isNone()&&In.close(P)})]:[]))],_={[bi()]:[it.name(),Fb.name(),S],...n.eventOrder};return{uid:n.uid,dom:yA(uo(n,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...ha(n.typeaheadBehaviours,x)},eventOrder:_}},eV=ie([to("lazySink"),Be("fetch"),de("minChars",5),de("responseTime",1e3),Nn("onOpen"),de("getHotspot",T.some),de("getAnchorOverrides",ie({})),de("layouts",T.none()),de("eventOrder",{}),fm("model",{},[de("getDisplayText",n=>n.meta!==void 0&&n.meta.text!==void 0?n.meta.text:n.value),de("selectsOver",!0),de("populateFromBrowse",!0)]),Nn("onSetValue"),Cc("onExecute"),Nn("onItemExecute"),de("inputClasses",[]),de("inputAttributes",{}),de("inputStyles",{}),de("matchWidth",!0),de("useMinWidth",!1),de("dismissOnBlur",!0),_n(["openClass"]),to("initialData"),to("listRole"),Ir("typeaheadBehaviours",[Zt,it,Fb,wt,Sn,qt]),Ta("lazyTypeaheadComp",()=>pt(T.none)),Ta("previewing",()=>pt(!0))].concat(vA()).concat(fA())),tV=ie([vi({schema:[yw()],name:"menu",overrides:n=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{n.previewing.get()?n.lazyTypeaheadComp.get().each(d=>{fN(n.model,d,i).fold(()=>{n.model.selectsOver?(zn.dehighlight(a,i),n.previewing.set(!0)):n.previewing.set(!1)},g=>{g(),n.previewing.set(!1)})}):n.lazyTypeaheadComp.get().each(d=>{n.model.populateFromBrowse&&qE(n.model,d,i),Or(i.element,"id").each(g=>Pt(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>n.lazyTypeaheadComp.get().map(i=>(xt(i,jA(),{item:a}),!0)),onHover:(s,a)=>{n.previewing.set(!1),n.lazyTypeaheadComp.get().each(i=>{n.model.populateFromBrowse&&qE(n.model,i,a)})}})})]),GA=Ec({name:"Typeahead",configFields:eV(),partFields:tV(),factory:Qz});var gN=tinymce.util.Tools.resolve("tinymce.ThemeManager"),KE=tinymce.util.Tools.resolve("tinymce.util.Delay"),Wb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),nV=tinymce.util.Tools.resolve("tinymce.EditorManager"),jb=tinymce.util.Tools.resolve("tinymce.Env"),tl;(function(n){n.default="wrap",n.floating="floating",n.sliding="sliding",n.scrolling="scrolling"})(tl||(tl={}));var Gb;(function(n){n.auto="auto",n.top="top",n.bottom="bottom"})(Gb||(Gb={}));const ho=n=>s=>s.options.get(n),qb=n=>s=>T.from(n(s)),hN=n=>{const s=jb.deviceType.isPhone(),a=jb.deviceType.isTablet()||s,i=n.options.register,d=h=>Et(h)||h===!1,g=h=>Et(h)||Fa(h);i("skin",{processor:h=>Et(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(n.getElement().offsetHeight,400)}),i("width",{processor:g,default:Wb.DOM.getStyle(n.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>Et(h)||xr(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>xr(h)||Et(h)||ra(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Io(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Gb.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:n.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||xr(h),default:!jb.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:n.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},pN=ho("readonly"),YE=ho("disabled"),qA=ho("height"),KA=ho("width"),YA=qb(ho("min_width")),XA=qb(ho("min_height")),XE=qb(ho("max_width")),JA=qb(ho("max_height")),bN=qb(ho("style_formats")),vN=ho("style_formats_merge"),QA=ho("style_formats_autohide"),yN=ho("content_langs"),CN=ho("removed_menuitems"),i1=ho("toolbar_mode"),SN=ho("toolbar_groups"),eO=ho("toolbar_location"),JE=ho("fixed_toolbar_container"),wN=ho("fixed_toolbar_container_target"),xN=ho("toolbar_persist"),EN=ho("toolbar_sticky_offset"),TN=ho("menubar"),QE=ho("toolbar"),kN=ho("file_picker_callback"),_N=ho("file_picker_validator_handler"),e4=ho("font_size_input_default_unit"),tO=ho("file_picker_types"),nO=ho("typeahead_urls"),AN=ho("anchor_top"),oO=ho("anchor_bottom"),ON=ho("draggable_modal"),DN=ho("statusbar"),RN=ho("elementpath"),sO=ho("branding"),MN=ho("resize"),BN=ho("paste_as_text"),NN=ho("sidebar_show"),PN=ho("promotion"),$N=ho("help_accessibility"),IN=ho("default_font_stack"),RC=ho("skin"),MC=n=>n.options.get("skin")===!1,Kb=n=>n.options.get("menubar")!==!1,rO=n=>{const s=n.options.get("skin_url");if(MC(n))return s;if(s)return n.documentBaseURI.toAbsolute(s);{const a=n.options.get("skin");return nV.baseURL+"/skins/ui/"+a}},oV=n=>T.from(n.options.get("skin_url")),LN=n=>n.options.get("line_height_formats").split(" "),Yb=n=>{const s=QE(n),a=Et(s),i=ra(s)&&s.length>0;return!wh(n)&&(i||a||s===!0)},BC=n=>{const s=Io(9,i=>n.options.get("toolbar"+(i+1))),a=co(s,Et);return va(a.length>0,a)},wh=n=>BC(n).fold(()=>{const s=QE(n);return ac(s,Et)&&s.length>0},Dt),t4=n=>eO(n)===Gb.bottom,FN=n=>{if(!n.inline)return T.none();const s=JE(n)??"";if(s.length>0)return io(Fc(),s);const a=wN(n);return oo(a)?T.some(We.fromDom(a)):T.none()},Xb=n=>n.inline&&FN(n).isSome(),aO=n=>FN(n).getOrThunk(()=>yl(Gs(We.fromDom(n.getElement())))),cO=n=>n.inline&&!Kb(n)&&!Yb(n)&&!wh(n),Jb=n=>(n.options.get("toolbar_sticky")||n.inline)&&!Xb(n)&&!cO(n),xh=n=>!Xb(n)&&n.options.get("ui_mode")==="split",HN=n=>{const s=n.options.get("menu");return is(s,a=>({...a,items:a.items}))};var sV=Object.freeze({__proto__:null,get ToolbarMode(){return tl},get ToolbarLocation(){return Gb},register:hN,getSkinUrl:rO,getSkinUrlOption:oV,isReadOnly:pN,isDisabled:YE,getSkin:RC,isSkinDisabled:MC,getHeightOption:qA,getWidthOption:KA,getMinWidthOption:YA,getMinHeightOption:XA,getMaxWidthOption:XE,getMaxHeightOption:JA,getUserStyleFormats:bN,shouldMergeStyleFormats:vN,shouldAutoHideStyleFormats:QA,getLineHeightFormats:LN,getContentLanguages:yN,getRemovedMenuItems:CN,isMenubarEnabled:Kb,isMultipleToolbars:wh,isToolbarEnabled:Yb,isToolbarPersist:xN,getMultipleToolbarsOption:BC,getUiContainer:aO,useFixedContainer:Xb,isSplitUiMode:xh,getToolbarMode:i1,isDraggableModal:ON,isDistractionFree:cO,isStickyToolbar:Jb,getStickyToolbarOffset:EN,getToolbarLocation:eO,isToolbarLocationBottom:t4,getToolbarGroups:SN,getMenus:HN,getMenubar:TN,getToolbar:QE,getFilePickerCallback:kN,getFilePickerTypes:tO,useTypeaheadUrls:nO,getAnchorTop:AN,getAnchorBottom:oO,getFilePickerValidatorHandler:_N,getFontSizeInputDefaultUnit:e4,useStatusBar:DN,useElementPath:RN,promotionEnabled:PN,useBranding:sO,getResize:MN,getPasteAsText:BN,getSidebarShow:NN,useHelpAccessibility:$N,getDefaultFontStack:IN});const rV=["visible","hidden","clip"],zN=n=>ot(n).length>0&&!ao(rV,n),VN=n=>{if(q(n)){const s=zo(n,"overflow-x"),a=zo(n,"overflow-y");return zN(s)||zN(a)}else return!1},UN=n=>n.plugins.fullscreen&&n.plugins.fullscreen.isFullscreen(),aV=(n,s)=>{const a=ur(s,VN),i=a.length===0?bs(s).map(Qn).map(d=>ur(d,VN)).getOr([]):a;return so(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>UN(n)}))},Kf=(n,s)=>xh(n)?aV(n,s):T.none(),l1=n=>{const s=[...De(n.others,Is),Kr()];return n.isFullscreen()?Kr():l2(Is(n.element),s)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:ZN,setPrototypeOf:$d,isFrozen:cV,getPrototypeOf:iV,getOwnPropertyDescriptor:iO}=Object;let{freeze:Ro,seal:zu,create:WN}=Object,{apply:lO,construct:uO}=typeof Reflect<"u"&&Reflect;Ro||(Ro=function(s){return s}),zu||(zu=function(s){return s}),lO||(lO=function(s,a,i){return s.apply(a,i)}),uO||(uO=function(s,a){return new s(...a)});const n4=xi(Array.prototype.forEach),lV=xi(Array.prototype.lastIndexOf),jN=xi(Array.prototype.pop),NC=xi(Array.prototype.push),uV=xi(Array.prototype.splice),o4=xi(String.prototype.toLowerCase),dO=xi(String.prototype.toString),GN=xi(String.prototype.match),PC=xi(String.prototype.replace),dV=xi(String.prototype.indexOf),mV=xi(String.prototype.trim),Id=xi(Object.prototype.hasOwnProperty),wi=xi(RegExp.prototype.test),$C=fV(TypeError);function xi(n){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return lO(n,s,i)}}function fV(n){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return uO(n,a)}}function Mo(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o4;$d&&$d(n,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=a(d);g!==d&&(cV(s)||(s[i]=g),d=g)}n[d]=!0}return n}function gV(n){for(let s=0;s<n.length;s++)Id(n,s)||(n[s]=null);return n}function Yf(n){const s=WN(null);for(const[a,i]of ZN(n))Id(n,a)&&(Array.isArray(i)?s[a]=gV(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=Yf(i):s[a]=i);return s}function IC(n,s){for(;n!==null;){const i=iO(n,s);if(i){if(i.get)return xi(i.get);if(typeof i.value=="function")return xi(i.value)}n=iV(n)}function a(){return null}return a}const qN=Ro(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),s4=Ro(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),mO=Ro(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),KN=Ro(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fO=Ro(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),YN=Ro(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),XN=Ro(["#text"]),gO=Ro(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),hO=Ro(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),JN=Ro(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),r4=Ro(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hV=zu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pV=zu(/<%[\w\W]*|[\w\W]*%>/gm),bV=zu(/\$\{[\w\W]*/gm),vV=zu(/^data-[\-\w.\u00B7-\uFFFF]+$/),yV=zu(/^aria-[\-\w]+$/),QN=zu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),CV=zu(/^(?:\w+script|data):/i),SV=zu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eP=zu(/^html$/i),wV=zu(/^[a-z][.\w]*(-[.\w]+)+$/i);var pO=Object.freeze({__proto__:null,ARIA_ATTR:yV,ATTR_WHITESPACE:SV,CUSTOM_ELEMENT:wV,DATA_ATTR:vV,DOCTYPE_NAME:eP,ERB_EXPR:pV,IS_ALLOWED_URI:QN,IS_SCRIPT_OR_DATA:CV,MUSTACHE_EXPR:hV,TMPLIT_EXPR:bV});const LC={element:1,text:3,progressingInstruction:7,comment:8,document:9},xV=function(){return typeof window>"u"?null:window},EV=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},tP=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function nP(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xV();const s=bn=>nP(bn);if(s.version="3.2.6",s.removed=[],!n||!n.document||n.document.nodeType!==LC.document||!n.Element)return s.isSupported=!1,s;let{document:a}=n;const i=a,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:S,NodeFilter:x,NamedNodeMap:_=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:D,DOMParser:P,trustedTypes:F}=n,z=S.prototype,G=IC(z,"cloneNode"),J=IC(z,"remove"),W=IC(z,"nextSibling"),ee=IC(z,"childNodes"),re=IC(z,"parentNode");if(typeof h=="function"){const bn=a.createElement("template");bn.content&&bn.content.ownerDocument&&(a=bn.content.ownerDocument)}let fe,be="";const{implementation:Ke,createNodeIterator:Re,createDocumentFragment:$e,getElementsByTagName:Ne}=a,{importNode:Tt}=i;let gt=tP();s.isSupported=typeof ZN=="function"&&typeof re=="function"&&Ke&&Ke.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:sn,ERB_EXPR:_t,TMPLIT_EXPR:Xt,DATA_ATTR:ht,ARIA_ATTR:Ae,IS_SCRIPT_OR_DATA:Ze,ATTR_WHITESPACE:$t,CUSTOM_ELEMENT:Jt}=pO;let{IS_ALLOWED_URI:Ct}=pO,Kt=null;const ro=Mo({},[...qN,...s4,...mO,...fO,...XN]);let Pn=null;const nc=Mo({},[...gO,...hO,...JN,...r4]);let Go=Object.seal(WN(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Yc=null,Hr=null,$a=!0,Xc=!0,Xl=!1,Ph=!0,Km=!1,M1=!0,ag=!1,RS=!1,_5=!1,$h=!1,Ov=!1,FT=!1,A5=!0,ZL=!1;const rY="user-content-";let HT=!0,MS=!1,ju={},B1=null;const WL=Mo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let BS=null;const N1=Mo({},["audio","video","img","source","image","track"]);let Dv=null;const O5=Mo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),P1="http://www.w3.org/1998/Math/MathML",Ia="http://www.w3.org/2000/svg",Gu="http://www.w3.org/1999/xhtml";let $1=Gu,zT=!1,D5=null;const aY=Mo({},[P1,Ia,Gu],dO);let Zd=Mo({},["mi","mo","mn","ms","mtext"]),R5=Mo({},["annotation-xml"]);const cY=Mo({},["title","style","font","a","script"]);let Rv=null;const Mv=["application/xhtml+xml","text/html"],VT="text/html";let La=null,Bv=null;const iY=a.createElement("form"),jL=function(e){return e instanceof RegExp||e instanceof Function},M5=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Bv&&Bv===e)){if((!e||typeof e!="object")&&(e={}),e=Yf(e),Rv=Mv.indexOf(e.PARSER_MEDIA_TYPE)===-1?VT:e.PARSER_MEDIA_TYPE,La=Rv==="application/xhtml+xml"?dO:o4,Kt=Id(e,"ALLOWED_TAGS")?Mo({},e.ALLOWED_TAGS,La):ro,Pn=Id(e,"ALLOWED_ATTR")?Mo({},e.ALLOWED_ATTR,La):nc,D5=Id(e,"ALLOWED_NAMESPACES")?Mo({},e.ALLOWED_NAMESPACES,dO):aY,Dv=Id(e,"ADD_URI_SAFE_ATTR")?Mo(Yf(O5),e.ADD_URI_SAFE_ATTR,La):O5,BS=Id(e,"ADD_DATA_URI_TAGS")?Mo(Yf(N1),e.ADD_DATA_URI_TAGS,La):N1,B1=Id(e,"FORBID_CONTENTS")?Mo({},e.FORBID_CONTENTS,La):WL,Yc=Id(e,"FORBID_TAGS")?Mo({},e.FORBID_TAGS,La):Yf({}),Hr=Id(e,"FORBID_ATTR")?Mo({},e.FORBID_ATTR,La):Yf({}),ju=Id(e,"USE_PROFILES")?e.USE_PROFILES:!1,$a=e.ALLOW_ARIA_ATTR!==!1,Xc=e.ALLOW_DATA_ATTR!==!1,Xl=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ph=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Km=e.SAFE_FOR_TEMPLATES||!1,M1=e.SAFE_FOR_XML!==!1,ag=e.WHOLE_DOCUMENT||!1,$h=e.RETURN_DOM||!1,Ov=e.RETURN_DOM_FRAGMENT||!1,FT=e.RETURN_TRUSTED_TYPE||!1,_5=e.FORCE_BODY||!1,A5=e.SANITIZE_DOM!==!1,ZL=e.SANITIZE_NAMED_PROPS||!1,HT=e.KEEP_CONTENT!==!1,MS=e.IN_PLACE||!1,Ct=e.ALLOWED_URI_REGEXP||QN,$1=e.NAMESPACE||Gu,Zd=e.MATHML_TEXT_INTEGRATION_POINTS||Zd,R5=e.HTML_INTEGRATION_POINTS||R5,Go=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&jL(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Go.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&jL(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Go.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Go.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Km&&(Xc=!1),Ov&&($h=!0),ju&&(Kt=Mo({},XN),Pn=[],ju.html===!0&&(Mo(Kt,qN),Mo(Pn,gO)),ju.svg===!0&&(Mo(Kt,s4),Mo(Pn,hO),Mo(Pn,r4)),ju.svgFilters===!0&&(Mo(Kt,mO),Mo(Pn,hO),Mo(Pn,r4)),ju.mathMl===!0&&(Mo(Kt,fO),Mo(Pn,JN),Mo(Pn,r4))),e.ADD_TAGS&&(Kt===ro&&(Kt=Yf(Kt)),Mo(Kt,e.ADD_TAGS,La)),e.ADD_ATTR&&(Pn===nc&&(Pn=Yf(Pn)),Mo(Pn,e.ADD_ATTR,La)),e.ADD_URI_SAFE_ATTR&&Mo(Dv,e.ADD_URI_SAFE_ATTR,La),e.FORBID_CONTENTS&&(B1===WL&&(B1=Yf(B1)),Mo(B1,e.FORBID_CONTENTS,La)),HT&&(Kt["#text"]=!0),ag&&Mo(Kt,["html","head","body"]),Kt.table&&(Mo(Kt,["tbody"]),delete Yc.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw $C('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw $C('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');fe=e.TRUSTED_TYPES_POLICY,be=fe.createHTML("")}else fe===void 0&&(fe=EV(F,d)),fe!==null&&typeof be=="string"&&(be=fe.createHTML(""));Ro&&Ro(e),Bv=e}},I1=Mo({},[...s4,...mO,...KN]),lY=Mo({},[...fO,...YN]),uY=function(e){let t=re(e);(!t||!t.tagName)&&(t={namespaceURI:$1,tagName:"template"});const o=o4(e.tagName),r=o4(t.tagName);return D5[e.namespaceURI]?e.namespaceURI===Ia?t.namespaceURI===Gu?o==="svg":t.namespaceURI===P1?o==="svg"&&(r==="annotation-xml"||Zd[r]):!!I1[o]:e.namespaceURI===P1?t.namespaceURI===Gu?o==="math":t.namespaceURI===Ia?o==="math"&&R5[r]:!!lY[o]:e.namespaceURI===Gu?t.namespaceURI===Ia&&!R5[r]||t.namespaceURI===P1&&!Zd[r]?!1:!lY[o]&&(cY[o]||!I1[o]):!!(Rv==="application/xhtml+xml"&&D5[e.namespaceURI]):!1},Ym=function(e){NC(s.removed,{element:e});try{re(e).removeChild(e)}catch{J(e)}},NS=function(e,t){try{NC(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch{NC(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e==="is")if($h||Ov)try{Ym(t)}catch{}else try{t.setAttribute(e,"")}catch{}},GL=function(e){let t=null,o=null;if(_5)e="<remove></remove>"+e;else{const u=GN(e,/^[\r\n\t ]+/);o=u&&u[0]}Rv==="application/xhtml+xml"&&$1===Gu&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=fe?fe.createHTML(e):e;if($1===Gu)try{t=new P().parseFromString(r,Rv)}catch{}if(!t||!t.documentElement){t=Ke.createDocument($1,"template",null);try{t.documentElement.innerHTML=zT?be:r}catch{}}const c=t.body||t.documentElement;return e&&o&&c.insertBefore(a.createTextNode(o),c.childNodes[0]||null),$1===Gu?Ne.call(t,ag?"html":"body")[0]:ag?t.documentElement:c},qL=function(e){return Re.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},L1=function(e){return e instanceof D&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof _)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},KL=function(e){return typeof C=="function"&&e instanceof C};function cg(bn,e,t){n4(bn,o=>{o.call(s,e,t,Bv)})}const B5=function(e){let t=null;if(cg(gt.beforeSanitizeElements,e,null),L1(e))return Ym(e),!0;const o=La(e.nodeName);if(cg(gt.uponSanitizeElement,e,{tagName:o,allowedTags:Kt}),M1&&e.hasChildNodes()&&!KL(e.firstElementChild)&&wi(/<[/\w!]/g,e.innerHTML)&&wi(/<[/\w!]/g,e.textContent)||e.nodeType===LC.progressingInstruction||M1&&e.nodeType===LC.comment&&wi(/<[/\w]/g,e.data))return Ym(e),!0;if(!Kt[o]||Yc[o]){if(!Yc[o]&&dY(o)&&(Go.tagNameCheck instanceof RegExp&&wi(Go.tagNameCheck,o)||Go.tagNameCheck instanceof Function&&Go.tagNameCheck(o)))return!1;if(HT&&!B1[o]){const r=re(e)||e.parentNode,c=ee(e)||e.childNodes;if(c&&r){const u=c.length;for(let f=u-1;f>=0;--f){const b=G(c[f],!0);b.__removalCount=(e.__removalCount||0)+1,r.insertBefore(b,W(e))}}}return Ym(e),!0}return e instanceof S&&!uY(e)||(o==="noscript"||o==="noembed"||o==="noframes")&&wi(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ym(e),!0):(Km&&e.nodeType===LC.text&&(t=e.textContent,n4([sn,_t,Xt],r=>{t=PC(t,r," ")}),e.textContent!==t&&(NC(s.removed,{element:e.cloneNode()}),e.textContent=t)),cg(gt.afterSanitizeElements,e,null),!1)},YL=function(e,t,o){if(A5&&(t==="id"||t==="name")&&(o in a||o in iY))return!1;if(!(Xc&&!Hr[t]&&wi(ht,t))){if(!($a&&wi(Ae,t))){if(!Pn[t]||Hr[t]){if(!(dY(e)&&(Go.tagNameCheck instanceof RegExp&&wi(Go.tagNameCheck,e)||Go.tagNameCheck instanceof Function&&Go.tagNameCheck(e))&&(Go.attributeNameCheck instanceof RegExp&&wi(Go.attributeNameCheck,t)||Go.attributeNameCheck instanceof Function&&Go.attributeNameCheck(t))||t==="is"&&Go.allowCustomizedBuiltInElements&&(Go.tagNameCheck instanceof RegExp&&wi(Go.tagNameCheck,o)||Go.tagNameCheck instanceof Function&&Go.tagNameCheck(o))))return!1}else if(!Dv[t]){if(!wi(Ct,PC(o,$t,""))){if(!((t==="src"||t==="xlink:href"||t==="href")&&e!=="script"&&dV(o,"data:")===0&&BS[e])){if(!(Xl&&!wi(Ze,PC(o,$t,"")))){if(o)return!1}}}}}}return!0},dY=function(e){return e!=="annotation-xml"&&GN(e,Jt)},Jl=function(e){cg(gt.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||L1(e))return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Pn,forceKeepAttr:void 0};let r=t.length;for(;r--;){const c=t[r],{name:u,namespaceURI:f,value:b}=c,v=La(u),w=b;let k=u==="value"?w:mV(w);if(o.attrName=v,o.attrValue=k,o.keepAttr=!0,o.forceKeepAttr=void 0,cg(gt.uponSanitizeAttribute,e,o),k=o.attrValue,ZL&&(v==="id"||v==="name")&&(NS(u,e),k=rY+k),M1&&wi(/((--!?|])>)|<\/(style|title)/i,k)){NS(u,e);continue}if(o.forceKeepAttr)continue;if(!o.keepAttr){NS(u,e);continue}if(!Ph&&wi(/\/>/i,k)){NS(u,e);continue}Km&&n4([sn,_t,Xt],R=>{k=PC(k,R," ")});const O=La(e.nodeName);if(!YL(O,v,k)){NS(u,e);continue}if(fe&&typeof F=="object"&&typeof F.getAttributeType=="function"&&!f)switch(F.getAttributeType(O,v)){case"TrustedHTML":{k=fe.createHTML(k);break}case"TrustedScriptURL":{k=fe.createScriptURL(k);break}}if(k!==w)try{f?e.setAttributeNS(f,u,k):e.setAttribute(u,k),L1(e)?Ym(e):jN(s.removed)}catch{NS(u,e)}}cg(gt.afterSanitizeAttributes,e,null)},UT=function bn(e){let t=null;const o=qL(e);for(cg(gt.beforeSanitizeShadowDOM,e,null);t=o.nextNode();)cg(gt.uponSanitizeShadowNode,t,null),B5(t),Jl(t),t.content instanceof g&&bn(t.content);cg(gt.afterSanitizeShadowDOM,e,null)};return s.sanitize=function(bn){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=null,o=null,r=null,c=null;if(zT=!bn,zT&&(bn="<!-->"),typeof bn!="string"&&!KL(bn))if(typeof bn.toString=="function"){if(bn=bn.toString(),typeof bn!="string")throw $C("dirty is not a string, aborting")}else throw $C("toString is not a function");if(!s.isSupported)return bn;if(RS||M5(e),s.removed=[],typeof bn=="string"&&(MS=!1),MS){if(bn.nodeName){const b=La(bn.nodeName);if(!Kt[b]||Yc[b])throw $C("root node is forbidden and cannot be sanitized in-place")}}else if(bn instanceof C)t=GL("<!---->"),o=t.ownerDocument.importNode(bn,!0),o.nodeType===LC.element&&o.nodeName==="BODY"||o.nodeName==="HTML"?t=o:t.appendChild(o);else{if(!$h&&!Km&&!ag&&bn.indexOf("<")===-1)return fe&&FT?fe.createHTML(bn):bn;if(t=GL(bn),!t)return $h?null:FT?be:""}t&&_5&&Ym(t.firstChild);const u=qL(MS?bn:t);for(;r=u.nextNode();)B5(r),Jl(r),r.content instanceof g&&UT(r.content);if(MS)return bn;if($h){if(Ov)for(c=$e.call(t.ownerDocument);t.firstChild;)c.appendChild(t.firstChild);else c=t;return(Pn.shadowroot||Pn.shadowrootmode)&&(c=Tt.call(i,c,!0)),c}let f=ag?t.outerHTML:t.innerHTML;return ag&&Kt["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&wi(eP,t.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+t.ownerDocument.doctype.name+`>
`+f),Km&&n4([sn,_t,Xt],b=>{f=PC(f,b," ")}),fe&&FT?fe.createHTML(f):f},s.setConfig=function(){let bn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};M5(bn),RS=!0},s.clearConfig=function(){Bv=null,RS=!1},s.isValidAttribute=function(bn,e,t){Bv||M5({});const o=La(bn),r=La(e);return YL(o,r,t)},s.addHook=function(bn,e){typeof e=="function"&&NC(gt[bn],e)},s.removeHook=function(bn,e){if(e!==void 0){const t=lV(gt[bn],e);return t===-1?void 0:uV(gt[bn],t,1)[0]}return jN(gt[bn])},s.removeHooks=function(bn){gt[bn]=[]},s.removeAllHooks=function(){gt=tP()},s}var bO=nP();const FC=n=>bO().sanitize(n);var Pa=tinymce.util.Tools.resolve("tinymce.util.I18n");const a4={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},oP="temporary-placeholder",vO=n=>()=>bt(n,oP).getOr("!not found!"),yO=(n,s)=>{const a=n.toLowerCase();if(Pa.isRtl()){const i=Xd(a,"-rtl");return $n(s,i)?i:a}else return a},sP=(n,s)=>bt(s,yO(n,s)),TV=(n,s)=>{const a=s();return sP(n,a).getOrThunk(vO(a))},c4=(n,s,a)=>{const i=s();return sP(n,i).or(a).getOrThunk(vO(i))},Qb=n=>Pa.isRtl()?$n(a4,n):!1,CO=()=>Ut("add-focusable",[Oo(n=>{rm(n.element,"svg").each(s=>Pt(s,"focusable","false"))})]),SO=(n,s,a,i)=>{const d=Qb(s)?["tox-icon--flip"]:[],g=bt(a,yO(s,a)).or(i).getOrThunk(vO(a));return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes.concat(d),innerHtml:g},behaviours:Ve([...n.behaviours??[],CO()]),eventOrder:n.eventOrder??{}}},nl=(n,s,a,i=T.none())=>SO(s,n,a(),i),kV=(n,s,a)=>{const i=a(),d=vt(n,g=>$n(i,yO(g,i)));return SO(s,d.getOr(oP),i,T.none())},_V={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},wO=Xi({name:"Notification",factory:n=>{const s=st("notification-text"),a=Un({dom:Rd(`<p id=${s}>${FC(n.backstageProvider.translate(n.text))}</p>`),behaviours:Ve([Gt.config({})])}),i=z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${z}%`}}}),d=z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${z}%`}}),g=Un({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Ve([Gt.config({})])}),S={updateProgress:(z,G)=>{z.getSystem().isConnected()&&g.getOpt(z).each(J=>{Gt.set(J,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(G)]},d(G)])})},updateText:(z,G)=>{if(z.getSystem().isConnected()){const J=a.get(z);Gt.set(J,[$o(G)])}}},x=Mt([n.icon.toArray(),[n.level],T.from(_V[n.level]).toArray()]),_=Un(fr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":n.backstageProvider.translate("Close")}},components:[nl("close",{tag:"span",classes:["tox-icon"]},n.iconProvider)],buttonBehaviours:Ve([To.config({}),Do.config({...n.backstageProvider.tooltips.getConfig({tooltipText:n.backstageProvider.translate("Close")})})]),action:z=>{n.onAction(z)}})),D=kV(x,{tag:"div",classes:["tox-notification__icon"]},n.iconProvider),P={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Ve([Gt.config({})])},F=[D,P];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},behaviours:Ve([To.config({}),Zt.config({}),wt.config({mode:"special",onEscape:z=>(n.onAction(z),T.some(!0))})]),components:F.concat(n.progress?[g.asSpec()]:[]).concat([_.asSpec()]),apis:S}},configFields:[ka("level","info",["success","error","warning","warn","info"]),Be("progress"),to("icon"),Be("onAction"),Be("text"),Be("iconProvider"),Be("backstageProvider")],apis:{updateProgress:(n,s,a)=>{n.updateProgress(s,a)},updateText:(n,s,a)=>{n.updateText(s,a)}}});var AV=(n,s,a,i)=>{const d=s.backstage.shared,g=()=>We.fromDom(n.queryCommandValue("ToggleView")===""?n.getContentAreaContainer():n.getContainer()),h=()=>{const D=Is(g());return T.some(D)},C=D=>{h().each(P=>{et(D,F=>{Cn(F.element,"width"),da(F.element)>P.width&&Ht(F.element,"width",P.width+"px")})})};return{open:(D,P,F)=>{const z=()=>{const re=Re=>{Gt.remove(Re,J),W()},fe=(Re,$e)=>{vl(Re.element).length===0?be(Re,$e):Ke(Re,$e)},be=(Re,$e)=>{rs.hide(Re),i.clear(),$e&&n.focus()},Ke=(Re,$e)=>{$e&&wt.focusIn(Re)};i.on(Re=>{P();const $e=F();re(Re),fe(Re,$e)})},G=()=>!Jb(n)||!d.header.isPositionedAtTop(),J=m(wO.sketch({text:D.text,level:ao(["success","error","warning","warn","info"],D.type)?D.type:void 0,progress:D.progressBar===!0,icon:D.icon,onAction:z,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const re=p(J);i.on(fe=>{Gt.append(fe,re),rs.reposition(fe),J.hasConfigured(jo)&&jo.refresh(fe),C(fe.components())})}else{const re=m(rs.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ve([wt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Gt.config({}),...G()?[jo.config({contextual:{lazyContext:()=>T.some(Is(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Re=>Kf(n,Re.element).map(Ne=>({bounds:l1(Ne),optScrollEnv:T.some({currentScrollTop:Ne.element.dom.scrollTop,scrollElmTop:gc(Ne.element).top})})).getOrThunk(()=>({bounds:Kr(),optScrollEnv:T.none()}))})]:[]])})),fe=p(J),be={maxHeightFunction:Df()},Ke={...d.anchors.banner(),overrides:be};i.set(re),a.add(re),rs.showWithinBounds(re,fe,{anchor:Ke},h)}Fa(D.timeout)&&D.timeout>0&&KE.setEditorTimeout(n,()=>{z()},D.timeout);const W=()=>{i.on(re=>{rs.reposition(re),re.hasConfigured(jo)&&jo.refresh(re),C(re.components())})};return{close:z,reposition:W,text:re=>{wO.updateText(J,re)},settings:D,getEl:()=>J.element.dom,progressBar:{value:re=>{wO.updateProgress(J,re)}}}},close:D=>{D.close()},getArgs:D=>D.settings}};const OV={setup:(n,s)=>{const a=(d,g)=>{xt(d,mr(),{raw:g})},i=()=>n.getMenu().bind(zn.getHighlighted);s.on("keydown",d=>{const g=d.which;n.isActive()&&(n.isMenuOpen()?g===13?(i().each(Xg),d.preventDefault()):g===40?(i().fold(()=>{n.getMenu().each(zn.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&n.cancelIfNecessary())}),s.on("NodeChange",()=>{n.isActive()&&!n.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&n.cancelIfNecessary()})}};var xO;(function(n){n[n.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",n[n.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(xO||(xO={}));var Vu=xO;const EO="tox-menu-nav__js",HC="tox-collection__item",Eh="tox-swatch",u1={normal:EO,color:Eh},TO="tox-collection__item--enabled",rP="tox-collection__group-heading",kO="tox-collection__item-icon",i4="tox-collection__item-image",DV="tox-collection__item-image-selector",Xf="tox-collection__item-label",d1="tox-collection__item-accessory",aP="tox-collection__item-caret",RV="tox-collection__item-checkmark",m1="tox-collection__item--active",cP="tox-collection__item-container",MV="tox-collection__item-container--column",iP="tox-collection__item-container--row",BV="tox-collection__item-container--align-right",NV="tox-collection__item-container--align-left",l4="tox-collection__item-container--valign-top",lP="tox-collection__item-container--valign-middle",PV="tox-collection__item-container--valign-bottom",_O=n=>bt(u1,n).getOr(EO),$V=n=>n==="color"?"tox-swatches":"tox-menu",AO=n=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:$V(n),tieredMenu:"tox-tiered-menu"}),Hm=n=>{const s=AO(n);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:_O(n)}},ZY=(n,s,a)=>{const i=AO(a);return{tag:"div",classes:Mt([[i.menu,`tox-menu-${s}-column`],n?[i.hasIcons]:[]])}},OO=[Gf.parts.items({})],zC=(n,s,a)=>{const i=AO(a);return{dom:{tag:"div",classes:Mt([[i.tieredMenu]])},markers:Hm(a)}},uP=st("refetch-trigger-event"),dP=st("redirect-menu-item-interaction"),mP="tox-menu__searcher",VC=n=>io(n.element,`.${mP}`).bind(s=>n.getSystem().getByDom(s).toOptional()),fP=VC,IV=(n,s)=>{it.setValue(n,s.fetchPattern),n.element.dom.selectionStart=s.selectionStart,n.element.dom.selectionEnd=s.selectionEnd},DO=n=>{const s=it.getValue(n),a=n.element.dom.selectionStart,i=n.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},gP=(n,s)=>{Or(s.element,"id").each(a=>Pt(n.element,"aria-activedescendant",a))},LV=n=>{const s=(d,g)=>(g.cut(),T.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return xt(d,dP,h),T.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[HC]},components:[Fm.sketch({inputClasses:[mP,"tox-textfield"],inputAttributes:{...n.placeholder.map(d=>({placeholder:n.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Ve([Ut(i,[Te(Al(),d=>{fn(d,uP)}),Te(mr(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),wt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,wt.name()]}})]}},u4="tox-collection--results__js",UC=n=>n.dom?{...n,dom:{...n.dom,attributes:{...n.dom.attributes??{},id:st("aria-item-search-result-id"),"aria-selected":"false"}}}:n,RO="Use arrow keys to navigate.",MO=(n,s)=>a=>{const i=hs(a,s);return De(i,d=>({dom:n,components:d}))},BO=n=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":Pa.translate(RO)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Gf.parts.items({preprocess:n!=="auto"?MO({tag:"div",classes:["tox-swatches__row"]},n):an})]}]}),FV=n=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Gf.parts.items({preprocess:n!=="auto"?MO({tag:"div",classes:["tox-image-selector__row"]},n):an})]}]}),NO=n=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Gf.parts.items({preprocess:MO({tag:"div",classes:["tox-collection__group"]},n)})]}),hP=(n,s)=>{const a=[];let i=[];return et(n,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],($n(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),De(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},PO=(n,s,a)=>Gf.parts.items({preprocess:i=>{const d=De(i,a);return n!=="auto"&&n>1?MO({tag:"div",classes:["tox-collection__group"]},n)(d):hP(d,(g,h)=>s[h].type==="separator")}}),pP=n=>Qs(n,s=>s.type==="widget"),$O=(n,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...pP(s)?{"aria-label":Pa.translate(RO)}:{}}},components:[PO(n,s,an)]}),bP=(n,s,a=!0)=>{const i=st("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",u4].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[PO(n,s,UC)]}},Jf=(n,s,a)=>{const i=st("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"])},components:[LV({i18n:Pa.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...n===1?["tox-collection--list"]:["tox-collection--grid"],u4],attributes:{id:i}},components:[PO(n,s,UC)]}]}},f1=(n,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Gf.parts.items({preprocess:a=>hP(a,(i,d)=>n[d].type==="separator")})]}),ZC=n=>Qs(n,s=>"icon"in s&&s.icon!==void 0),Ld=n=>(console.error(Mg(n)),console.log(n),T.none()),vP=(n,s,a,i,d)=>{const g=f1(a);return{value:n,dom:g.dom,components:g.components,items:a}},IO=(n,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?$O(i,a):d.searchMode.searchMode==="search-with-field"?Jf(i,a,d.searchMode):bP(i,a);if(d.menuType==="color"){const h=BO(i);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="imageselector"&&i!=="auto"){const h=FV(i);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=$O(i,a);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=NO(i);return{value:n,dom:h.dom,components:h.components,items:a}}else return{value:n,dom:ZY(s,i,d.menuType),components:OO,items:a}},Ss=ms("type"),LO=ms("name"),d4=ms("label"),Qf=ms("text"),yP=ms("title"),FO=ms("icon"),HV=ms("url"),ev=ms("value"),zV=vc("fetch"),VV=vc("getSubmenuItems"),Th=vc("onAction"),UV=vc("onItemAction"),g1=xo("onSetup",()=>Y),ZV=fs("name"),eg=fs("text"),WV=fs("role"),Zl=fs("icon"),h1=fs("tooltip"),CP=fs("chevronTooltip"),WC=fs("label"),HO=fs("shortcut"),jV=zi("select"),tv=or("active",!1),GV=or("borderless",!1),Wl=or("enabled",!0),jC=or("primary",!1),SP=n=>de("columns",n),zO=de("meta",{}),VO=xo("onAction",Y),p1=n=>ss("type",n),UO=n=>dr("name","name",ep(()=>st(`${n}-name`)),nr),wP=n=>dr("value","value",ep(()=>st(`${n}-value`)),fi()),nv=[Ss,Qf,Hi("level",["info","warn","error","success"]),FO,de("url","")],qV=kt(nv),KV=n=>[Ss,n],YV=[Ss,Qf,Wl,UO("button"),Zl,GV,C2("buttonType",["primary","secondary","toolbar"]),jC,ss("context","mode:design")],m4=kt(YV),tc=[Ss,LO],jl=tc.concat([WC]),xP=tc.concat([d4,Wl,ss("context","mode:design")]),XV=kt(xP),JV=rn,QV=jl.concat([SP("auto"),ss("context","mode:design")]),eU=kt(QV),EP=Rg([ev,Qf,FO]),TP=jl.concat([ss("storageKey","default"),ss("context","mode:design")]),tU=kt(TP),nU=nr,sU=kt(jl),kP=nr,_P=tc.concat([ss("tag","textarea"),ms("scriptId"),ms("scriptUrl"),zi("onFocus"),uw("settings",void 0)]),AP=tc.concat([ss("tag","textarea"),vc("init")]),rU=bu(n=>es("customeditor.old",bc(AP),n).orThunk(()=>es("customeditor.new",bc(_P),n))),aU=nr,kh=[Wl,eg,WV,HO,wP("menuitem"),zO,ss("context","mode:design")],cU=kt([Ss,LO].concat(kh)),iU=rn,ov=[UO("button"),Zl,ka("align","end",["start","end"]),jC,Wl,C2("buttonType",["primary","secondary"]),ss("context","mode:design")],Fd=[...ov,Qf],f4=[Hi("type",["submit","cancel","custom"]),...Fd],Gl=[Hi("type",["menu"]),eg,h1,Zl,Ga("items",cU),...ov],lU=[...ov,Hi("type",["togglebutton"]),h1,Zl,eg,or("active",!1)],g4=Ea("type",{submit:f4,cancel:f4,custom:f4,menu:Gl,togglebutton:lU}),uU=jl.concat([ss("context","mode:design"),fs("dropAreaLabel"),fs("buttonLabel"),fs("allowedFileTypes"),f0("allowedFileExtensions",nr)]),b1=kt(uU),dU=cw(),ZO=n=>[Ss,rp("columns"),n],WO=[Ss,ms("html"),ka("presets","presentation",["presentation","document"]),xo("onInit",Y),or("stretched",!1)],mU=kt(WO),fU=jl.concat([or("border",!1),or("sandboxed",!0),or("streamContent",!1),or("transparent",!0)]),v1=kt(fU),OP=nr,DP=kt(tc.concat([fs("height")])),gU=kt([ms("url"),Bg("zoom"),Bg("cachedWidth"),Bg("cachedHeight")]),jO=jl.concat([fs("inputMode"),fs("placeholder"),or("maximized",!1),Wl,ss("context","mode:design")]),RP=kt(jO),GO=nr,MP=n=>[Ss,d4,n,ka("align","start",["start","center","end"]),fs("for")],BP=[Qf,ev],GC=[Qf,Ga("items",pf("items",()=>NP))],NP=Dg([kt(BP),kt(GC)]),hU=jl.concat([Ga("items",NP),Wl,ss("context","mode:design")]),pU=kt(hU),bU=nr,qO=jl.concat([lw("items",[Qf,ev]),ap("size",1),Wl,ss("context","mode:design")]),vU=kt(qO),KO=nr,yU=jl.concat([or("constrain",!0),Wl,ss("context","mode:design")]),qC=kt(yU),PP=kt([ms("width"),ms("height")]),$P=tc.concat([d4,ap("min",0),ap("max",0)]),CU=kt($P),SU=f2,wU=[Ss,Ga("header",nr),Ga("cells",Cs(nr))],xU=kt(wU),h4=jl.concat([fs("placeholder"),or("maximized",!1),Wl,ss("context","mode:design"),S2("spellcheck")]),IP=kt(h4),EU=nr,YO=[ss("buttonType","default"),fs("text"),fs("tooltip"),fs("icon"),Vc("search",!1,Dg([rn,kt([fs("placeholder")])],n=>xr(n)?n?T.some({placeholder:T.none()}):T.none():T.some(n))),vc("fetch"),xo("onSetup",()=>Y),ss("context","mode:design")],_h=kt([Ss,...YO]),XO=n=>es("menubutton",_h,n),sv=[Hi("type",["directory","leaf"]),yP,ms("id"),_l("menu",_h),fs("customStateIcon"),fs("customStateIconTooltip")],JO=kt(sv),TU=sv.concat([Ga("children",pf("children",()=>hf("type",{directory:LP,leaf:JO})))]),LP=kt(TU),y1=hf("type",{directory:LP,leaf:JO}),FP=[Ss,Ga("items",y1),zi("onLeafAction"),zi("onToggleExpand"),mm("defaultExpandedIds",[],nr),fs("defaultSelectedId")],kU=kt(FP),HP=jl.concat([ka("filetype","file",["image","media","file"]),Wl,fs("picker_text"),ss("context","mode:design")]),_U=kt(HP),AU=kt([ev,zO]),QO=n=>dr("items","items",gi(),Cs(bu(s=>es(`Checking item of ${n}`,p4,s).fold(a=>Nt.error(Mg(a)),a=>Nt.value(a))))),p4=sp(()=>hf("type",{alertbanner:qV,bar:kt(KV(QO("bar"))),button:m4,checkbox:XV,colorinput:tU,colorpicker:sU,dropzone:b1,grid:kt(ZO(QO("grid"))),iframe:v1,input:RP,listbox:pU,selectbox:vU,sizeinput:qC,slider:CU,textarea:IP,urlinput:_U,customeditor:rU,htmlpanel:mU,imagepreview:DP,collection:eU,label:kt(MP(QO("label"))),table:xU,tree:kU,panel:zP})),OU=[Ss,de("classes",[]),Ga("items",p4)],zP=kt(OU),DU=[UO("tab"),yP,Ga("items",p4)],RU=[Ss,lw("tabs",DU)],MU=kt(RU),BU=Fd,NU=g4,PU=kt([ms("title"),ja("body",hf("type",{panel:zP,tabpanel:MU})),ss("size","normal"),mm("buttons",[],NU),de("initialData",{}),xo("onAction",Y),xo("onChange",Y),xo("onSubmit",Y),xo("onClose",Y),xo("onCancel",Y),xo("onTabChange",Y)]),VP=n=>es("dialog",PU,n),$U=kt([Hi("type",["cancel","custom"]),...BU]),IU=kt([ms("title"),ms("url"),Bg("height"),Bg("width"),f0("buttons",$U),xo("onAction",Y),xo("onCancel",Y),xo("onClose",Y),xo("onMessage",Y)]),LU=n=>es("dialog",IU,n),eD=n=>Dn(n)?[n].concat(le(ic(n),eD)):ra(n)?le(n,eD):[],FU=n=>Et(n.type)&&Et(n.name),HU={checkbox:JV,colorinput:nU,colorpicker:kP,dropzone:dU,input:GO,iframe:OP,imagepreview:gU,selectbox:KO,sizeinput:PP,slider:SU,listbox:bU,size:PP,textarea:EU,urlinput:AU,customeditor:aU,collection:EP,togglemenuitem:iU},UP=n=>T.from(HU[n.type]),ZP=n=>co(eD(n),FU),zU=n=>{const s=ZP(n),a=le(s,i=>UP(i).fold(()=>[],d=>[ja(i.name,d)]));return kt(a)},KC=n=>{const s=pi(VP(n)),a=zU(n),i=n.initialData??{};return{internalDialog:s,dataValidator:a,initialData:i}},C1={open:(n,s)=>{const a=KC(s);return n(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(n,s)=>{const a=pi(LU(s));return n(a)},redial:n=>KC(n)},WP=kt([Ss,eg]),VU=n=>es("separatormenuitem",WP,n),UU=kt([p1("autocompleteitem"),tv,Wl,zO,ev,eg,Zl]),ZU=n=>es("Autocompleter.Separator",WP,n),WU=n=>es("Autocompleter.Item",UU,n),rv=[Wl,h1,Zl,eg,g1,ss("context","mode:design")],jU=kt([Ss,Th,HO].concat(rv)),zm=n=>es("toolbarbutton",jU,n),tD=[tv].concat(rv),GU=kt(tD.concat([Ss,Th,HO])),nD=n=>es("ToggleButton",GU,n),b4=[xo("predicate",Vn),ka("scope","node",["node","editor"]),ka("position","selection",["node","selection","line"])],qU=rv.concat([p1("contextformbutton"),ss("align","end"),jC,Th,Ta("original",an)]),KU=tD.concat([p1("contextformbutton"),ss("align","end"),jC,Th,Ta("original",an)]),YU=rv.concat([p1("contextformbutton")]),oD=tD.concat([p1("contextformtogglebutton")]),jP=Ea("type",{contextformbutton:qU,contextformtogglebutton:KU}),YC=[WC,Ga("commands",jP),_l("launch",Ea("type",{contextformbutton:YU,contextformtogglebutton:oD})),xo("onInput",Y),xo("onSetup",Y)],v4=[...b4,...YC,Hi("type",["contextform"]),xo("initValue",ie("")),fs("placeholder")],av=[...b4,...YC,Hi("type",["contextsliderform"]),xo("initValue",ie(0)),xo("min",ie(0)),xo("max",ie(100))],XU=[...b4,...YC,Hi("type",["contextsizeinputform"]),xo("initValue",ie({width:"",height:""}))],GP=Ea("type",{contextform:v4,contextsliderform:av,contextsizeinputform:XU}),JU=n=>es("ContextForm",GP,n),cv=rv.concat([p1("contexttoolbarbutton")]),QU=kt([p1("contexttoolbar"),qa("launch",cv),ja("items",Dg([nr,Rg([fs("name"),fs("label"),Ga("items",nr)])]))].concat(b4)),y4=n=>({name:n.name.getOrUndefined(),label:n.label.getOrUndefined(),items:n.items}),sD=n=>({...n,launch:n.launch.getOrUndefined(),items:Et(n.items)?n.items:De(n.items,y4)}),eZ=n=>es("ContextToolbar",QU,n),tZ=[Ss,ms("src"),fs("alt"),mm("classes",[],nr)],nZ=kt(tZ),rD=[Ss,Qf,ZV,mm("classes",["tox-collection__item-label"],nr)],oZ=kt(rD),qP=sp(()=>hf("type",{cardimage:nZ,cardtext:oZ,cardcontainer:sZ})),sZ=kt([Ss,ss("direction","horizontal"),ss("align","left"),ss("valign","middle"),Ga("items",qP)]),KP=kt([Ss,WC,Ga("items",qP),g1,VO].concat(kh)),aD=n=>es("cardmenuitem",KP,n),rZ=kt([Ss,tv,Zl,WC].concat(kh)),aZ=n=>es("choicemenuitem",rZ,n),cD=[Ss,ms("fancytype"),VO],YP=[de("initData",{})].concat(cD),cZ=[zi("select"),fm("initData",{},[or("allowCustomColors",!0),ss("storageKey","default"),f0("colors",fi())])].concat(cD),iD=[zi("select"),vu("initData",[rp("columns"),mm("items",[],fi())])].concat(cD),XP=Ea("fancytype",{inserttable:YP,colorswatch:cZ,imageselect:iD}),JP=n=>es("fancymenuitem",XP,n),iZ=kt([Ss,tv,HV,WC,h1].concat(kh)),lZ=kt([Ss,tv,FO,d4,h1,ev].concat(kh)),QP=n=>es("imagemenuitem",iZ,n),lD=n=>es("resetimageitem",lZ,n),uZ=kt([Ss,g1,VO,Zl].concat(kh)),dZ=n=>es("menuitem",uZ,n),mZ=kt([Ss,VV,g1,Zl].concat(kh)),fZ=n=>es("nestedmenuitem",mZ,n),gZ=kt([Ss,Zl,tv,g1,Th].concat(kh)),hZ=n=>es("togglemenuitem",gZ,n),pZ=kt([Zl,h1,xo("onShow",Y),xo("onHide",Y),g1]),uD=n=>es("sidebar",pZ,n),bZ=kt([Ss,ja("items",Dg([Rg([LO,Ga("items",nr)]),nr]))].concat(rv)),dD=n=>es("GroupToolbarButton",bZ,n),vZ=kt([Ss,h1,CP,Zl,eg,jV,zV,g1,ka("presets","normal",["normal","color","listpreview"]),SP(1),Th,UV,ss("context","mode:design")]),yZ=n=>es("SplitButton",vZ,n),C4=[eg,Zl,fs("tooltip"),ka("buttonType","secondary",["primary","secondary"]),or("borderless",!1),vc("onAction"),ss("context","mode:design")],CZ=[...C4,Qf,Hi("type",["button"])],SZ=[...C4,or("active",!1),Hi("type",["togglebutton"])],mD={button:CZ,togglebutton:SZ},wZ=[Hi("type",["group"]),mm("buttons",[],Ea("type",mD))],xZ=Ea("type",{...mD,group:wZ}),EZ=kt([mm("buttons",[],xZ),vc("onShow"),vc("onHide")]),TZ=n=>es("view",EZ,n),fD=(n,s,a)=>{const i=Mr(n.element,"."+a);if(i.length>0){const d=jn(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return T.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return T.none()},e8=(n,s)=>Ve([Ut(n,s)]),iv={namedEvents:e8,unnamedEvents:n=>e8(st("unnamed-events"),n)},Hd={item:n=>ft.config({disabled:n,disableClass:"tox-collection__item--state-disabled"}),button:n=>ft.config({disabled:n}),splitButton:n=>ft.config({disabled:n,disableClass:"tox-tbtn--disabled"}),toolbarButton:n=>ft.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1})},XC=(n,s)=>{const a=n.getApi(s);return i=>{i(a)}},zd=(n,s)=>Oo(a=>{Rt(n.onBeforeSetup)&&n.onBeforeSetup(a),XC(n,a)(d=>{const g=n.onSetup(d);Rt(g)&&s.set(g)})}),Ah=(n,s)=>Gi(a=>XC(n,a)(s.get())),S4=(n,s,a)=>Gi(i=>(a.set(it.getValue(i)),XC(n,i)(s.get()))),gD="silver.uistate",S1="setDisabled",_Z="setEnabled",hD="init",AZ=["switchmode",hD],JC=(n,s)=>{const a=n.mainUi.outerContainer,i=[n.mainUi.mothership,...n.uiMotherships];s===S1&&et(i,d=>{d.broadcastOn([Eu()],{target:a.element})}),et(i,d=>{d.broadcastOn([gD],s)})},t8=(n,s)=>{n.on("init SwitchMode",a=>{JC(s,a.type)}),n.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?S1:hD;JC(s,i),a.state||n.nodeChanged()}}),n.on("NodeChange",a=>{const i=n.ui.isEnabled()?a.type:S1;JC(s,i)}),pN(n)&&n.mode.set("readonly")},Rs=n=>Na.config({channels:{[gD]:{onReceive:(s,a)=>{if(a===S1||a===_Z){ft.set(s,a===S1);return}const{contextType:i,shouldDisable:d}=n();i==="mode"&&!ao(AZ,a)||ft.set(s,d)}}}}),tg=(n,s)=>Tm((a,i)=>{XC(n,a)(n.onAction),!n.triggersSubmenu&&s===Vu.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&fn(a,v0()),i.stop())}),OZ={[Nr()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Vm=Oi,w1=(n,s,a,i)=>{const d=pt(Y);return{type:"item",dom:s.dom,components:Vm(s.optComponents),data:n.data,eventOrder:OZ,hasSubmenu:n.triggersSubmenu,itemBehaviours:Ve([Ut("item-events",[tg(n,a),zd(n,d),Ah(n,d)]),Hd.item(()=>!n.enabled||i.checkUiComponentContext(n.context).shouldDisable),Rs(()=>i.checkUiComponentContext(n.context)),Gt.config({})].concat(n.itemBehaviours))}},ng=n=>({value:n.value,meta:{text:n.text.getOr(""),...n.meta}}),DZ=(n,s)=>{const a=We.fromTag("div");bo(a,"tox-image-selector-loading-spinner");const i=g=>{bo(g,"tox-image-selector-loading-spinner-wrapper"),Ar(g,a)},d=g=>{ns(g,"tox-image-selector-loading-spinner-wrapper"),Ni(a)};return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...n.checkMark.toArray()],behaviours:Ve([...n.behaviours??[],Ut("render-image-events",[Oo(g=>{i(g.element),io(g.element,"img").each(h=>{El(h).catch(C=>{console.error(C)}).finally(()=>{d(g.element)})})})])])}},RZ=(n,s)=>DZ(s,n),pD=n=>{const s=jb.os.isMacOS()||jb.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=n.split("+"),h=De(g,C=>{const S=C.toLowerCase().trim();return $n(d,S)?d[S]:C});return s?h.join(""):h.join("+")},w4=(n,s,a=[kO])=>nl(n,{tag:"div",classes:a},s),n8=n=>({dom:{tag:"div",classes:[Xf]},components:[$o(Pa.translate(n))]}),x4=(n,s)=>({dom:{tag:"div",classes:s,innerHtml:n}}),bD=(n,s)=>({dom:{tag:"div",classes:[Xf]},components:[{dom:{tag:n.tag,styles:n.styles},components:[$o(Pa.translate(s))]}]}),vD=n=>({dom:{tag:"div",classes:[d1]},components:[$o(pD(n))]}),yD=n=>w4("checkmark",n,[RV]),ol=n=>w4("chevron-right",n,[aP]),MZ=n=>w4("chevron-down",n,[aP]),BZ=(n,s)=>{const a=n.direction==="vertical"?MV:iP,i=n.align==="left"?NV:BV;return{dom:{tag:"div",classes:[cP,a,i,(()=>{switch(n.valign){case"top":return l4;case"middle":return lP;case"bottom":return PV}})()]},components:s}},o8=(n,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:n,alt:a.getOr("")}}}),s8=(n,s,a)=>{const i="custom",d="remove",g=n.value,h=n.iconContent.map(x=>c4(x,s.icons,a)),C=n.ariaLabel.map(x=>({"aria-label":s.translate(x),"data-mce-name":x})).getOr({});return{dom:(()=>{const x=Eh,_=h.getOr(""),D={tag:"div",attributes:C,classes:[x]};return g===i?{...D,tag:"button",classes:[...D.classes,"tox-swatches__picker-btn"],innerHtml:_}:g===d?{...D,classes:[...D.classes,"tox-swatch--remove"],innerHtml:_}:oo(g)?{...D,attributes:{...D.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:_}:D})(),optComponents:[]}},CD=(n,s)=>{const a=n.map(i=>({attributes:{id:st("menu-item"),"aria-label":Pa.translate(i)}})).getOr({});return{tag:"div",classes:[EO,HC].concat(s),...a}},r8=n=>({dom:{tag:"label"},components:[$o(n)]}),NZ=(n,s,a,i)=>{const d={tag:"div",classes:[kO]},g=P=>nl(P,d,s.icons,i),h=()=>T.some({dom:d}),C=a?n.iconContent.map(g).orThunk(h):T.none(),S=n.checkMark,x=T.from(n.meta).fold(()=>n8,P=>$n(P,"style")?gn(bD,P.style):n8),_=n.htmlContent.fold(()=>n.textContent.map(x),P=>T.some(x4(P,[Xf])));return{dom:CD(n.ariaLabel,[]),optComponents:[C,_,n.shortcutContent.map(vD),S,n.caret,n.labelContent.map(r8)]}},PZ=n=>({dom:CD(n.ariaLabel,[DV]),optComponents:[T.some(RZ(n.iconContent.getOrDie(),{tag:"div",classes:[i4],checkMark:n.checkMark})),n.labelContent.map(r8)]}),lv=(n,s,a,i=T.none())=>n.presets==="color"?s8(n,s,i):n.presets==="img"?PZ(n):NZ(n,s,a,i),a8=(n,s,a)=>bt(n,"tooltipWorker").map(i=>[Do.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Df}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{Do.setComponents(d,[jc({element:We.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[Do.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),$Z=n=>Wb.DOM.encode(n),SD=(n,s)=>{const a=Pa.translate(n),i=$Z(a);if(s.length>0){const d=new RegExp(z1(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},IZ=(n,s,a,i,d,g,h,C=!0)=>{const S=lv({presets:i,textContent:T.none(),htmlContent:a?n.text.map(_=>SD(_,s)):T.none(),ariaLabel:n.text,labelContent:T.none(),iconContent:n.icon,shortcutContent:T.none(),checkMark:T.none(),caret:T.none(),value:n.value},h.providers,C,n.icon),x=n.text.filter(_=>!a&&_!=="");return w1({context:"mode:design",data:ng(n),enabled:n.enabled,getApi:ie({}),onAction:_=>d(n.value,n.meta),onSetup:ie(Y),triggersSubmenu:!1,itemBehaviours:a8(n,h,x)},S,g,h.providers)},c8=(n,s)=>De(n,a=>{switch(a.type){case"cardcontainer":return BZ(a,c8(a.items,s));case"cardimage":return o8(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>ao(s.cardText.highlightOn,g))?T.from(s.cardText.matchText).getOr(""):"";return x4(SD(a.text,d),a.classes)}}),LZ=(n,s,a,i)=>{const d=h=>({isEnabled:()=>!ft.isDisabled(h),setEnabled:C=>{ft.set(h,!C),et(Mr(h.element,"*"),S=>{h.getSystem().getByDom(S).each(x=>{x.hasConfigured(ft)&&ft.set(x,!C)})})}}),g={dom:CD(n.label,[]),optComponents:[T.some({dom:{tag:"div",classes:[cP,iP]},components:c8(n.items,i)})]};return w1({context:"mode:design",data:ng({text:T.none(),...n}),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:T.from(i.itemBehaviours).getOr([])},g,s,a.providers)},wD=(n,s,a,i,d,g,h,C=!0)=>{const S=D=>({setActive:P=>{Sn.set(D,P)},isActive:()=>Sn.isOn(D),isEnabled:()=>!ft.isDisabled(D),setEnabled:P=>ft.set(D,!P)}),x=lv({presets:a,textContent:s?n.text:T.none(),htmlContent:T.none(),labelContent:n.label,ariaLabel:n.text,iconContent:n.icon,shortcutContent:s?n.shortcut:T.none(),checkMark:s?T.some(yD(h.icons)):T.none(),caret:T.none(),value:n.value},h,C),_=n.text.filter(ie(!s)).map(D=>Do.config(h.tooltips.getConfig({tooltipText:h.translate(D)})));return uo(w1({context:n.context,data:ng(n),enabled:n.enabled,getApi:S,onAction:D=>i(n.value),onSetup:D=>(D.setActive(d),Y),triggersSubmenu:!1,itemBehaviours:[..._.toArray()]},x,g,h),{toggling:{toggleClass:TO,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},E4=n=>({value:x1(n)}),T4=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i8=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,k4=n=>T4.test(n)||i8.test(n),x1=n=>nf(n,"#").toUpperCase(),l8=n=>k4(n)?T.some({value:x1(n)}):T.none(),u8=n=>({value:n.value.replace(T4,(a,i,d,g)=>i+i+d+d+g+g)}),d8=n=>{const s=u8(n),a=i8.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},xD=n=>{const s=n.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},QC=n=>{const s=xD(n.red)+xD(n.green)+xD(n.blue);return E4(s)},Oh=(n,s,a)=>({hue:n,saturation:s,value:a}),ED=n=>{let s=0,a=0,i=0;const d=n.red/255,g=n.green/255,h=n.blue/255,C=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(C===S)return i=C,Oh(0,0,i*100);const x=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-x/(S-C)),a=(S-C)/S,i=S,Oh(Math.round(s),Math.round(a*100),Math.round(i*100))},m8=Math.min,TD=Math.max,eS=Math.round,kD=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,f8=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,wr=(n,s,a,i)=>({red:n,green:s,blue:a,alpha:i}),_4=n=>{const s=parseInt(n,10);return s.toString()===n&&s>=0&&s<=255},g8=n=>{let s,a,i;const d=(n.hue||0)%360;let g=n.saturation/100,h=n.value/100;if(g=TD(0,m8(g,1)),h=TD(0,m8(h,1)),g===0)return s=a=i=eS(255*h),wr(s,a,i,1);const C=d/60,S=h*g,x=S*(1-Math.abs(C%2-1)),_=h-S;switch(Math.floor(C)){case 0:s=S,a=x,i=0;break;case 1:s=x,a=S,i=0;break;case 2:s=0,a=S,i=x;break;case 3:s=0,a=x,i=S;break;case 4:s=x,a=0,i=S;break;case 5:s=S,a=0,i=x;break;default:s=a=i=0}return s=eS(255*(s+_)),a=eS(255*(a+_)),i=eS(255*(i+_)),wr(s,a,i,1)},tS=n=>{const s=d8(n),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return wr(a,i,d,1)},_D=(n,s,a,i)=>{const d=parseInt(n,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(i);return wr(d,g,h,C)},AD=n=>{const s=kD.exec(n);if(s!==null)return T.some(_D(s[1],s[2],s[3],"1"));const a=f8.exec(n);return a!==null?T.some(_D(a[1],a[2],a[3],a[4])):T.none()},h8=n=>`rgba(${n.red},${n.green},${n.blue},${n.alpha})`,p8=wr(255,0,0,1),b8=n=>ED(tS(n)),Vd=n=>QC(g8(n)),OD=n=>l8(n).orThunk(()=>AD(n).map(QC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=n,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return QC(wr(d,g,h,C))}),v8=n=>{n.dispatch("SkinLoaded")},A4=(n,s)=>{n.dispatch("SkinLoadError",s)},DD=n=>{n.dispatch("ResizeEditor")},RD=(n,s)=>{n.dispatch("ResizeContent",s)},FZ=(n,s)=>{n.dispatch("ScrollContent",s)},y8=(n,s)=>{n.dispatch("TextColorChange",s)},HZ=(n,s)=>{n.dispatch("AfterProgressState",{state:s})},zZ=(n,s)=>n.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),VZ=(n,s)=>{n.dispatch("ToggleToolbarDrawer",{state:s})},UZ=(n,s)=>{n.dispatch("StylesTextUpdate",s)},C8=(n,s)=>{n.dispatch("AlignTextUpdate",s)},ZZ=(n,s)=>{n.dispatch("FontSizeTextUpdate",s)},Um=(n,s)=>{n.dispatch("FontSizeInputTextUpdate",s)},O4=(n,s)=>{n.dispatch("BlocksTextUpdate",s)},WZ=(n,s)=>{n.dispatch("FontFamilyTextUpdate",s)},jZ=n=>{n.dispatch("ToggleSidebar")},S8=n=>{n.dispatch("ToggleView")},MD=n=>{n.dispatch("ContextToolbarClose")},BD=n=>{n.dispatch("ContextFormSlideBack")},E1=(n,s)=>()=>{n(),s()},Fr=(n,s=Dt)=>Dh(n,"NodeChange",a=>{a.setEnabled(n.selection.isEditable()&&s())}),nS=(n,s)=>a=>{const i=xs(),d=()=>{a.setActive(n.formatter.match(s));const g=n.formatter.formatChanged(s,a.setActive);i.set(g)};return n.initialized?d():n.once("init",d),()=>{n.off("init",d),i.clear()}},oS=(n,s)=>a=>{const i=Fr(n)(a),d=nS(n,s)(a);return()=>{i(),d()}},Dh=(n,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),n.on(s,d)};return n.initialized?g():n.once("init",g),()=>{n.off("init",g),n.off(s,d)}},D4=n=>s=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("mceToggleFormat",!1,s.format)})},Tc=(n,s)=>()=>n.execCommand(s);var T1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const w8={},x8=(n,s=10)=>{const a=T1.getItem(n),i=Et(a)?JSON.parse(a):[],g=(x=>s-x.length<0?x.slice(0,s):x)(i),h=x=>{Me(g,x).each(C),g.unshift(x),g.length>s&&g.pop(),T1.setItem(n,JSON.stringify(g))},C=x=>{g.splice(x,1)};return{add:h,state:()=>g.slice(0)}},ND=n=>bt(w8,n).getOrThunk(()=>{const s=`tinymce-custom-colors-${n}`,a=T1.getItem(s);if(rc(a)){const d=T1.getItem("tinymce-custom-colors");T1.setItem(s,oo(d)?d:"[]")}const i=x8(s,10);return w8[n]=i,i}),GZ=n=>De(ND(n).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),PD=(n,s)=>{ND(n).add(s)},R4="forecolor",$D="hilitecolor",E8=5,qZ=n=>ID(n.map((s,a)=>a%2===0?"#"+OD(s).value:s)),ID=n=>{const s=[];for(let a=0;a<n.length;a+=2)s.push({text:n[a+1],value:n[a],icon:"checkmark",type:"choiceitem"});return s},kc=n=>s=>s.options.get(n),LD="#000000",T8=n=>{const s=n.options.register,a=g=>ac(g,Et)?{value:qZ(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>ac(g,Et)?{value:ID(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>Fa(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:FD(n)}),s("color_cols_foreground",{processor:d,default:k8(n,R4)}),s("color_cols_background",{processor:d,default:k8(n,$D)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:LD}),s("color_default_background",{processor:"string",default:LD})},M4=(n,s)=>s===R4&&n.options.isSet("color_map_foreground")?kc("color_map_foreground")(n):s===$D&&n.options.isSet("color_map_background")?kc("color_map_background")(n):n.options.isSet("color_map_raw")?kc("color_map_raw")(n):kc("color_map")(n),FD=(n,s="default")=>Math.max(E8,Math.ceil(Math.sqrt(M4(n,s).length))),k8=(n,s)=>{const a=kc("color_cols")(n),i=FD(n,s);return a===FD(n)?i:a},_8=(n,s="default")=>Math.round(s===R4?kc("color_cols_foreground")(n):s===$D?kc("color_cols_background")(n):kc("color_cols")(n)),HD=kc("custom_colors"),KZ=kc("color_default_foreground"),A8=kc("color_default_background"),zD="rgba(0, 0, 0, 0)",Zm=n=>AD(n).exists(s=>s.alpha!==0),VD=n=>Li(n,s=>{if(mc(s)){const a=zo(s,"background-color");return va(Zm(a),a)}else return T.none()}).getOr(zD),UD=(n,s)=>{const a=We.fromDom(n.selection.getStart()),i=s==="hilitecolor"?VD(a):zo(a,"color");return AD(i).map(d=>"#"+QC(d).value)},O8=(n,s,a)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.apply(s,{value:a}),n.nodeChanged()})},D8=(n,s)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.remove(s,{value:null},void 0,!0),n.nodeChanged()})},R8=n=>{n.addCommand("mceApplyTextcolor",(s,a)=>{O8(n,s,a)}),n.addCommand("mceRemoveTextcolor",s=>{D8(n,s)})},B4=n=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return n?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},N4=(n,s,a,i)=>{a==="custom"?jD(n)(g=>{g.each(h=>{PD(s,h),n.execCommand("mceApplyTextcolor",s,h),i(h)})},UD(n,s).getOr(LD)):a==="remove"?(i(""),n.execCommand("mceRemoveTextcolor",s)):(i(a),n.execCommand("mceApplyTextcolor",s,a))},uv=(n,s,a)=>n.concat(GZ(s).concat(B4(a))),ZD=(n,s,a)=>i=>{i(uv(n,s,a))},P4=(n,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";n.setIconFill(i,a)},M8=(n,s)=>{n.setTooltip(s)},B8=(n,s)=>a=>{const i=UD(n,s);return uc(i,a.toUpperCase())},WD=(n,s,a)=>{if(ya(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=uv(M4(n,s),s,!1),g=vt(d,h=>h.value===a).getOr({text:""}).text;return n.translate([i,n.translate(g)])},N8=(n,s,a,i)=>{n.ui.registry.addSplitButton(s,{tooltip:WD(n,a,i.get()),chevronTooltip:s==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:B8(n,a),columns:_8(n,a),fetch:ZD(M4(n,a),a,HD(n)),onAction:d=>{N4(n,a,i.get(),Y)},onItemAction:(d,g)=>{N4(n,a,g,h=>{i.set(h),y8(n,{name:s,color:h})})},onSetup:d=>{P4(d,s,i.get());const g=h=>{h.name===s&&(P4(d,h.name,h.color),M8(d,WD(n,a,h.color)))};return n.on("TextColorChange",g),E1(Fr(n)(d),()=>{n.off("TextColorChange",g)})}})},P8=(n,s,a,i,d)=>{n.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(M8(g,WD(n,a,d.get())),P4(g,s,d.get()),Fr(n)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:B8(n,a),initData:{storageKey:a},onAction:g=>{N4(n,a,g.value,h=>{d.set(h),y8(n,{name:s,color:h})})}}]})},jD=n=>(s,a)=>{let i=!1;const d=C=>{const x=C.getData().colorpicker;i?(s(T.from(x)),C.close()):n.windowManager.alert(n.translate(["Invalid hex color code: {0}",x]))},g=(C,S)=>{S.name==="hex-valid"&&(i=S.value)},h={colorpicker:a};n.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:Y,onCancel:()=>{s(T.none())}})},$8=n=>{R8(n);const s=KZ(n),a=A8(n),i=pt(s),d=pt(a);N8(n,"forecolor","forecolor",i),N8(n,"backcolor","hilitecolor",d),P8(n,"forecolor","forecolor","Text color",i),P8(n,"backcolor","hilitecolor","Background color",d)},YZ=(n,s,a,i,d)=>{const g=S=>({setActive:x=>{Sn.set(S,x)},isActive:()=>Sn.isOn(S),isEnabled:()=>!ft.isDisabled(S),setEnabled:x=>ft.set(S,!x)}),h=lv({presets:"img",textContent:T.none(),htmlContent:T.none(),ariaLabel:n.tooltip,iconContent:T.some(n.url),labelContent:n.label,shortcutContent:T.none(),checkMark:T.some(yD(d.icons)),caret:T.none(),value:n.value},d,!0),C=n.tooltip.map(S=>Do.config(d.tooltips.getConfig({tooltipText:d.translate(S)})));return uo(w1({context:n.context,data:ng(n),enabled:n.enabled,getApi:g,onAction:S=>{s(n.value),S.setActive(!0)},onSetup:S=>(S.setActive(a),Y),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},h,i,d),{toggling:{toggleClass:TO,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},$4=(n,s,a,i,d,g,h,C)=>{const S=ZC(s),_=XZ(s,a,i,d!=="color"?"normal":"color",g,h,C);return IO(n,S,_,i,{menuType:d})},XZ=(n,s,a,i,d,g,h)=>Oi(De(n,C=>C.type==="choiceitem"?aZ(C).fold(Ld,S=>T.some(wD(S,a===1,i,s,g(S.value),d,h,ZC(n)))):C.type==="imageitem"?QP(C).fold(Ld,S=>T.some(YZ(S,s,g(S.value),d,h))):C.type==="resetimage"?lD(C).fold(Ld,S=>T.some(wD({...S,text:S.tooltip,icon:T.some(S.icon),label:T.some(S.label)},a===1,i,s,g(S.value),d,h,ZC(n)))):T.none())),Rh=(n,s)=>{const a=Hm(s);return n===1?{mode:"menu",moveOnTab:!0}:n==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?io(d.element,"[aria-checked=true]"):T.none()}},JZ=(n,s)=>n===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:n==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${Eh}`:`.${HC}`}},QZ=(n,s)=>{const a=I8(n,s),i=s.colorinput.getColorCols(n.initData.storageKey),d="color",h={...$4(st("menu-value"),a,C=>{n.onAction({value:C})},i,d,Vu.CLOSE_ON_EXECUTE,n.select.getOr(Vn),s.shared.providers),markers:Hm(d),movement:Rh(i,d),showMenuRole:!1};return{type:"widget",data:{value:st("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[CA.widget(Gf.sketch(h))]}},I8=(n,s)=>{const a=n.initData.allowCustomColors&&s.colorinput.hasCustomColors();return n.initData.colors.fold(()=>uv(s.colorinput.getColors(n.initData.storageKey),n.initData.storageKey,a),i=>i.concat(B4(a)))},L8=(n,s)=>{const a="imageselector",i=n.initData.columns,g={...$4(st("menu-value"),n.initData.items,h=>{n.onAction({value:h})},i,a,Vu.CLOSE_ON_EXECUTE,n.select.getOr(Vn),s.shared.providers),markers:Hm(a),movement:Rh(i,a),showMenuRole:!1};return{type:"widget",data:{value:st("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[CA.widget(Gf.sketch(g))]}},F8=st("cell-over"),H8=st("cell-execute"),GD=n=>(s,a)=>n.shared.providers.translate(["{0} columns, {1} rows",a,s]),eW=(n,s,a)=>{const i=h=>xt(h,F8,{row:n,col:s}),d=h=>xt(h,H8,{row:n,col:s}),g=(h,C)=>{C.stop(),d(h)};return m({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Ve([Ut("insert-table-picker-cell",[Te(Uc(),Zt.focus),Te(Nr(),d),Te(vf(),g),Te(Fg(),g)]),Sn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Zt.config({onFocus:i})])})},z8=(n,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=n(d+1,h+1);g.push(eW(d,h,C))}i.push(g)}return i},tW=(n,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)Sn.set(n[g][h],g<=s&&h<=a)},nW=n=>le(n,s=>De(s,p)),V8=(n,s)=>$o(`${s}x${n}`),qD={inserttable:(n,s)=>{const d=GD(s),g=z8(d,10,10),h=V8(0,0),C=Un({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Ve([Gt.config({})])});return{type:"widget",data:{value:st("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[CA.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:nW(g).concat(C.asSpec()),behaviours:Ve([Ut("insert-table-picker",[Oo(S=>{Gt.set(C.get(S),[h])}),Qg(F8,(S,x,_)=>{const{row:D,col:P}=_.event;tW(g,D,P,10,10),Gt.set(C.get(S),[V8(D+1,P+1)])}),Qg(H8,(S,x,_)=>{const{row:D,col:P}=_.event;fn(S,v0()),n.onAction({numRows:D+1,numColumns:P+1})})]),wt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:QZ,imageselect:L8},sW=(n,s)=>bt(qD,n.fancytype).map(a=>a(n,s)),rW=(n,s,a,i=!0,d=!1)=>{const g=d?MZ(a.icons):ol(a.icons),h=S=>({isEnabled:()=>!ft.isDisabled(S),setEnabled:x=>ft.set(S,!x),setIconFill:(x,_)=>{io(S.element,`svg path[class="${x}"], rect[class="${x}"]`).each(D=>{Pt(D,"fill",_)})},setTooltip:x=>{const _=a.translate(x);Pt(S.element,"aria-label",_)}}),C=lv({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:T.none(),ariaLabel:n.text,labelContent:T.none(),caret:T.some(g),checkMark:T.none(),shortcutContent:n.shortcut},a,i);return w1({context:n.context,data:ng(n),getApi:h,enabled:n.enabled,onAction:Y,onSetup:n.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},aW=(n,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!ft.isDisabled(h),setEnabled:C=>ft.set(h,!C)}),g=lv({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:T.none(),labelContent:T.none(),ariaLabel:n.text,caret:T.none(),checkMark:T.none(),shortcutContent:n.shortcut},a,i);return w1({context:n.context,data:ng(n),getApi:d,enabled:n.enabled,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},cW=n=>({type:"separator",dom:{tag:"div",classes:[HC,rP]},components:n.text.map($o).toArray()}),U8=(n,s,a,i=!0)=>{const d=h=>({setActive:C=>{Sn.set(h,C)},isActive:()=>Sn.isOn(h),isEnabled:()=>!ft.isDisabled(h),setEnabled:C=>ft.set(h,!C)}),g=lv({iconContent:n.icon,textContent:n.text,htmlContent:T.none(),labelContent:T.none(),ariaLabel:n.text,checkMark:T.some(yD(a.icons)),caret:T.none(),shortcutContent:n.shortcut,presets:"normal",meta:n.meta},a,i);return uo(w1({context:n.context,data:ng(n),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:TO,toggleOnExecute:!1,selected:n.active},role:n.role.getOrUndefined()})},Z8=IZ,KD=cW,iW=aW,lW=rW,uW=U8,dW=sW,mW=LZ,fW=n=>{switch(n.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:n}}},gW=n=>{const s=it.getValue(n),a=VC(n).map(DO);Kc.refetch(s).get(()=>{const i=qt.getCoupled(s,"sandbox");a.each(d=>VC(i).each(g=>IV(g,d)))})},hW=(n,s)=>{pW(n).each(a=>{ek(n,a.element,s.event.eventType,s.event.interactionEvent)})},pW=n=>In.getState(n).bind(zn.getHighlighted).bind(zn.getHighlighted),YD=n=>$s(n.element,u4)?T.some(n.element):io(n.element,"."+u4),W8=(n,s,a)=>{fP(n).each(i=>{gP(i,a),YD(s).each(g=>{Or(g,"id").each(h=>Pt(i.element,"aria-controls",h))})}),Pt(a.element,"aria-selected","true")},bW=(n,s,a)=>{Pt(a.element,"aria-selected","false")},vW=n=>{fP(n).each(s=>Zt.focus(s))},sS=n=>qt.getExistingCoupled(n,"sandbox").bind(VC).map(DO).map(a=>a.fetchPattern).getOr("");var dv;(function(n){n[n.ContentFocus=0]="ContentFocus",n[n.UiFocus=1]="UiFocus"})(dv||(dv={}));const yW=(n,s,a,i,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:T.none(),icon:C.text.isSome()?T.none():C.icon}:C;switch(n.type){case"menuitem":return dZ(n).fold(Ld,C=>T.some(iW(h(C),s,g,i)));case"nestedmenuitem":return fZ(n).fold(Ld,C=>T.some(lW(h(C),s,g,i,d)));case"togglemenuitem":return hZ(n).fold(Ld,C=>T.some(uW(h(C),s,g,i)));case"separator":return VU(n).fold(Ld,C=>T.some(KD(C)));case"fancymenuitem":return JP(n).fold(Ld,C=>dW(C,a));default:return console.error("Unknown item in general menu",n),T.none()}},CW=(n,s,a,i,d,g,h)=>{const C=i===1,S=!C||ZC(n);return Oi(De(n,x=>{switch(x.type){case"separator":return ZU(x).fold(Ld,_=>T.some(KD(_)));case"cardmenuitem":return aD(x).fold(Ld,_=>T.some(mW({..._,onAction:D=>{_.onAction(D),a(_.value,_.meta)}},d,g,{itemBehaviours:a8(_.meta,g,T.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return WU(x).fold(Ld,_=>T.some(Z8(_,s,C,"normal",a,d,g,S)))}}))},I4=(n,s,a,i,d,g)=>{const h=ZC(s),C=Oi(De(s,_=>{const D=F=>d?!$n(F,"text"):h,P=F=>yW(F,a,i,D(F),d);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?P({..._,enabled:!1}):P(_)})),S=fW(g);return(d?vP:IO)(n,h,C,1,S)},XD=n=>s1.singleData(n.value,n),JD=(n,s,a,i)=>{const d=Rh(s,i),g=Hm(i);return{data:XD({...n,movement:d,menuBehaviours:iv.unnamedEvents(s!=="auto"?[]:[Oo((h,C)=>{fD(h,4,g.item).each(({numColumns:S,numRows:x})=>{wt.setGridSize(h,x,S)})})])}),menu:{markers:Hm(i),fakeFocus:a===dv.ContentFocus}}},j8=n=>ff.create(We.fromDom(n.startContainer),n.startOffset,We.fromDom(n.endContainer),n.endOffset),SW={register:(n,s)=>{const a=st("autocompleter"),i=pt(!1),d=pt(!1),g=Wt(),h=m(rs.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ve([Ut("dismissAutocompleter",[Te(gd(),()=>D()),Te(w0(),(W,ee)=>{Or(ee.event.target,"id").each(re=>Pt(We.fromDom(n.getBody()),"aria-activedescendant",re))})])]),lazySink:s.getSink})),C=()=>rs.isOpen(h),S=d.get,x=()=>{if(C()){rs.hide(h),n.dom.remove(a,!1);const W=We.fromDom(n.getBody());Or(W,"aria-owns").filter(ee=>ee===a).each(()=>{Ho(W,"aria-owns"),Ho(W,"aria-activedescendant")})}},_=()=>rs.getContent(h).bind(W=>Ws(W.components(),0)),D=()=>n.execCommand("mceAutocompleterClose"),P=W=>{const ee=ca(W,re=>T.from(re.columns)).getOr(1);return le(W,re=>{const fe=re.items;return CW(fe,re.matchText,(be,Ke)=>{const Re={hide:()=>D(),reload:$e=>{x(),n.execCommand("mceAutocompleterReload",!1,{fetchOptions:$e})}};n.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each($e=>{i.set(!0),re.onAction(Re,$e,be,Ke),i.set(!1)})},ee,Vu.BUBBLE_TO_SANDBOX,s,re.highlightOn)})},F=(W,ee)=>{const re=ca(W,fe=>T.from(fe.columns)).getOr(1);rs.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(j8),root:We.fromDom(n.getBody())}},JD(IO("autocompleter-value",!0,ee,re,{menuType:"normal"}),re,dv.ContentFocus,"normal")),_().each(zn.highlightFirst)},z=W=>{const ee=P(W);ee.length>0?(F(W,ee),Pt(We.fromDom(n.getBody()),"aria-owns",a),n.inline||G()):x()},G=()=>{n.dom.get(a)&&n.dom.remove(a,!1);const W=n.getDoc().documentElement,ee=n.selection.getNode(),re=G1(h.element);ds(re,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ee.offsetTop}px`,left:`${ee.offsetLeft}px`}),n.dom.add(W,re.dom),io(re,'[role="menu"]').each(fe=>{Cn(fe,"position"),Cn(fe,"max-height")})};n.on("AutocompleterStart",({lookupData:W})=>{d.set(!0),i.set(!1),z(W)}),n.on("AutocompleterUpdate",({lookupData:W})=>z(W)),n.on("AutocompleterUpdateActiveRange",({range:W})=>g.set(W)),n.on("AutocompleterEnd",()=>{x(),d.set(!1),i.set(!1),g.clear()});const J={cancelIfNecessary:D,isMenuOpen:C,isActive:S,isProcessingAction:i.get,getMenu:_};OV.setup(J,n)}},G8=(n,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:De(n.items,s.interpreter)});var wW=tinymce.util.Tools.resolve("tinymce.html.Entities");const mv=(n,s,a,i)=>{const d=q8(n,s,a,i);return pn.sketch(d)},xW=(n,s)=>mv(n,s,[],[]),q8=(n,s,a,i)=>({dom:Y8(a),components:n.toArray().concat([s]),fieldBehaviours:Ve(i)}),K8=()=>Y8([]),Y8=n=>({tag:"div",classes:["tox-form__group"].concat(n)}),og=(n,s)=>pn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[$o(s.translate(n))]}),_c=st("form-component-change"),X8=st("form-component-input"),k1=st("form-close"),sg=st("form-cancel"),Uu=st("form-action"),rS=st("form-submit"),QD=st("form-block"),L4=st("form-unblock"),J8=st("form-tabchange"),eR=st("form-resize"),EW=(n,s,a)=>{const i=n.label.map(F=>og(F,s)),d=s.icons(),g=F=>d[F]??F,h=F=>(z,G)=>{ma(G.event.target,"[data-collection-item-value]").each(J=>{F(z,G,J,ir(J,"data-collection-item-value"))})},C=(F,z)=>{const J=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",W=De(z,fe=>{const be=Pa.translate(fe.text),Ke=n.columns===1?`<div class="tox-collection__item-label">${be}</div>`:"",Re=`<div class="tox-collection__item-icon">${g(fe.icon)}</div>`,$e={_:" "," - ":" ","-":" "},Ne=be.replace(/\_| \- |\-/g,Tt=>$e[Tt]);return`<div data-mce-tooltip="${Ne}" class="tox-collection__item${J}" tabindex="-1" data-collection-item-value="${wW.encodeAllRaw(fe.value)}" aria-label="${Ne}">${Re}${Ke}</div>`}),ee=n.columns!=="auto"&&n.columns>1?hs(W,n.columns):[W],re=De(ee,fe=>`<div class="tox-collection__group">${fe.join("")}</div>`);xl(F.element,re.join(""))},S=h((F,z,G,J)=>{z.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||xt(F,Uu,{name:n.name,value:J})}),x=[Te(Uc(),h((F,z,G)=>{br(G,!0)})),Te(vf(),S),Te(Fg(),S),Te(Vi(),h((F,z,G)=>{io(F.element,"."+m1).each(J=>{ns(J,m1)}),bo(G,m1)})),Te(T2(),h(F=>{io(F.element,"."+m1).each(z=>{ns(z,m1),vs(z)})})),Tm(h((F,z,G,J)=>{xt(F,Uu,{name:n.name,value:J})}))],_=(F,z)=>De(Mr(F.element,".tox-collection__item"),z),D=pn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(n.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:an},behaviours:Ve([ft.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable,onDisabled:F=>{_(F,z=>{bo(z,"tox-collection__item--state-disabled"),Pt(z,"aria-disabled",!0)})},onEnabled:F=>{_(F,z=>{ns(z,"tox-collection__item--state-disabled"),Ho(z,"aria-disabled")})}}),Rs(()=>s.checkUiComponentContext(n.context)),Gt.config({}),Do.config({...s.tooltips.getConfig({tooltipText:"",onShow:F=>{io(F.element,"."+m1+"[data-mce-tooltip]").each(z=>{Or(z,"data-mce-tooltip").each(G=>{Do.setComponents(F,s.tooltips.getComponents({tooltipText:G}))})})}}),mode:"children-keyboard-focus",anchor:F=>({type:"node",node:io(F.element,"."+m1).orThunk(()=>ZS(".tox-collection__item")),root:F.element,layouts:{onLtr:ie([Fs,Wo,Js,$r,Ls,vr]),onRtl:ie([Fs,Wo,Js,$r,Ls,vr])},bubble:wc(0,-2,{})})}),it.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(F,z)=>{C(F,z),n.columns==="auto"&&fD(F,5,"tox-collection__item").each(({numRows:G,numColumns:J})=>{wt.setGridSize(F,G,J)}),fn(F,eR)}}),To.config({}),wt.config(JZ(n.columns,"normal")),Ut("collection-events",x)]),eventOrder:{[Nr()]:["disabling","alloy.base.behaviour","collection-events"],[Vi()]:["collection-events","tooltipping"]}});return mv(i,D,["tox-form__group--collection"],[])},TW=(n,s)=>Kc.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:Ve([Hd.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable),Rs(()=>s.providers.checkUiComponentContext(n.context)),Dd.config({}),To.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Xo.nu(i=>n.fetch(i)).map(i=>T.from(XD(uo($4(st("menu-value"),i,d=>{n.onItemAction(a,d)},n.columns,n.presets,Vu.CLOSE_ON_EXECUTE,Vn,s.providers),{movement:Rh(n.columns,n.presets)})))),parts:{menu:zC(!1,1,n.presets)}}),F4=st("color-input-change"),Q8=st("color-swatch-change"),e$=st("color-picker-cancel"),kW=(n,s,a,i)=>{const d=pn.parts.field({factory:Fm,inputClasses:["tox-textfield"],data:i,onSetValue:x=>Ji.run(x).get(Y),inputBehaviours:Ve([ft.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable}),Rs(()=>s.providers.checkUiComponentContext(n.context)),To.config({}),Ji.config({invalidClass:"tox-textbox-field-invalid",getRoot:x=>lu(x.element),notify:{onValid:x=>{const _=it.getValue(x);xt(x,F4,{color:_})}},validator:{validateOnLoad:!1,validate:x=>{const _=it.getValue(x);if(_.length===0)return Xo.pure(Nt.value(!0));{const D=We.fromTag("span");Ht(D,"background-color",_);const P=Qo(D,"background-color").fold(()=>Nt.error("blah"),F=>Nt.value(_));return Xo.pure(P)}}}})]),selectOnFocus:!1}),g=n.label.map(x=>og(x,s.providers)),h=(x,_)=>{xt(x,Q8,{value:_})},C=(x,_)=>{S.getOpt(x).each(D=>{_==="custom"?a.colorPicker(P=>{P.fold(()=>fn(D,e$),F=>{h(D,F),PD(n.storageKey,F)})},"#ffffff"):_==="remove"?h(D,""):h(D,_)})},S=Un(TW({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Ls,Js,Fs],onLtr:()=>[Js,Ls,Fs]},components:[],fetch:ZD(a.getColors(n.storageKey),n.storageKey,a.hasCustomColors()),columns:a.getColorCols(n.storageKey),presets:"color",onItemAction:C,context:n.context},s));return pn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Ve([Ut("form-field-events",[Te(F4,(x,_)=>{S.getOpt(x).each(D=>{Ht(D.element,"background-color",_.event.color)}),xt(x,_c,{name:n.name})}),Te(Q8,(x,_)=>{pn.getField(x).each(D=>{it.setValue(D,_.event.value),Le.getCurrent(x).each(Zt.focus)})}),Te(e$,(x,_)=>{pn.getField(x).each(D=>{Le.getCurrent(x).each(Zt.focus)})})])])})},Zu={self:()=>Le.config({find:T.some}),memento:n=>Le.config({find:n.getOpt}),childAt:n=>Le.config({find:s=>om(s.element,n).bind(a=>s.getSystem().getByDom(a).toOptional())})},n$=kt([de("preprocess",an),de("postprocess",an)]),AW=(n,s)=>{const a=xa("RepresentingConfigs.memento processors",n$,s);return it.config({store:{mode:"manual",getValue:i=>{const d=n.get(i),g=it.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=n.get(i);it.setValue(h,g)}}})},_1=(n,s,a)=>it.config({store:{mode:"manual",...n.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),o$=(n,s,a)=>_1(n,i=>s(i.element),(i,d)=>a(i.element,d)),OW=n=>o$(n,od,xl),H4=n=>it.config({store:{mode:"memory",initialValue:n}}),z4=st("rgb-hex-update"),s$=st("slider-update"),r$=st("palette-update"),a$=(n,s)=>{const a=Hu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Hu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Hu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ie(0)},components:[a,i],sliderBehaviours:Ve([Zt.config({})]),onChange:(d,g,h)=>{Pt(d.element,"aria-valuenow",Math.floor(360-h*3.6)),xt(d,s$,{value:h})}})},c$=st("valid-input"),i$=st("invalid-input"),l$=st("validating-input"),V4="colorcustom.rgb.",DW={isEnabled:Dt,setEnabled:Y,immediatelyShow:Y,immediatelyHide:Y},RW=(n,s,a,i,d,g)=>{const h=(G,J)=>{const W=J.get();G!==W.isEnabled()&&(W.setEnabled(G),G?W.immediatelyShow():W.immediatelyHide())},C=(G,J,W)=>Ji.config({invalidClass:s("invalid"),notify:{onValidate:ee=>{xt(ee,l$,{type:G})},onValid:ee=>{h(!1,W),xt(ee,c$,{type:G,value:it.getValue(ee)})},onInvalid:ee=>{h(!0,W),xt(ee,i$,{type:G,value:it.getValue(ee)})}},validator:{validate:ee=>{const re=it.getValue(ee),fe=J(re)?Nt.value(!0):Nt.error(n("aria.input.invalid"));return Xo.pure(fe)},validateOnLoad:!1}}),S=(G,J,W,ee,re)=>{const fe=pt(DW),be=n(V4+"range"),Ke=pn.parts.label({dom:{tag:"label"},components:[$o(W)]}),Re=pn.parts.field({data:re,factory:Fm,inputAttributes:{type:"text","aria-label":ee,...J==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Ve([C(J,G,fe),To.config({}),Do.config({...d({tooltipText:"",onSetup:Xt=>{fe.set({isEnabled:()=>Do.isEnabled(Xt),setEnabled:ht=>Do.setEnabled(Xt,ht),immediatelyShow:()=>Do.immediateOpenClose(Xt,!0),immediatelyHide:()=>Do.immediateOpenClose(Xt,!1)}),Do.setEnabled(Xt,!1)},onShow:(Xt,ht)=>{Do.setComponents(Xt,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[$o(n(J==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Xt=>{Ji.isInvalid(Xt)&&Ji.run(Xt).get(Y)}}),$e=st("aria-invalid"),Ne=Un(g("invalid",T.some($e),"warning")),Tt=Un({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Ne.asSpec()]}),gt=[Ke,Re,Tt.asSpec()],sn=J!=="hex"?[pn.parts["aria-descriptor"]({text:be})]:[],_t=gt.concat(sn);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:_t}},x=(G,J)=>{const W=QC(J);return vh.getField(G,"hex").each(ee=>{Zt.isFocused(ee)||it.setValue(G,{hex:W.value})}),W},_=(G,J)=>{const W=J.red,ee=J.green,re=J.blue;it.setValue(G,{red:W,green:ee,blue:re})},D=Un({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),P=(G,J)=>{D.getOpt(G).each(W=>{Ht(W.element,"background-color","#"+J.value)})};return Xi({factory:()=>{const G={red:pt(T.some(255)),green:pt(T.some(255)),blue:pt(T.some(255)),hex:pt(T.some("ffffff"))},J=(ht,Ae)=>{const Ze=tS(Ae);_(ht,Ze),fe(Ze)},W=ht=>G[ht].get(),ee=(ht,Ae)=>{G[ht].set(Ae)},re=()=>W("red").bind(ht=>W("green").bind(Ae=>W("blue").map(Ze=>wr(ht,Ae,Ze,1)))),fe=ht=>{const Ae=ht.red,Ze=ht.green,$t=ht.blue;ee("red",T.some(Ae)),ee("green",T.some(Ze)),ee("blue",T.some($t))},be=(ht,Ae)=>{const Ze=Ae.event;Ze.type!=="hex"?ee(Ze.type,T.none()):i(ht)},Ke=(ht,Ae)=>{a(ht);const Ze=E4(Ae);ee("hex",T.some(Ze.value));const $t=tS(Ze);_(ht,$t),fe($t),xt(ht,z4,{hex:Ze}),P(ht,Ze)},Re=(ht,Ae,Ze)=>{const $t=parseInt(Ze,10);ee(Ae,T.some($t)),re().each(Jt=>{const Ct=x(ht,Jt);xt(ht,z4,{hex:Ct}),P(ht,Ct)})},$e=ht=>ht.type==="hex",Ne=(ht,Ae)=>{const Ze=Ae.event;$e(Ze)?Ke(ht,Ze.value):Re(ht,Ze.type,Ze.value)},Tt=ht=>({label:n(V4+ht+".label"),description:n(V4+ht+".description")}),gt=Tt("red"),sn=Tt("green"),_t=Tt("blue"),Xt=Tt("hex");return uo(vh.sketch(ht=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":n("aria.color.picker")}},components:[ht.field("red",pn.sketch(S(_4,"red",gt.label,gt.description,255))),ht.field("green",pn.sketch(S(_4,"green",sn.label,sn.description,255))),ht.field("blue",pn.sketch(S(_4,"blue",_t.label,_t.description,255))),ht.field("hex",pn.sketch(S(k4,"hex",Xt.label,Xt.description,"ffffff"))),D.asSpec()],formBehaviours:Ve([Ji.config({invalidClass:s("form-invalid")}),Ut("rgb-form-events",[Te(c$,Ne),Te(i$,be),Te(l$,be)])])})),{apis:{updateHex:(ht,Ae)=>{it.setValue(ht,{hex:Ae.value}),J(ht,Ae),P(ht,Ae)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(G,J,W)=>{G.updateHex(J,W)}},extraApis:{}})},MW=(n,s)=>{const a=Hu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Hu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(x,_)=>{const{width:D,height:P}=x,F=x.getContext("2d");if(F===null)return;F.fillStyle=_,F.fillRect(0,0,D,P);const z=F.createLinearGradient(0,0,D,0);z.addColorStop(0,"rgba(255,255,255,1)"),z.addColorStop(1,"rgba(255,255,255,0)"),F.fillStyle=z,F.fillRect(0,0,D,P);const G=F.createLinearGradient(0,0,0,P);G.addColorStop(0,"rgba(0,0,0,0)"),G.addColorStop(1,"rgba(0,0,0,1)"),F.fillStyle=G,F.fillRect(0,0,D,P)},g=(x,_)=>{const D=x.components()[0].element.dom,P=Oh(_,100,100),F=g8(P);d(D,h8(F))},h=(x,_)=>{const D=ED(tS(_));Hu.setValue(x,{x:D.saturation,y:100-D.value}),Pt(x.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",D.saturation,D.value]))};return Xi({factory:x=>{const _=ie({x:0,y:0}),D=(z,G,J)=>{Fa(J)||Pt(z.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",Math.floor(J.x),Math.floor(100-J.y)])),xt(z,r$,{value:J})},P=(z,G,J,W)=>{d(J.element.dom,h8(p8))},F=Ve([Le.config({find:T.some}),Zt.config({})]);return Hu.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":n(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:_},rounded:!1,components:[a,i],onChange:D,onInit:P,sliderBehaviours:F})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(x,_,D)=>{g(_,D)},setThumb:(x,_,D)=>{h(_,D)}},extraApis:{}})},u$=(n,s,a,i)=>{const d=h=>{const C=RW(n,s,h.onValidHex,h.onInvalidHex,a,i),S=MW(n,s),x=$e=>(100-$e)/100*360,_=$e=>100-$e/360*100,D={paletteRgba:pt(p8),paletteHue:pt(0)},P=Un(a$(n,s)),F=Un(S.sketch({})),z=Un(C.sketch({})),G=($e,Ne,Tt)=>{F.getOpt($e).each(gt=>{S.setHue(gt,Tt)})},J=($e,Ne)=>{z.getOpt($e).each(Tt=>{C.updateHex(Tt,Ne)})},W=($e,Ne,Tt)=>{P.getOpt($e).each(gt=>{Hu.setValue(gt,_(Tt))})},ee=($e,Ne)=>{F.getOpt($e).each(Tt=>{S.setThumb(Tt,Ne)})},re=($e,Ne)=>{const Tt=tS($e);D.paletteRgba.set(Tt),D.paletteHue.set(Ne)},fe=($e,Ne,Tt,gt)=>{re(Ne,Tt),et(gt,sn=>{sn($e,Ne,Tt)})},be=()=>{const $e=[J];return(Ne,Tt)=>{const gt=Tt.event.value,sn=D.paletteHue.get(),_t=Oh(sn,gt.x,100-gt.y),Xt=Vd(_t);fe(Ne,Xt,sn,$e)}},Ke=()=>{const $e=[G,J];return(Ne,Tt)=>{const gt=x(Tt.event.value),sn=D.paletteRgba.get(),_t=ED(sn),Xt=Oh(gt,_t.saturation,_t.value),ht=Vd(Xt);fe(Ne,ht,gt,$e)}},Re=()=>{const $e=[G,W,ee];return(Ne,Tt)=>{const gt=Tt.event.hex,sn=b8(gt);fe(Ne,gt,sn.hue,$e)}};return{uid:h.uid,dom:h.dom,components:[F.asSpec(),P.asSpec(),z.asSpec()],behaviours:Ve([Ut("colour-picker-events",[Te(z4,Re()),Te(r$,be()),Te(s$,Ke())]),Le.config({find:$e=>z.getOpt($e)}),wt.config({mode:"acyclic"})])}};return Xi({name:"ColourPicker",configFields:[Be("dom"),de("onValidHex",Y),de("onInvalidHex",Y)],factory:d})},d$={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},m$=n=>s=>Et(s)?n.translate(d$[s]):n.translate(s),U4=(n,s,a)=>{const i=x=>"tox-"+x,d=(x,_,D=x,P=x)=>nl(D,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+x],attributes:{title:s.translate(P),"aria-live":"polite",..._.fold(()=>({}),F=>({id:F}))}},s.icons),g=u$(m$(s),i,s.tooltips.getConfig,d),h=x=>{xt(x,Uu,{name:"hex-valid",value:!0})},C=x=>{xt(x,Uu,{name:"hex-valid",value:!1})},S=Un(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:Ve([_1(a,x=>{const _=S.get(x);return Le.getCurrent(_).bind(F=>it.getValue(F).hex).map(F=>"#"+nf(F,"#")).getOr("")},(x,_)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,P=T.from(D.exec(_)).bind(G=>Ws(G,1)),F=S.get(x);Le.getCurrent(F).fold(()=>{console.log("Can not find form")},G=>{it.setValue(G,{hex:P.getOr("")}),vh.getField(G,"hex").each(J=>{fn(J,Al())})})}),Zu.self()])}};var f$=tinymce.util.Tools.resolve("tinymce.Resource");const g$=n=>$n(n,"init"),BW=n=>{const s=Wt(),a=Un({dom:{tag:n.tag}}),i=Wt(),d=!g$(n)&&n.onFocus.isSome()?[Zt.config({onFocus:g=>{n.onFocus.each(h=>{h(g.element.dom)})}}),To.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ve([Ut("custom-editor-events",[Oo(g=>{a.getOpt(g).each(h=>{(g$(n)?n.init(h.element.dom):f$.load(n.scriptId,n.scriptUrl).then(C=>C(h.element.dom,n.settings))).then(C=>{i.on(S=>{C.setValue(S)}),i.clear(),s.set(C)})})})]),_1(T.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),Zu.self()].concat(d)),components:[a.asSpec()]}};var Wm=tinymce.util.Tools.resolve("tinymce.util.Tools");const tR=st("browse.files.event"),NW=(n,s,a)=>{const i=Wm.explode(s.getOption("images_file_types")),d=g=>a.fold(()=>Qs(i,h=>ni(g.name.toLowerCase(),`.${h.toLowerCase()}`)),h=>Qs(h,C=>ni(g.name.toLowerCase(),`.${C.toLowerCase()}`)));return co(Lh(n),d)},PW=(n,s,a)=>{const i=(P,F)=>{F.stop()},d=P=>(F,z)=>{et(P,G=>{G(F,z)})},g=(P,F)=>{var z;if(!ft.isDisabled(P)){const G=F.event.raw;xt(P,tR,{files:(z=G.dataTransfer)==null?void 0:z.files})}},h=(P,F)=>{const z=F.event.raw.target;xt(P,tR,{files:z.files})},C=(P,F)=>{F&&(it.setValue(P,NW(F,s,n.allowedFileExtensions)),xt(P,_c,{name:n.name}))},S=Un({dom:{tag:"input",attributes:{type:"file",accept:n.allowedFileTypes.getOr("image/*")},styles:{display:"none"}},behaviours:Ve([Ut("input-file-events",[Mf(vf()),Mf(Fg())])])}),x=n.label.map(P=>og(P,s)),_=pn.parts.field({factory:fr,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[$o(s.translate(n.buttonLabel.getOr("Browse for an image"))),S.asSpec()],action:P=>{S.get(P).element.dom.click()},buttonBehaviours:Ve([Zu.self(),H4(a.getOr([])),To.config({}),Hd.button(()=>s.checkUiComponentContext(n.context).shouldDisable),Rs(()=>s.checkUiComponentContext(n.context))])}),D={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ve([ft.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable}),Rs(()=>s.checkUiComponentContext(n.context)),Sn.config({toggleClass:"dragenter",toggleOnExecute:!1}),Ut("dropzone-events",[Te("dragenter",d([i,Sn.toggle])),Te("dragleave",d([i,Sn.toggle])),Te("dragover",i),Te("drop",d([i,g])),Te(bf(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[$o(s.translate(n.dropAreaLabel.getOr("Drop an image here")))]},_]}]};return mv(x,D,["tox-form__group--stretched"],[Ut("handle-files",[Te(tR,(P,F)=>{pn.getField(P).each(z=>{C(z,F.event.files)})})])])},$W=(n,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${n.columns}col`]},components:De(n.items,s.interpreter)}),Z4=st("alloy-fake-before-tabstop"),nR=st("alloy-fake-after-tabstop"),h$=n=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:Ve([Zt.config({ignore:!0}),To.config({})])}),p$=(n,s)=>({dom:{tag:"div",classes:["tox-navobj",...n.getOr([])]},components:[h$([Z4]),s,h$([nR])],behaviours:Ve([Zu.childAt(1)])}),oR=(n,s)=>{xt(n,mr(),{raw:{which:9,shiftKey:s}})},b$=(n,s)=>{const a=s.element;$s(a,Z4)?oR(n,!0):$s(a,nR)&&oR(n,!1)},aS=n=>Xh(n,["."+Z4,"."+nR].join(","),Vn),W4=st("update-dialog"),sR=st("update-title"),v$=st("update-body"),y$=st("update-footer"),zt=st("body-send-message"),Mh=st("dialog-focus-shifted"),j4=jr().browser,fv=j4.isSafari(),C$=j4.isFirefox(),rR=fv||C$,IW=j4.isChromium(),S$=({scrollTop:n,scrollHeight:s,clientHeight:a})=>Math.ceil(n)+a>=s,w$=(n,s)=>n.scrollTo(0,s==="bottom"?99999999:s),LW=(n,s)=>{const a=n.body;return T.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!IW&&!fv||oo(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:n.documentElement)},x$=(n,s,a)=>{const i=n.dom;T.from(i.contentDocument).fold(a,d=>{let g=0;const h=LW(d,s).map(S=>(g=S.scrollTop,S)).forall(S$),C=()=>{const S=i.contentWindow;oo(S)&&(h?w$(S,"bottom"):!h&&rR&&g!==0&&w$(S,g))};fv&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),fv||C()})},E$=va(rR,fv?500:200).map(n=>us(x$,n)),QY=(n,s)=>{const a=pt(n.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>Pt(g,"srcdoc",d);s?E$.fold(ie(x$),C=>C.throttle)(g,d,h):h()}a.set(d)}}},cS=(n,s,a)=>{const i="tox-dialog__iframe",d=n.transparent?[]:[`${i}--opaque`],g=n.border?["tox-navobj-bordered"]:[],h={...n.label.map(D=>({title:D})).getOr({}),...a.map(D=>({srcdoc:D})).getOr({}),...n.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=QY(a,n.streamContent),S=n.label.map(D=>og(D,s)),x=D=>p$(T.from(g),{uid:D.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:Ve([To.config({}),Zt.config({}),_1(a,C.getValue,C.setValue),Na.config({channels:{[Mh]:{onReceive:(P,F)=>{F.newFocus.each(z=>{lu(P.element).each(G=>{(un(P.element,z)?bo:ns)(G,"tox-navobj-bordered-focus")})})}}}})])}),_=pn.parts.field({factory:{sketch:x}});return mv(S,_,["tox-form__group--stretched"],[])},aR=(n,s,a,i,d)=>{const g=a*d,h=i*d,C=Math.max(0,n/2-g/2),S=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},T$=(n,s,a)=>{const i=da(n),d=lr(n);return Math.min(i/s,d/a,1)},HW=(n,s)=>{const a=pt(s.getOr({url:""})),i=Un({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=Un({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,x)=>{const _={url:x.url};x.zoom.each(P=>_.zoom=P),x.cachedWidth.each(P=>_.cachedWidth=P),x.cachedHeight.each(P=>_.cachedHeight=P),a.set(_);const D=()=>{const{cachedWidth:P,cachedHeight:F,zoom:z}=_;if(!Zs(P)&&!Zs(F)){if(Zs(z)){const J=T$(S.element,P,F);_.zoom=J}const G=aR(da(S.element),lr(S.element),P,F,_.zoom);d.getOpt(S).each(J=>{ds(J.element,G)})}};i.getOpt(S).each(P=>{const F=P.element;x.url!==ir(F,"src")&&(Pt(F,"src",x.url),ns(S.element,"tox-imagepreview__loaded")),D(),El(F).then(z=>{S.getSystem().isConnected()&&(bo(S.element,"tox-imagepreview__loaded"),_.cachedWidth=z.dom.naturalWidth,_.cachedHeight=z.dom.naturalHeight,D())})})},h={};n.height.each(S=>h.height=S);const C=s.map(S=>({url:S.url,zoom:T.from(S.zoom),cachedWidth:T.from(S.cachedWidth),cachedHeight:T.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Ve([Zu.self(),_1(C,()=>a.get(),g)])}},zW=(n,s,a)=>{const i="tox-label",d=n.align==="center"?[`${i}--center`]:[],g=n.align==="end"?[`${i}--end`]:[],h=Un({dom:{tag:"label",classes:[i,...d,...g]},components:[$o(s.providers.translate(n.label))]}),C=De(n.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:Ve([Zu.self(),Gt.config({}),OW(T.none()),wt.config({mode:"acyclic"}),Ut("label",[Oo(S=>{n.for.each(x=>{a(x).each(_=>{h.getOpt(S).each(D=>{const P=ir(_.element,"id")??st("form-field");Pt(_.element,"id",P),Pt(D.element,"for",P)})})})})])])}},cR=st("toolbar.button.execute"),VW=n=>Tm((s,a)=>{XC(n,s)(i=>{xt(s,cR,{buttonApi:i}),n.onAction(i)})}),jm=st("common-button-display-events"),iR={[Nr()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Ol()]:["toolbar-button-events",jm],[bi()]:["toolbar-button-events","dropdown-events","tooltipping"],[Ka()]:["focusing","alloy.base.behaviour",jm]},G4=n=>Ht(n.element,"width",zo(n.element,"width")),k$=(n,s,a)=>nl(n,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),lR=(n,s)=>k$(n,s,[]),Bh=(n,s)=>k$(n,s,[Gt.config({})]),uR=(n,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[$o(a.translate(n))],behaviours:Ve([Gt.config({})])}),ql=st("update-menu-text"),A1=st("update-menu-icon"),q4=st("update-tooltip-text"),dR=(n,s,a,i)=>{const d=pt(Y),g=pt(n.tooltip),h=n.text.map(J=>Un(uR(J,s,a.providers))),C=n.icon.map(J=>Un(Bh(J,a.providers.icons))),S=(J,W)=>{const ee=it.getValue(J);return Zt.focus(ee),xt(ee,"keydown",{raw:W.event.raw}),Kc.close(ee),T.some(!0)},x=n.role.fold(()=>({}),J=>({role:J})),_=T.from(n.listRole).map(J=>({listRole:J})).getOr({}),D=n.ariaLabel.fold(()=>({}),J=>({"aria-label":a.providers.translate(J)})),P=nl("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),F=st("common-button-display-events"),z="dropdown-events";return Un(Kc.sketch({...n.uid?{uid:n.uid}:{},...x,..._,dom:{tag:"button",classes:[s,`${s}--select`].concat(De(n.classes,J=>`${s}--${J}`)),attributes:{...D,...oo(i)?{"data-mce-name":i}:{}}},components:Vm([C.map(J=>J.asSpec()),h.map(J=>J.asSpec()),T.some(P)]),matchWidth:!0,useMinWidth:!0,onOpen:(J,W,ee)=>{n.searchable&&vW(ee)},dropdownBehaviours:Ve([...n.dropdownBehaviours,Hd.button(()=>n.disabled||a.providers.checkUiComponentContext(n.context).shouldDisable),Rs(()=>a.providers.checkUiComponentContext(n.context)),Dd.config({}),Gt.config({}),...n.tooltip.map(J=>Do.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(J),onShow:W=>{if(dc(g.get(),n.tooltip,(ee,re)=>re!==ee).getOr(!1)){const ee=a.providers.translate(g.get().getOr(""));Do.setComponents(W,a.providers.tooltips.getComponents({tooltipText:ee}))}}}))).toArray(),Ut(z,[zd(n,d),Ah(n,d)]),Ut(F,[Oo((J,W)=>{n.listRole!=="listbox"&&G4(J)})]),Ut("update-dropdown-width-variable",[Te(Hg(),(J,W)=>Kc.close(J))]),Ut("menubutton-update-display-text",[Te(ql,(J,W)=>{h.bind(ee=>ee.getOpt(J)).each(ee=>{Gt.set(ee,[$o(a.providers.translate(W.event.text))])})}),Te(A1,(J,W)=>{C.bind(ee=>ee.getOpt(J)).each(ee=>{Gt.set(ee,[Bh(W.event.icon,a.providers.icons)])})}),Te(q4,(J,W)=>{const ee=a.providers.translate(W.event.text);Pt(J.element,"aria-label",ee),g.set(T.some(W.event.text))})])]),eventOrder:uo(iR,{[Ka()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ol()]:["toolbar-button-events",Do.name(),z,F]}),sandboxBehaviours:Ve([wt.config({mode:"special",onLeft:S,onRight:S}),Ut("dropdown-sandbox-events",[Te(uP,(J,W)=>{gW(J),W.stop()}),Te(dP,(J,W)=>{hW(J,W),W.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...zC(!1,n.columns,n.presets),fakeFocus:n.searchable,...n.listRole==="listbox"?{}:{onHighlightItem:W8,onCollapseMenu:(J,W,ee)=>{zn.getHighlighted(ee).each(re=>{W8(J,ee,re)})},onDehighlightItem:bW}}},getAnchorOverrides:()=>({maxHeightFunction:(J,W)=>{K2()(J,W-10)}}),fetch:J=>Xo.nu(gn(n.fetch,J))})).asSpec()},K4=n=>Et(n),_$=n=>n.type==="separator",A$=n=>$n(n,"getSubmenuItems"),UW={type:"separator"},ZW=(n,s)=>{const a=So(n,(i,d)=>K4(d)?d===""?i:d==="|"?i.length>0&&!_$(i[i.length-1])?i.concat([UW]):i:$n(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&_$(a[a.length-1])&&a.pop(),a},eX=(n,s)=>{const a=n.getSubmenuItems(),i=O$(a,s),d=uo(i.menus,{[n.value]:i.items}),g=uo(i.expansions,{[n.value]:n.value});return{item:n,menus:d,expansions:g}},WW=n=>{const s=bt(n,"value").getOrThunk(()=>st("generated-menu-item"));return uo({value:s},n)},O$=(n,s)=>{const a=ZW(Et(n)?n.split(" "):n,s);return cs(a,(i,d)=>{if(A$(d)){const g=WW(d),h=eX(g,s);return{menus:uo(i.menus,h.menus),items:[h.item,...i.items],expansions:uo(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},mR=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),jW=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),rg=(n,s,a,i)=>{const d=st("primary-menu"),g=O$(n,a.shared.providers.menuItems());if(g.items.length===0)return T.none();const h=mR(i),C=I4(d,g.items,s,a,i.isHorizontalMenu,h),S=jW(i),x=is(g.menus,(D,P)=>I4(P,D,s,a,!1,S)),_=uo(x,gm(d,C));return T.from(s1.tieredData(d,_,g.expansions))},iS=n=>!$n(n,"items"),fR="data-value",Y4=(n,s,a,i,d)=>De(a,g=>iS(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{it.setValue(n,g.value),xt(n,_c,{name:s}),Zt.focus(n)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>Y4(n,s,g.items,i,d)}),gR=(n,s)=>ca(n,a=>iS(a)?va(a.value===s,a):gR(a.items,s)),D$=(n,s,a)=>{const i=Qs(n.items,x=>!iS(x)),d=s.shared.providers,g=a.bind(x=>gR(n.items,x)).orThunk(()=>so(n.items).filter(iS)),h=n.label.map(x=>og(x,d)),C=pn.parts.field({dom:{},factory:{sketch:x=>dR({context:n.context,uid:x.uid,text:g.map(_=>_.text),icon:T.none(),tooltip:T.none(),role:va(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:n.label,fetch:(_,D)=>{const P=Y4(_,n.name,n.items,it.getValue(_),i);D(rg(P,Vu.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:T.none()}))},onSetup:ie(Y),getApi:ie({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[To.config({}),_1(g.map(_=>_.value),_=>ir(_.element,fR),(_,D)=>{gR(n.items,D).each(P=>{Pt(_.element,fR,P.value),xt(_,ql,{text:P.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return pn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Mt([h.toArray(),[S]]),fieldBehaviours:Ve([ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:x=>{pn.getField(x).each(ft.disable)},onEnabled:x=>{pn.getField(x).each(ft.enable)}})])})},gv=(n,s)=>({dom:{tag:"div",classes:n.classes},components:De(n.items,s.shared.interpreter)}),R$=(n,s,a)=>{const i=De(n.items,S=>({text:s.translate(S.text),value:S.value})),d=n.label.map(S=>og(S,s)),g=pn.parts.field({dom:{},...a.map(S=>({data:S})).getOr({}),selectAttributes:{size:n.size},options:i,factory:bA,selectBehaviours:Ve([ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),To.config({}),Ut("selectbox-change",[Te(bf(),(S,x)=>{xt(S,_c,{name:n.name})})])])}),h=n.size>1?T.none():T.some(nl("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Mt([[g],h.toArray()])};return pn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Mt([d.toArray(),[C]]),fieldBehaviours:Ve([ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:S=>{pn.getField(S).each(ft.disable)},onEnabled:S=>{pn.getField(S).each(ft.enable)}}),Rs(()=>s.checkUiComponentContext(n.context))])})},M$=n=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=n.value.toFixed(a(n.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+n.unit},X4=n=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(n);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Nt.value({value:i,unit:d})}else return Nt.error(n)},B$=(n,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>$n(a,d);return n.unit===s?T.some(n.value):i(n.unit)&&i(s)?a[n.unit]===a[s]?T.some(n.value):T.some(n.value/a[n.unit]*a[s]):T.none()},hv=n=>T.none(),GW=(n,s)=>a=>B$(a,s).map(i=>({value:i*n,unit:s})),N$=(n,s)=>{const a=X4(n).toOptional(),i=X4(s).toOptional();return dc(a,i,(d,g)=>B$(d,g.unit).map(h=>g.value/h).map(h=>GW(h,g.unit)).getOr(hv)).getOr(hv)},P$=(n,s)=>{let a=hv;const i=st("ratio-event"),d=G=>nl(G,{tag:"span",classes:["tox-icon","tox-lock-icon__"+G]},s.icons),g=()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,h=Rs(()=>s.checkUiComponentContext(n.context)),C=n.label.getOr("Constrain proportions"),S=s.translate(C),x=Ds.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":S,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:Ve([ft.config({disabled:g}),h,To.config({}),Do.config(s.tooltips.getConfig({tooltipText:S}))])}),_=G=>({dom:{tag:"div",classes:["tox-form__group"]},components:G}),D=G=>pn.parts.field({factory:Fm,inputClasses:["tox-textfield"],inputBehaviours:Ve([ft.config({disabled:g}),h,To.config({}),Ut("size-input-events",[Te(Vi(),(J,W)=>{xt(J,i,{isField1:G})}),Te(bf(),(J,W)=>{xt(J,_c,{name:n.name})})])]),selectOnFocus:!1}),P=G=>({dom:{tag:"label",classes:["tox-label"]},components:[$o(s.translate(G))]}),F=Ds.parts.field1(_([pn.parts.label(P("Width")),D(!0)])),z=Ds.parts.field2(_([pn.parts.label(P("Height")),D(!1)]));return Ds.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[F,z,_([P(hg),x])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(G,J,W)=>{X4(it.getValue(G)).each(ee=>{a(ee).each(re=>{it.setValue(J,M$(re))})})},coupledFieldBehaviours:Ve([ft.config({disabled:g,onDisabled:G=>{Ds.getField1(G).bind(pn.getField).each(ft.disable),Ds.getField2(G).bind(pn.getField).each(ft.disable),Ds.getLock(G).each(ft.disable)},onEnabled:G=>{Ds.getField1(G).bind(pn.getField).each(ft.enable),Ds.getField2(G).bind(pn.getField).each(ft.enable),Ds.getLock(G).each(ft.enable)}}),Rs(()=>s.checkUiComponentContext("mode:design")),Ut("size-input-events2",[Te(i,(G,J)=>{const W=J.event.isField1,ee=W?Ds.getField1(G):Ds.getField2(G),re=W?Ds.getField2(G):Ds.getField1(G),fe=ee.map(it.getValue).getOr(""),be=re.map(it.getValue).getOr("");a=N$(fe,be)})])])})},qW=(n,s,a)=>{const i=Hu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[$o(s.translate(n.label))]}),d=Hu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Hu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Hu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n.min,maxX:n.max,getInitialValue:ie(a.getOrThunk(()=>(Math.abs(n.max)-Math.abs(n.min))/2))},components:[i,d,g],sliderBehaviours:Ve([Zu.self(),Zt.config({})]),onChoose:(h,C,S)=>{xt(h,_c,{name:n.name,value:S})},onChange:(h,C,S)=>{xt(h,_c,{name:n.name,value:S})}})},KW=(n,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:De(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:De(C,d)}),h=C=>({dom:{tag:"tbody"},components:De(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(n.header),h(n.cells)],behaviours:Ve([To.config({}),Zt.config({})])}},$$=(n,s)=>{const a=n.label.map(z=>og(z,s)),i=[ft.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable}),Rs(()=>s.checkUiComponentContext(n.context)),wt.config({mode:"execution",useEnter:n.multiline!==!0,useControlEnter:n.multiline===!0,execute:z=>(fn(z,rS),T.some(!0))}),Ut("textfield-change",[Te(Al(),(z,G)=>{xt(z,_c,{name:n.name})}),Te(p0(),(z,G)=>{xt(z,_c,{name:n.name})})]),To.config({})],d=n.validation.map(z=>Ji.config({getRoot:G=>lu(G.element),invalidClass:"tox-invalid",validator:{validate:G=>{const J=it.getValue(G),W=z.validator(J);return Xo.pure(W===!0?Nt.value(J):Nt.error(W))},validateOnLoad:z.validateOnLoad}})).toArray(),g=n.placeholder.fold(ie({}),z=>({placeholder:s.translate(z)})),h=n.inputMode.fold(ie({}),z=>({inputmode:z})),S={...n.spellcheck.fold(ie({}),z=>({spellcheck:z})),...g,...h,"data-mce-name":n.name},x=pn.parts.field({tag:n.multiline===!0?"textarea":"input",...n.data.map(z=>({data:z})).getOr({}),inputAttributes:S,inputClasses:[n.classname],inputBehaviours:Ve(Mt([i,d])),selectOnFocus:!1,factory:Fm}),_=n.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,P=(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),F=[ft.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:z=>{pn.getField(z).each(ft.disable)},onEnabled:z=>{pn.getField(z).each(ft.enable)}}),Rs(()=>s.checkUiComponentContext(n.context))];return mv(a,_,P,F)},I$=(n,s,a)=>$$({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:!n.enabled,classname:"tox-textfield",validation:T.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:T.none()},s),YW=(n,s,a)=>$$({name:n.name,multiline:!0,label:n.label,inputMode:T.none(),placeholder:n.placeholder,flex:!0,disabled:!n.enabled,classname:"tox-textarea",validation:T.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:n.spellcheck},s),L$=n=>({isEnabled:()=>!ft.isDisabled(n),setEnabled:s=>ft.set(n,!s),setActive:s=>{const a=n.element;s?(bo(a,"tox-tbtn--enabled"),Pt(a,"aria-pressed",!0)):(ns(a,"tox-tbtn--enabled"),Ho(a,"aria-pressed"))},isActive:()=>$s(n.element,"tox-tbtn--enabled"),setTooltip:s=>{xt(n,q4,{text:s})},setText:s=>{xt(n,ql,{text:s})},setIcon:s=>xt(n,A1,{icon:s})}),lS=(n,s,a,i,d=!0,g)=>{const h=n.buttonType==="bordered"?["bordered"]:[];return dR({text:n.text,icon:n.icon,tooltip:n.tooltip,ariaLabel:n.tooltip,searchable:n.search.isSome(),role:i,fetch:(C,S)=>{const x={pattern:n.search.isSome()?sS(C):""};n.fetch(_=>{S(rg(_,Vu.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:n.search}))},x,L$(C))},onSetup:n.onSetup,getApi:C=>L$(C),columns:1,presets:"normal",classes:h,dropdownBehaviours:[...d?[To.config({})]:[]],context:n.context},s,a.shared,g)},XW=(n,s,a)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(S=>{s().getOpt(S).each(x=>{br(x.element),xt(x,Uu,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(De(n,h=>{const C=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...C,context:h.context,onAction:i(h),onSetup:d(h)}}))}},F$=n=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":n}},components:[$o(n)]}),H$=(n,s,a)=>{n.customStateIcon.each(i=>s.push(V$(i,a.shared.providers.icons,n.customStateIconTooltip.fold(()=>[],d=>[Do.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},z$=st("leaf-label-event-id"),hR=({leaf:n,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=n.menu.map(S=>lS(S,"tox-mbtn",g,T.none(),a)),C=[F$(n.title)];return H$(n,C,g),h.each(S=>C.push(S)),fr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(n.id),S.getSystem().broadcastOn([`update-active-item-${i}`],{value:n.id})},eventOrder:{[mr()]:[z$,"keying"]},buttonBehaviours:Ve([...a?[To.config({})]:[],Sn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Na.config({channels:{[`update-active-item-${i}`]:{onReceive:(S,x)=>{(x.value===n.id?Sn.on:Sn.off)(S)}}}}),Ut(z$,[Oo((S,x)=>{d.each(_=>{(_===n.id?Sn.on:Sn.off)(S)})}),Te(mr(),(S,x)=>{const _=x.event.raw.code==="ArrowLeft",D=x.event.raw.code==="ArrowRight";_?(Ii(S.element,".tox-tree--directory").each(P=>{S.getSystem().getByDom(P).each(F=>{rm(P,".tox-tree--directory__label").each(z=>{F.getSystem().getByDom(z).each(Zt.focus)})})}),x.stop()):D&&x.stop()})])])})},V$=(n,s,a,i,d)=>nl(n,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:d},s),JW=(n,s)=>V$(n,s,[]),U$=st("directory-label-event-id"),Z$=({directory:n,visible:s,noChildren:a,backstage:i})=>{const d=n.menu.map(C=>lS(C,"tox-mbtn",i,T.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[JW("chevron-right",i.shared.providers.icons)]},F$(n.title)];H$(n,g,i),d.each(C=>{g.push(C)});const h=C=>{Ii(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(x=>{const _=!Sn.isOn(x);Sn.toggle(x),xt(C,"expand-tree-node",{expanded:_,node:n.id})})})};return fr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[mr()]:[U$,"keying"]},buttonBehaviours:Ve([...s?[To.config({})]:[],Ut(U$,[Te(mr(),(C,S)=>{const x=S.event.raw.code==="ArrowRight",_=S.event.raw.code==="ArrowLeft";x&&a&&S.stop(),(x||_)&&Ii(C.element,".tox-tree--directory").each(D=>{C.getSystem().getByDom(D).each(P=>{!Sn.isOn(P)&&x||Sn.isOn(P)&&_?(h(C),S.stop()):_&&!Sn.isOn(P)&&(Ii(P.element,".tox-tree--directory").each(F=>{rm(F,".tox-tree--directory__label").each(z=>{P.getSystem().getByDom(z).each(Zt.focus)})}),S.stop())})})})])])})},QW=({children:n,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:n.map(C=>C.type==="leaf"?hR({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):pR({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:Ve([Qa.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Gt.config({})])}),ej=st("directory-event-id"),pR=({directory:n,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=n,S=pt(g),x=D=>C.map(P=>P.type==="leaf"?hR({leaf:P,selectedId:h,onLeafAction:s,visible:D,treeId:i,backstage:d}):pR({directory:P,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:D,treeId:i,backstage:d})),_=g.includes(n.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Z$({directory:n,visible:a,noChildren:n.children.length===0,backstage:d}),QW({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:_,treeId:i,backstage:d})],behaviours:Ve([Ut(ej,[Oo((D,P)=>{Sn.set(D,_)}),Te("expand-tree-node",(D,P)=>{const{expanded:F,node:z}=P.event;S.set(F?[...S.get(),z]:S.get().filter(G=>G!==z))})]),Sn.config({...n.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(D,P)=>{const F=D.components()[1],z=x(P);P?Qa.grow(F):Qa.shrink(F),Gt.set(F,z)}})])}},tj=st("tree-event-id"),nj=(n,s)=>{const a=n.onLeafAction.getOr(Y),i=n.onToggleExpand.getOr(Y),d=n.defaultExpandedIds,g=pt(d),h=pt(n.defaultSelectedId),C=st("tree-id"),S=(x,_)=>n.items.map(D=>D.type==="leaf"?hR({leaf:D,selectedId:x,onLeafAction:a,visible:!0,treeId:C,backstage:s}):pR({directory:D,selectedId:x,onLeafAction:a,expandedIds:_,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:Ve([wt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Ut(tj,[Te("expand-tree-node",(x,_)=>{const{expanded:D,node:P}=_.event;g.set(D?[...g.get(),P]:g.get().filter(F=>F!==P)),i(g.get(),{expanded:D,node:P})})]),Na.config({channels:{[`update-active-item-${C}`]:{onReceive:(x,_)=>{h.set(T.some(_.value)),Gt.set(x,S(T.some(_.value),g.get()))}}}}),Gt.config({})])}},J4=(n,s,a=[],i,d,g,h)=>{const C=s.fold(()=>({}),_=>({action:_})),S={buttonBehaviours:Ve([Hd.item(()=>!n.enabled||h.checkUiComponentContext(n.context).shouldDisable),Rs(()=>h.checkUiComponentContext(n.context)),To.config({}),...g.map(_=>Do.config(h.tooltips.getConfig({tooltipText:h.translate(_)}))).toArray(),Ut("button press",[X2("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},x=uo(S,{dom:i});return uo(x,{components:d})},W$=(n,s,a,i=[],d)=>{const g=n.tooltip.map(x=>({"aria-label":a.translate(x)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=n.icon.map(x=>lR(x,a.icons)),S=Vm([C]);return J4(n,s,i,h,S,n.tooltip,a)},bR=n=>{switch(n){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},vR=(n,s,a,i=[],d=[])=>{const g=a.translate(n.text),h=n.icon.map(F=>lR(F,a.icons)),C=[h.getOrThunk(()=>$o(g))],S=n.buttonType.getOr(!n.primary&&!n.borderless?"secondary":"primary"),D={tag:"button",classes:[...bR(S),...h.isSome()?["tox-button--icon"]:[],...n.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":n.text}},P=n.icon.map(ie(g));return J4(n,s,i,D,C,P,a)},j$=(n,s,a,i=[],d=[])=>{const g=vR(n,T.some(s),a,i,d);return fr.sketch(g)},yR=(n,s)=>a=>{s==="custom"?xt(a,Uu,{name:n,value:{}}):s==="submit"?fn(a,rS):s==="cancel"?fn(a,sg):console.error("Unknown button type: ",s)},G$=(n,s)=>s==="menu",CR=(n,s)=>s==="custom"||s==="cancel"||s==="submit",oj=(n,s)=>s==="togglebutton",sj=(n,s,a)=>{const i=n.icon.map(W=>Bh(W,s.icons)).map(Un),d=W=>{xt(W,Uu,{name:n.name,value:{setIcon:ee=>{i.map(re=>re.getOpt(W).each(fe=>{Gt.set(fe,[Bh(ee,s.icons)])}))}}})},g=n.buttonType.getOr(n.primary?"primary":"secondary"),h={...n,name:n.name??"",tooltip:n.tooltip,enabled:n.enabled??!1},C=h.tooltip.or(n.text).map(W=>({"aria-label":s.translate(W)})).getOr({}),S=bR(g??"secondary"),x=n.icon.isSome()&&n.text.isSome(),_={tag:"button",classes:[...S.concat(n.icon.isSome()?["tox-button--icon"]:[]),...n.active?["tox-button--enabled"]:[],...x?["tox-button--icon-and-text"]:[]],attributes:{...C,...oo(a)?{"data-mce-name":a}:{}}},D=[],P=s.translate(n.text.getOr("")),F=$o(P),G=[...Vm([i.map(W=>W.asSpec())]),...n.text.isSome()?[F]:[]],J=J4(h,T.some(d),D,_,G,n.tooltip,s);return fr.sketch(J)},uS=(n,s,a)=>{if(G$(n,s)){const i=()=>h,d=n,g={...n,buttonType:"default",type:"menubutton",search:T.none(),onSetup:C=>(C.setEnabled(n.enabled),Y),fetch:XW(d.items,i,a)},h=Un(lS(g,"tox-tbtn",a,T.none(),!0,n.text.or(n.tooltip).getOrUndefined()));return h.asSpec()}else if(CR(n,s)){const i=yR(n.name,s),d={...n,context:s==="cancel"?"any":n.context,borderless:!1};return j$(d,i,a.shared.providers,[])}else{if(oj(n,s))return sj(n,a.shared.providers,n.text.or(n.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},rj=(n,s)=>{const a=yR(n.name,"custom");return xW(T.none(),pn.parts.field({factory:fr,...vR(n,T.some(a),s,[H4(""),Zu.self()])}))},q$={type:"separator"},aj=n=>({type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:Y}),pv=(n,s)=>({type:"menuitem",value:s,text:n,meta:{attach:void 0},onAction:Y}),cj=n=>De(n,aj),K$=(n,s)=>co(s,a=>a.type===n),Y$=(n,s)=>cj(K$(n,s)),ij=n=>Y$("header",n.targets),Ud=n=>Y$("anchor",n.targets),Q4=n=>T.from(n.anchorTop).map(s=>pv("<top>",s)).toArray(),eT=n=>T.from(n.anchorBottom).map(s=>pv("<bottom>",s)).toArray(),lj=n=>De(n,s=>pv(s,s)),SR=n=>So(n,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(q$,a),[]),wR=(n,s)=>{const a=n.toLowerCase();return co(s,i=>{const d=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,g=i.value??"";return Jo(d.toLowerCase(),a)||Jo(g.toLowerCase(),a)})},xR=(n,s,a)=>{var h;const i=it.getValue(s),d=((h=i==null?void 0:i.meta)==null?void 0:h.text)??i.value;return a.getLinkInformation().fold(()=>[],C=>{const S=wR(d,lj(a.getHistory(n)));return n==="file"?SR([S,wR(d,ij(C)),wR(d,Mt([Q4(C),Ud(C),eT(C)]))]):S})},ER=st("aria-invalid"),TR=(n,s,a,i)=>{const d=s.shared.providers,g=ee=>{const re=it.getValue(ee);a.addToHistory(re.value,n.filetype)},h={...i.map(ee=>({initialData:ee})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:ee=>{const re=xR(n.filetype,ee,a),fe=rg(re,Vu.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:T.none()});return Xo.pure(fe)},getHotspot:ee=>z.getOpt(ee),onSetValue:(ee,re)=>{ee.hasConfigured(Ji)&&Ji.run(ee).get(Y)},typeaheadBehaviours:Ve([...a.getValidationHandler().map(ee=>Ji.config({getRoot:re=>lu(re.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(re,fe)=>{_.getOpt(re).each(be=>{Pt(be.element,"title",d.translate(fe))})}},validator:{validate:re=>{const fe=it.getValue(re);return jd.nu(be=>{ee({type:n.filetype,url:fe.value},Ke=>{if(Ke.status==="invalid"){Pt(re.element,"aria-errormessage",ER);const Re=Nt.error(Ke.message);be(Re)}else{Ho(re.element,"aria-errormessage");const Re=Nt.value(Ke.message);be(Re)}})})},validateOnLoad:!1}})).toArray(),ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable}),To.config({}),Ut("urlinput-events",[Te(Al(),ee=>{const re=Hc(ee.element),fe=re.trim();fe!==re&&cm(ee.element,fe),n.filetype==="file"&&xt(ee,_c,{name:n.name})}),Te(bf(),ee=>{xt(ee,_c,{name:n.name}),g(ee)}),Te(p0(),ee=>{xt(ee,_c,{name:n.name}),g(ee)})])]),eventOrder:{[Al()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ee=>ee.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:zC(!1,1,"normal")},onExecute:(ee,re,fe)=>{xt(re,rS,{})},onItemExecute:(ee,re,fe,be)=>{g(ee),xt(ee,_c,{name:n.name})}},C=pn.parts.field({...h,factory:GA}),S=n.label.map(ee=>og(ee,d)),_=Un(((ee,re,fe=ee,be=ee)=>nl(fe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ee],attributes:{title:d.translate(be),"aria-live":"polite",...re.fold(()=>({}),Ke=>({id:Ke}))}},d.icons))("invalid",T.some(ER),"warning")),D=Un({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),P=a.getUrlPicker(n.filetype),F=st("browser.url.event"),z=Un({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,D.asSpec()],behaviours:Ve([ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable})])}),G=Un(j$({context:n.context,name:n.name,icon:T.some("browse"),text:n.picker_text.or(n.label).getOr(""),enabled:n.enabled,primary:!1,buttonType:T.none(),borderless:!0},ee=>fn(ee,F),d,[],["tox-browse-url"])),J=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Mt([[z.asSpec()],P.map(()=>G.asSpec()).toArray()])}),W=ee=>{Le.getCurrent(ee).each(re=>{const fe=it.getValue(re),be={fieldname:n.name,...fe};P.each(Ke=>{Ke(be).get(Re=>{it.setValue(re,Re),xt(ee,_c,{name:n.name})})})})};return pn.sketch({dom:K8(),components:S.toArray().concat([J()]),fieldBehaviours:Ve([ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:ee=>{pn.getField(ee).each(ft.disable),G.getOpt(ee).each(ft.disable)},onEnabled:ee=>{pn.getField(ee).each(ft.enable),G.getOpt(ee).each(ft.enable)}}),Rs(()=>d.checkUiComponentContext(n.context)),Ut("url-input-events",[Te(F,W)])])})},uj=(n,s)=>{const a=TV(n.icon,s.icons);return Ad.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:n.url?void 0:a},components:n.url?[fr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(n.iconTooltip)}},action:i=>xt(i,Uu,{name:"alert-banner",value:n.url}),buttonBehaviours:Ve([CO()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(n.text)}}]})},dj=(n,s,a)=>{const i=S=>(S.element.dom.click(),T.some(!0)),d=pn.parts.field({factory:{sketch:an},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ve([Zu.self(),ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:S=>{lu(S.element).each(x=>bo(x,"tox-checkbox--disabled"))},onEnabled:S=>{lu(S.element).each(x=>ns(x,"tox-checkbox--disabled"))}}),To.config({}),Zt.config({}),o$(a,n2,fu),wt.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Ut("checkbox-events",[Te(bf(),(S,x)=>{xt(S,_c,{name:n.name})})])])}),g=pn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[$o(s.translate(n.label))],behaviours:Ve([Dd.config({})])}),h=S=>nl(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=Un({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return pn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Ve([ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),Rs(()=>s.checkUiComponentContext(n.context))])})},X$=(n,s)=>{const a=["tox-form__group",...n.stretched?["tox-form__group--stretched"]:[]],i=Ut("htmlpanel",[Oo(d=>{n.onInit(d.element.dom)})]);return n.presets==="presentation"?Ad.sketch({dom:{tag:"div",classes:a,innerHtml:n.html},containerBehaviours:Ve([Do.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{io(d.element,"[data-mce-tooltip]:hover").orThunk(()=>qs(d.element)).each(g=>{Or(g,"data-mce-tooltip").each(h=>{Do.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:io(d.element,"[data-mce-tooltip]:hover").orThunk(()=>qs(d.element).filter(g=>Or(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:ie([Fs,Wo,Js,$r,Ls,vr]),onRtl:ie([Fs,Wo,Js,$r,Ls,vr])},bubble:wc(0,-2,{})})}),i])}):Ad.sketch({dom:{tag:"div",classes:a,innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:Ve([To.config({}),Zt.config({}),i])})},hr=n=>(s,a,i,d,g)=>bt(a,"name").fold(()=>n(a,d,T.none(),g),h=>s.field(h,n(a,d,bt(i,h),g))),mj=n=>(s,a,i,d,g)=>{const h=uo(a,{source:"dynamic"});return hr(n)(s,h,i,d,g)},kR={bar:hr((n,s)=>G8(n,s.shared)),collection:hr((n,s,a)=>EW(n,s.shared.providers,a)),alertbanner:hr((n,s)=>uj(n,s.shared.providers)),input:hr((n,s,a)=>I$(n,s.shared.providers,a)),textarea:hr((n,s,a)=>YW(n,s.shared.providers,a)),label:hr((n,s,a,i)=>zW(n,s.shared,i)),iframe:mj((n,s,a)=>cS(n,s.shared.providers,a)),button:hr((n,s)=>rj(n,s.shared.providers)),checkbox:hr((n,s,a)=>dj(n,s.shared.providers,a)),colorinput:hr((n,s,a)=>kW(n,s.shared,s.colorinput,a)),colorpicker:hr((n,s,a)=>U4(n,s.shared.providers,a)),dropzone:hr((n,s,a)=>PW(n,s.shared.providers,a)),grid:hr((n,s)=>$W(n,s.shared)),listbox:hr((n,s,a)=>D$(n,s,a)),selectbox:hr((n,s,a)=>R$(n,s.shared.providers,a)),sizeinput:hr((n,s)=>P$(n,s.shared.providers)),slider:hr((n,s,a)=>qW(n,s.shared.providers,a)),urlinput:hr((n,s,a)=>TR(n,s,s.urlinput,a)),customeditor:hr(BW),htmlpanel:hr((n,s)=>X$(n,s.shared.providers)),imagepreview:hr((n,s,a)=>HW(n,a)),table:hr((n,s)=>KW(n,s.shared.providers)),tree:hr((n,s)=>nj(n,s)),panel:hr((n,s)=>gv(n,s))},fj={field:(n,s)=>s,record:ie([])},J$=(n,s,a,i,d)=>{const g=uo(i,{shared:{interpreter:h=>tT(n,h,a,g,d)}});return tT(n,s,a,g,d)},tT=(n,s,a,i,d)=>bt(kR,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(n,s,a,i,d)),_R=(n,s,a,i)=>tT(fj,n,s,a,i),dS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},gj=(n,s,a)=>{const d={maxHeightFunction:Df()},g=()=>({type:"node",root:yl(Gs(n())),node:T.from(n()),bubble:wc(12,12,dS),layouts:{onRtl:()=>[Oa],onLtr:()=>[Of]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:wc(-12,12,dS),layouts:{onRtl:()=>[Js,Ls,Fs],onLtr:()=>[Ls,Js,Fs]},overrides:d});return()=>a()?g():h()},hj=(n,s,a,i)=>{const g={maxHeightFunction:Df()},h=()=>({type:"node",root:yl(Gs(s())),node:T.from(s()),bubble:wc(12,12,dS),layouts:{onRtl:()=>[Xr],onLtr:()=>[Xr]},overrides:g}),C=()=>n?{type:"node",root:yl(Gs(s())),node:T.from(s()),bubble:wc(0,-ua(s()),dS),layouts:{onRtl:()=>[Wo],onLtr:()=>[Wo]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:wc(0,0,dS),layouts:{onRtl:()=>[Wo],onLtr:()=>[Wo]},overrides:g};return()=>i()?h():C()},pj=(n,s,a)=>{const i=()=>({type:"node",root:yl(Gs(n())),node:T.from(n()),layouts:{onRtl:()=>[Xr],onLtr:()=>[Xr]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Fs],onLtr:()=>[Fs]}});return()=>a()?i():d()},Q$=(n,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=n.selection.getRng(),i=n.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:We.fromDom(d),lastCell:We.fromDom(g)};return T.some(h)}return T.some(Eg.range(We.fromDom(a.startContainer),a.startOffset,We.fromDom(a.endContainer),a.endOffset))}}),bj=n=>s=>({type:"node",root:n(),node:s}),vj=(n,s,a,i)=>{const d=Xb(n),g=()=>We.fromDom(n.getBody()),h=()=>We.fromDom(n.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:gj(h,s,C),inlineBottomDialog:hj(n.inline,h,a,C),banner:pj(h,s,C),cursor:Q$(n,g),node:bj(g)}},yj=n=>(s,a)=>{jD(n)(s,a)},Cj=n=>()=>HD(n),Sj=n=>s=>M4(n,s),wj=n=>s=>_8(n,s),xj=n=>({colorPicker:yj(n),hasCustomColors:Cj(n),getColors:Sj(n),getColorCols:wj(n)}),Ej=n=>()=>ON(n),Tj=n=>({isDraggableModal:Ej(n)}),kj=n=>{const s=pt(t4(n)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},_j=n=>hn(n,"items"),eI=n=>hn(n,"format"),AR=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],tI=n=>$n(n,"items"),nT=n=>$n(n,"block"),nI=n=>$n(n,"inline"),Aj=n=>$n(n,"selector"),oI=n=>So(n,(s,a)=>{if(tI(a)){const i=oI(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(nI(a)||nT(a)||Aj(a)){const d=`custom-${Et(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),Oj=(n,s)=>{const a=oI(s),i=d=>{et(d,g=>{n.formatter.has(g.name)||n.formatter.register(g.name,g.format)})};return n.formatter?i(a.customFormats):n.on("init",()=>{i(a.customFormats)}),a.formats},sI=n=>bN(n).map(s=>{const a=Oj(n,s);return vN(n)?AR.concat(a):a}).getOr(AR),Dj=n=>{const s=Gn(n);return s.length===1&&ao(s,"title")},rI=(n,s,a)=>({...n,type:"formatter",isSelected:s(n.format),getStylePreview:a(n.format)}),aI=(n,s,a,i)=>{const d=S=>rI(S,a,i),g=S=>{const x=C(S.items);return{...S,type:"submenu",getStyleItems:ie(x)}},h=S=>{const x=Et(S.name)?S.name:st(S.title),_=`custom-${x}`,D={...S,type:"formatter",format:_,isSelected:a(_),getStylePreview:i(_)};return n.formatter.register(x,D),D},C=S=>De(S,x=>_j(x)?g(x):eI(x)?d(x):Dj(x)?{...x,type:"separator"}:h(x));return C(s)},cI=n=>{const s=C=>()=>n.formatter.match(C),a=C=>()=>{const S=n.formatter.get(C);return S!==void 0?T.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(C))}):T.none()},i=pt([]),d=pt([]),g=pt(!1);return n.on("PreInit",C=>{const S=sI(n),x=aI(n,S,s,a);i.set(x)}),n.on("addStyleModifications",C=>{const S=aI(n,C.items,s,a);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),S=d.get();return C.concat(S)}}},iI=n=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[$o(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:ie(300),exclusive:!0,lazySink:n,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(S,x)=>{i++,C.onShow&&C.onShow(S,x)},onHide:(S,x)=>{i--,C.onHide&&C.onHide(S,x)},onSetup:C.onSetup}),getComponents:g}},Rj=n=>oo(n)&&n.nodeType===1,lI=Wm.trim,uI=n=>s=>!!(Rj(s)&&(s.contentEditable===n||s.getAttribute("data-mce-contenteditable")===n)),Mj=uI("true"),Bj=uI("false"),Nh=(n,s,a,i,d)=>({type:n,title:s,url:a,level:i,attach:d}),dI=n=>{let s=n;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return Mj(s)}return!1},mS=(n,s)=>De(Mr(We.fromDom(s),n),a=>a.dom),fS=n=>n.innerText||n.textContent,mI=n=>n.id?n.id:st("h"),fI=n=>n&&n.nodeName==="A"&&(n.id||n.name)!==void 0,gI=n=>fI(n)&&hI(n),Nj=n=>n&&/^(H[1-6])$/.test(n.nodeName),hI=n=>dI(n)&&!Bj(n),Pj=n=>Nj(n)&&hI(n),$j=n=>Nj(n)?parseInt(n.nodeName.substr(1),10):0,Ij=n=>{const s=mI(n),a=()=>{n.id=s};return Nh("header",fS(n)??"","#"+s,$j(n),a)},Lj=n=>{const s=n.id||n.name,a=fS(n);return Nh("anchor",a||"#"+s,"#"+s,0,Y)},Fj=n=>De(co(n,Pj),Ij),bv=n=>De(co(n,gI),Lj),gS=n=>mS("h1,h2,h3,h4,h5,h6,a:not([href])",n),OR=n=>lI(n.title).length>0,Hj={find:n=>{const s=gS(n);return co(Fj(s).concat(bv(s)),OR)}},vv="tinymce-url-history",pI=5,yv=n=>Et(n)&&/^https?/.test(n),bI=n=>ra(n)&&n.length<=pI&&Bs(n,yv),vI=n=>Dn(n)&&cc(n,s=>!bI(s)).isNone(),yI=()=>{const n=T1.getItem(vv);if(n===null)return{};let s;try{s=JSON.parse(n)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+vv+" was not valid JSON",a),{};throw a}return vI(s)?s:(console.log("Local storage "+vv+" was not valid format",s),{})},zj=n=>{if(!vI(n))throw new Error(`Bad format for history:
`+JSON.stringify(n));T1.setItem(vv,JSON.stringify(n))},Vj=n=>{const s=yI();return bt(s,n).getOr([])},Uj=(n,s)=>{if(!yv(n))return;const a=yI(),i=bt(a,s).getOr([]),d=co(i,g=>g!==n);a[s]=[n].concat(d).slice(0,pI),zj(a)},CI=n=>!!n,SI=n=>is(Wm.makeMap(n,/[, ]/),CI),oT=n=>T.from(kN(n)),DR=n=>{const s=T.from(tO(n)).filter(CI).map(SI);return oT(n).fold(Vn,a=>s.fold(Dt,i=>Gn(i).length>0?i:!1))},Zj=(n,s)=>{const a=DR(n);return xr(a)?a?oT(n):T.none():a[s]?oT(n):T.none()},sT=(n,s)=>Zj(n,s).map(a=>i=>Xo.nu(d=>{const g=(C,S)=>{if(!Et(C))throw new Error("Expected value to be string");if(S!==void 0&&!Dn(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},h={filetype:s,fieldname:i.fieldname,...T.from(i.meta).getOr({})};a.call(n,g,i.value,h)})),hS=n=>T.from(n).filter(Et).getOrUndefined(),wI=n=>nO(n)?T.some({targets:Hj.find(n.getBody()),anchorTop:hS(AN(n)),anchorBottom:hS(oO(n))}):T.none(),Wj=n=>T.from(_N(n)),jj=n=>({getHistory:Vj,addToHistory:Uj,getLinkInformation:()=>wI(n),getValidationHandler:()=>Wj(n),getUrlPicker:s=>sT(n,s)}),Gj=(n,s,a,i)=>{const d=pt(!1),g=kj(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Pa.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:iI(n.dialog),checkUiComponentContext:W=>{if(YE(s))return{contextType:"disabled",shouldDisable:!0};const[ee,re=""]=W.split(":"),fe=s.ui.registry.getAll().contexts,be=bt(fe,ee).fold(()=>bt(fe,"mode").map(Ke=>Ke("design")).getOr(!1),Ke=>re.charAt(0)==="!"?!Ke(re.slice(1)):Ke(re));return{contextType:ee,shouldDisable:!be}}},C=jj(s),S=cI(s),x=xj(s),_=Tj(s),D=()=>d.get(),P=W=>d.set(W),F={shared:{providers:h,anchors:vj(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:x,dialog:_,isContextMenuOpen:D,setContextMenuState:P},z=W=>T.none(),G={...F,shared:{...F.shared,interpreter:W=>_R(W,{},G,z),getSink:n.popup}},J={...F,shared:{...F.shared,interpreter:W=>_R(W,{},J,z),getSink:n.dialog}};return{popup:G,dialog:J}},RR={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},qj=n=>{console.warn(RR[n],new Error().stack)},MR=(n,s,a)=>{const i=(Ne,Tt)=>{et([s,...a],gt=>{gt.broadcastEvent(Ne,Tt)})},d=(Ne,Tt)=>{et([s,...a],gt=>{gt.broadcastOn([Ne],Tt)})},g=Ne=>d(Eu(),{target:Ne.target}),h=Ne=>{d(oh(),{closedTooltip:()=>{Ne.preventDefault()}})},C=la(),S=eo(C,"touchstart",g),x=eo(C,"touchmove",Ne=>i(fw(),Ne)),_=eo(C,"touchend",Ne=>i(k2(),Ne)),D=eo(C,"mousedown",g),P=eo(C,"mouseup",Ne=>{Ne.raw.button===0&&d(Cd(),{target:Ne.target})}),F=Ne=>d(Eu(),{target:We.fromDom(Ne.target)}),z=Ne=>{Ne.button===0&&d(Cd(),{target:We.fromDom(Ne.target)})},G=()=>{et(n.editorManager.get(),Ne=>{n!==Ne&&Ne.dispatch("DismissPopups",{relatedTarget:n})})},J=Ne=>i(_2(),du(Ne)),W=Ne=>{d(Hs(),{}),i(Hg(),du(Ne))},ee=Gs(We.fromDom(n.getElement())),re=ii(ee,"scroll",Ne=>{requestAnimationFrame(()=>{const Tt=n.getContainer();if(Tt!=null){const sn=Kf(n,s.element).map(_t=>[_t.element,..._t.others]).getOr([]);Qs(sn,_t=>un(_t,Ne.target))&&(n.dispatch("ElementScroll",{target:Ne.target.dom}),i(hw(),Ne))}})}),fe=()=>d(Hs(),{}),be=Ne=>{Ne.state&&d(Eu(),{target:We.fromDom(n.getContainer())})},Ke=Ne=>{d(Eu(),{target:We.fromDom(Ne.relatedTarget.getContainer())})},Re=Ne=>n.dispatch("focusin",Ne),$e=Ne=>n.dispatch("focusout",Ne);n.on("PostRender",()=>{n.on("click",F),n.on("tap",F),n.on("mouseup",z),n.on("mousedown",G),n.on("ScrollWindow",J),n.on("ResizeWindow",W),n.on("ResizeEditor",fe),n.on("AfterProgressState",be),n.on("DismissPopups",Ke),n.on("CloseActiveTooltips",h),et([s,...a],Ne=>{Ne.element.dom.addEventListener("focusin",Re),Ne.element.dom.addEventListener("focusout",$e)})}),n.on("remove",()=>{n.off("click",F),n.off("tap",F),n.off("mouseup",z),n.off("mousedown",G),n.off("ScrollWindow",J),n.off("ResizeWindow",W),n.off("ResizeEditor",fe),n.off("AfterProgressState",be),n.off("DismissPopups",Ke),n.off("CloseActiveTooltips",h),et([s,...a],Ne=>{Ne.element.dom.removeEventListener("focusin",Re),Ne.element.dom.removeEventListener("focusout",$e)}),D.unbind(),S.unbind(),x.unbind(),_.unbind(),P.unbind(),re.unbind()}),n.on("detach",()=>{et([s,...a],Dx),et([s,...a],Ne=>Ne.destroy())})},Kj=Y,BR=Vn,xI=ie([]);var Yj=Object.freeze({__proto__:null,setup:Kj,isDocked:BR,getBehaviours:xI});const NR=ie(st("toolbar-height-change")),Gm={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},EI="tox-tinymce--toolbar-sticky-on",Xj="tox-tinymce--toolbar-sticky-off",oX=(n,s)=>{const a=fc(s),d=Uh(s).dom.innerHeight,g=Ts(a),h=We.fromDom(n.elm),C=lm(h),S=lr(h),x=C.y,_=x+S,D=gc(s),P=lr(s),F=D.top,z=F+P,G=Math.abs(F-g.top)<2,J=Math.abs(z-(g.top+d))<2;if(G&&x<z)sm(g.left,x-P,a);else if(J&&_>F){const W=x-d+S+P;sm(g.left,W,a)}},pS=(n,s)=>ao(jo.getModes(n),s),PR=n=>{const s=i=>ua(i)+(parseInt(zo(i,"margin-top"),10)||0)+(parseInt(zo(i,"margin-bottom"),10)||0),a=n.element;lu(a).each(i=>{const d="padding-"+jo.getModes(n)[0];if(jo.isDocked(n)){const g=da(i);Ht(a,"width",g+"px"),Ht(i,d,s(a)+"px")}else Cn(a,"width"),Cn(i,d)})},$R=(n,s)=>{s?(ns(n,Gm.fadeOutClass),pu(n,[Gm.transitionClass,Gm.fadeInClass])):(ns(n,Gm.fadeInClass),pu(n,[Gm.fadeOutClass,Gm.transitionClass]))},TI=(n,s)=>{const a=We.fromDom(n.getContainer());s?(bo(a,EI),ns(a,Xj)):(bo(a,Xj),ns(a,EI))},Jj=(n,s)=>{const a=fc(s);_r(a).filter(i=>!un(s,i)).filter(i=>un(i,We.fromDom(a.dom.body))||$(n,i)).each(()=>br(s))},Qj=(n,s)=>qs(n).orThunk(()=>s().toOptional().bind(a=>qs(a.element))),eG=(n,s,a)=>{n.inline||(s.header.isPositionedAtTop()||n.on("ResizeEditor",()=>{a().each(jo.reset)}),n.on("ResizeWindow ResizeEditor",()=>{a().each(PR)}),n.on("SkinLoaded",()=>{a().each(i=>{jo.isDocked(i)?jo.reset(i):jo.refresh(i)})}),n.on("FullscreenStateChanged",()=>{a().each(jo.reset)})),n.on("AfterScrollIntoView",i=>{a().each(d=>{jo.refresh(d);const g=d.element;jh(g)&&oX(i,g)})}),n.on("PostRender",()=>{TI(n,!1)})},tG=n=>n().map(jo.isDocked).getOr(!1),kI=()=>[Na.config({channels:{[NR()]:{onReceive:PR}}})],_I=(n,s)=>{const a=Wt(),i=s.getSink,d=C=>{i().each(S=>C(S.element))},g=C=>{n.inline||PR(C),TI(n,jo.isDocked(C)),C.getSystem().broadcastOn([Hs()],{}),i().each(S=>S.getSystem().broadcastOn([Hs()],{}))},h=n.inline?[]:kI();return[Zt.config({}),jo.config({contextual:{lazyContext:C=>{const S=ua(C.element),x=n.inline?n.getContentAreaContainer():n.getContainer();return T.from(x).map(_=>{const D=Is(We.fromDom(_));return Kf(n,C.element).fold(()=>{const F=D.height-S,z=D.y+(pS(C,"top")?0:S);return Ys(D.x,z,D.width,F)},F=>{const z=id(D,l1(F)),G=pS(C,"top")?z.y:z.y+S;return Ys(z.x,G,z.width,z.height-S)})})},onShow:()=>{d(C=>$R(C,!0))},onShown:C=>{d(S=>qr(S,[Gm.transitionClass,Gm.fadeInClass])),a.get().each(S=>{Jj(C.element,S),a.clear()})},onHide:C=>{Qj(C.element,i).fold(a.clear,a.set),d(S=>$R(S,!1))},onHidden:()=>{d(C=>qr(C,[Gm.transitionClass]))},...Gm},lazyViewport:C=>Kf(n,C.element).fold(()=>{const x=Kr(),_=EN(n),D=x.y+(pS(C,"top")&&!UN(n)?_:0),P=x.height-(pS(C,"bottom")?_:0);return{bounds:Ys(x.x,D,x.width,P),optScrollEnv:T.none()}},x=>({bounds:l1(x),optScrollEnv:T.some({currentScrollTop:x.element.dom.scrollTop,scrollElmTop:gc(x.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var nG=Object.freeze({__proto__:null,setup:eG,isDocked:tG,getBehaviours:_I});const oG=n=>{const s=n.editor,a=n.sticky?_I:xI;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:Ve(a(s,n.sharedBackstage))}};var AI=Xi({factory:(n,s)=>{const a=(d,g)=>{const h=De(g,C=>{const S={type:"menubutton",text:C.text,fetch:_=>{_(C.getItems())},context:"any"},x=XO(S).mapError(_=>Mg(_)).getOrDie();return lS(x,"tox-mbtn",s.backstage,T.some("menuitem"))});Gt.set(d,h)},i={focus:wt.focusIn,setMenus:a};return{uid:n.uid,dom:n.dom,components:[],behaviours:Ve([Gt.config({}),Ut("menubar-events",[Oo(d=>{n.onSetup(d)}),Te(Uc(),(d,g)=>{io(d.element,".tox-mbtn--active").each(h=>{ma(g.event.target,".tox-mbtn").each(C=>{un(h,C)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(C).each(x=>{Kc.expand(x),Kc.close(S),Zt.focus(x)})})})})}),Te(C0(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{Kc.isOpen(h)&&(Kc.expand(C),Kc.close(h))})})})]),wt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(n.onEscape(d),T.some(!0))}),To.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Be("dom"),Be("uid"),Be("onEscape"),Be("backstage"),de("onSetup",Y)],apis:{focus:(n,s)=>{n.focus(s)},setMenus:(n,s,a)=>{n.setMenus(s,a)}}});const OI="💝 Get all features",DI="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",sG=n=>{const s=n.promotionLink?[{dom:{tag:"a",attributes:{href:DI,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:OI}}]:[];return{uid:n.uid,dom:n.dom,components:s}},rG=n=>{const{sidebars:s}=n.ui.registry.getAll();et(Gn(s),a=>{const i=s[a],d=()=>uc(T.from(n.queryCommandValue("ToggleSidebar")),a);n.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{n.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return n.on("ToggleSidebar",h),()=>{n.off("ToggleSidebar",h)}},context:"any"})})},sl=n=>({element:()=>n.element.dom}),aG=(n,s)=>{const a=De(Gn(s),i=>{const d=s[i],g=pi(uD(d));return{name:i,getApi:sl,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return De(a,i=>{const d=pt(Y);return n.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:iv.unnamedEvents([zd(i,d),Ah(i,d),Te(A2(),(g,h)=>{const C=h.event;vt(a,x=>x.name===C.name).each(x=>{(C.visible?x.onShow:x.onHide)(x.getApi(g))})})])})})},RI=n=>oa.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:aG(s,n),slotBehaviours:iv.unnamedEvents([Oo(a=>oa.hideAllSlots(a))])})),MI=(n,s,a)=>{Le.getCurrent(n).each(d=>{Gt.set(d,[RI(s)]);const g=a==null?void 0:a.toLowerCase();Et(g)&&$n(s,g)&&Le.getCurrent(d).each(h=>{oa.showSlot(h,g),Qa.immediateGrow(d),Cn(d.element,"width"),rT(n.element,"region")})})},rT=(n,s)=>{Pt(n,"role",s)},bS=(n,s)=>{Le.getCurrent(n).each(i=>{Le.getCurrent(i).each(g=>{Qa.hasGrown(i)?oa.isShowing(g,s)?(Qa.shrink(i),rT(n.element,"presentation")):(oa.hideAllSlots(g),oa.showSlot(g,s),rT(n.element,"region")):(oa.hideAllSlots(g),oa.showSlot(g,s),Qa.grow(i),rT(n.element,"region"))})})},cG=n=>Le.getCurrent(n).bind(a=>Qa.isGrowing(a)||Qa.hasGrown(a)?Le.getCurrent(a).bind(g=>vt(oa.getSlotNames(g),h=>oa.isShowing(g,h))):T.none()),Cv=st("FixSizeEvent"),IR=st("AutoSizeEvent"),aT=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ve([To.config({}),Zt.config({}),Qa.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Le.getCurrent(s).each(oa.hideAllSlots),fn(s,IR)},onGrown:s=>{fn(s,IR)},onStartGrow:s=>{xt(s,Cv,{width:Qo(s.element,"width").getOr("")})},onStartShrink:s=>{xt(s,Cv,{width:da(s.element)+"px"})}}),Gt.config({}),Le.config({find:s=>{const a=Gt.contents(s);return so(a)}})])}],behaviours:Ve([Zu.childAt(0),Ut("sidebar-sliding-events",[Te(Cv,(s,a)=>{Ht(s.element,"width",a.event.width)}),Te(IR,(s,a)=>{Cn(s.element,"width")})])])}),iG=n=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":n.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Rd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),BI=n=>Le.getCurrent(n).each(s=>br(s.element,!0)),Kl=(n,s)=>{const a="tabindex",i=`data-mce-${a}`;T.from(n.iframeElement).map(We.fromDom).each(d=>{s?(Or(d,a).each(g=>Pt(d,i,g)),Pt(d,a,-1)):(Ho(d,a),Or(d,i).each(g=>{Pt(d,a,g),Ho(d,i)}))})},lG=(n,s,a,i)=>{const d=s.element;if(Kl(n,a),a)ce.block(s,iG(i)),Cn(d,"display"),Ho(d,"aria-hidden"),n.hasFocus()&&BI(s);else{const g=Le.getCurrent(s).exists(h=>Bi(h.element));ce.unblock(s),Ht(d,"display","none"),Pt(d,"aria-hidden","true"),g&&n.focus()}},cT=n=>({uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ve([Gt.config({}),ce.config({focus:!1}),Le.config({find:s=>so(s.components())})]),components:[]}),NI=n=>n.type==="focusin",PI=n=>NI(n)?(n.composed?so(n.composedPath()):T.from(n.target)).map(We.fromDom).filter(mc).exists(a=>$s(a,"mce-pastebin")):!1,uG=(n,s,a)=>{const i=pt(!1),d=Wt(),g=C=>{i.get()&&!PI(C)&&(C.preventDefault(),BI(s()),n.editorManager.setActive(n))};n.inline||n.on("PreInit",()=>{n.dom.bind(n.getWin(),"focusin",g),n.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),lG(n,s(),C,a.providers),HZ(n,C))};n.on("ProgressState",C=>{if(d.on(clearTimeout),Fa(C.time)){const S=KE.setEditorTimeout(n,()=>h(C.state),C.time);d.set(S)}else h(C.state),d.clear()})},LR=n=>{const s=n.label.isNone()?n.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):n.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(n.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...n.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[$o(a)]})).toArray(),GE.parts.items({})],items:n.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ve([To.config({}),Zt.config({ignore:!0})])}},iT=n=>GE.sketch(LR(n)),$I=(n,s)=>{const a=Oo(i=>{const d=De(n.initGroups,iT);Md.setGroups(i,d)});return Ve([Hd.toolbarButton(()=>n.providers.checkUiComponentContext("any").shouldDisable),Rs(()=>n.providers.checkUiComponentContext("any")),wt.config({mode:s,onEscape:n.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),Ut("toolbar-events",[a])])},II=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return{uid:n.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":LR({title:T.none(),label:T.none(),items:[]}),"overflow-button":W$({context:"any",icon:T.some("more-drawer"),enabled:!0,tooltip:T.some("Reveal or hide additional toolbar items")},T.none(),n.providers,[],"overflow-button")},splitToolbarBehaviours:$I(n,s)}},dG=n=>{const s=II(n),a=4,i=cN.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return cN.sketch({...s,lazySink:n.getSink,getOverflowBounds:()=>{const d=n.moreDrawerData.lazyHeader().element,g=lm(d),h=jv(d),C=lm(h),S=Math.max(h.dom.scrollHeight,C.height);return Ys(g.x+a,C.y,g.width-a*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>n.onToggled(d,!0),onClosed:d=>n.onToggled(d,!1)})},mG=n=>{const s=UA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=UA.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=II(n);return UA.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([NR()],{type:"opened"}),n.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([NR()],{type:"closed"}),n.onToggled(d,!1)}})},lT=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return Md.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===tl.scrolling?["tox-toolbar--scrolling"]:[])},components:[Md.parts.groups({})],toolbarBehaviours:$I(n,s)})},fG=(n,s)=>{const a=n.type==="togglebutton",i=n.icon.map(W=>Bh(W,s.icons)).map(Un),g=W=>{const ee=Ke=>{i.map(Re=>Re.getOpt(W).each($e=>{Gt.set($e,[Bh(Ke,s.icons)])}))},re=Ke=>{const Re=W.element;Ke?(bo(Re,"tox-button--enabled"),Pt(Re,"aria-pressed",!0)):(ns(Re,"tox-button--enabled"),Ho(Re,"aria-pressed"))},fe=()=>$s(W.element,"tox-button--enabled"),be=()=>br(W.element);if(a)return n.onAction({setIcon:ee,setActive:re,isActive:fe,focus:be});if(n.type==="button")return n.onAction({setIcon:ee})},h={...n,name:a?n.text.getOr(n.icon.getOr("")):n.text??n.icon.getOr(""),primary:n.buttonType==="primary",buttonType:T.from(n.buttonType),tooltip:n.tooltip,icon:n.icon,enabled:!0,borderless:n.borderless},C=bR(n.buttonType??"secondary"),S=a?n.text.map(s.translate):T.some(s.translate(n.text)),x=S.map($o),_=h.tooltip.or(S).map(W=>({"aria-label":s.translate(W)})).getOr({}),D=i.map(W=>W.asSpec()),P=Vm([D,x]),F=n.icon.isSome()&&x.isSome(),z={tag:"button",classes:C.concat(...n.icon.isSome()&&!F?["tox-button--icon"]:[]).concat(...F?["tox-button--icon-and-text"]:[]).concat(...n.borderless?["tox-button--naked"]:[]).concat(...n.type==="togglebutton"&&n.active?["tox-button--enabled"]:[]),attributes:_},G=[],J=J4(h,T.some(g),G,z,P,n.tooltip,s);return fr.sketch(J)},FR=(n,s)=>fG(n,s),LI=(n,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:De(n.buttons,a=>FR(a,s))}),HR=jr().deviceType,gG=HR.isPhone(),FI=HR.isTablet(),hG=n=>{let s=!1;const a=De(n.buttons,i=>i.type==="group"?(s=!0,LI(i,n.providers)):FR(i,n.providers));return{uid:n.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...gG||FI?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ve([Zt.config({}),wt.config({mode:"flow",selector:"button, .tox-button",focusInside:xf.OnEnterOrSpaceMode})]),components:s?a:[Ad.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Ad.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},pG=n=>({uid:n.uid,behaviours:Ve([Zt.config({}),To.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),HI=(n,s,a,i)=>{const d={getPane:g=>Sr.getPart(g,n,"pane"),getOnShow:g=>n.viewConfig.onShow,getOnHide:g=>n.viewConfig.onHide};return{uid:n.uid,dom:n.dom,components:s,behaviours:Ve([Zt.config({}),wt.config({mode:"cyclic",focusInside:xf.OnEnterOrSpaceMode})]),apis:d}};var O1=Ec({name:"silver.View",configFields:[Be("viewConfig")],partFields:[Aa({factory:{sketch:hG},schema:[Be("buttons"),Be("providers")],name:"header"}),Aa({factory:{sketch:pG},schema:[],name:"pane"})],factory:HI,apis:{getPane:(n,s)=>n.getPane(s),getOnShow:(n,s)=>n.getOnShow(s),getOnHide:(n,s)=>n.getOnHide(s)}});const zI=(n,s,a)=>Fo(s,(i,d)=>{const g=pi(TZ(i));return n.slot(d,O1.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[O1.parts.header({buttons:g.buttons,providers:a})]:[],O1.parts.pane({})]}))}),bG=(n,s)=>oa.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:zI(a,n,s),slotBehaviours:iv.unnamedEvents([Oo(i=>oa.hideAllSlots(i))])})),VI=n=>vt(oa.getSlotNames(n),s=>oa.isShowing(n,s)),vG=n=>{const s=n.element;Ht(s,"display","none"),Pt(s,"aria-hidden","true")},UI=n=>{const s=n.element;Cn(s,"display"),Ho(s,"aria-hidden")},yG=n=>({getContainer:ie(n)}),ZI=(n,s,a)=>{oa.getSlot(n,s).each(i=>{O1.getPane(i).each(d=>{a(i)(yG(d.element.dom))})})},CG=(n,s)=>ZI(n,s,O1.getOnShow),SG=(n,s)=>ZI(n,s,O1.getOnHide);var uT=Xi({factory:(n,s)=>{const g={setViews:(h,C)=>{Gt.set(h,[bG(C,s.backstage.shared.providers)])},whichView:h=>Le.getCurrent(h).bind(VI),toggleView:(h,C,S,x)=>Le.getCurrent(h).exists(_=>{const D=VI(_),P=D.exists(z=>x===z),F=oa.getSlot(_,x).isSome();return F&&(oa.hideAllSlots(_),P?(vG(h),C()):(S(),UI(h),oa.showSlot(_,x),CG(_,x)),D.each(z=>SG(_,z))),F})};return{uid:n.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ve([Gt.config({}),Le.config({find:h=>{const C=Gt.contents(h);return so(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Be("backstage")],apis:{setViews:(n,s,a)=>n.setViews(s,a),toggleView:(n,s,a,i,d)=>n.toggleView(s,a,i,d),whichView:(n,s)=>n.whichView(s)}});const wG=(n,s,a)=>{let i=!1;const d=h=>{f3(h,".tox-statusbar").each(C=>{zo(C,"display")==="none"&&ir(C,"aria-hidden")==="true"?(Cn(C,"display"),Ho(C,"aria-hidden")):(Ht(C,"display","none"),Pt(C,"aria-hidden","true"))})},g={getSocket:h=>Sr.getPart(h,n,"socket"),setSidebar:(h,C,S)=>{Sr.getPart(h,n,"sidebar").each(x=>MI(x,C,S))},toggleSidebar:(h,C)=>{Sr.getPart(h,n,"sidebar").each(S=>bS(S,C))},whichSidebar:h=>Sr.getPart(h,n,"sidebar").bind(cG).getOrNull(),getHeader:h=>Sr.getPart(h,n,"header"),getToolbar:h=>Sr.getPart(h,n,"toolbar"),setToolbar:(h,C)=>{Sr.getPart(h,n,"toolbar").each(S=>{const x=De(C,iT);S.getApis().setGroups(S,x)})},setToolbars:(h,C)=>{Sr.getPart(h,n,"multiple-toolbar").each(S=>{const x=De(C,_=>De(_,iT));L6.setItems(S,x)})},refreshToolbar:h=>{Sr.getPart(h,n,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{Sr.getPart(h,n,"toolbar").each(C=>{ti(C.getApis().toggle,S=>S(C))})},toggleToolbarDrawerWithoutFocusing:h=>{Sr.getPart(h,n,"toolbar").each(C=>{ti(C.getApis().toggleWithoutFocusing,S=>S(C))})},isToolbarDrawerToggled:h=>Sr.getPart(h,n,"toolbar").bind(C=>T.from(C.getApis().isOpen).map(S=>S(C))).getOr(!1),getThrobber:h=>Sr.getPart(h,n,"throbber"),focusToolbar:h=>{Sr.getPart(h,n,"toolbar").orThunk(()=>Sr.getPart(h,n,"multiple-toolbar")).each(S=>{wt.focusIn(S)})},setMenubar:(h,C)=>{Sr.getPart(h,n,"menubar").each(S=>{AI.setMenus(S,C)})},focusMenubar:h=>{Sr.getPart(h,n,"menubar").each(C=>{AI.focus(C)})},setViews:(h,C)=>{Sr.getPart(h,n,"viewWrapper").each(S=>{uT.setViews(S,C)})},toggleView:(h,C)=>Sr.getPart(h,n,"viewWrapper").exists(S=>uT.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>Sr.getPart(h,n,"viewWrapper").bind(uT.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),Sr.getPart(h,n,"editorContainer").each(C=>{const S=C.element;d(S),Ht(S,"display","none"),Pt(S,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),Sr.getPart(h,n,"editorContainer").each(C=>{const S=C.element;d(S),Cn(S,"display"),Ho(S,"aria-hidden")})}};return{uid:n.uid,dom:n.dom,components:s,apis:g,behaviours:n.behaviours}},xG=Qi.optional({factory:AI,name:"menubar",schema:[Be("backstage")]}),EG=n=>n.type===tl.sliding?mG:n.type===tl.floating?dG:lT,TG=Qi.optional({factory:{sketch:n=>L6.sketch({uid:n.uid,dom:n.dom,listBehaviours:Ve([wt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>lT({type:n.type,uid:st("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:n.providers,onEscape:()=>(n.onEscape(),T.some(!0))}),setupItem:(s,a,i,d)=>{Md.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[Be("dom"),Be("onEscape")]}),zR=Qi.optional({factory:{sketch:n=>{const s=EG(n),a={type:n.type,uid:n.uid,onEscape:()=>(n.onEscape(),T.some(!0)),onToggled:(i,d)=>n.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:n.getSink,providers:n.providers,moreDrawerData:{lazyToolbar:n.lazyToolbar,lazyMoreButton:n.lazyMoreButton,lazyHeader:n.lazyHeader},attributes:n.attributes};return s(a)}},name:"toolbar",schema:[Be("dom"),Be("onEscape"),Be("getSink")]}),kG=Qi.optional({factory:{sketch:oG},name:"header",schema:[Be("dom")]}),_G=Qi.optional({factory:{sketch:sG},name:"promotion",schema:[Be("dom"),Be("promotionLink")]}),WI=Qi.optional({name:"socket",schema:[Be("dom")]}),jI=Qi.optional({factory:{sketch:aT},name:"sidebar",schema:[Be("dom")]}),AG=Qi.optional({factory:{sketch:cT},name:"throbber",schema:[Be("dom")]}),OG=Qi.optional({factory:uT,name:"viewWrapper",schema:[Be("backstage")]}),DG=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:n.components}),RG=Qi.optional({factory:{sketch:DG},name:"editorContainer",schema:[]});var yo=Ec({name:"OuterContainer",factory:wG,configFields:[Be("dom"),Be("behaviours")],partFields:[kG,xG,zR,TG,WI,jI,_G,AG,OG,RG],apis:{getSocket:(n,s)=>n.getSocket(s),setSidebar:(n,s,a,i)=>{n.setSidebar(s,a,i)},toggleSidebar:(n,s,a)=>{n.toggleSidebar(s,a)},whichSidebar:(n,s)=>n.whichSidebar(s),getHeader:(n,s)=>n.getHeader(s),getToolbar:(n,s)=>n.getToolbar(s),setToolbar:(n,s,a)=>{n.setToolbar(s,a)},setToolbars:(n,s,a)=>{n.setToolbars(s,a)},refreshToolbar:(n,s)=>n.refreshToolbar(s),toggleToolbarDrawer:(n,s)=>{n.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(n,s)=>{n.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(n,s)=>n.isToolbarDrawerToggled(s),getThrobber:(n,s)=>n.getThrobber(s),setMenubar:(n,s,a)=>{n.setMenubar(s,a)},focusMenubar:(n,s)=>{n.focusMenubar(s)},focusToolbar:(n,s)=>{n.focusToolbar(s)},setViews:(n,s,a)=>{n.setViews(s,a)},toggleView:(n,s,a)=>n.toggleView(s,a),whichView:(n,s)=>n.whichView(s)}});const MG="file edit view insert format tools table help",VR={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image video link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},dT=(n,s,a)=>{const i=CN(a).split(/[ ,]/);return{text:n.title,getItems:()=>le(n.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Qs(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},vS=n=>n.split(" "),GI=(n,s)=>{const a={...VR,...s.menus},i=Gn(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?vS(MG):vS(s.menubar===!1?"":s.menubar),g=co(d,C=>{const S=$n(VR,C);return i?S||bt(s.menus,C).exists(x=>$n(x,"items")):S}),h=De(g,C=>{const S=a[C];return dT({title:S.title,items:vS(S.items)},s,n)});return co(h,C=>{const S=x=>Et(x)||x.type!=="separator";return C.getItems().length>0&&Qs(C.getItems(),S)})},BG=n=>{const s=()=>{n._skinLoaded=!0,v8(n)};return()=>{n.initialized?s():n.on("init",s)}},qI=(n,s)=>()=>A4(n,{message:s}),NG=n=>{const s=RC(n);return s?T.from(s):T.none()},KI=(n,s,a)=>(n.on("remove",()=>a.unload(s)),a.load(s)),mT=(n,s,a,i)=>(n.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),YI=(n,s)=>"ui/"+n+"/"+s,PG=n=>T.from(tinymce.Resource.get(n)).filter(Et),UR=(n,s,a="")=>{const i=NG(n).map(g=>YI(g,`${s}.css`)),d=i.bind(PG);return dc(i,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=n.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},ZR=(n,s)=>{const a=n.ui.styleSheetLoader,i=UR(n,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return mT(n,d,g,a),Promise.resolve();case"load-stylesheet":const{url:h}=i;return KI(n,h,a);default:return Promise.resolve()}},$G=(n,s)=>{if(Cl(We.fromDom(n.getElement()))){const i=Wb.DOM.styleSheetLoader,d=UR(n,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return mT(n,g,h,i),Promise.resolve();case"load-stylesheet":const{url:C}=d;return KI(n,C,i);default:return Promise.resolve()}}else return Promise.resolve()},IG=(n,s,a)=>{const d=UR(n,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?mT(n,g,h,n.ui.styleSheetLoader):n.on("PostRender",()=>{mT(n,g,h,n.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return a&&n.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},XI=async(n,s)=>{const a=rO(s);if(await IG(s,n,a),!MC(s)&&Et(a))return Promise.all([ZR(s,a),$G(s,a)]).then()},JI=(n,s)=>XI(n,s).then(BG(s),qI(s,"Skin could not be loaded")),QI=gn(JI,!1),LG=gn(JI,!0),WR=n=>({isEnabled:()=>!ft.isDisabled(n),setEnabled:s=>ft.set(n,!s),setText:s=>xt(n,ql,{text:s}),setIcon:s=>xt(n,A1,{icon:s})}),FG=n=>({setActive:s=>{Sn.set(n,s)},isActive:()=>Sn.isOn(n),isEnabled:()=>!ft.isDisabled(n),setEnabled:s=>ft.set(n,!s),setText:s=>xt(n,ql,{text:s}),setIcon:s=>xt(n,A1,{icon:s})}),HG=(n,s)=>n.map(a=>({"aria-label":s.translate(a)})).getOr({}),zG=st("focus-button"),fT=(n,s,a,i,d,g,h)=>{const C=s.map(x=>Un(uR(x,"tox-tbtn",d))),S=n.map(x=>Un(Bh(x,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...HG(a,d),...oo(h)?{"data-mce-name":h}:{}}},components:Vm([S.map(x=>x.asSpec()),C.map(x=>x.asSpec())]),eventOrder:{[Ka()]:["focusing","alloy.base.behaviour",jm],[Ol()]:[jm,"toolbar-group-button-events"],[bi()]:[jm,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Ve([Hd.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),Rs(()=>d.checkUiComponentContext(g)),Ut(jm,[Oo((x,_)=>G4(x)),Te(ql,(x,_)=>{C.bind(D=>D.getOpt(x)).each(D=>{Gt.set(D,[$o(d.translate(_.event.text))])})}),Te(A1,(x,_)=>{S.bind(D=>D.getOpt(x)).each(D=>{Gt.set(D,[Bh(_.event.icon,d.icons)])})}),Te(Ka(),(x,_)=>{_.event.prevent(),fn(x,zG)})])].concat(i.getOr([])))}},VG=(n,s,a,i,d)=>{const g=s.shared,h=pt(Y),C={toolbarButtonBehaviours:[],getApi:WR,onSetup:n.onSetup},S=[Ut("toolbar-group-button-events",[zd(C,h),Ah(C,h)]),...n.tooltip.map(x=>Do.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(x)}))).toArray()];return qf.sketch({lazySink:g.getSink,fetch:()=>Xo.nu(x=>{x(De(a(n.items),iT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:fT(n.icon,n.text,n.tooltip,T.some(S),g.providers,n.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},e7=(n,s,a,i)=>{var h;const d=pt(Y),g=fT(n.icon,n.text,n.tooltip,T.none(),a,n.context,i);return fr.sketch({dom:g.dom,components:g.components,eventOrder:iR,buttonBehaviours:{...Ve([Ut("toolbar-button-events",[VW({onAction:n.onAction,getApi:s.getApi}),zd(s,d),Ah(s,d)]),...n.tooltip.map(C=>Do.config(a.tooltips.getConfig({tooltipText:a.translate(C)+n.shortcut.map(S=>` (${pD(S)})`).getOr("")}))).toArray(),Hd.toolbarButton(()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable),Rs(()=>a.checkUiComponentContext(n.context))].concat(s.toolbarButtonBehaviours)),[jm]:(h=g.buttonBehaviours)==null?void 0:h[jm]}})},UG=(n,s,a)=>yS(n,s,[],a),yS=(n,s,a,i)=>e7(n,{toolbarButtonBehaviours:a.length>0?[Ut("toolbarButtonWith",a)]:[],getApi:WR,onSetup:n.onSetup},s,i),jR=(n,s,a)=>t7(n,s,[],a),t7=(n,s,a,i)=>e7(n,{toolbarButtonBehaviours:[Gt.config({}),Sn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Ut("toolbarToggleButtonWith",a)]:[]),getApi:FG,onSetup:n.onSetup},s,i),ZG=(n,s,a)=>i=>Xo.nu(d=>s.fetch(d)).map(d=>T.from(XD(uo($4(st("menu-value"),d,g=>{s.onItemAction(n(i),g)},s.columns,s.presets,Vu.CLOSE_ON_EXECUTE,s.select.getOr(Vn),a),{movement:Rh(s.columns,s.presets),menuBehaviours:iv.unnamedEvents(s.columns!=="auto"?[]:[Oo((g,h)=>{fD(g,4,_O(s.presets)).each(({numRows:C,numColumns:S})=>{wt.setGridSize(g,C,S)})})])})))),WG=(n,s,a)=>i=>{const d=i.getSystem(),g=i.element,h=()=>{const S=$s(g,"tox-split-button__chevron"),x=S?Ic(g).bind(D=>d.getByDom(D).toOptional()):T.some(i),_=S?T.some(i):Kv(g).bind(D=>d.getByDom(D).toOptional().filter(P=>$s(P.element,"tox-split-button__chevron")));return{mainOpt:x,chevronOpt:_}},C=S=>{const{mainOpt:x,chevronOpt:_}=h();x.each(S),_.each(S)};return{isEnabled:()=>{const{mainOpt:S}=h();return S.exists(x=>!ft.isDisabled(x))},setEnabled:S=>C(x=>ft.set(x,!S)),setText:S=>{const{mainOpt:x}=h();x.each(_=>xt(_,ql,{text:S}))},setIcon:S=>{const{mainOpt:x}=h();x.each(_=>xt(_,A1,{icon:S}))},setIconFill:(S,x)=>C(_=>{io(_.element,`svg path[class="${S}"], rect[class="${S}"]`).each(D=>{Pt(D,"fill",x)})}),isActive:()=>{const{mainOpt:S}=h();return S.exists(x=>Sn.isOn(x))},setActive:S=>{const{mainOpt:x}=h();x.each(_=>Sn.set(_,S))},setTooltip:S=>{n.set(S);const{mainOpt:x,chevronOpt:_}=h();x.each(P=>Pt(P.element,"aria-label",s.providers.translate(S)));const D=a.chevronTooltip.map(P=>s.providers.translate(P)).getOr(s.providers.translate(S));_.each(P=>Pt(P.element,"aria-label",D))}}},jG=(n,s,a)=>{const i=pt(Y),d=pt(n.tooltip.getOr("")),g=WG(d,s,n),h=st("tox-split-menu"),C=pt(!1),S=()=>({"aria-haspopup":"menu","aria-expanded":String(C.get()),"aria-controls":h}),x=()=>n.tooltip.map(G=>s.providers.translate(G)).getOr(s.providers.translate("Text color")),_=()=>n.chevronTooltip.map(G=>s.providers.translate(G)).getOrThunk(()=>{const G=x();return s.providers.translate(["{0} menu",G])}),D=(G,J)=>{C.set(G),Pt(J.element,"aria-expanded",String(G))},P=Kc.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:TV("chevron-down",s.providers.icons),attributes:{"aria-label":_(),...oo(a)?{"data-mce-name":a+"-chevron"}:{},...S()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:Ve([Ut("split-dropdown-events",[Oo((G,J)=>G4(G)),zd({getApi:g,onSetup:n.onSetup},i),Te("alloy-dropdown-open",G=>D(!0,G)),Te("alloy-dropdown-close",G=>D(!1,G))]),Hd.toolbarButton(()=>s.providers.checkUiComponentContext(n.context).shouldDisable),Rs(()=>s.providers.checkUiComponentContext(n.context)),Dd.config({}),Do.config(s.providers.tooltips.getConfig({tooltipText:_(),onShow:G=>{if(d.get()!==n.tooltip.getOr("")){const J=n.chevronTooltip.map(W=>s.providers.translate(W)).getOr(`${s.providers.translate(d.get())} menu`);Do.setComponents(G,s.providers.tooltips.getComponents({tooltipText:J}))}}}))]),lazySink:s.getSink,fetch:ZG(g,n,s.providers),getHotspot:G=>Ic(G.element).bind(J=>G.getSystem().getByDom(J).toOptional()),onOpen:(G,J,W)=>{zn.highlightBy(W,ee=>$s(ee.element,"tox-collection__item--active")),zn.getHighlighted(W).each(wt.focusIn)},parts:{menu:{...zC(!1,n.columns,n.presets),dom:{...zC(!1,n.columns,n.presets).dom,tag:"div",attributes:{id:h}}}}}),F=fT(n.icon,n.text,T.none(),T.some([Sn.config({toggleClass:"tox-tbtn--enabled",aria:n.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),...n.tooltip.isSome()?[Do.config(s.providers.tooltips.getConfig({tooltipText:s.providers.translate(n.tooltip.getOr("")),onShow:G=>{if(d.get()!==n.tooltip.getOr("")){const J=s.providers.translate(d.get());Do.setComponents(G,s.providers.tooltips.getComponents({tooltipText:J}))}}}))]:[]]),s.providers,n.context,a);return[fr.sketch({dom:{...F.dom,classes:["tox-tbtn","tox-split-button__main"].concat(n.text.isSome()?["tox-tbtn--select"]:[]),attributes:{"aria-label":x(),...oo(a)?{"data-mce-name":a}:{}}},components:F.components,eventOrder:F.eventOrder,buttonBehaviours:F.buttonBehaviours,action:G=>{if(n.onAction){const J=g(G);J.isEnabled()&&n.onAction(J)}}}),P]},GG=".tox-toolbar-slider__input,.tox-toolbar-textfield",n7=n=>{rs.getContent(n).each(s=>{io(s.element,GG).fold(()=>wt.focusIn(s),br)})},qG=n=>qs(n.element).each(s=>{Ii(s,'[tabindex="-1"]').each(a=>{br(a)})}),o7=st("forward-slide"),gT=st("backward-slide"),hT=st("change-slide-event"),Sv="tox-pop--resizing",GR=n=>{const s=pt([]);return{sketch:rs.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{s.set([]),rs.getContent(i).each(d=>{Cn(d.element,"visibility")}),ns(i.element,Sv),Cn(i.element,"width")},onHide:()=>{s.set([]),n.onHide()},inlineBehaviours:Ve([Ut("context-toolbar-events",[eh(h0(),(i,d)=>{d.event.raw.propertyName==="width"&&(ns(i.element,Sv),Cn(i.element,"width"))}),Te(hT,(i,d)=>{const g=i.element;Cn(g,"width");const h=da(g),C=qs(i.element).isSome();Cn(g,"left"),Cn(g,"right"),Cn(g,"max-width"),rs.setContent(i,d.event.contents),bo(g,Sv);const S=da(g);Ht(g,"transition","none"),rs.reposition(i),Cn(g,"transition"),Ht(g,"width",h+"px"),d.event.focus.fold(()=>{C&&n7(i)},x=>{_r(Gs(i.element)).fold(()=>br(x),_=>{un(_,x)||n.focusElement(x)})}),setTimeout(()=>{Ht(i.element,"width",S+"px")},0)}),Te(o7,(i,d)=>{rs.getContent(i).each(g=>{s.set(s.get().concat([{bar:g,focus:_r(Gs(i.element))}]))}),xt(i,hT,{contents:d.event.forwardContents,focus:T.none()})}),Te(gT,(i,d)=>{n.onBack(),il(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),xt(i,hT,{contents:p(g.bar),focus:g.focus})})})]),wt.config({mode:"special",onEscape:i=>il(s.get()).fold(()=>n.onEscape(),d=>(fn(i,gT),T.some(!0)))})]),lazySink:()=>Nt.value(n.sink)}),inSubtoolbar:()=>s.get().length>0}},s7=(n,s)=>{const a=pi(zm({type:"button",icon:"chevron-left",tooltip:"Back",onAction:Y}));return yS(a,s.shared.providers,[Te(cR,i=>{fn(i,gT)})])},Yl=(n,s,a)=>ya(a)?n.translate(s):n.translate([s,n.translate(a)]),r7=(n,s)=>{const a=(h,C,S,x)=>{const _=n.shared.providers.translate(h.title);if(h.type==="separator")return T.some({type:"separator",text:_});if(h.type==="submenu"){const D=le(h.getStyleItems(),P=>i(P,C,x));return C===0&&D.length<=0?T.none():T.some({type:"nestedmenuitem",text:_,enabled:D.length>0,getSubmenuItems:()=>le(h.getStyleItems(),P=>i(P,C,x))})}else return T.some({type:"togglemenuitem",text:_,icon:h.icon,active:h.isSelected(x),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),D=>({meta:{style:D}}))})},i=(h,C,S)=>{const x=h.type==="formatter"&&s.isInvalid(h);return C===0?x?[]:a(h,C,!1,S).toArray():a(h,C,x,S).toArray()},d=h=>{const C=s.getCurrentValue(),S=s.shouldHide?0:1;return le(h,x=>i(x,S,C))};return{validateItems:d,getFetch:(h,C)=>(S,x)=>{const _=C(),D=d(_),P=rg(D,Vu.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:T.none()});x(P)}}},wv=(n,s)=>{const a=s.dataset,i=a.type==="basic"?()=>De(a.data,d=>rI(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:r7(n,s),getStyleItems:i}},CS=(n,s,a,i,d,g)=>{const{items:h,getStyleItems:C}=wv(s,a),S=pt(a.tooltip),x=D=>({getComponent:ie(D),setTooltip:P=>{const F=s.shared.providers.translate(P);Pt(D.element,"aria-label",F),S.set(P)}}),_=D=>{const P=F=>D.setTooltip(Yl(n,i(F.value),F.value));return n.on(d,P),E1(Dh(n,"NodeChange",F=>{const z=F.getComponent();a.updateText(z),ft.set(F.getComponent(),!n.selection.isEditable()||C().length===0)})(D),()=>n.off(d,P))};return dR({context:"mode:design",text:a.icon.isSome()?T.none():a.text,icon:a.icon,ariaLabel:T.some(a.tooltip),tooltip:T.none(),role:T.none(),fetch:h.getFetch(s,C),onSetup:_,getApi:x,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Do.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:D=>{if(a.tooltip!==S.get()){const P=s.shared.providers.translate(S.get());Do.setComponents(D,s.shared.providers.tooltips.getComponents({tooltipText:P}))}}})})]},"tox-tbtn",s.shared,g)},KG=n=>De(n,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),YG=n=>({type:"basic",data:n});var xv;(function(n){n[n.SemiColon=0]="SemiColon",n[n.Space=1]="Space"})(xv||(xv={}));const XG=(n,s)=>s===xv.SemiColon?n.replace(/;$/,"").split(";"):n.split(" "),qR=(n,s,a)=>{const i=n.options.get(s);return{type:"basic",data:KG(XG(i,a))}},a7="Align",c7=ie("Alignment {0}"),i7="left",SS=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],l7=n=>{const s=()=>vt(SS,C=>n.formatter.match(C.format)),a=C=>()=>n.formatter.match(C),i=C=>T.none,d=C=>{const x=s().fold(ie(i7),_=>_.title.toLowerCase());xt(C,A1,{icon:`align-${x}`}),C8(n,{value:x})},g=YG(SS),h=C=>()=>vt(SS,S=>S.format===C.format).each(S=>n.execCommand(S.command));return{tooltip:Yl(n,c7(),i7),text:T.none(),icon:T.some("align-left"),isSelectedFor:a,getCurrentValue:T.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!n.formatter.canApply(C.format)}},JG=(n,s)=>CS(n,s,l7(n),c7,"AlignTextUpdate","align"),QG=(n,s)=>{const a=wv(s,l7(n));n.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(a7),onSetup:Fr(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},u7=(n,s)=>{const a=s(),i=De(a,d=>d.format);return T.from(n.formatter.closest(i)).bind(d=>vt(a,g=>g.format===d))},eq="Blocks",d7=ie("Block {0}"),pT="Paragraph",KR=n=>{const s=g=>()=>n.formatter.match(g),a=g=>()=>{const h=n.formatter.get(g);return h?T.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(g))}):T.none()},i=g=>{const C=u7(n,()=>d.data).fold(ie(pT),S=>S.title);xt(g,ql,{text:C}),O4(n,{value:C})},d=qR(n,"block_formats",xv.SemiColon);return{tooltip:Yl(n,d7(),pT),text:T.some(pT),icon:T.none(),isSelectedFor:s,getCurrentValue:T.none,getPreviewFor:a,onAction:D4(n),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!n.formatter.canApply(g.format)}},m7=(n,s)=>CS(n,s,KR(n),d7,"BlocksTextUpdate","blocks"),tq=(n,s)=>{const a=wv(s,KR(n));n.ui.registry.addNestedMenuItem("blocks",{text:eq,onSetup:Fr(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},f7="Fonts",g7=ie("Font {0}"),YR="System Font",nq=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],XR=n=>{const s=n.split(/\s*,\s*/);return De(s,a=>a.replace(/^['"]+|['"]+$/g,""))},h7=(n,s)=>s.length>0&&Bs(s,a=>n.indexOf(a.toLowerCase())>-1),p7=(n,s)=>{if(n.indexOf("-apple-system")===0||s.length>0){const a=XR(n.toLowerCase());return h7(a,nq)||h7(a,s)}else return!1},b7=n=>{const s=()=>{const S=z=>z?XR(z)[0]:"",x=n.queryCommandValue("FontName"),_=C.data,D=x?x.toLowerCase():"",P=IN(n);return{matchOpt:vt(_,z=>{const G=z.format;return G.toLowerCase()===D||S(G).toLowerCase()===S(D).toLowerCase()}).orThunk(()=>va(p7(D,P),{title:YR,format:D})),font:x}},a=S=>x=>x.exists(_=>_.format===S),i=()=>{const{matchOpt:S}=s();return S},d=S=>()=>T.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:x,font:_}=s(),D=x.fold(ie(_),P=>P.title);xt(S,ql,{text:D}),WZ(n,{value:D})},C=qR(n,"font_family_formats",xv.SemiColon);return{tooltip:Yl(n,g7(),YR),text:T.some(YR),icon:T.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:Vn}},oq=(n,s)=>CS(n,s,b7(n),g7,"FontFamilyTextUpdate","fontfamily"),sq=(n,s)=>{const a=wv(s,b7(n));n.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(f7),onSetup:Fr(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var bT=tinymce.util.Tools.resolve("tinymce.util.VK");const rq=(n,s,a,i)=>{let d=T.none();const g=re=>re.map(fe=>it.getValue(fe)).getOr(""),h=Dh(n,"NodeChange SwitchMode DisabledStateChange",re=>{const fe=re.getComponent();d=T.some(fe),a.updateInputValue(fe),ft.set(fe,!n.selection.isEditable()||YE(n))}),C=re=>({getComponent:ie(re)}),S=pt(Y),x=st("custom-number-input-events"),_=(re,fe,be)=>{const Ke=g(d),Re=a.getNewValue(Ke,re),$e=Ke.length-`${Re}`.length,Ne=d.map(gt=>gt.element.dom.selectionStart-$e),Tt=d.map(gt=>gt.element.dom.selectionEnd-$e);a.onAction(Re,be),d.each(gt=>{it.setValue(gt,Re),fe&&(Ne.each(sn=>gt.element.dom.selectionStart=sn),Tt.each(sn=>gt.element.dom.selectionEnd=sn))})},D=(re,fe)=>_((be,Ke)=>be-Ke,re,fe),P=(re,fe)=>_((be,Ke)=>be+Ke,re,fe),F=re=>lu(re.element).fold(T.none,fe=>(br(fe),T.some(!0))),z=re=>Bi(re.element)?(En(re.element).each(fe=>br(fe)),T.some(!0)):T.none(),G=(re,fe,be,Ke)=>{const Re=pt(Y),$e=s.shared.providers.translate(be),Ne=st("altExecuting"),Tt=Dh(n,"NodeChange SwitchMode DisabledStateChange",sn=>{ft.set(sn.getComponent(),!n.selection.isEditable()||YE(n))}),gt=sn=>{ft.isDisabled(sn)||re(!0)};return fr.sketch({dom:{tag:"button",attributes:{"aria-label":$e,"data-mce-name":fe},classes:Ke.concat(fe)},components:[lR(fe,s.shared.providers.icons)],buttonBehaviours:Ve([ft.config({}),Do.config(s.shared.providers.tooltips.getConfig({tooltipText:$e})),Ut(Ne,[zd({onSetup:Tt,getApi:C},Re),Ah({getApi:C},Re),Te(mr(),(sn,_t)=>{(_t.event.raw.keyCode===bT.SPACEBAR||_t.event.raw.keyCode===bT.ENTER)&&(ft.isDisabled(sn)||re(!1))}),Te(vf(),gt),Te(hm(),gt)])]),eventOrder:{[mr()]:[Ne,"keying"],[vf()]:[Ne,"alloy.base.behaviour"],[hm()]:[Ne,"alloy.base.behaviour"],[Ol()]:["alloy.base.behaviour",Ne,"tooltipping"],[bi()]:[Ne,"tooltipping"]}})},J=Un(G(re=>D(!1,re),"minus","Decrease font size",[])),W=Un(G(re=>P(!1,re),"plus","Increase font size",[])),ee=Un({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Fm.sketch({inputBehaviours:Ve([ft.config({}),Ut(x,[zd({onSetup:h,getApi:C},S),Ah({getApi:C},S)]),Ut("input-update-display-text",[Te(ql,(re,fe)=>{it.setValue(re,fe.event.text)}),Te(T2(),re=>{a.onAction(it.getValue(re))}),Te(bf(),re=>{a.onAction(it.getValue(re))})]),wt.config({mode:"special",onEnter:re=>(_(an,!0,!0),T.some(!0)),onEscape:F,onUp:re=>(P(!0,!1),T.some(!0)),onDown:re=>(D(!0,!1),T.some(!0)),onLeft:(re,fe)=>(fe.cut(),T.none()),onRight:(re,fe)=>(fe.cut(),T.none())})])})],behaviours:Ve([Zt.config({}),wt.config({mode:"special",onEnter:z,onSpace:z,onEscape:F}),Ut("input-wrapper-events",[Te(Uc(),re=>{et([J,W],fe=>{const be=We.fromDom(fe.get(re).element.dom);Bi(be)&&vs(be)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...oo(i)?{"data-mce-name":i}:{}}},components:[J.asSpec(),ee.asSpec(),W.asSpec()],behaviours:Ve([Zt.config({}),wt.config({mode:"flow",focusInside:xf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:re=>Bi(re.element)?T.none():(br(re.element),T.some(!0))})])}},aq="Font sizes",v7=ie("Font size {0}"),JR="12pt",cq={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},iq={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},lq=(n,s)=>{const a=Math.pow(10,s);return Math.round(n*a)/a},uq=(n,s)=>/[0-9.]+px$/.test(n)?lq(parseInt(n,10)*72/96,s||0)+"pt":bt(iq,n).getOr(n),dq=n=>bt(cq,n).getOr(""),y7=n=>{const s=()=>{let S=T.none();const x=C.data,_=n.queryCommandValue("FontSize");if(_)for(let D=3;S.isNone()&&D>=0;D--){const P=uq(_,D),F=dq(P);S=vt(x,z=>z.format===_||z.format===P||z.format===F)}return{matchOpt:S,size:_}},a=S=>x=>x.exists(_=>_.format===S),i=()=>{const{matchOpt:S}=s();return S},d=ie(T.none),g=S=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:x,size:_}=s(),D=x.fold(ie(_),P=>P.title);xt(S,ql,{text:D}),ZZ(n,{value:D})},C=qR(n,"font_size_formats",xv.Space);return{tooltip:Yl(n,v7(),JR),text:T.some(JR),icon:T.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:Vn}},mq=(n,s)=>CS(n,s,y7(n),v7,"FontSizeTextUpdate","fontsize"),C7=n=>{const s={step:1};return{em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[n]??s},fq=16,gq=n=>n>=0,S7=n=>{const s=()=>n.queryCommandValue("FontSize");return{updateInputValue:i=>xt(i,ql,{text:s()}),onAction:(i,d)=>n.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{s0(i,["unsupportedLength","empty"]);const g=s(),h=s0(i,["unsupportedLength","empty"]).or(s0(g,["unsupportedLength","empty"])),C=h.map(P=>P.value).getOr(fq),S=e4(n),x=h.map(P=>P.unit).filter(P=>P!=="").getOr(S),_=d(C,C7(x).step),D=`${gq(_)?_:C}${x}`;return D!==g&&Um(n,{value:D}),D}}},hq=(n,s)=>rq(n,s,S7(n),"fontsizeinput"),w7=(n,s)=>{const a=wv(s,y7(n));n.ui.registry.addNestedMenuItem("fontsize",{text:aq,onSetup:Fr(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},x7="Formats",E7=n=>ya(n)?"Formats":"Format {0}",T7=(n,s)=>{const a="Formats",i=h=>()=>n.formatter.match(h),d=h=>()=>{const C=n.formatter.get(h);return C!==void 0?T.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(h))}):T.none()},g=h=>{const C=D=>_j(D)?le(D.items,C):eI(D)?[{title:D.title,format:D.format}]:[],S=le(sI(n),C),_=u7(n,ie(S)).fold(ie({title:a,tooltipLabel:""}),D=>({title:D.title,tooltipLabel:D.title}));xt(h,ql,{text:_.title}),UZ(n,{value:_.tooltipLabel})};return{tooltip:Yl(n,E7(""),""),text:T.some(a),icon:T.none(),isSelectedFor:i,getCurrentValue:T.none,getPreviewFor:d,onAction:D4(n),updateText:g,shouldHide:QA(n),isInvalid:h=>!n.formatter.canApply(h.format),dataset:s}},pq=(n,s)=>{const a={type:"advanced",...s.styles};return CS(n,s,T7(n,a),E7,"StylesTextUpdate","styles")},Ev=(n,s)=>{const a={type:"advanced",...s.styles},i=wv(s,T7(n,a));n.ui.registry.addNestedMenuItem("styles",{text:x7,onSetup:Fr(n,()=>i.getStyleItems().length>0),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},bq=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],wS=(n,s)=>(a,i,d,g)=>{const h=n(a).mapError(C=>Mg(C)).getOrDie();return s(h,i,d,g)},vq={button:wS(zm,(n,s,a,i)=>UG(n,s.shared.providers,i)),togglebutton:wS(nD,(n,s,a,i)=>jR(n,s.shared.providers,i)),menubutton:wS(XO,(n,s,a,i)=>lS(n,"tox-tbtn",s,T.none(),!1,i)),splitbutton:wS(yZ,(n,s,a,i)=>jG(n,s.shared,i)),grouptoolbarbutton:wS(dD,(n,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=C=>vT(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,T.none()),h={[Z0]:s.shared.header.isPositionedAtTop()?vd.TopToBottom:vd.BottomToTop};switch(i1(a)){case tl.floating:return VG(n,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},yq=(n,s,a,i)=>bt(vq,n.type).fold(()=>(console.error("skipping button defined by",n),T.none()),d=>T.some(d(n,s,a,i))),k7={styles:pq,fontsize:mq,fontsizeinput:hq,fontfamily:oq,blocks:m7,align:JG,navigateback:s7},Cq=n=>{const s=De(bq,a=>{const i=co(a.items,d=>$n(n,d)||$n(k7,d));return{name:a.name,items:i}});return co(s,a=>a.items.length>0)},Sq=n=>{const s=n.split("|");return De(s,a=>({items:a.trim().split(" ")}))},wq=n=>ac(n,s=>($n(s,"name")||$n(s,"label"))&&$n(s,"items")),QR=n=>{const s=n.toolbar,a=n.buttons;return s===!1?[]:s===void 0||s===!0?Cq(a):Et(s)?Sq(s):wq(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},xq=(n,s,a,i,d,g)=>bt(s,a.toLowerCase()).orThunk(()=>g.bind(h=>ca(h,C=>bt(s,C+a.toLowerCase())))).fold(()=>bt(k7,a.toLowerCase()).map(h=>h(n,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),T.none()):yq(h,d,n,a.toLowerCase())),vT=(n,s,a,i)=>{const d=QR(s),g=De(d,h=>{const C=le(h.items,S=>S.trim().length===0?[]:xq(n,s.buttons,S,s.allowToolbarGroups,a,i).map(x=>Array.isArray(x)?x:[x]).getOr([]));return{title:T.from(n.translate(h.name)),label:va(h.label!==void 0,n.translate(h.label)),items:C}});return co(g,h=>h.items.length>0)},e5=(n,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(ac(g,Et)){const C=g.map(S=>{const x={toolbar:S,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return vT(n,x,i,T.none())});yo.setToolbars(d,C)}else yo.setToolbar(d,vT(n,a,i,T.none()))},t5=jr(),Eq=t5.os.isiOS()&&t5.os.version.major<=12,Tq=(n,s)=>{const{uiMotherships:a}=s,i=n.dom;let d=n.getWin();const g=n.getDoc().documentElement,h=pt(fo(d.innerWidth,d.innerHeight)),C=pt(fo(g.offsetWidth,g.offsetHeight)),S=()=>{const P=h.get();(P.left!==d.innerWidth||P.top!==d.innerHeight)&&(h.set(fo(d.innerWidth,d.innerHeight)),RD(n))},x=()=>{const P=n.getDoc().documentElement,F=C.get();(F.left!==P.offsetWidth||F.top!==P.offsetHeight)&&(C.set(fo(P.offsetWidth,P.offsetHeight)),RD(n))},_=P=>{FZ(n,P)};i.bind(d,"resize",S),i.bind(d,"scroll",_);const D=ii(We.fromDom(n.getBody()),"load",x);n.on("hide",()=>{et(a,P=>{Ht(P.element,"display","none")})}),n.on("show",()=>{et(a,P=>{Cn(P.element,"display")})}),n.on("NodeChange",x),n.on("remove",()=>{D.unbind(),i.unbind(d,"resize",S),i.unbind(d,"scroll",_),d=null})},kq=(n,s,a)=>{xh(n)&&Yi(a.mainUi.mothership.element,a.popupUi.mothership),Zp(s,a.dialogUi.mothership)};var _q=Object.freeze({__proto__:null,render:(n,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=pt(0),S=g.outerContainer;QI(n);const x=We.fromDom(d.targetNode),_=yl(Gs(x));Yi(x,g.mothership),kq(n,_,s),n.on("PostRender",()=>{yo.setSidebar(S,a.sidebar,NN(n)),yo.setViews(S,a.views)}),n.on("SkinLoaded",()=>{e5(n,s,a,i),C.set(n.getWin().innerWidth),yo.setMenubar(S,GI(n,a)),Tq(n,s)});const D=yo.getSocket(S).getOrDie("Could not find expected socket element");if(Eq){ds(D.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const G=zh(()=>{n.dispatch("ScrollContent")},20),J=eo(D.element,"scroll",G.throttle);n.on("remove",J.unbind)}t8(n,s),n.addCommand("ToggleSidebar",(G,J)=>{yo.toggleSidebar(S,J),jZ(n)}),n.addQueryValueHandler("ToggleSidebar",()=>yo.whichSidebar(S)??""),n.addCommand("ToggleView",(G,J)=>{if(yo.toggleView(S,J)){const W=S.element;g.mothership.broadcastOn([Eu()],{target:W}),et(h,ee=>{ee.broadcastOn([Eu()],{target:W})}),sc(yo.whichView(S))&&(n.focus(),n.nodeChanged(),yo.refreshToolbar(S)),S8(n)}}),n.addQueryValueHandler("ToggleView",()=>yo.whichView(S)??"");const P=i1(n),F=()=>{yo.refreshToolbar(s.mainUi.outerContainer)};(P===tl.sliding||P===tl.floating)&&n.on("ResizeWindow ResizeEditor ResizeContent",()=>{const G=n.getWin().innerWidth;G!==C.get()&&(F(),C.set(G))});const z={setEnabled:G=>{JC(s,G?"setEnabled":"setDisabled")},isEnabled:()=>!ft.isDisabled(S)};return{iframeContainer:D.element.dom,editorContainer:S.element.dom,api:z}}});const Aq=n=>/^[0-9\.]+(|px)$/i.test(""+n)?T.some(parseInt(""+n,10)):T.none(),yT=n=>Fa(n)?n+"px":n,CT=(n,s,a)=>{const i=s.filter(g=>n<g),d=a.filter(g=>n>g);return i.or(d).getOr(n)},Oq=(n,s)=>{if(typeof s=="number")return T.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const i=a[2],d=Number.parseFloat(a[1]);if(Number.isNaN(d)||d<0)return T.none();if(i==="em")return T.from(d*Number.parseFloat(window.getComputedStyle(n.dom).fontSize));if(i==="pt")return T.from(d*(72/96));if(i==="px")return T.from(d)}return T.none()},Dq=n=>{const s=Oq(We.fromDom(n.targetElm),qA(n)),a=XA(n),i=JA(n);return s.map(d=>CT(d,a,i))},Rq=n=>Dq(n).getOr(qA(n)),xS=n=>{const s=KA(n),a=YA(n),i=XE(n);return Aq(s).map(d=>CT(d,a,i))},Mq=n=>xS(n).getOr(KA(n)),{ToolbarLocation:Tv,ToolbarMode:ES}=sV,_7=40,Bq=(n,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,C=Wb.DOM,S=Xb(n),x=Jb(n),_=XE(n).or(xS(n)),D=i.shared.header,P=D.isPositionedAtTop,F=150,z=i1(n),G=z===ES.sliding||z===ES.floating,J=pt(!1),W=()=>J.get()&&!n.removed,ee=ht=>G?ht.fold(ie(0),Ae=>Ae.components().length>1?lr(Ae.components()[1].element):0):0,re=ht=>{switch(eO(n)){case Tv.auto:const Ae=yo.getToolbar(g.outerContainer),Ze=ee(Ae),$t=lr(ht.element)-Ze,Jt=Is(s);if(Jt.y>$t)return"top";{const Kt=jv(s),ro=Math.max(Kt.dom.scrollHeight,lr(Kt));return Jt.bottom<ro-$t||Kr().bottom<Jt.bottom-$t?"bottom":"top"}case Tv.bottom:return"bottom";case Tv.top:default:return"top"}},fe=ht=>{d.on(Ae=>{jo.setModes(Ae,[ht]),D.setDockingMode(ht);const Ze=P()?vd.TopToBottom:vd.BottomToTop;Pt(Ae.element,Z0,Ze)})},be=()=>{d.on(ht=>{const Ae=_.getOrThunk(()=>r0().width-di(s).left-10);Ht(ht.element,"max-width",Ae+"px")})},Ke=(ht,Ae)=>{d.on(Ze=>{const $t=yo.getToolbar(g.outerContainer),Jt=ee($t),Ct=Is(s),Kt=Re(n,g.outerContainer.element),ro=()=>Kt.fold(()=>Ct.x,Hr=>{const $a=Is(Hr);return un(Hr,Fc())?Ct.x:Ct.x-$a.x}),Pn=()=>Kt.fold(()=>P()?Math.max(Ct.y-lr(Ze.element)+Jt,0):Ct.bottom,Hr=>{const $a=Is(Hr),Xc=Hr.dom.scrollTop??0,Ph=un(Hr,Fc())?Math.max(Ct.y-lr(Ze.element)+Jt,0):Ct.y-$a.y+Xc-lr(Ze.element)+Jt;return P()?Ph:Ct.bottom}),nc=ro(),Go=va(ht,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Hr=>Hr>F).map(Hr=>{const $a=Ae.getOr(Ts()),Xc=window.innerWidth-(nc-$a.left),Xl=Math.max(Math.min(Hr,Xc),F);return Xc<Hr&&Ht(g.outerContainer.element,"width",Xl+"px"),{width:Xl+"px"}}).getOr({width:"max-content"}),Yc={position:"absolute",left:Math.round(nc)+"px",top:Pn()+"px"};ds(g.outerContainer.element,{...Yc,...Go})})},Re=(ht,Ae)=>xh(ht)?um(Ae):T.none(),$e=()=>{et(h,ht=>{ht.broadcastOn([Hs()],{})})},Ne=()=>!S&&(gc(g.outerContainer.element).left+sd(g.outerContainer.element)>=window.innerWidth-_7||Qo(g.outerContainer.element,"width").isSome())?(Ht(g.outerContainer.element,"position","absolute"),Ht(g.outerContainer.element,"left","0px"),Cn(g.outerContainer.element,"width"),!0):!1,Tt=ht=>{if(!W())return;S||be();const Ae=Ts(),Ze=S?!1:Ne();if(G&&yo.refreshToolbar(g.outerContainer),!S){const $t=Ts(),Jt=va(Ae.left!==$t.left,Ae);Ke(Ze,Jt),Jt.each(Ct=>{sm(Ct.left,$t.top)})}x&&d.on(ht),$e()},gt=()=>S||!x||!W()?!1:d.get().exists(ht=>{const Ae=D.getDockingMode(),Ze=re(ht);return Ze!==Ae?(fe(Ze),!0):!1});return{isVisible:W,isPositionedAtTop:P,show:()=>{J.set(!0),Ht(g.outerContainer.element,"display","flex"),C.addClass(n.getBody(),"mce-edit-focus"),et(h,ht=>{Cn(ht.element,"display")}),gt(),xh(n)?Tt(ht=>jo.isDocked(ht)?jo.reset(ht):jo.refresh(ht)):Tt(jo.refresh)},hide:()=>{J.set(!1),Ht(g.outerContainer.element,"display","none"),C.removeClass(n.getBody(),"mce-edit-focus"),et(h,ht=>{Ht(ht.element,"display","none")})},update:Tt,updateMode:()=>{gt()&&Tt(jo.reset)},repositionPopups:$e}},A7=(n,s)=>{const a=Is(n);return{pos:s?a.y:a.bottom,bounds:a}},Nq=(n,s,a,i)=>{const d=pt(A7(s,a.isPositionedAtTop())),g=x=>{const{pos:_,bounds:D}=A7(s,a.isPositionedAtTop()),{pos:P,bounds:F}=d.get(),z=D.height!==F.height||D.width!==F.width;d.set({pos:_,bounds:D}),z&&RD(n,x),a.isVisible()&&(P!==_?a.update(jo.reset):z&&(a.updateMode(),a.repositionPopups()))};i||(n.on("activate",a.show),n.on("deactivate",a.hide)),n.on("SkinLoaded ResizeWindow",()=>a.update(jo.reset)),n.on("NodeChange keydown",x=>{requestAnimationFrame(()=>g(x))});let h=0;const C=oi(()=>a.update(jo.refresh),33);n.on("ScrollWindow",()=>{const x=Ts().left;x!==h&&(h=x,C.throttle()),a.updateMode()}),xh(n)&&n.on("ElementScroll",x=>{a.update(jo.refresh)});const S=xs();S.set(ii(We.fromDom(n.getBody()),"load",x=>g(x.raw))),n.on("remove",()=>{S.clear()})};var Pq=Object.freeze({__proto__:null,render:(n,s,a,i,d)=>{const{mainUi:g}=s,h=Wt(),C=We.fromDom(d.targetNode),S=Bq(n,C,s,i,h),x=xN(n);LG(n);const _=()=>{if(h.isSet()){S.show();return}h.set(yo.getHeader(g.outerContainer).getOrDie());const P=aO(n);xh(n)?(Yi(C,g.mothership),Yi(C,s.popupUi.mothership)):Zp(P,g.mothership),Zp(P,s.dialogUi.mothership);const F=()=>{e5(n,s,a,i),yo.setMenubar(g.outerContainer,GI(n,a)),S.show(),Nq(n,C,S,x),n.nodeChanged()};x?n.once("SkinLoaded",F):F()};n.on("show",_),n.on("hide",S.hide),x||(n.on("focus",_),n.on("blur",S.hide)),n.on("init",()=>{(n.hasFocus()||x)&&_()}),t8(n,s);const D={show:_,hide:S.hide,setEnabled:P=>{JC(s,P?"setEnabled":"setDisabled")},isEnabled:()=>!ft.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:D}}});const ST=()=>{const n=Wt(),s=Wt(),a=Wt();return{dialogUi:n,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=n.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],S=>un(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},O7="contexttoolbar-show",n5="contexttoolbar-hide",wT=(n,s,a)=>({setInputEnabled:i=>{!i&&a&&br(a),ft.set(n,!i)},isInputEnabled:()=>!ft.isDisabled(n),hide:()=>{fn(n,v0())},back:()=>{fn(n,gT)},getValue:()=>s.get().getOrThunk(()=>it.getValue(n)),setValue:i=>{n.getSystem().isConnected()?it.setValue(n,i):s.set(i)}}),TS=(n,s,a)=>{const d=Ua(n.element).bind(g=>n.getSystem().getByDom(g).toOptional());return wT(d.getOr(n),s,a)},D7=(n,s,a)=>Te(cR,(i,d)=>{const g=n.get(i),h=wT(g,a,i.element);s.onAction(h,d.event.buttonApi)}),R7=(n,s,a,i)=>{const{primary:d,...g}=s.original,h=pi(zm({...g,type:"button",onAction:Y}));return yS(h,a,[D7(n,s,i)])},$q=(n,s,a,i)=>{const{primary:d,...g}=s.original,h=pi(nD({...g,type:"togglebutton",onAction:Y}));return t7(h,a,[D7(n,s,i)])},Iq=n=>n.type==="contextformtogglebutton",Lq=(n,s,a,i)=>Iq(s)?$q(n,s,a,i):R7(n,s,a,i),M7=(n,s,a,i)=>{const d=De(s,C=>Un(Lq(n,C,a,i)));return{asSpecs:()=>De(d,C=>C.asSpec()),findPrimary:C=>ca(s,(S,x)=>S.primary?T.from(d[x]).bind(_=>_.getOpt(C)).filter(ve(ft.isDisabled)):T.none())}},Fq=(n,s,a,i)=>{const{width:d,height:g}=n.initValue();let h=hv;const C=st("ratio-event"),S=Re=>wT(Re,i),x=Re=>nl(Re,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Re]},s.icons),_=()=>!1,D=n.label.getOr("Constrain proportions"),P=s.translate(D),F=Ds.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":P,"data-mce-name":D}},components:[x("lock"),x("unlock")],buttonBehaviours:Ve([ft.config({disabled:_}),To.config({}),Do.config(s.tooltips.getConfig({tooltipText:P}))])}),z=Re=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Re}),G=Re=>Ii(Re.element,"div.tox-focusable-wrapper").fold(T.none,Ne=>(br(Ne),T.some(!0))),J=Re=>pn.parts.field({factory:Fm,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Re?d:g,inputBehaviours:Ve([ft.config({disabled:_}),To.config({}),Ut("size-input-toolbar-events",[Te(Vi(),($e,Ne)=>{xt($e,C,{isField1:Re})})]),wt.config({mode:"special",onEnter:a,onEscape:G})]),selectOnFocus:!1}),W=Re=>({dom:{tag:"label",classes:["tox-label"]},components:[$o(s.translate(Re))]}),ee=Re=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Re],behaviours:Ve([To.config({}),Zt.config({}),wt.config({mode:"special",onEnter:$e=>io($e.element,"input").fold(T.none,Tt=>(br(Tt),T.some(!0)))})])}),re=ee(Ds.parts.field1(z([pn.parts.label(W("Width:")),J(!0)]))),fe=ee(Ds.parts.field2(z([pn.parts.label(W("Height:")),J(!1)]))),be=pt(Y),Ke=[zd({onBeforeSetup:Re=>io(Re.element,"input").each(br),onSetup:n.onSetup,getApi:S},be),S4({getApi:S},be,i)];return Ds.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[re,z([F]),fe],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Re,$e,Ne)=>{X4(it.getValue(Re)).each(Tt=>{h(Tt).each(gt=>{it.setValue($e,M$(gt))})})},onInput:Re=>fn(Re,X8),coupledFieldBehaviours:Ve([Zt.config({}),wt.config({mode:"flow",focusInside:xf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),ft.config({disabled:_,onDisabled:Re=>{Ds.getField1(Re).bind(pn.getField).each(ft.disable),Ds.getField2(Re).bind(pn.getField).each(ft.disable),Ds.getLock(Re).each(ft.disable)},onEnabled:Re=>{Ds.getField1(Re).bind(pn.getField).each(ft.enable),Ds.getField2(Re).bind(pn.getField).each(ft.enable),Ds.getLock(Re).each(ft.enable)}}),Rs(()=>s.checkUiComponentContext("mode:design")),Ut("size-input-toolbar-events2",[Te(C,(Re,$e)=>{const Ne=$e.event.isField1,Tt=Ne?Ds.getField1(Re):Ds.getField2(Re),gt=Ne?Ds.getField2(Re):Ds.getField1(Re),sn=Tt.map(it.getValue).getOr(""),_t=gt.map(it.getValue).getOr("");h=N$(sn,_t)}),Te(X8,Re=>n.onInput(S(Re))),...Ke])])})},kv=(n,s,a)=>pn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...n.toArray(),s],fieldBehaviours:Ve([ft.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{qG(i),pn.getField(i).each(ft.disable)},onEnabled:i=>{pn.getField(i).each(ft.enable)}})])}),Hq=(n,s,a,i)=>{const d=pt(Y),g=S=>TS(S,i),h=n.label.map(S=>pn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[$o(s.translate(S))]})),C=pn.parts.field({factory:Fm,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(n.min()),max:String(n.max())},data:n.initValue().toString(),fromInputValue:S=>Ju(S).getOr(n.min()),toInputValue:S=>String(S),inputBehaviours:Ve([ft.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Rs(()=>s.checkUiComponentContext("mode:design")),wt.config({mode:"special",onEnter:a,onLeft:(S,x)=>(x.cut(),T.none()),onRight:(S,x)=>(x.cut(),T.none())}),Ut("slider-events",[zd({onSetup:n.onSetup,getApi:g,onBeforeSetup:wt.focusIn},d),S4({getApi:g},d,i),Te(Al(),S=>{n.onInput(g(S))})])])});return kv(h,C,s)},zq=(n,s,a,i)=>{const d=pt(Y),g=_=>TS(_,i),h=n.label.map(_=>pn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[$o(s.translate(_))]})),S={...n.placeholder.map(_=>({placeholder:s.translate(_)})).getOr({})},x=pn.parts.field({factory:Fm,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:S,data:n.initValue(),selectOnFocus:!0,inputBehaviours:Ve([ft.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Rs(()=>s.checkUiComponentContext("mode:design")),wt.config({mode:"special",onEnter:a,onLeft:(_,D)=>(D.cut(),T.none()),onRight:(_,D)=>(D.cut(),T.none())}),Ut("input-events",[zd({onSetup:n.onSetup,getApi:_=>Ii(_.element,".tox-toolbar").bind(P=>io(P,"button:enabled")).fold(()=>TS(_,i),P=>TS(_,i,P)),onBeforeSetup:wt.focusIn},d),S4({getApi:g},d,i),Te(Al(),_=>{n.onInput(g(_))})])])});return kv(h,x,s)},o5=(n,s,a)=>{const i=Wt(),g=Un(n(a,x=>C.findPrimary(x).orThunk(()=>S.findPrimary(x)).map(_=>(Xg(_),!0)),i)),h=Rc(s.commands,x=>x.align==="start"),C=M7(g,h.pass,a,i),S=M7(g,h.fail,a,i);return co([{title:T.none(),label:T.none(),items:C.asSpecs()},{title:T.none(),label:T.none(),items:[g.asSpec()]},{title:T.none(),label:T.none(),items:S.asSpecs()}],x=>x.items.length>0)},s5=(n,s)=>{switch(n.type){case"contextform":return o5(gn(zq,n),n,s);case"contextsliderform":return o5(gn(Hq,n),n,s);case"contextsizeinputform":return o5(gn(Fq,n),n,s)}},B7={renderContextForm:(n,s,a)=>lT({type:n,uid:st("context-toolbar"),initGroups:s5(s,a),onEscape:T.none,cyclicKeying:!0,providers:a}),buildInitGroups:s5},N7=(n,s,a)=>s.bottom-n.y>=a&&n.bottom-s.y>=a,Vq=n=>{const s=n.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=W1(We.fromDom(n.startContainer),n.startOffset).element;return(nm(a)?Ua(a):T.some(a)).filter(mc).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},r5=n=>{const s=n.selection.getRng(),a=Vq(s);if(n.inline){const i=Ts();return Ys(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=lm(We.fromDom(n.getBody()));return Ys(i.x+a.left,i.y+a.top,a.width,a.height)}},Uq=(n,s)=>s.filter(a=>Hn(a)&&q(a)).map(lm).getOrThunk(()=>r5(n)),Zq=(n,s,a)=>{const i=Math.max(n.x+a,s.x),d=Math.min(n.right-a,s.right);return{x:i,width:d-i}},kS=(n,s,a,i,d,g)=>{const h=We.fromDom(n.getContainer()),C=io(h,".tox-editor-header").getOr(h),S=Is(C),x=S.y>=s.bottom,_=i&&!x;if(n.inline&&_)return{y:Math.max(S.bottom+g,a.y),bottom:a.bottom};if(n.inline&&!_)return{y:a.y,bottom:Math.min(S.y-g,a.bottom)};const D=d==="line"?Is(h):s;return _?{y:Math.max(S.bottom+g,a.y),bottom:Math.min(D.bottom-g,a.bottom)}:{y:Math.max(D.y+g,a.y),bottom:Math.min(S.y-g,a.bottom)}},a5=(n,s,a,i=0)=>{const d=r0(window),g=Is(We.fromDom(n.getContentAreaContainer())),h=Kb(n)||Yb(n)||wh(n),{x:C,width:S}=Zq(g,d,i);if(n.inline&&!h)return Ys(C,d.y,S,d.height);{const x=s.header.isPositionedAtTop(),{y:_,bottom:D}=kS(n,g,d,x,a,i);return Ys(C,_,S,D-_)}},xT=12,P7={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},c5={maxHeightFunction:Df(),maxWidthFunction:_p()},i5=(n,s)=>{const a=n.selection.getRng(),i=W1(We.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&un(i.element,s)},$7=(n,s,a)=>{const i=Qo(n,"position");Ht(n,"position",s);const d=a(n);return i.each(g=>Ht(n,"position",g)),d},l5=n=>n==="node",Wq=(n,s,a,i,d)=>{const g=r5(n),h=i.lastElement().exists(C=>un(a,C));if(i5(n,a))return h?Da:Xr;if(h)return $7(s,i.getMode(),()=>N7(g,Is(s),-20)&&!i.isReposition()?Nl:Da);{const C=i.getMode()==="fixed"?d.y+Ts().top:d.y,S=lr(s)+xT;return C+S<=g.y?Xr:qg}},_v=(n,s,a,i)=>{const d=S=>(x,_,D,P,F)=>{const z=Wq(n,P,S,a,F),G={...x,y:F.y,height:F.height};return{...z(G,_,D,P,F),alwaysFit:!0}},g=S=>l5(i)?[d(S)]:[];return s?{onLtr:S=>[Fs,Js,Ls,$r,vr,Wo].concat(g(S)),onRtl:S=>[Fs,Ls,Js,vr,$r,Wo].concat(g(S))}:{onLtr:S=>[Wo,Fs,$r,Js,vr,Ls].concat(g(S)),onRtl:S=>[Wo,Fs,vr,Ls,$r,Js].concat(g(S))}},ET=(n,s,a,i)=>s==="line"?{bubble:wc(xT,0,P7),layouts:{onLtr:()=>[Wg],onRtl:()=>[U2]},overrides:c5}:{bubble:wc(0,xT,P7,1/xT),layouts:_v(n,a,i,s),overrides:c5},Av=(n,s)=>{const a=co(s,g=>g.predicate(n.dom)),{pass:i,fail:d}=Rc(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},u5=n=>{if(n.length<=1)return n;{const s=g=>Qs(n,h=>h.position===g),a=g=>co(n,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=De(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},d5=n=>{if(n.length<=1)return n;{const s=i=>vt(n,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>co(n,d=>d.position===i))}},I7=(n,s,a)=>{const i=Av(n,s);if(i.contextForms.length>0)return T.some({elem:n,toolbars:[i.contextForms[0]]});{const d=Av(n,a);if(d.contextForms.length>0)return T.some({elem:n,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=u5(i.contextToolbars.concat(d.contextToolbars));return T.some({elem:n,toolbars:g})}else return T.none()}},TT=(n,s,a)=>n(s)?T.none():KS(s,i=>{if(mc(i)){const{contextToolbars:d,contextForms:g}=Av(i,a.inNodeScope),h=g.length>0?g:d5(d);return h.length>0?T.some({elem:i,toolbars:h}):T.none()}else return T.none()},n),L7=(n,s)=>{const a=We.fromDom(s.getBody()),i=h=>un(h,a),d=h=>!i(h)&&!$(a,h),g=We.fromDom(s.selection.getNode());return d(g)?T.none():I7(g,n.inNodeScope,n.inEditorScope).orThunk(()=>TT(i,g,n))},F7=(n,s)=>{const a={},i=[],d=[],g={},h={},C=(_,D)=>{const P=pi(JU(D));a[_]=P,P.launch.map(F=>{g["form:"+_]={...D.launch,type:F.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(P)}}}),P.scope==="editor"?d.push(P):i.push(P),h[_]=P},S=(_,D)=>{eZ(D).each(P=>{P.launch.isSome()&&(g["toolbar:"+_]={...D.launch,type:"button",onAction:()=>{s(P)}}),D.scope==="editor"?d.push(P):i.push(P),h[_]=P})},x=Gn(n);return et(x,_=>{const D=n[_];D.type==="contextform"||D.type==="contextsliderform"||D.type==="contextsizeinputform"?C(_,D):D.type==="contexttoolbar"&&S(_,D)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},_S="tox-pop--transition",jq=n=>n===bT.ENTER||n===bT.SPACEBAR,H7=(n,s,a,i)=>{const d=i.backstage,g=d.shared,h=jr().deviceType.isTouch,C=Wt(),S=Wt(),x=Wt(),_=GR({sink:a,onEscape:()=>(n.focus(),MD(n),T.some(!0)),onHide:()=>{MD(n)},onBack:()=>{BD(n)},focusElement:_t=>{n.getBody().contains(_t.dom)?n.focus():br(_t)}}),D=m(_.sketch),P=()=>{const _t=x.get().getOr("node"),Xt=l5(_t)?1:0;return a5(n,g,_t,Xt)},F=()=>!n.removed&&!(h()&&d.isContextMenuOpen()),z=_t=>uc(dc(_t,C.get(),un),!0),G=()=>{if(F()){const _t=P(),Xt=uc(x.get(),"node")?Uq(n,C.get()):r5(n);return _t.height<=0||!N7(Xt,_t,.01)}else return!0},J=()=>{C.clear(),S.clear(),x.clear(),rs.hide(D)},W=()=>{if(rs.isOpen(D)){const _t=D.element;Cn(_t,"display"),G()?Ht(_t,"display","none"):(S.set(0),rs.reposition(D))}},ee=_t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[_t],behaviours:Ve([wt.config({mode:"acyclic"}),Ut("pop-dialog-wrap-events",[Oo(Xt=>{n.shortcuts.add("ctrl+F9","focus statusbar",()=>wt.focusIn(Xt))}),Gi(Xt=>{n.shortcuts.remove("ctrl+F9")})])])}),re=_t=>{const Xt=Re([_t]);xt(D,o7,{forwardContents:ee(Xt)})},fe=Nc(()=>F7(s,re)),be=(_t,Xt)=>vT(n,{buttons:_t,toolbar:Xt.items,allowToolbarGroups:!1},i.backstage,T.some(["form:","toolbar:"])),Ke=(_t,Xt)=>B7.buildInitGroups(_t,Xt),Re=_t=>{const{buttons:Xt}=n.ui.registry.getAll(),ht=fe(),Ae={...Xt,...ht.formNavigators},Ze=i1(n)===tl.scrolling?tl.scrolling:tl.default,$t=Mt(De(_t,Jt=>Jt.type==="contexttoolbar"?be(Ae,sD(Jt)):Ke(Jt,g.providers)));return lT({type:Ze,uid:st("context-toolbar"),initGroups:$t,onEscape:T.none,cyclicKeying:!0,providers:g.providers})},$e=(_t,Xt)=>{const ht=_t==="node"?g.anchors.node(Xt):g.anchors.cursor(),Ae=ET(n,_t,h(),{lastElement:C.get,isReposition:()=>uc(S.get(),0),getMode:()=>Ba.getMode(a)});return uo(ht,Ae)},Ne=(_t,Xt)=>{if(sn.cancel(),!F())return;const ht=Re(_t),Ae=_t[0].position,Ze=$e(Ae,Xt);x.set(Ae),S.set(1);const $t=D.element;Cn($t,"display"),z(Xt)||(ns($t,_S),Ba.reset(a,D)),rs.showWithinBounds(D,ee(ht),{anchor:Ze,transition:{classes:[_S],mode:"placement"}},()=>T.some(P())),Xt.fold(C.clear,C.set),G()&&Ht($t,"display","none")},Tt=()=>{Ht(D.element,"transition","none"),W(),Cn(D.element,"transition")};let gt=!1;const sn=oi(()=>{if(!(!n.hasFocus()||n.removed||gt))if($s(D.element,_S))sn.throttle();else{const _t=fe();L7(_t,n).fold(J,Xt=>{Ne(Xt.toolbars,T.some(Xt.elem))})}},17);n.on("init",()=>{n.on("remove",J),n.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",W),n.on("click focus SetContent",sn.throttle),n.on("keyup",_t=>{(!jq(_t.keyCode)||!_.inSubtoolbar())&&sn.throttle()}),n.on(n5,J),n.on(O7,_t=>{const Xt=fe();bt(Xt.lookupTable,_t.toolbarKey).each(ht=>{Ne([ht],va(_t.target!==n,_t.target)),n7(D)})}),n.on("focusout",_t=>{KE.setEditorTimeout(n,()=>{qs(a.element).isNone()&&qs(D.element).isNone()&&!n.hasFocus()&&J()},0)}),n.on("SwitchMode",()=>{n.mode.isReadOnly()&&J()}),n.on("DisabledStateChange",_t=>{_t.state&&J()}),n.on("ExecCommand",({command:_t})=>{_t.toLowerCase()==="toggleview"&&J()}),n.on("AfterProgressState",_t=>{_t.state?J():n.hasFocus()&&sn.throttle()}),n.on("dragstart",()=>{gt=!0}),n.on("dragend drop",()=>{gt=!1}),n.on("NodeChange",_t=>{_.inSubtoolbar()?Tt():qs(D.element).fold(sn.throttle,Y)})})},Gq=n=>{et([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{n.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Tc(n,a.cmd),onSetup:oS(n,a.name)})}),n.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Fr(n),onAction:Tc(n,"JustifyNone")})},z7=(n,s)=>{const a=()=>{const i=s.getOptions(n),d=s.getCurrent(n).map(s.hash),g=Wt();return De(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const S=_=>{_&&(g.on(D=>D.setActive(!1)),g.set(C)),C.setActive(_)};S(uc(d,s.hash(h)));const x=s.watcher(n,h,S);return()=>{g.clear(),x()}},onAction:()=>s.setCurrent(n,h)}))};n.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),n.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},kT=n=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:LN,hash:s=>E3(s,["fixed","relative","empty"]).getOr(s),display:an,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>T.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Fr(n),onMenuSetup:Fr(n)}),V7=n=>T.from(yN(n)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ie(a),hash:i=>Zs(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:d.customCode??null}).unbind,getCurrent:i=>{const d=We.fromDom(i.selection.getNode());return Li(d,g=>T.some(g).filter(mc).bind(h=>Or(h,"lang").map(S=>{const x=Or(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:x,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=xs();return i.setActive(n.formatter.match("lang",{},void 0,!0)),d.set(n.formatter.formatChanged("lang",i.setActive,!0)),E1(d.clear,Fr(n)(i))},onMenuSetup:Fr(n)})),qq=n=>{z7(n,kT(n)),V7(n).each(s=>z7(n,s))},Kq=(n,s)=>{QG(n,s),sq(n,s),Ev(n,s),tq(n,s),w7(n,s)},Yq=n=>{n.ui.registry.addContext("editable",()=>n.selection.isEditable()),n.ui.registry.addContext("mode",s=>n.mode.get()===s),n.ui.registry.addContext("any",Dt),n.ui.registry.addContext("formatting",s=>n.formatter.canApply(s)),n.ui.registry.addContext("insert",s=>n.schema.isValidChild(n.selection.getNode().tagName,s))},Xq=n=>Dh(n,"NodeChange",s=>{s.setEnabled(n.queryCommandState("outdent")&&n.selection.isEditable())}),Jq=n=>{n.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Xq(n),onAction:Tc(n,"outdent")}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Fr(n,()=>n.queryCommandState("indent")),onAction:Tc(n,"indent")})},U7=n=>{Jq(n)},m5=(n,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return n.on("PastePlainTextToggle",i),E1(()=>n.off("PastePlainTextToggle",i),Fr(n)(a))},Z7=n=>{const s=pt(BN(n)),a=()=>n.execCommand("mceTogglePlainTextPaste");n.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:m5(n,s)}),n.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:m5(n,s)})},_T=(n,s)=>()=>{n.execCommand("mceToggleFormat",!1,s)},Qq=n=>{Wm.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:oS(n,s.name),onAction:_T(n,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;n.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:oS(n,a),onAction:_T(n,a),shortcut:i})}},W7=n=>{Wm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Tc(n,s.action),shortcut:s.shortcut,context:s.context})}),Wm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Fr(n),onAction:Tc(n,s.action)})})},j7=n=>{Wm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Tc(n,s.action),onSetup:oS(n,s.name)})})},eK=n=>{Qq(n),W7(n),j7(n)},iX=n=>{Wm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Tc(n,s.action),context:s.context})}),Wm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Fr(n),onAction:Tc(n,s.action)})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Fr(n),onAction:_T(n,"code")})},tK=n=>{eK(n),iX(n)},AT=(n,s)=>Dh(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!n.mode.isReadOnly()&&n.undoManager[s]())}),nK=n=>{n.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:AT(n,"hasUndo"),onAction:Tc(n,"undo")}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:AT(n,"hasRedo"),onAction:Tc(n,"redo")})},oK=n=>{n.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:AT(n,"hasUndo"),onAction:Tc(n,"undo"),shortcut:"Meta+Z"}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:AT(n,"hasRedo"),onAction:Tc(n,"redo"),shortcut:"Meta+Y"})},sK=n=>{nK(n),oK(n)},rK=n=>Dh(n,"VisualAid",s=>{s.setActive(n.hasVisual)}),aK=n=>{n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:rK(n),onAction:Tc(n,"mceToggleVisualAid"),context:"any"})},cK=n=>{n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Tc(n,"mceToggleVisualAid"),context:"any"})},iK=n=>{cK(n),aK(n)},lK=(n,s)=>{Gq(n),tK(n),Kq(n,s),sK(n),$8(n),iK(n),U7(n),qq(n),Z7(n),Yq(n)},uK=n=>Et(n)?n.split(/[ ,]/):n,G7=n=>s=>s.options.get(n),dK=n=>{const s=n.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Et(a)||ac(a,Et)?{value:uK(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},f5=G7("contextmenu_never_use_native"),mK=G7("contextmenu_avoid_overlap"),fK=n=>q7(n).length===0,q7=n=>{const s=n.ui.registry.getAll().contextMenus,a=n.options.get("contextmenu");return n.options.isSet("contextmenu")?a:co(a,i=>$n(s,i))},AS=(n,s)=>({type:"makeshift",x:n,y:s}),gK=(n,s,a)=>AS(n.x+s,n.y+a),g5=n=>n.type==="longpress"||n.type.indexOf("touch")===0,h5=n=>{if(g5(n)){const s=n.touches[0];return AS(s.pageX,s.pageY)}else return AS(n.pageX,n.pageY)},hK=n=>{if(g5(n)){const s=n.touches[0];return AS(s.clientX,s.clientY)}else return AS(n.clientX,n.clientY)},K7=(n,s)=>{const a=Wb.DOM.getPos(n);return gK(s,a.x,a.y)},pK=(n,s)=>s.type==="contextmenu"||s.type==="longpress"?n.inline?h5(s):K7(n.getContentAreaContainer(),hK(s)):Y7(n),Y7=n=>({type:"selection",root:We.fromDom(n.selection.getNode())}),bK=n=>({type:"node",node:T.some(We.fromDom(n.selection.getNode())),root:We.fromDom(n.getBody())}),X7=(n,s,a)=>{switch(a){case"node":return bK(n);case"point":return pK(n,s);case"selection":return Y7(n)}},vK=(n,s,a,i,d,g)=>{const h=a(),C=X7(n,s,g);rg(h,Vu.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:T.none()}).map(S=>{s.preventDefault(),rs.showMenuAt(d,{anchor:C},{menu:{markers:Hm("normal")},data:S})})},p5={onLtr:()=>[Fs,Js,Ls,$r,vr,Wo,Xr,qg,Oa,U0,Of,Tp],onRtl:()=>[Fs,Ls,Js,vr,$r,Wo,Xr,qg,Of,Tp,Oa,U0]},yK=12,CK={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},b5=(n,s)=>{const a=n.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return c2(n.getWin(),Eg.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},J7=n=>{const s=n.selection.getRng(),a=()=>{KE.setEditorTimeout(n,()=>{n.selection.setRng(s)},10),g()};n.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};n.on("mousedown",i,!0);const d=()=>g();n.once("longpresscancel",d);const g=()=>{n.off("touchend",a),n.off("longpresscancel",d),n.off("mousedown",i)}},Q7=(n,s,a)=>{const i=X7(n,s,a);return{bubble:wc(0,a==="point"?yK:0,CK),layouts:p5,overrides:{maxWidthFunction:_p(),maxHeightFunction:Df()},...i}},SK=(n,s,a,i,d,g,h)=>{const C=Q7(n,s,g);rg(a,Vu.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:T.none()}).map(S=>{s.preventDefault();const x=h?Jr.HighlightMenuAndItem:Jr.HighlightNone;rs.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Hm("normal"),highlightOnOpen:x},data:S,type:"horizontal"},()=>T.some(a5(n,i.shared,g==="node"?"node":"selection"))),n.dispatch(n5)})},wK=(n,s,a,i,d,g)=>{const h=jr(),C=h.os.isiOS(),S=h.os.isMacOS(),x=h.os.isAndroid(),_=h.deviceType.isTouch(),D=()=>!(x||C||S&&_),P=()=>{const F=a();SK(n,s,F,i,d,g,D())};if((S||C)&&g!=="node"){const F=()=>{J7(n),P()};b5(n,s)?F():(n.once("selectionchange",F),n.once("touchend",()=>n.off("selectionchange",F)))}else P()},eL=n=>Et(n)?n==="|":n.type==="separator",v5={type:"separator"},tL=n=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Et(n))return n;switch(n.type){case"separator":return v5;case"submenu":return{type:"nestedmenuitem",...s(n),getSubmenuItems:()=>{const i=n.getSubmenuItems();return Et(i)?i:De(i,tL)}};default:const a=n;return{type:"menuitem",...s(a),onAction:tn(a.onAction)}}},OT=(n,s)=>{if(s.length===0)return n;const i=il(n).filter(d=>!eL(d)).fold(()=>[],d=>[v5]);return n.concat(i).concat(s).concat([v5])},xK=(n,s,a)=>{const i=So(s,(d,g)=>bt(n,g.toLowerCase()).map(h=>{const C=h.update(a);if(Et(C)&&su(ot(C)))return OT(d,C.split(" "));if(ra(C)&&C.length>0){const S=De(C,tL);return OT(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&eL(i[i.length-1])&&i.pop(),i},nL=(n,s)=>s.ctrlKey&&!f5(n),EK=n=>n.type==="longpress"||$n(n,"touches"),oL=(n,s)=>!EK(s)&&(s.button!==2||s.target===n.getBody()&&s.pointerType===""),DT=(n,s)=>oL(n,s)?n.selection.getStart(!0):s.target,TK=(n,s)=>{const a=mK(n),i=oL(n,s)?"selection":"point";if(su(a)){const d=DT(n,s);return Xh(We.fromDom(d),a)?"node":i}else return i},sL=(n,s,a)=>{const d=jr().deviceType.isTouch,g=m(rs.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>n.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ve([Ut("dismissContextMenu",[Te(gd(),(S,x)=>{In.close(S),n.focus()})])])})),h=()=>rs.hide(g),C=S=>{if(f5(n)&&S.preventDefault(),nL(n,S)||fK(n))return;const x=TK(n,S),_=()=>{const P=DT(n,S),F=n.ui.registry.getAll(),z=q7(n);return xK(F.contextMenus,z,P)};(d()?wK:vK)(n,S,_,a,g,x)};n.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");n.on(S,h),n.on("longpress contextmenu",C)})},OS=40,RT=OS/2,rL=(n,s,a,i,d,g)=>n.fold(()=>Zf.snap({sensor:Ru(a-RT,i-RT),range:fo(d,g),output:Ru(T.some(a),T.some(i)),extra:{td:s}}),h=>{const C=a-RT,S=i-RT,x=OS,_=OS,D=h.element.dom.getBoundingClientRect();return Zf.snap({sensor:Ru(C,S),range:fo(x,_),output:Ru(T.some(a-D.width/2),T.some(i-D.height/2)),extra:{td:s}})}),aL=(n,s,a)=>{const i=(d,g)=>d.exists(h=>un(h,g));return{getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},cL=n=>Un(fr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ve([Zf.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),Dd.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),kK=(n,s)=>{const a=pt([]),i=pt([]),d=pt(!1),g=Wt(),h=Wt(),C=Re=>{const $e=lm(Re);return rL(F.getOpt(s),Re,$e.x,$e.y,$e.width,$e.height)},S=()=>De(a.get(),Re=>C(Re)),x=Re=>{const $e=lm(Re);return rL(z.getOpt(s),Re,$e.right,$e.bottom,$e.width,$e.height)},_=()=>De(i.get(),Re=>x(Re)),D=aL(S,g,Re=>{h.get().each($e=>{n.dispatch("TableSelectorChange",{start:Re,finish:$e})})}),P=aL(_,h,Re=>{g.get().each($e=>{n.dispatch("TableSelectorChange",{start:$e,finish:Re})})}),F=cL(D),z=cL(P),G=m(F.asSpec()),J=m(z.asSpec()),W=(Re,$e,Ne,Tt)=>{const gt=$e.dom.getBoundingClientRect();Cn(Re.element,"display");const sn=Uh(We.fromDom(n.getBody())).dom.innerHeight,_t=Ne(gt),Xt=Tt(gt,sn);(_t||Xt)&&Ht(Re.element,"display","none")},ee=(Re,$e,Ne,Tt)=>{const gt=Ne($e);Zf.snapTo(Re,gt),W(Re,$e,Xt=>Xt[Tt]<0,(Xt,ht)=>Xt[Tt]>ht)},re=Re=>ee(G,Re,C,"top"),fe=()=>g.get().each(re),be=Re=>ee(J,Re,x,"bottom"),Ke=()=>h.get().each(be);if(jr().deviceType.isTouch()){const Re=$e=>De($e,We.fromDom);n.on("TableSelectionChange",$e=>{d.get()||(wd(s,G),wd(s,J),d.set(!0));const Ne=We.fromDom($e.start),Tt=We.fromDom($e.finish);g.set(Ne),h.set(Tt),T.from($e.otherCells).each(gt=>{a.set(Re(gt.upOrLeftCells)),i.set(Re(gt.downOrRightCells)),re(Ne),be(Tt)})}),n.on("ResizeEditor ResizeWindow ScrollContent",()=>{fe(),Ke()}),n.on("TableSelectionClear",()=>{d.get()&&(Ed(G),Ed(J),d.set(!1)),g.clear(),h.clear()})}};var iL=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const _K=n=>n.nodeName==="BR"||!!n.getAttribute("data-mce-bogus")||n.getAttribute("data-mce-type")==="bookmark",AK=(n,s,a)=>{const i=s.delimiter??"›",d=(S,x,_)=>fr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":_}},components:[$o(S)],action:D=>{n.focus(),n.selection.select(x),n.nodeChanged()},buttonBehaviours:Ve([Do.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",x.nodeName.toLowerCase()]),onShow:(D,P)=>{zc(D.element,P.element)},onHide:D=>{d2(D.element)}})}),Hd.button(a.isDisabled),Rs(()=>a.checkUiComponentContext("any"))])}),g=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[$o(` ${i} `)]}),h=S=>So(S,(x,_,D)=>{const P=d(_.name,_.element,D);return D===0?x.concat([P]):x.concat([g(),P])},[]),C=S=>{const x=[];let _=S.length;for(;_-- >0;){const D=S[_];if(D.nodeType===1&&!_K(D)){const P=zZ(n,D);if(P.isDefaultPrevented()||x.push({name:P.name,element:D}),P.isPropagationStopped())break}}return x};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ve([wt.config({mode:"flow",selector:"div[role=button]"}),ft.config({disabled:a.isDisabled}),Rs(()=>a.checkUiComponentContext("any")),To.config({}),Gt.config({}),Ut("elementPathEvents",[Oo((S,x)=>{n.shortcuts.add("alt+F11","focus statusbar elementpath",()=>wt.focusIn(S)),n.on("NodeChange",_=>{const D=C(_.parents),P=D.length>0?h(D):[];Gt.set(S,P)})})])]),components:[]}};var qm;(function(n){n[n.None=0]="None",n[n.Both=1]="Both",n[n.Vertical=2]="Vertical"})(qm||(qm={}));const lL=n=>{const s=We.fromDom(n.getContainer()),a=lr(s),i=da(s);return{height:a,width:i}},OK=(n,s,a,i)=>{const d=CT(i.height+s.top,XA(n),JA(n));return a===qm.Both?{height:d,width:CT(i.width+s.left,YA(n),XE(n))}:{height:d}},uL=(n,s,a)=>{const i=We.fromDom(n.getContainer()),d=lL(n),g=OK(n,s,a,d);return Lo(g,(h,C)=>{Fa(h)&&Ht(i,C,yT(h))}),DD(n),g},DK=n=>{const s=MN(n);return s===!1?qm.None:s==="both"?qm.Both:qm.Vertical},RK=(n,s)=>s===qm.Both?Pa.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",n.height,n.width]):Pa.translate(["Editor's height: {0} pixels",n.height]),y5=(n,s,a)=>{Pt(n.element,"aria-valuetext",RK(s,a))},MT=(n,s,a,i,d)=>{const h=fo(i*20,d*20),C=uL(n,h,a);return y5(s,C,a),T.some(!0)},dL=(n,s)=>{const a=DK(n);if(a===qm.None)return T.none();const i=a===qm.Both?Pa.translate("Press the arrow keys to resize the editor."):Pa.translate("Press the Up and Down arrow keys to resize the editor."),d=a===qm.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return T.some(nl("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle",role:"separator"},behaviours:[Zf.config({mode:"mouse",repositionTarget:!1,onDrag:(g,h,C)=>{const S=uL(n,C,a);y5(g,S,a)},blockerClass:"tox-blocker"}),wt.config({mode:"special",onLeft:g=>MT(n,g,a,-1,0),onRight:g=>MT(n,g,a,1,0),onUp:g=>MT(n,g,a,0,-1),onDown:g=>MT(n,g,a,0,1)}),To.config({}),Zt.config({}),Do.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")})),Ut("set-aria-valuetext",[Oo(g=>{const h=()=>{y5(g,lL(n),a)};n._skinLoaded?h():n.once("SkinLoaded",h)})])],eventOrder:{[Ol()]:["add-focusable","set-aria-valuetext"]}},s.icons))},MK=(n,s)=>{const a=(i,d,g)=>Gt.set(i,[$o(s.translate(["{0} "+g,d[g]]))]);return fr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ve([Hd.button(s.isDisabled),Rs(()=>s.checkUiComponentContext("any")),To.config({}),Gt.config({}),it.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Ut("wordcount-events",[Tm(i=>{const d=it.getValue(i),g=d.mode==="words"?"characters":"words";it.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Oo(i=>{n.on("wordCountUpdate",d=>{const{mode:g}=it.getValue(i);it.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[Nr()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},mL=(n,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":n.translate(["Build with {0}","TinyMCE"])},innerHtml:n.translate(["Build with {0}",iL.trim()])},behaviours:Ve([Zt.config({})])}]}),i=()=>{const C=pD("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[$o(Pa.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return n.hasPlugin("wordcount")&&C.push(MK(n,s)),sO(n)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=$N(n),x=RN(n),_=sO(n)||n.hasPlugin("wordcount"),D=()=>{const P="tox-statusbar__text-container--flex-start",F="tox-statusbar__text-container--flex-end",z="tox-statusbar__text-container--space-around";if(S){const G="tox-statusbar__text-container-3-cols";return!_&&!x?[G,z]:_&&!x?[G,F]:[G,P]}return[_&&!x?F:P]};return x&&C.push(AK(n,{},s)),S&&C.push(i()),_&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...D()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=dL(n,s);return C.concat(S.toArray())})()}},fL=(n,s)=>s.get().getOrDie(`UI for ${n} has not been rendered`),BK=(n,s)=>{const a=n.inline,i=a?Pq:_q,d=Jb(n)?nG:Yj,g=ST(),h=Wt(),C=Wt(),S=Wt(),P=jr().deviceType.isTouch()?["tox-platform-touch"]:[],F=t4(n),z=i1(n),G=Un({dom:{tag:"div",classes:["tox-anchorbar"]}}),J=Un({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),W=()=>g.mainUi.get().map(Ct=>Ct.outerContainer).bind(yo.getHeader),ee=()=>Nt.fromOption(g.dialogUi.get().map(Ct=>Ct.sink),"UI has not been rendered"),re=()=>Nt.fromOption(g.popupUi.get().map(Ct=>Ct.sink),"(popup) UI has not been rendered"),fe=g.lazyGetInOuterOrDie("anchor bar",G.getOpt),be=g.lazyGetInOuterOrDie("bottom anchor bar",J.getOpt),Ke=g.lazyGetInOuterOrDie("toolbar",yo.getToolbar),Re=g.lazyGetInOuterOrDie("throbber",yo.getThrobber),$e=Gj({popup:re,dialog:ee},n,fe,be),Ne=()=>{const Ct={attributes:{[Z0]:F?vd.BottomToTop:vd.TopToBottom}},Kt=yo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:$e.popup,onEscape:()=>{n.focus()}}),ro=yo.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:$e.popup.shared.getSink,providers:$e.popup.shared.providers,onEscape:()=>{n.focus()},onToolbarToggled:Km=>{VZ(n,Km)},type:z,lazyToolbar:Ke,lazyHeader:()=>W().getOrDie("Could not find header element"),...Ct}),Pn=yo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:$e.popup.shared.providers,onEscape:()=>{n.focus()},type:z}),nc=wh(n),Go=Yb(n),Yc=Kb(n),Hr=PN(n),$a=Tt(Hr),Xc=nc||Go||Yc,Xl=()=>nc?[Pn]:Go?[ro]:[],Ph=[$a,Kt];return yo.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Xc?[]:["tox-editor-header--empty"]),...Ct},components:Mt([Yc?Ph:[],Xl(),Xb(n)?[]:[G.asSpec()]]),sticky:Jb(n),editor:n,sharedBackstage:$e.popup.shared})},Tt=Ct=>yo.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Ct}),gt=()=>{const Ct=yo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Kt=yo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ct,Kt]}},sn=()=>{const Ct=aO(n),Kt=un(Fc(),Ct)&&zo(Ct,"display")==="grid",ro={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(P),attributes:{...Pa.isRtl()?{dir:"rtl"}:{}}},behaviours:Ve([Ba.config({useFixed:()=>d.isDocked(W)})])},Pn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Uo([Te(Hg(),Yc=>{Ht(Yc.element,"width",document.body.clientWidth+"px")})])},nc=m(uo(ro,Kt?Pn:{})),Go=Y_(nc);return C.set(Go),{sink:nc,mothership:Go}},_t=()=>{const Ct={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(P),attributes:{...Pa.isRtl()?{dir:"rtl"}:{}}},behaviours:Ve([Ba.config({useFixed:()=>d.isDocked(W),getBounds:()=>s.getPopupSinkBounds()})])},Kt=m(Ct),ro=Y_(Kt);return S.set(ro),{sink:Kt,mothership:ro}},Xt=()=>{const Ct=Ne(),Kt=gt(),ro=yo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:$e.popup}),Pn=yo.parts.viewWrapper({backstage:$e.popup}),nc=DN(n)&&!a?T.some(mL(n,$e.popup.shared.providers)):T.none(),Go=Mt([F?[]:[Ct],a?[]:[Kt],F?[Ct]:[]]),Yc=yo.parts.editorContainer({components:Mt([Go,a?[]:[J.asSpec()]])}),Hr=cO(n),$a={role:"application",...Pa.isRtl()?{dir:"rtl"}:{},...Hr?{"aria-hidden":"true"}:{}},Xc=m(yo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(F?["tox-tinymce--toolbar-bottom"]:[]).concat(P),styles:{visibility:"hidden",...Hr?{opacity:"0",border:"0"}:{}},attributes:$a},components:[Yc,...a?[]:[Pn,...nc.toArray()],ro],behaviours:Ve([Rs(()=>$e.popup.shared.providers.checkUiComponentContext("any")),ft.config({disableClass:"tox-tinymce--disabled"}),wt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Xl=Y_(Xc);return h.set(Xl),{mothership:Xl,outerContainer:Xc}},ht=Ct=>{const Kt=yT(Rq(n)),ro=yT(Mq(n));return n.inline||(yg("div","width",ro)&&Ht(Ct.element,"width",ro),yg("div","height",Kt)?Ht(Ct.element,"height",Kt):Ht(Ct.element,"height","400px")),Kt},Ae=Ct=>{n.addShortcut("alt+F9","focus menubar",()=>{yo.focusMenubar(Ct)}),n.addShortcut("alt+F10","focus toolbar",()=>{yo.focusToolbar(Ct)}),n.addCommand("ToggleToolbarDrawer",(Kt,ro,Pn)=>{ro!=null&&ro.skipFocus?(qj("skipFocus"),yo.toggleToolbarDrawerWithoutFocusing(Ct)):Pn!=null&&Pn.skip_focus?yo.toggleToolbarDrawerWithoutFocusing(Ct):yo.toggleToolbarDrawer(Ct)}),n.addQueryStateHandler("ToggleToolbarDrawer",()=>yo.isToolbarDrawerToggled(Ct)),n.on("blur",()=>{i1(n)===tl.floating&&yo.isToolbarDrawerToggled(Ct)&&yo.toggleToolbarDrawerWithoutFocusing(Ct)})},Ze=Ct=>{const{mainUi:Kt,popupUi:ro,uiMotherships:Pn}=Ct;is(SN(n),(ag,RS)=>{n.ui.registry.addGroupToolbarButton(RS,ag)});const{buttons:nc,menuItems:Go,contextToolbars:Yc,sidebars:Hr,views:$a}=n.ui.registry.getAll(),Xc=BC(n),Xl={menuItems:Go,menus:HN(n),menubar:TN(n),toolbar:Xc.getOrThunk(()=>QE(n)),allowToolbarGroups:z===tl.floating,buttons:nc,sidebar:Hr,views:$a};Ae(Kt.outerContainer),MR(n,Kt.mothership,Pn),d.setup(n,$e.popup.shared,W),lK(n,$e.popup),sL(n,$e.popup.shared.getSink,$e.popup),rG(n),uG(n,Re,$e.popup.shared),H7(n,Yc,ro.sink,{backstage:$e.popup}),kK(n,ro.sink);const Ph=n.getElement(),Km=ht(Kt.outerContainer),M1={targetNode:Ph,height:Km};return i.render(n,Ct,Xl,$e.popup,M1)},$t=Ct=>(S.set(Ct.mothership),Ct),Jt=()=>{const Ct=Xt(),Kt=sn(),ro=xh(n)?_t():$t(Kt);g.dialogUi.set(Kt),g.popupUi.set(ro),g.mainUi.set(Ct);const Pn={popupUi:ro,dialogUi:Kt,mainUi:Ct,uiMotherships:g.getUiMotherships()};return Ze(Pn)};return{popups:{backstage:$e.popup,getMothership:()=>fL("popups",S)},dialogs:{backstage:$e.dialog,getMothership:()=>fL("dialogs",C)},renderUI:Jt}},gL=n=>{const s=[],a={};return Lo(n,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Nt.error(s):Nt.value(a)},D1=(n,s,a,i)=>{const d=Un(vh.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:De(n.items,h=>J$(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Ve([wt.config({mode:"acyclic",useTabstopAt:ve(aS)}),Zu.memento(d),AW(d,{postprocess:g=>gL(g).fold(h=>(console.error(h),{}),an)}),Ut("dialog-body-panel",[Te(Vi(),(g,h)=>{g.getSystem().broadcastOn([Mh],{newFocus:T.some(h.event.target)})})])])}},hL=(n,s,a)=>De(n,(i,d)=>{Gt.set(a,n[d].view());const g=s.dom.getBoundingClientRect();return Gt.set(a,[]),g.height}),NK=n=>so(cn(n,(s,a)=>s>a?-1:s<a?1:0)),PK=(n,s,a)=>{const i=jv(n).dom,d=Ii(n,".tox-dialog-wrap").getOr(n),g=zo(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=lr(s),x=s.dom.offsetLeft>=a.dom.offsetLeft+da(a)?Math.max(lr(a),C):C,_=parseInt(zo(n,"margin-top"),10)||0,D=parseInt(zo(n,"margin-bottom"),10)||0,F=lr(n)+_+D-x;return h-F},$K=(n,s)=>{so(n).each(a=>c1.showTab(s,a.value))},pL=(n,s)=>{Ht(n,"height",s+"px"),Ht(n,"flex-basis",s+"px")},BT=(n,s,a)=>{Ii(n,'[role="dialog"]').each(i=>{io(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Ht(s,"height","0"),Ht(s,"flex-basis","0"),Math.min(g,PK(i,s,d)))).each(g=>{pL(s,g)})})})},NT=n=>io(n,'[role="tabpanel"]'),IK=n=>{const s=Wt();return{extraEvents:[Oo(d=>{const g=d.element;NT(g).each(h=>{Ht(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const S=hL(n,h,C);NK(S).fold(s.clear,s.set)}),BT(g,h,s),Cn(h,"visibility"),$K(n,d),requestAnimationFrame(()=>{BT(g,h,s)})})}),Te(Hg(),d=>{const g=d.element;NT(g).each(h=>{BT(g,h,s)})}),Te(eR,(d,g)=>{const h=d.element;NT(h).each(C=>{const S=_r(Gs(C));Ht(C,"visibility","hidden");const x=Qo(C,"height").map(P=>parseInt(P,10));Cn(C,"height"),Cn(C,"flex-basis");const _=C.dom.getBoundingClientRect().height;x.forall(P=>_>P)?(s.set(_),BT(h,C,s)):x.each(P=>{pL(C,P)}),Cn(C,"visibility"),S.each(br)})})],selectFirst:!1}},bL="send-data-to-section",vL="send-data-to-view",LK=(n,s,a,i)=>{const d=pt({}),g=_=>{const D=it.getValue(_),P=gL(D).getOr({}),F=d.get(),z=uo(F,P);d.set(z)},h=_=>{const D=d.get();it.setValue(_,D)},C=pt(null),S=De(n.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[$o(a.shared.providers.translate(_.title))],view:()=>[vh.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:De(_.items,P=>J$(D,P,s,a,i)),formBehaviours:Ve([wt.config({mode:"acyclic",useTabstopAt:ve(aS)}),Ut("TabView.form.events",[Oo(h),Gi(g)]),Na.config({channels:Pg([{key:bL,value:{onReceive:g}},{key:vL,value:{onReceive:h}}])})])}))]})),x=IK(S);return c1.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,D,P)=>{const F=it.getValue(D);xt(_,J8,{name:F,oldName:C.get()}),C.set(F)},tabs:S,components:[c1.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[uN.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ve([To.config({})])}),c1.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:Ve([Ut("tabpanel",x.extraEvents),wt.config({mode:"acyclic"}),Le.config({find:_=>so(c1.getViewItems(_))}),_1(T.none(),_=>(_.getSystem().broadcastOn([bL],{}),d.get()),(_,D)=>{d.set(D),_.getSystem().broadcastOn([vL],{})})])})},yL=(n,s,a,i,d,g)=>{const h=x=>{const _=x.body;switch(_.type){case"tabpanel":return[LK(_,x.initialData,i,g)];default:return[D1(_,x.initialData,i,g)]}},C=(x,_)=>T.some({isTabPanel:()=>_.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(x=>({id:x})).getOr({}),...d?S:{}}},components:[],behaviours:Ve([Zu.childAt(0),qc.config({channel:`${v$}-${s}`,updateState:C,renderComponents:h,initialData:n})])}},FK=(n,s,a,i,d,g)=>yL(n,s,T.some(a),i,d,g),HK=(n,s,a,i)=>{const d=yL(n,s,T.none(),a,!1,i);return gr.parts.body(d)},CL=n=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[p$(T.none(),{dom:{tag:"iframe",attributes:{src:n.url}},behaviours:Ve([To.config({}),Zt.config({})])})]}],behaviours:Ve([wt.config({mode:"acyclic",useTabstopAt:ve(aS)})])};return gr.parts.body(s)},zK=jb.deviceType.isTouch(),SL=(n,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,s]}),wL=(n,s)=>gr.parts.close(fr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:n,buttonBehaviours:Ve([To.config({})])})),xL=()=>gr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),EL=(n,s)=>gr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Rd(`<p>${FC(s.translate(n))}</p>`)}]}]}),PT=n=>gr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n}),TL=(n,s)=>[Ad.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),Ad.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],C5=n=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return gr.sketch({lazySink:n.lazySink,onEscape:g=>(n.onEscape(g),T.some(!0)),useTabstopAt:g=>!aS(g),firstTabstop:n.firstTabstop,dom:{tag:"div",classes:[s].concat(n.extraClasses),styles:{position:"relative",...n.extraStyles}},components:[n.header,n.body,...n.footer.toArray()],parts:{blocker:{dom:Rd(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:zK?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Ve([Zt.config({}),Ut("dialog-events",n.dialogEvents.concat([eh(Vi(),(g,h)=>{ce.isBlocked(g)?Y():wt.focusIn(g)}),Te(C0(),(g,h)=>{g.getSystem().broadcastOn([Mh],{newFocus:h.event.newFocus})})])),Ut("scroll-lock",[Oo(()=>{bo(Fc(),d)}),Gi(()=>{ns(Fc(),d)})]),...n.extraBehaviours]),eventOrder:{[Nr()]:["dialog-events"],[Ol()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[bi()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...n.eventOrder}})},kL=n=>fr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Ve([To.config({}),Do.config(n.tooltips.getConfig({tooltipText:n.translate("Close")}))]),components:[nl("close",{tag:"span",classes:["tox-icon"]},n.icons)],action:s=>{fn(s,sg)}}),_L=(n,s,a,i)=>{const d=g=>[$o(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Ve([qc.config({channel:`${sR}-${s}`,initialData:n,renderComponents:d})])}},AL=()=>({dom:Rd('<div class="tox-dialog__draghandle"></div>')}),VK=(n,s,a,i)=>Ad.sketch({dom:Rd('<div class="tox-dialog__header"></div>'),components:[_L(n,s,T.some(a),i),AL(),kL(i)],containerBehaviours:Ve([Zf.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ma(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([Hs()],{target:g})}})])}),UK=(n,s,a)=>{const i=gr.parts.title(_L(n,s,T.none(),a)),d=gr.parts.draghandle(AL()),g=gr.parts.close(kL(a)),h=[i].concat(n.draggable?[d]:[]).concat([g]);return Ad.sketch({dom:Rd('<div class="tox-dialog__header"></div>'),components:h})},OL=(n,s,a)=>UK({title:a.shared.providers.translate(n),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),S5=(n,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Rd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),w5=(n,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=io(n().element,".tox-dialog__header").map(g=>lr(g));gr.setBusy(n(),(g,h)=>S5(i.message,h,s,d))},onUnblock:()=>{gr.setIdle(n())}}),DL="tox-dialog--fullscreen",R1="tox-dialog--width-lg",x5="tox-dialog--width-md",$T=n=>{switch(n){case"large":return T.some(R1);case"medium":return T.some(x5);default:return T.none()}},IT=(n,s)=>{const a=We.fromDom(s.element.dom);$s(a,DL)||(qr(a,[R1,x5]),$T(n).each(i=>bo(a,i)))},RL=(n,s)=>{const a=We.fromDom(n.element.dom),i=s2(a),d=vt(i,g=>g===R1||g===x5).or($T(s));rd(a,[DL,...d.toArray()])},ML=(n,s,a)=>m(C5({...n,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[H4({}),...n.extraBehaviours],onEscape:i=>{fn(i,sg)},dialogEvents:s,eventOrder:{[fd()]:[qc.name(),Na.name()],[Ol()]:["scroll-lock",qc.name(),"messages","dialog-events","alloy.base.behaviour"],[bi()]:["alloy.base.behaviour","dialog-events","messages",qc.name(),"scroll-lock"]}})),E5=(n,s={})=>{const a=i=>{const d=De(i.items,g=>{const h=bt(s,g.name).getOr(pt(!1));return{...g,storage:h}});return{...i,items:d}};return De(n,i=>i.type==="menu"?a(i):i)},BL=n=>So(n,(s,a)=>a.type==="menu"?So(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),NL=(n,s)=>[Qg(Vi(),b$),n(k1,(a,i,d,g)=>{Bi(g.element)&&_r(Gs(g.element)).each(vs),s.onClose(),i.onClose()}),n(sg,(a,i,d,g)=>{i.onCancel(a),fn(g,k1)}),Te(L4,(a,i)=>s.onUnblock()),Te(QD,(a,i)=>s.onBlock(i.event))],ZK=(n,s)=>{const a=(d,g)=>Te(d,(h,C)=>{i(h,(S,x)=>{g(n(),S,C.event,h)})}),i=(d,g)=>{qc.getState(d).get().each(h=>{g(h,d)})};return[...NL(a,s),a(Uu,(d,g,h)=>{g.onAction(d,{name:h.name})})]},PL=(n,s,a)=>{const i=(g,h)=>Te(g,(C,S)=>{d(C,(x,_)=>{h(n(),x,S.event,C)})}),d=(g,h)=>{qc.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...NL(i,s),i(rS,(g,h)=>h.onSubmit(g)),i(_c,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(Uu,(g,h,C,S)=>{const x=()=>S.getSystem().isConnected()?wt.focusIn(S):void 0,_=F=>Dr(F,"disabled")||Or(F,"aria-disabled").exists(z=>z==="true"),D=Gs(S.element),P=_r(D);h.onAction(g,{name:C.name,value:C.value}),_r(D).fold(x,F=>{_(F)||P.exists(z=>$(F,z)&&_(z))?x():a().toOptional().filter(z=>!$(z.element,F)).each(x)})}),i(J8,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),Gi(g=>{const h=n();it.setValue(g,h.getData())})]},WK=(n,s)=>uS(n,n.type,s),jK=(n,s,a)=>vt(s,i=>i.name===a).bind(i=>i.memento.getOpt(n)),GK=(n,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=Rc(a,C=>C.align==="start"),d=(C,S)=>Ad.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:De(S,x=>x.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},$L=(n,s,a)=>{const i=(d,g)=>{const h=De(g.buttons,S=>{const x=Un(WK(S,a));return{name:S.name,align:S.align,memento:x}}),C=S=>jK(d,h,S);return T.some({lookupByName:C,footerButtons:h})};return{dom:Rd('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ve([qc.config({channel:`${y$}-${s}`,initialData:n,updateState:i,renderComponents:GK})])}},qK=(n,s,a)=>$L(n,s,a),IL=(n,s,a)=>gr.parts.footer($L(n,s,a)),LT=(n,s)=>{if(n.getRoot().getSystem().isConnected()){const i=Le.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return vh.getField(i,s).orThunk(()=>n.getFooter().bind(h=>qc.getState(h).get()).bind(h=>h.lookupByName(s)))}else return T.none()},KK=(n,s)=>{const a=n.getRoot();return qc.getState(a).get().map(i=>pi(es("data",i.dataValidator,s))).getOr(s)},LL=(n,s,a)=>{const i=z=>{const G=n.getRoot();G.getSystem().isConnected()&&z(G)},F={getData:()=>{const z=n.getRoot(),G=z.getSystem().isConnected()?n.getFormWrapper():z,J=it.getValue(G),W=is(a,ee=>ee.get());return{...J,...W}},setData:z=>{i(G=>{const J=F.getData(),W=uo(J,z),ee=KK(n,W),re=n.getFormWrapper();it.setValue(re,ee),Lo(a,(fe,be)=>{$n(W,be)&&fe.set(W[be])})})},setEnabled:(z,G)=>{LT(n,z).each(G?ft.enable:ft.disable)},focus:z=>{LT(n,z).each(Zt.focus)},block:z=>{if(!Et(z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(G=>{xt(G,QD,{message:z})})},unblock:()=>{i(z=>{fn(z,L4)})},showTab:z=>{i(G=>{const J=n.getBody();qc.getState(J).get().exists(ee=>ee.isTabPanel())&&Le.getCurrent(J).each(ee=>{c1.showTab(ee,z)})})},redial:z=>{i(G=>{const J=n.getId(),W=s(z),ee=E5(W.internalDialog.buttons,a);G.getSystem().broadcastOn([`${W4}-${J}`],W),G.getSystem().broadcastOn([`${sR}-${J}`],W.internalDialog),G.getSystem().broadcastOn([`${v$}-${J}`],W.internalDialog),G.getSystem().broadcastOn([`${y$}-${J}`],{...W.internalDialog,buttons:ee}),F.setData(W.initialData)})},close:()=>{i(z=>{fn(z,k1)})},toggleFullscreen:n.toggleFullscreen};return F},YK=(n,s,a)=>{const i=st("dialog"),d=n.internalDialog,g=OL(d.title,i,a),h=pt(d.size),C=re=>LT(W,re),S=$T(h.get()).toArray(),x=(re,fe)=>(h.set(fe.internalDialog.size),IT(fe.internalDialog.size,re),T.some(fe)),_=HK({body:d.body,initialData:d.initialData},i,a,C),D=E5(d.buttons),P=BL(D),F=va(D.length!==0,IL({buttons:D},i,a)),z=PL(()=>ee,w5(()=>J,a.shared.providers,s),a.shared.getSink),G={id:i,header:g,body:_,footer:F,extraClasses:S,extraBehaviours:[qc.config({channel:`${W4}-${i}`,updateState:x,initialData:n})],extraStyles:{}},J=ML(G,z,a),W=(()=>{const re=()=>{const be=gr.getBody(J);return Le.getCurrent(be).getOr(be)},fe=()=>{RL(J,h.get())};return{getId:ie(i),getRoot:ie(J),getBody:()=>gr.getBody(J),getFooter:()=>gr.getFooter(J),getFormWrapper:re,toggleFullscreen:fe}})(),ee=LL(W,s.redial,P);return{dialog:J,instanceApi:ee}},DS=(n,s,a,i=!1,d)=>{const g=st("dialog"),h=st("dialog-label"),C=st("dialog-content"),S=n.internalDialog,x=Ne=>LT(Re,Ne),_=pt(S.size),D=$T(_.get()).toArray(),P=(Ne,Tt)=>(_.set(Tt.internalDialog.size),IT(Tt.internalDialog.size,Ne),d(),T.some(Tt)),F=Un(VK({title:S.title,draggable:!0},g,h,a.shared.providers)),z=Un(FK({body:S.body,initialData:S.initialData},g,C,a,i,x)),G=E5(S.buttons),J=BL(G),W=va(G.length!==0,Un(qK({buttons:G},g,a))),ee=PL(()=>$e,{onBlock:Ne=>{ce.block(be,(Tt,gt)=>{const sn=F.getOpt(be).map(_t=>lr(_t.element));return S5(Ne.message,gt,a.shared.providers,sn)})},onUnblock:()=>{ce.unblock(be)},onClose:()=>s.closeWindow()},a.shared.getSink),re="tox-dialog-inline",fe=jr().os,be=m({dom:{tag:"div",classes:["tox-dialog",re,...D],attributes:{role:"dialog",...fe.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[fd()]:[qc.name(),Na.name()],[Nr()]:["execute-on-form"],[Ol()]:["reflecting","execute-on-form"]},behaviours:Ve([wt.config({mode:"cyclic",onEscape:Ne=>(fn(Ne,k1),T.some(!0)),useTabstopAt:Ne=>!aS(Ne)&&(Di(Ne)!=="button"||ir(Ne,"disabled")!=="disabled"),firstTabstop:1}),qc.config({channel:`${W4}-${g}`,updateState:P,initialData:n}),Zt.config({}),Ut("execute-on-form",ee.concat([eh(Vi(),(Ne,Tt)=>{wt.focusIn(Ne)}),Te(C0(),(Ne,Tt)=>{Ne.getSystem().broadcastOn([Mh],{newFocus:Tt.event.newFocus})})])),ce.config({getRoot:()=>T.some(be)}),Gt.config({}),H4({})]),components:[F.asSpec(),z.asSpec(),...W.map(Ne=>Ne.asSpec()).toArray()]}),Ke=()=>{RL(be,_.get())},Re={getId:ie(g),getRoot:ie(be),getFooter:()=>W.map(Ne=>Ne.get(be)),getBody:()=>z.get(be),getFormWrapper:()=>{const Ne=z.get(be);return Le.getCurrent(Ne).getOr(Ne)},toggleFullscreen:Ke},$e=LL(Re,s.redial,J);return{dialog:be,instanceApi:$e}};var T5=tinymce.util.Tools.resolve("tinymce.util.URI");const XK=n=>{const s=h=>{n.getSystem().isConnected()&&h(n)};return{block:h=>{if(!Et(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{xt(C,QD,{message:h})})},unblock:()=>{s(h=>{fn(h,L4)})},close:()=>{s(h=>{fn(h,k1)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([zt],h)})}}},JK=["insertContent","setContent","execCommand","close","block","unblock"],FL=n=>Dn(n)&&JK.indexOf(n.mceAction)!==-1,QK=n=>!FL(n)&&Dn(n)&&$n(n,"mceAction"),eY=(n,s,a)=>{switch(a.mceAction){case"insertContent":n.insertContent(a.content);break;case"setContent":n.setContent(a.content);break;case"execCommand":const i=xr(a.ui)?a.ui:!1;n.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},HL=(n,s,a,i)=>{const d=st("dialog"),g=OL(n.title,d,i),h=CL(n),C=n.buttons.bind(re=>re.length===0?T.none():T.some(IL({buttons:re},d,i))),S=ZK(()=>ee,w5(()=>W,i.shared.providers,s)),x={...n.height.fold(()=>({}),re=>({height:re+"px","max-height":re+"px"})),...n.width.fold(()=>({}),re=>({width:re+"px","max-width":re+"px"}))},_=n.width.isNone()&&n.height.isNone()?["tox-dialog--width-lg"]:[],D=new T5(n.url,{base_uri:new T5(window.location.href)}),P=`${D.protocol}://${D.host}${D.port?":"+D.port:""}`,F=xs(),z=(re,fe)=>T.some(fe),G=[qc.config({channel:`${W4}-${d}`,updateState:z,initialData:n}),Ut("messages",[Oo(()=>{const re=eo(We.fromDom(window),"message",fe=>{if(D.isSameOrigin(new T5(fe.raw.origin))){const be=fe.raw.data;FL(be)?eY(a,ee,be):QK(be)&&n.onMessage(ee,be)}});F.set(re)}),Gi(F.clear)]),Na.config({channels:{[zt]:{onReceive:(re,fe)=>{io(re.element,"iframe").each(be=>{const Ke=be.dom.contentWindow;oo(Ke)&&Ke.postMessage(fe,P)})}}}})],W=ML({id:d,header:g,body:h,footer:C,extraClasses:_,extraBehaviours:G,extraStyles:x},S,i),ee=XK(W);return{dialog:W,instanceApi:ee}},tY=n=>{const s=n.shared;return{open:(i,d)=>{const g=()=>{gr.hide(x),d()},h=Un(uS({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:T.some("primary"),align:"end",enabled:!0,icon:T.none()},"cancel",n)),C=xL(),S=wL(g,s.providers),x=m(C5({lazySink:()=>s.getSink(),header:SL(C,S),body:EL(i,s.providers),footer:T.some(PT(TL([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Te(sg,g)],eventOrder:{}}));gr.show(x);const _=h.get(x);Zt.focus(_)}}},nY=n=>{const s=n.shared;return{open:(i,d)=>{const g=P=>{gr.hide(_),d(P)},h=Un(uS({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:T.some("primary"),align:"end",enabled:!0,icon:T.none()},"submit",n)),C=uS({context:"any",name:"no",text:"No",primary:!1,buttonType:T.some("secondary"),align:"end",enabled:!0,icon:T.none()},"cancel",n),S=xL(),x=wL(()=>g(!1),s.providers),_=m(C5({lazySink:()=>s.getSink(),header:SL(S,x),body:EL(i,s.providers),footer:T.some(PT(TL([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Te(sg,()=>g(!1)),Te(rS,()=>g(!0))],eventOrder:{}}));gr.show(_);const D=h.get(_);Zt.focus(D)}}},zL=(n,s)=>pi(es("data",s,n)),VL=n=>Xh(n,".tox-alert-dialog")||Xh(n,".tox-confirm-dialog"),oY=(n,s,a,i)=>s&&a?[]:[jo.config({contextual:{lazyContext:()=>T.some(Is(We.fromDom(n.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:i},modes:["top"],lazyViewport:d=>Kf(n,d.element).map(h=>({bounds:l1(h),optScrollEnv:T.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:gc(h.element).top})})).getOrThunk(()=>({bounds:Kr(),optScrollEnv:T.none()}))})],k5=n=>{const s=n.editor,a=Jb(s),i=tY(n.backstages.dialog),d=nY(n.backstages.dialog),g=(z,G,J)=>{if(!Zs(G)){if(G.inline==="toolbar")return x(z,n.backstages.popup.shared.anchors.inlineDialog(),J,G);if(G.inline==="bottom")return _(z,n.backstages.popup.shared.anchors.inlineBottomDialog(),J,G);if(G.inline==="cursor")return x(z,n.backstages.popup.shared.anchors.cursor(),J,G)}return S(z,J)},h=(z,G)=>C(z,G),C=(z,G)=>{const J=W=>{const ee=HL(W,{closeWindow:()=>{gr.hide(ee.dialog),G(ee.instanceApi)}},s,n.backstages.dialog);return gr.show(ee.dialog),ee.instanceApi};return C1.openUrl(J,z)},S=(z,G)=>{const J=(W,ee,re)=>{const fe=ee,Ke=YK({dataValidator:re,initialData:fe,internalDialog:W},{redial:C1.redial,closeWindow:()=>{gr.hide(Ke.dialog),G(Ke.instanceApi)}},n.backstages.dialog);return gr.show(Ke.dialog),Ke.instanceApi.setData(fe),Ke.instanceApi};return C1.open(J,z)},x=(z,G,J,W)=>{const ee=(re,fe,be)=>{const Ke=zL(fe,be),Re=Wt(),$e=n.backstages.popup.shared.header.isPositionedAtTop(),Ne={dataValidator:be,initialData:Ke,internalDialog:re},Tt=()=>Re.on(Ae=>{rs.reposition(Ae),(!a||!$e)&&jo.refresh(Ae)}),gt=DS(Ne,{redial:C1.redial,closeWindow:()=>{Re.on(rs.hide),s.off("ResizeEditor",Tt),s.off("ScrollWindow",sn),Re.clear(),J(gt.instanceApi)}},n.backstages.popup,W.ariaAttrs,Tt),sn=()=>gt.dialog.getSystem().broadcastOn([Hs()],{target:gt.dialog.element}),_t=()=>gt.dialog.getSystem().broadcastOn([Eu()],{target:gt.dialog.element}),Xt=m(rs.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:W.persistent?{event:"doNotDismissYet"}:{},...$e?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ve([Ut("window-manager-inline-events",[Te(gd(),(Ae,Ze)=>{fn(gt.dialog,sg)})]),...oY(s,a,$e,_t)]),isExtraPart:(Ae,Ze)=>VL(Ze)}));Re.set(Xt);const ht=()=>{const Ae=s.inline?Fc():We.fromDom(s.getContainer()),Ze=Is(Ae);return T.some(Ze)};return rs.showWithinBounds(Xt,p(gt.dialog),{anchor:G},ht),(!a||!$e)&&(jo.refresh(Xt),s.on("ResizeEditor",Tt)),s.on("ScrollWindow",sn),gt.instanceApi.setData(Ke),wt.focusIn(gt.dialog),gt.instanceApi};return C1.open(ee,z)},_=(z,G,J,W)=>{const ee=(re,fe,be)=>{const Ke=zL(fe,be),Re=Wt(),$e=n.backstages.popup.shared.header.isPositionedAtTop(),Ne={dataValidator:be,initialData:Ke,internalDialog:re},Tt=()=>Re.on(Xt=>{rs.reposition(Xt),jo.refresh(Xt)}),gt=DS(Ne,{redial:C1.redial,closeWindow:()=>{Re.on(rs.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Tt),Re.clear(),J(gt.instanceApi)}},n.backstages.popup,W.ariaAttrs,Tt),sn=m(rs.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:W.persistent?{event:"doNotDismissYet"}:{},...$e?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ve([Ut("window-manager-inline-events",[Te(gd(),(Xt,ht)=>{fn(gt.dialog,sg)})]),jo.config({contextual:{lazyContext:()=>T.some(Is(We.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Xt=>Kf(s,Xt.element).map(Ae=>({bounds:l1(Ae),optScrollEnv:T.some({currentScrollTop:Ae.element.dom.scrollTop,scrollElmTop:gc(Ae.element).top})})).getOrThunk(()=>({bounds:Kr(),optScrollEnv:T.none()}))})]),isExtraPart:(Xt,ht)=>VL(ht)}));Re.set(sn);const _t=()=>n.backstages.popup.shared.getSink().toOptional().bind(Xt=>{const ht=Kf(s,Xt.element),Ae=15,Ze=ht.map(Ct=>l1(Ct)).getOr(Kr()),$t=Is(We.fromDom(s.getContentAreaContainer())),Jt=id($t,Ze);return T.some(Ys(Jt.x,Jt.y,Jt.width,Jt.height-Ae))});return rs.showWithinBounds(sn,p(gt.dialog),{anchor:G},_t),jo.refresh(sn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Tt),gt.instanceApi.setData(Ke),wt.focusIn(gt.dialog),gt.instanceApi};return C1.open(ee,z)};return{open:g,openUrl:h,alert:(z,G)=>{i.open(z,G)},close:z=>{z.close()},confirm:(z,G)=>{d.open(z,G)}}},UL=n=>{hN(n),T8(n),dK(n)};var sY=()=>{gN.add("silver",n=>{UL(n);let s=()=>Kr();const{dialogs:a,popups:i,renderUI:d}=BK(n,{getPopupSinkBounds:()=>s()}),g=()=>{const _=d();return Kf(n,i.getMothership().element).each(P=>{s=()=>l1(P)}),_};SW.register(n,i.backstage.shared);const h=k5({editor:n,backstages:{popup:i.backstage,dialog:a.backstage}}),C=Wt(),S=()=>AV(n,{backstage:i.backstage},i.getMothership(),C),x=()=>io(We.fromDom(n.getContainer()),".tox-promotion").map(_=>_.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:ie(h),getNotificationManagerImpl:S,getPromotionElement:x}})};sY()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',"upload-from-device":'<svg width="24" height="25"><path d="M11 19a1 1 0 1 0 2 0v-3.2l1.5 1a1 1 0 1 0 1-1.7L12 12.8l-3.5 2.3a1 1 0 0 0 1 1.7l1.5-1V19Z"/><path d="M9.6 4c.3 0 .6.2.8.5l1.3 2h6.7c.7 0 1.4.2 1.8.7.5.5.8 1.2.8 1.9v8.3c0 .7-.3 1.3-.8 1.8a2.6 2.6 0 0 1-1.8.8H16v-2h2.4a.6.6 0 0 0 .4-.2.6.6 0 0 0 .2-.4V9a.6.6 0 0 0-.2-.5.6.6 0 0 0-.4-.1h-7.2a1 1 0 0 1-.8-.5L9 6H5.6a.6.6 0 0 0-.4.2.6.6 0 0 0-.2.4v10.8c0 .1 0 .3.2.4a.6.6 0 0 0 .4.2H8v2H5.6a2.6 2.6 0 0 1-1.8-.8 2.7 2.7 0 0 1-.8-1.8V6.6c0-.7.3-1.3.8-1.8A2.6 2.6 0 0 1 5.6 4h4Z"/></svg>',"upload-from-link":'<svg height="25" width="24"><path d="M11.5 11.8a1 1 0 0 1 1.9-.5 5 5 0 0 1-1.3 4.8l-2.4 2.3A4 4 0 1 1 4 13L5 12a1 1 0 0 1 1.4 1.4l-.7.8A2 2 0 1 0 8.3 17l2.4-2.4a3 3 0 0 0 .8-2.8z"/><path d="M10.1 11.8a1 1 0 0 1-2 .5 5 5 0 0 1 1.4-4.8L12 5.1a4 4 0 0 1 5.5 5.6l-.7.8a1 1 0 0 1-1.5-1.4l.8-.8a2 2 0 1 0-2.7-2.7l-2.4 2.3a3 3 0 0 0-.8 3zm5.7 7.2a1 1 0 1 0 2 0v-3l1.4 1.1a1 1 0 0 0 1.2-1.5l-3.6-2.9-3.6 2.9a1 1 0 0 0 1.2 1.5l1.4-1z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var xn=tinymce.util.Tools.resolve("tinymce.ModelManager");const Tn=(l,m,p)=>{var y;return p(l,m.prototype)?!0:((y=l.constructor)==null?void 0:y.name)===m.name},Bn=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&Tn(l,String,(p,y)=>y.isPrototypeOf(p))?"string":m},Ln=l=>m=>Bn(m)===l,No=l=>m=>typeof m===l,_o=l=>m=>l===m,ws=Ln("string"),Et=Ln("object"),Dn=Ln("array"),ki=_o(null),ra=No("boolean"),sc=_o(void 0),xr=l=>l==null,Zs=l=>!xr(l),rc=No("function"),oo=No("number"),Rt=()=>{},Fa=(l,m)=>(...p)=>l(m.apply(null,p)),ac=(l,m)=>p=>l(m(p)),Y=l=>()=>l,tn=l=>l,Qc=(l,m)=>l===m;function dn(l,...m){return(...p)=>{const y=m.concat(p);return l.apply(null,y)}}const ie=l=>m=>!l(m),an=l=>()=>{throw new Error(l)},as=l=>l(),gn=Y(!1),ve=Y(!0),Ci=class Ci{constructor(m,p){Ie(this,"tag");Ie(this,"value");this.tag=m,this.value=p}static some(m){return new Ci(!0,m)}static none(){return Ci.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?Ci.some(m(this.value)):Ci.none()}bind(m){return this.tag?m(this.value):Ci.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:Ci.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Zs(m)?Ci.some(m):Ci.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Ci,"singletonNone",new Ci(!1));let ne=Ci;const pr=Array.prototype.slice,Vn=Array.prototype.indexOf,Dt=Array.prototype.push,T=(l,m)=>Vn.call(l,m),Ko=(l,m)=>T(l,m)>-1,Xe=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];if(m(E,p))return!0}return!1},Yo=(l,m)=>{const p=[];for(let y=0;y<l;y++)p.push(m(y));return p},Vt=(l,m)=>{const p=l.length,y=new Array(p);for(let E=0;E<p;E++){const A=l[E];y[E]=m(A,E)}return y},Me=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];m(E,p)}},ao=(l,m)=>{for(let p=l.length-1;p>=0;p--){const y=l[p];m(y,p)}},Qs=(l,m)=>{const p=[],y=[];for(let E=0,A=l.length;E<A;E++){const M=l[E];(m(M,E)?p:y).push(M)}return{pass:p,fail:y}},Io=(l,m)=>{const p=[];for(let y=0,E=l.length;y<E;y++){const A=l[y];m(A,y)&&p.push(A)}return p},hs=(l,m,p)=>(ao(l,(y,E)=>{p=m(p,y,E)}),p),De=(l,m,p)=>(Me(l,(y,E)=>{p=m(p,y,E)}),p),et=(l,m,p)=>{for(let y=0,E=l.length;y<E;y++){const A=l[y];if(m(A,y))return ne.some(A);if(p(A,y))break}return ne.none()},N=(l,m)=>et(l,m,gn),Rc=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];if(m(E,p))return ne.some(p)}return ne.none()},co=l=>{const m=[];for(let p=0,y=l.length;p<y;++p){if(!Dn(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);Dt.apply(m,l[p])}return m},cs=(l,m)=>co(Vt(l,m)),So=(l,m)=>{for(let p=0,y=l.length;p<y;++p){const E=l[p];if(m(E,p)!==!0)return!1}return!0},aa=l=>{const m=pr.call(l,0);return m.reverse(),m},vt=(l,m)=>{const p={};for(let y=0,E=l.length;y<E;y++){const A=l[y];p[String(A)]=m(A,y)}return p},jn=(l,m)=>{const p=pr.call(l,0);return p.sort(m),p},Mt=(l,m)=>m>=0&&m<l.length?ne.some(l[m]):ne.none(),le=l=>Mt(l,0),Bs=l=>Mt(l,l.length-1),_e=(l,m)=>{for(let p=0;p<l.length;p++){const y=m(l[p],p);if(y.isSome())return y}return ne.none()},ge=Object.keys,nn=Object.hasOwnProperty,yn=(l,m)=>{const p=ge(l);for(let y=0,E=p.length;y<E;y++){const A=p[y],M=l[A];m(M,A)}},cn=(l,m)=>Ws(l,(p,y)=>({k:y,v:m(p,y)})),Ws=(l,m)=>{const p={};return yn(l,(y,E)=>{const A=m(y,E);p[A.k]=A.v}),p},so=l=>(m,p)=>{l[p]=m},il=(l,m,p,y)=>{yn(l,(E,A)=>{(m(E,A)?p:y)(E,A)})},Lh=(l,m)=>{const p={};return il(l,m,so(p),Rt),p},ca=(l,m)=>{const p=[];return yn(l,(y,E)=>{p.push(m(y,E))}),p},Gn=l=>ca(l,tn),Ha=(l,m)=>Lo(l,m)?ne.from(l[m]):ne.none(),Lo=(l,m)=>nn.call(l,m),is=(l,m)=>Lo(l,m)&&l[m]!==void 0&&l[m]!==null,Ku=l=>{for(const m in l)if(nn.call(l,m))return!1;return!0},Ur={generate:l=>{if(!Dn(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return Me(l,(y,E)=>{const A=ge(y);if(A.length!==1)throw new Error("one and only one name per case");const M=A[0],L=y[M];if(p[M]!==void 0)throw new Error("duplicate key detected:"+M);if(M==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Dn(L))throw new Error("case arguments must be an array");m.push(M),p[M]=(...Z)=>{const Q=Z.length;if(Q!==L.length)throw new Error("Wrong number of arguments to case "+M+". Expected "+L.length+" ("+L+"), got "+Q);return{fold:(...Fe)=>{if(Fe.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Fe.length);return Fe[E].apply(null,Z)},match:Fe=>{const at=ge(Fe);if(m.length!==at.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+at.join(","));if(!So(m,Le=>Ko(at,Le)))throw new Error("Not all branches were specified when using match. Specified: "+at.join(", ")+`
Required: `+m.join(", "));return Fe[M].apply(null,Z)},log:Fe=>{console.log(Fe,{constructors:m,constructor:M,params:Z})}}}}),p}},ps=l=>{let m=l;return{get:()=>m,set:E=>{m=E}}},js=l=>l.slice(0).sort(),Fo=(l,m)=>{throw new Error("All required keys ("+js(l).join(", ")+") were not specified. Specified keys were: "+js(m).join(", ")+".")},cc=l=>{throw new Error("Unsupported keys for object: "+js(l).join(", "))},ic=(l,m)=>{if(!Dn(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Me(m,p=>{if(!ws(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},bt=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+js(l).join(", ")+") were not.")},$n=l=>{const m=js(l);N(m,(y,E)=>E<m.length-1&&y===m[E+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},hn=(l,m)=>lc(l,m,{validate:rc,label:"function"}),lc=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return ic("required",m),$n(m),y=>{const E=ge(y);So(m,L=>Ko(E,L))||Fo(m,E),l(m,E);const M=Io(m,L=>!p.validate(y[L],L));return M.length>0&&bt(M,p.label),y}},pa=(l,m)=>{const p=Io(m,y=>!Ko(l,y));p.length>0&&cc(p)},pt=l=>hn(pa,l),ll=l=>{const m=A=>A(l),p=Y(l),y=()=>E,E={tag:!0,inner:l,fold:(A,M)=>M(l),isValue:ve,isError:gn,map:A=>Mc.value(A(l)),mapError:y,bind:m,exists:m,forall:m,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:A=>{A(l)},toOptional:()=>ne.some(l)};return E},Qm=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(y,E)=>y(l),isValue:gn,isError:ve,map:m,mapError:y=>Mc.error(y(l)),bind:m,exists:gn,forall:ve,getOr:tn,or:tn,getOrThunk:as,orThunk:as,getOrDie:an(String(l)),each:Rt,toOptional:ne.none};return p},Mc={value:ll,error:Qm,fromOption:(l,m)=>l.fold(()=>Qm(m),ll)},za=typeof window<"u"?window:Function("return this;")(),wo=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},Yt=(l,m,p=Qc)=>l.exists(y=>p(y,m)),Xo=l=>{const m=[],p=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(p);return m},ef=(l,m)=>l!=null?m(l):ne.none(),Yu=(l,m)=>l?ne.some(m):ne.none(),ei=(l,m)=>{let p=m??za;for(let y=0;y<l.length&&p!==void 0&&p!==null;++y)p=p[l[y]];return p},Nt=(l,m)=>{const p=l.split(".");return ei(p,m)},ba=l=>{const m=ps(ne.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(ne.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:L=>{p(),m.set(ne.some(L))}}},ul=()=>{const l=ba(Rt);return{...l,on:p=>l.get().each(p)}},Fh=(l,m)=>l.substring(m),Er=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,tf=(l,m)=>Wd(l,m)?Fh(l,m.length):l,ts=(l,m,p=0,y)=>{const E=l.indexOf(m,p);return E!==-1?sc(y)?!0:E+m.length<=y:!1},Wd=(l,m)=>Er(l,m,0),jd=(l,m)=>Er(l,m,l.length-m.length),Ai=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Ns=l=>l.length>0,ou=l=>{const m=parseFloat(l);return isNaN(m)?ne.none():ne.some(m)},dg=(l,m)=>{let p=null;const y=()=>{ki(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...A)=>{y(),p=setTimeout(()=>{p=null,l.apply(null,A)},m)}}},st=l=>{let m=!1,p;return(...y)=>(m||(m=!0,p=l.apply(null,y)),p)},Va=" ",Gd=["tfoot","thead","tbody","colgroup"],qd=l=>Ko(Gd,l),uo=(l,m)=>({rows:l,columns:m}),Kd=(l,m)=>({row:l,column:m}),uc=(l,m,p)=>({element:l,rowspan:m,colspan:p}),_s=(l,m,p,y)=>({element:l,rowspan:m,colspan:p,isNew:y}),Oi=(l,m,p,y,E,A)=>({element:l,rowspan:m,colspan:p,row:y,column:E,isLocked:A}),Yd=(l,m,p)=>({element:l,cells:m,section:p}),dc=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),Tr=(l,m,p)=>({element:l,isNew:m,isLocked:p}),ti=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),va=(l,m,p,y)=>({startRow:l,startCol:m,finishRow:p,finishCol:y}),z1=(l,m,p)=>({element:l,colspan:m,column:p}),mg=(l,m)=>({element:l,columns:m}),Bc=(l,m,p)=>{const y=l.cells,E=y.slice(0,m),A=y.slice(m),M=E.concat(p).concat(A);return fg(l,M)},ml=(l,m,p)=>Bc(l,m,[p]),fl=(l,m,p)=>{const y=l.cells;y[m]=p},fg=(l,m)=>ti(l.element,m,l.section,l.isNew),xs=(l,m)=>{const p=l.cells,y=Vt(p,m);return ti(l.element,y,l.section,l.isNew)},Wt=(l,m)=>l.cells[m],Zr=(l,m)=>Wt(l,m).element,kr=l=>l.cells.length,ls=l=>{const m=Qs(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},nf=(l,m,p)=>{const y=Vt(l.cells,p);return ti(m(l.element),y,l.section,!0)},Xd=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,l),new Error(E)}return ni(y.childNodes[0])},Jo=(l,m)=>{const y=(m||document).createElement(l);return ni(y)},Xu=(l,m)=>{const y=(m||document).createTextNode(l);return ni(y)},ni=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},ot={fromHtml:Xd,fromTag:Jo,fromText:Xu,fromDom:ni,fromPoint:(l,m,p)=>ne.from(l.dom.elementFromPoint(m,p)).map(ni)},su=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},ya=(l,m)=>{const p=l.document.createRange();return Ju(p,m),p},Ju=(l,m)=>l.selectNodeContents(m.dom),us=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,y)=>{l.setStart(p.dom,y)},p=>{l.setStartAfter(p.dom)})},zh=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,y)=>{l.setEnd(p.dom,y)},p=>{l.setEndAfter(p.dom)})},oi=(l,m,p)=>{const y=l.document.createRange();return us(y,m),zh(y,p),y},Nc=(l,m,p,y,E)=>{const A=l.document.createRange();return A.setStart(m.dom,p),A.setEnd(y.dom,E),A},gg=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),hg=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?ne.some(p).map(gg):ne.none()},gl=Ur.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pg=(l,m,p)=>m(ot.fromDom(p.startContainer),p.startOffset,ot.fromDom(p.endContainer),p.endOffset),Jd=(l,m)=>m.match({domRange:p=>({ltr:Y(p),rtl:ne.none}),relative:(p,y)=>({ltr:st(()=>oi(l,p,y)),rtl:st(()=>ne.some(oi(l,y,p)))}),exact:(p,y,E,A)=>({ltr:st(()=>Nc(l,p,y,E,A)),rtl:st(()=>ne.some(Nc(l,E,A,p,y)))})}),hl=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(E=>E.collapsed===!1).map(E=>gl.rtl(ot.fromDom(E.endContainer),E.endOffset,ot.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>pg(l,gl.ltr,p)):pg(l,gl.ltr,p)},Qu=(l,m)=>{const p=Jd(l,m);return hl(l,p)},We=(l,m)=>Qu(l,m).match({ltr:(y,E,A,M)=>{const L=l.document.createRange();return L.setStart(y.dom,E),L.setEnd(A.dom,M),L},rtl:(y,E,A,M)=>{const L=l.document.createRange();return L.setStart(A.dom,M),L.setEnd(y.dom,E),L}});gl.ltr,gl.rtl;const Qd=8,of=9,si=11,ru=1,em=3,Ca=(l,m)=>{const p=l.dom;if(p.nodeType!==ru)return!1;{const y=p;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},ed=l=>l.nodeType!==ru&&l.nodeType!==of&&l.nodeType!==si||l.childElementCount===0,au=(l,m)=>{const p=m===void 0?document:m.dom;return ed(p)?[]:Vt(p.querySelectorAll(l),ot.fromDom)},pl=(l,m)=>{const p=m===void 0?document:m.dom;return ed(p)?ne.none():ne.from(p.querySelector(l)).map(ot.fromDom)},mo=(l,m)=>l.dom===m.dom,tm=(l,m)=>{const p=l.dom,y=m.dom;return p===y?!1:p.contains(y)},Wr=Ca,B=(l,m,p,y)=>{const E=l.isiOS()&&/ipad/i.test(p)===!0,A=l.isiOS()&&!E,M=l.isiOS()||l.isAndroid(),L=M||y("(pointer:coarse)"),Z=E||!A&&M&&y("(min-device-width:768px)"),Q=A||M&&!Z,ce=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,Fe=!Q&&!Z&&!ce;return{isiPad:Y(E),isiPhone:Y(A),isTablet:Y(Z),isPhone:Y(Q),isTouch:Y(L),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Y(ce),isDesktop:Y(Fe)}},V=(l,m)=>{for(let p=0;p<l.length;p++){const y=l[p];if(y.test(m))return y}},X=(l,m)=>{const p=V(l,m);if(!p)return{major:0,minor:0};const y=E=>Number(m.replace(p,"$"+E));return ln(y(1),y(2))},ye=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?yt():X(l,p)},yt=()=>ln(0,0),ln=(l,m)=>({major:l,minor:m}),Po={nu:ln,detect:ye,unknown:yt},Sa=(l,m)=>_e(m.brands,p=>{const y=p.brand.toLowerCase();return N(l,E=>{var A;return y===((A=E.brand)==null?void 0:A.toLowerCase())}).map(E=>({current:E.name,version:Po.nu(parseInt(p.version,10),0)}))}),Pc=(l,m)=>{const p=String(m).toLowerCase();return N(l,y=>y.search(p))},un=(l,m)=>Pc(l,m).map(p=>{const y=Po.detect(p.versionRegexes,m);return{current:p.name,version:y}}),$=(l,m)=>Pc(l,m).map(p=>{const y=Po.detect(p.versionRegexes,m);return{current:p.name,version:y}}),K=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,te=l=>m=>ts(m,l),we=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>ts(l,"edge/")&&ts(l,"chrome")&&ts(l,"safari")&&ts(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,K],search:l=>ts(l,"chrome")&&!ts(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>ts(l,"msie")||ts(l,"trident")},{name:"Opera",versionRegexes:[K,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:te("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:te("firefox")},{name:"Safari",versionRegexes:[K,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(ts(l,"safari")||ts(l,"mobile/"))&&ts(l,"applewebkit")}],Ue=[{name:"Windows",search:te("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>ts(l,"iphone")||ts(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:te("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:te("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:te("linux"),versionRegexes:[]},{name:"Solaris",search:te("sunos"),versionRegexes:[]},{name:"FreeBSD",search:te("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:te("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],dt={browsers:Y(we),oses:Y(Ue)},on="Edge",Jn="Chromium",qn="IE",Ps="Opera",As="Firefox",sf="Safari",rf=()=>ri({current:void 0,version:Po.unknown()}),ri=l=>{const m=l.current,p=l.version,y=E=>()=>m===E;return{current:m,version:p,isEdge:y(on),isChromium:y(Jn),isIE:y(qn),isOpera:y(Ps),isFirefox:y(As),isSafari:y(sf)}},V1={unknown:rf,nu:ri},$S="Windows",Iv="iOS",L5="Android",XT="Linux",JT="macOS",QT="Solaris",cu="FreeBSD",e3="ChromeOS",t3=()=>Lv({current:void 0,version:Po.unknown()}),Lv=l=>{const m=l.current,p=l.version,y=E=>()=>m===E;return{current:m,version:p,isWindows:y($S),isiOS:y(Iv),isAndroid:y(L5),isMacOS:y(JT),isLinux:y(XT),isSolaris:y(QT),isFreeBSD:y(cu),isChromeOS:y(e3)}},Fv={unknown:t3,nu:Lv},n3={detect:(l,m,p)=>{const y=dt.browsers(),E=dt.oses(),A=m.bind(Z=>Sa(y,Z)).orThunk(()=>un(y,l)).fold(V1.unknown,V1.nu),M=$(E,l).fold(Fv.unknown,Fv.nu),L=B(M,A,l,p);return{browser:A,os:M,deviceType:L}}},Hv=l=>window.matchMedia(l).matches;let iu=st(()=>n3.detect(window.navigator.userAgent,ne.from(window.navigator.userAgentData),Hv));const bl=()=>iu(),af=(l,m)=>Nt(l,m),o3=(l,m)=>{const p=af(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},Fn=Object.getPrototypeOf,s3=l=>o3("HTMLElement",l),zv=l=>{const m=Nt("ownerDocument.defaultView",l);return Et(l)&&(s3(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Fn(l).constructor.name))},Es=l=>l.dom.nodeName.toLowerCase(),r3=l=>l.dom.nodeType,U1=l=>m=>r3(m)===l,a3=l=>r3(l)===Qd||Es(l)==="#comment",Vv=l=>jr(l)&&zv(l.dom),jr=U1(ru),bg=U1(em),c3=U1(of),He=U1(si),$c=l=>m=>jr(m)&&Es(m)===l,Z1=l=>ot.fromDom(l.dom.ownerDocument),Di=l=>c3(l)?l:Z1(l),Vh=l=>ot.fromDom(Di(l).dom.documentElement),Uv=l=>ot.fromDom(Di(l).dom.defaultView),q=l=>ne.from(l.dom.parentNode).map(ot.fromDom),mc=l=>ne.from(l.dom.parentElement).map(ot.fromDom),nm=(l,m)=>{const p=rc(m)?m:gn;let y=l.dom;const E=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const A=y.parentNode,M=ot.fromDom(A);if(E.push(M),p(M)===!0)break;y=A}return E},Zv=l=>ne.from(l.dom.previousSibling).map(ot.fromDom),vg=l=>ne.from(l.dom.nextSibling).map(ot.fromDom),ia=l=>Vt(l.dom.childNodes,ot.fromDom),fc=(l,m)=>{const p=l.dom.childNodes;return ne.from(p[m]).map(ot.fromDom)},Wv=l=>fc(l,0),jv=(l,m,p,y)=>{const A=Z1(l).dom.createRange();return A.setStart(l.dom,m),A.setEnd(p.dom,y),A},Uh=(l,m,p,y)=>{const E=jv(l,m,p,y),A=mo(l,p)&&m===y;return E.collapsed&&!A},Ua=l=>He(l)&&Zs(l.dom.host),Gv=l=>ot.fromDom(l.dom.getRootNode()),lu=l=>Ua(l)?l:ot.fromDom(Di(l).dom.body),Zh=l=>{const m=Gv(l);return Ua(m)?ne.some(m):ne.none()},qv=l=>ot.fromDom(l.dom.host),Ic=l=>{if(Zs(l.target)){const m=ot.fromDom(l.target);if(jr(m)&&Kv(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return le(p)}}return ne.from(l.target)},Kv=l=>Zs(l.dom.shadowRoot),vl=(l,m,p,y,E,A,M)=>({target:l,x:m,y:p,stop:y,prevent:E,kill:A,raw:M}),om=l=>{const m=ot.fromDom(Ic(l).getOr(l.target)),p=()=>l.stopPropagation(),y=()=>l.preventDefault(),E=Fa(y,p);return vl(m,l.clientX,l.clientY,p,y,E,l)},En=(l,m)=>p=>{l(p)&&m(om(p))},ai=(l,m,p,y,E)=>{const A=En(p,y);return l.dom.addEventListener(m,A,E),{unbind:dn(IS,l,m,A,E)}},W1=(l,m,p,y)=>ai(l,m,p,y,!1),IS=(l,m,p,y)=>{l.dom.removeEventListener(m,p,y)},mn=ve,td=(l,m,p)=>W1(l,m,mn,p),Gs=om,yl=(l,m)=>{q(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},Cl=(l,m)=>{vg(l).fold(()=>{q(l).each(E=>{Qn(E,m)})},y=>{yl(y,m)})},bs=(l,m)=>{Wv(l).fold(()=>{Qn(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},Qn=(l,m)=>{l.dom.appendChild(m.dom)},i3=(l,m,p)=>{fc(l,p).fold(()=>{Qn(l,m)},y=>{yl(y,m)})},l3=(l,m)=>{yl(l,m),Qn(m,l)},uu=(l,m)=>{Me(m,(p,y)=>{const E=y===0?l:m[y-1];Cl(E,p)})},Ri=(l,m)=>{Me(m,p=>{Qn(l,p)})},Sl=(l,m,p)=>{if(ws(p)||ra(p)||oo(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},er=(l,m,p)=>{Sl(l.dom,m,p)},nd=(l,m)=>{const p=l.dom;yn(m,(y,E)=>{Sl(p,E,y)})},Lc=(l,m)=>{yn(m,(p,y)=>{p.fold(()=>{eo(l,y)},E=>{Sl(l.dom,y,E)})})},Mi=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},ci=(l,m)=>ne.from(Mi(l,m)),eo=(l,m)=>{l.dom.removeAttribute(m)},ii=l=>De(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),du=l=>{l.dom.textContent="",Me(ia(l),m=>{la(m)})},la=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},br=l=>{const m=ia(l);m.length>0&&uu(l,m),la(l)},vs=(l,m)=>ot.fromDom(l.dom.cloneNode(m)),Bi=l=>vs(l,!1),_r=l=>vs(l,!0),qs=(l,m)=>{const p=ot.fromTag(m),y=ii(l);return nd(p,y),p},cf=(l,m)=>{const p=qs(l,m),y=ia(_r(l));return Ri(p,y),p},LS=(l,m)=>{const p=qs(l,m);Cl(l,p);const y=ia(l);return Ri(p,y),la(l),p},Yv=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,ia(ot.fromDom(y))},Ar=l=>Vt(l,ot.fromDom),Xv=l=>l.dom.innerHTML,FS=l=>{const m=ot.fromTag("div"),p=ot.fromDom(l.dom.cloneNode(!0));return Qn(m,p),Xv(m)},lf=l=>l.style!==void 0&&rc(l.style.getPropertyValue),Pt=l=>{const m=bg(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return Zh(ot.fromDom(m)).fold(()=>p.body.contains(m),ac(Pt,qv))},Jv=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return ot.fromDom(m)},ir=(l,m,p)=>{if(!ws(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);lf(l)&&l.style.setProperty(m,p)},Or=(l,m)=>{lf(l)&&l.style.removeProperty(m)},Dr=(l,m,p)=>{const y=l.dom;ir(y,m,p)},Ho=(l,m)=>{const p=l.dom;yn(m,(y,E)=>{ir(p,E,y)})},uf=(l,m)=>{const p=l.dom,E=window.getComputedStyle(p).getPropertyValue(m);return E===""&&!Pt(l)?j1(p,m):E},j1=(l,m)=>lf(l)?l.style.getPropertyValue(m):"",Ni=(l,m)=>{const p=l.dom,y=j1(p,m);return ne.from(y).filter(E=>E.length>0)},wl=(l,m)=>{const p=l.dom;Or(p,m),Yt(ci(l,"style").map(Ai),"")&&eo(l,"style")},Qv=(l,m)=>{const p=l.dom,y=m.dom;lf(p)&&lf(y)&&(y.style.cssText=p.style.cssText)},G1=(l,m)=>{const p=(L,Z)=>{if(!oo(Z)&&!Z.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+Z);const Q=L.dom;lf(Q)&&(Q.style[l]=Z+"px")},y=L=>{const Z=m(L);if(Z<=0||Z===null){const Q=uf(L,l);return parseFloat(Q)||0}return Z},E=y,A=(L,Z)=>De(Z,(Q,ce)=>{const Fe=uf(L,ce),at=Fe===void 0?0:parseInt(Fe,10);return isNaN(at)?Q:Q+at},0);return{set:p,get:y,getOuter:E,aggregate:A,max:(L,Z,Q)=>{const ce=A(L,Q);return Z>ce?Z-ce:0}}},q1=(l,m)=>ou(l).getOr(m),od=(l,m,p)=>q1(uf(l,m),p),xl=(l,m,p,y)=>{const E=od(l,`padding-${p}`,0),A=od(l,`padding-${y}`,0),M=od(l,`border-${p}-width`,0),L=od(l,`border-${y}-width`,0);return m-E-A-M-L},u3=(l,m)=>{const p=l.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return xl(l,y,"left","right")},Gr=l=>od(l,"height",l.dom.offsetHeight),El=l=>od(l,"width",l.dom.offsetWidth),mu=l=>u3(l),Hn=G1("height",l=>{const m=l.dom;return Pt(l)?m.getBoundingClientRect().height:m.offsetHeight}),Fc=l=>Hn.get(l),HS=l=>Hn.getOuter(l),K1=Gr,li=G1("width",l=>{const m=l.dom;return Pt(l)?m.getBoundingClientRect().width:m.offsetWidth}),Ht=l=>li.get(l),ds=l=>li.getOuter(l),Rr=mu,zo=El,Pi=(l,m)=>({left:l,top:m,translate:(y,E)=>Pi(l+y,m+E)}),Qo=Pi,Ks=l=>{const m=l.getBoundingClientRect();return Qo(m.left,m.top)},yg=(l,m)=>l!==void 0?l:m!==void 0?m:0,Cn=l=>{const m=l.dom.ownerDocument,p=m.body,y=m.defaultView,E=m.documentElement;if(p===l.dom)return Qo(p.offsetLeft,p.offsetTop);const A=yg(y==null?void 0:y.pageYOffset,E.scrollTop),M=yg(y==null?void 0:y.pageXOffset,E.scrollLeft),L=yg(E.clientTop,p.clientTop),Z=yg(E.clientLeft,p.clientLeft);return $i(l).translate(M-Z,A-L)},$i=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?Qo(y.offsetLeft,y.offsetTop):Pt(l)?Ks(m):Qo(0,0)},Ao=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return Qo(p,y)},ui=(l,m,p)=>{const E=(p!==void 0?p.dom:document).defaultView;E&&E.scrollBy(l,m)},ua=((l,m)=>{const p=A=>{if(!l(A))throw new Error("Can only get "+m+" value of a "+m+" node");return y(A).getOr("")},y=A=>l(A)?ne.from(A.dom.nodeValue):ne.none();return{get:p,getOption:y,set:(A,M)=>{if(!l(A))throw new Error("Can only set raw "+m+" value of a "+m+" node");A.dom.nodeValue=M}}})(bg,"text"),Wh=l=>ua.get(l),zS=l=>ua.getOption(l),jh=(l,m)=>ua.set(l,m),Gh=(l,m)=>p=>df(p)==="rtl"?m:l,df=l=>uf(l,"direction")==="rtl"?"rtl":"ltr",da=(l,m)=>{const p=Mi(l,m);return p===void 0||p===""?[]:p.split(" ")},sd=(l,m,p)=>{const E=da(l,m).concat([p]);return er(l,m,E.join(" ")),!0},d3=(l,m,p)=>{const y=Io(da(l,m),E=>E!==p);return y.length>0?er(l,m,y.join(" ")):eo(l,m),!1};var mf=(l,m,p,y,E)=>l(p,y)?ne.some(p):rc(E)&&E(p)?ne.none():m(p,y,E);const fo=(l,m,p)=>{let y=l.dom;const E=rc(p)?p:gn;for(;y.parentNode;){y=y.parentNode;const A=ot.fromDom(y);if(m(A))return ne.some(A);if(E(A))break}return ne.none()},Y1=(l,m,p)=>mf((E,A)=>A(E),fo,l,m,p),X1=(l,m)=>{const p=E=>m(ot.fromDom(E));return N(l.dom.childNodes,p).map(ot.fromDom)},gc=(l,m)=>{const p=y=>{for(let E=0;E<y.childNodes.length;E++){const A=ot.fromDom(y.childNodes[E]);if(m(A))return ne.some(A);const M=p(y.childNodes[E]);if(M.isSome())return M}return ne.none()};return p(l.dom)},di=(l,m,p)=>fo(l,y=>Ca(y,m),p),Ts=(l,m)=>X1(l,p=>Ca(p,m)),sm=(l,m)=>pl(m,l),tr=(l,m,p)=>mf((E,A)=>Ca(E,A),di,l,m,p),Cg=l=>l.dom.classList!==void 0,J1=l=>da(l,"class"),e2=(l,m)=>sd(l,"class",m),H5=(l,m)=>d3(l,"class",m),Tl=(l,m)=>{Cg(l)?l.dom.classList.add(m):e2(l,m)},m3=l=>{(Cg(l)?l.dom.classList:J1(l)).length===0&&eo(l,"class")},VS=(l,m)=>{Cg(l)?l.dom.classList.remove(m):H5(l,m),m3(l)},kl=(l,m)=>Cg(l)&&l.dom.classList.contains(m),US=(l,m)=>{Me(m,p=>{VS(l,p)})},Sg=l=>tr(l,"[contenteditable]"),qh=(l,m=!1)=>Pt(l)?l.dom.isContentEditable:Sg(l).fold(Y(m),p=>Kh(p)==="true"),Kh=l=>l.dom.contentEditable,t2=l=>m=>{Tl(m,l)},ZS=l=>m=>{US(m,l)},Ii=(l,m,p)=>Io(nm(l,p),m),f3=(l,m)=>Io(ia(l),m),rm=(l,m)=>{let p=[];return Me(ia(l),y=>{m(y)&&(p=p.concat([y])),p=p.concat(rm(y,m))}),p},io=(l,m,p)=>Ii(l,y=>Ca(y,m),p),ma=(l,m)=>f3(l,p=>Ca(p,m)),fu=(l,m)=>au(m,l),n2=(l,m,p,y)=>({parent:l,children:m,element:p,index:y}),am=l=>q(l).bind(m=>{const p=ia(m);return o2(p,l).map(y=>n2(m,p,l,y))}),o2=(l,m)=>Rc(l,dn(mo,m)),WS=(l,m,p)=>fo(l,m,p).isSome(),gu=l=>Es(l)==="img"?1:zS(l).fold(()=>ia(l).length,m=>m.length),hu=l=>zS(l).filter(m=>m.trim().length!==0||m.indexOf(Va)>-1).isSome(),bo=l=>Vv(l)&&Mi(l,"contenteditable")==="false",jS=["img","br"],ns=l=>hu(l)||Ko(jS,Es(l))||bo(l),Yh=l=>gc(l,ns),$s=l=>pu(l,ns),pu=(l,m)=>{const p=y=>{const E=ia(y);for(let A=E.length-1;A>=0;A--){const M=E[A];if(m(M))return ne.some(M);const L=p(M);if(L.isSome())return L}return ne.none()};return p(l)},rd={create:(l,m,p,y)=>({start:l,soffset:m,finish:p,foffset:y})},Q1=Ur.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),GS=(l,m,p,y)=>l.fold(m,p,y),s2=l=>l.fold(tn,tn,tn),g3=Q1.before,Hc=Q1.on,cm=Q1.after,ur={before:g3,on:Hc,after:cm,cata:GS,getStart:s2},Mr=Ur.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),e0=l=>Mr.exact(l.start,l.soffset,l.finish,l.foffset),Xh=l=>l.match({domRange:m=>ot.fromDom(m.startContainer),relative:(m,p)=>ur.getStart(m),exact:(m,p,y,E)=>m}),qS=Mr.domRange,KS=Mr.relative,Li=Mr.exact,z5=l=>{const m=Xh(l);return Uv(m)},ff=rd.create,ad={domRange:qS,relative:KS,exact:Li,exactFromRange:e0,getWin:z5,range:ff},h3=(l,m,p)=>{var y;return ne.from((y=l.caretPositionFromPoint)==null?void 0:y.call(l,m,p)).bind(E=>{if(E.offsetNode===null)return ne.none();const A=l.createRange();return A.setStart(E.offsetNode,E.offset),A.collapse(),ne.some(A)})},t0=(l,m,p)=>{var y;return ne.from((y=l.caretRangeFromPoint)==null?void 0:y.call(l,m,p))},p3=(l,m,p)=>l.caretPositionFromPoint?h3(l,m,p):l.caretRangeFromPoint?t0(l,m,p):ne.none(),Br=(l,m,p)=>{const y=l.document;return p3(y,m,p).map(E=>rd.create(ot.fromDom(E.startContainer),E.startOffset,ot.fromDom(E.endContainer),E.endOffset))},wg=(l,m)=>{const p=Es(l);return p==="input"?ur.after(l):Ko(["br","img"],p)?m===0?ur.before(l):ur.after(l):ur.on(l,m)},b3=(l,m)=>{const p=l.fold(ur.before,wg,ur.after),y=m.fold(ur.before,wg,ur.after);return ad.relative(p,y)},xg=(l,m,p,y)=>{const E=wg(l,m),A=wg(p,y);return ad.relative(E,A)},n0=l=>ne.from(l.getSelection()),YS=(l,m)=>{n0(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},r2=(l,m,p,y,E)=>{const A=Nc(l,m,p,y,E);YS(l,A)},XS=(l,m,p,y,E,A)=>{m.collapse(p.dom,y),m.extend(E.dom,A)},JS=(l,m)=>Qu(l,m).match({ltr:(p,y,E,A)=>{r2(l,p,y,E,A)},rtl:(p,y,E,A)=>{n0(l).each(M=>{if(M.setBaseAndExtent)M.setBaseAndExtent(p.dom,y,E.dom,A);else if(M.extend)try{XS(l,M,p,y,E,A)}catch{r2(l,E,A,p,y)}else r2(l,E,A,p,y)})}}),o0=(l,m,p,y,E)=>{const A=xg(m,p,y,E);JS(l,A)},QS=(l,m,p)=>{const y=b3(m,p);JS(l,y)},Eg=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return ne.some(rd.create(ot.fromDom(m.startContainer),m.startOffset,ot.fromDom(p.endContainer),p.endOffset))}else return ne.none()},v3=l=>{if(l.anchorNode===null||l.focusNode===null)return Eg(l);{const m=ot.fromDom(l.anchorNode),p=ot.fromDom(l.focusNode);return Uh(m,l.anchorOffset,p,l.focusOffset)?ne.some(rd.create(m,l.anchorOffset,p,l.focusOffset)):Eg(l)}},a2=(l,m,p=!0)=>{const E=(p?ya:su)(l,m);YS(l,E)},y3=l=>n0(l).filter(m=>m.rangeCount>0).bind(v3),C3=l=>y3(l).map(m=>ad.exact(m.start,m.soffset,m.finish,m.foffset)),c2=(l,m)=>{const p=We(l,m);return hg(p)},i2=(l,m,p)=>Br(l,m,p),S3=l=>{n0(l).each(m=>m.removeAllRanges())},w3={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},x3=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),y="\\.",E=L=>`(?:${L})?`,M=`[+-]?(?:${["Infinity",l+y+E(l)+E(p),y+l+E(p),l+E(p)].join("|")})`;return new RegExp(`^(${M})(.*)$`)})(),s0=(l,m)=>Xe(m,p=>Xe(w3[p],y=>l===y)),E3=(l,m)=>ne.from(x3.exec(l)).bind(y=>{const E=Number(y[1]),A=y[2];return s0(A,m)?ne.some({value:E,unit:A}):ne.none()}),Fi=l=>Vt(l,Y(0)),Tg=(l,m,p,y,E)=>E(l.slice(0,m)).concat(y).concat(E(l.slice(p))),r0=l=>(m,p,y,E)=>{if(l(y)){const A=Math.max(E,m[p]-Math.abs(y)),M=Math.abs(A-m[p]);return y>=0?M:-M}else return y},Jh=r0(l=>l<0),T3=r0(ve),k3=()=>{const l=(L,Z,Q,ce,Fe)=>{const at=Jh(L,Z,ce,Fe);return Tg(L,Z,Q+1,[at,0],Fi)},m=(L,Z,Q,ce)=>{const Fe=(100+Q)/100,at=Math.max(ce,(L[Z]+Q)/Fe);return Vt(L,(tt,Le)=>(Le===Z?at:tt/Fe)-tt)},p=(L,Z,Q,ce,Fe,at)=>at?m(L,Z,ce,Fe):l(L,Z,Q,ce,Fe);return{resizeTable:(L,Z)=>L(Z),clampTableDelta:Jh,calcLeftEdgeDeltas:p,calcMiddleDeltas:(L,Z,Q,ce,Fe,at,tt)=>p(L,Q,ce,Fe,at,tt),calcRightEdgeDeltas:(L,Z,Q,ce,Fe,at)=>{if(at)return m(L,Q,ce,Fe);{const tt=Jh(L,Q,ce,Fe);return Fi(L.slice(0,Q)).concat([tt])}},calcRedestributedWidths:(L,Z,Q,ce)=>{if(ce){const at=(Z+Q)/Z,tt=Vt(L,Le=>Le/at);return{delta:at*100-100,newSizes:tt}}else return{delta:Q,newSizes:L}}}},ew=()=>{const l=(M,L,Z,Q,ce)=>{const Fe=Q>=0?Z:L,at=T3(M,Fe,Q,ce);return Tg(M,L,Z+1,[at,-at],Fi)};return{resizeTable:(M,L,Z)=>{Z&&M(L)},clampTableDelta:(M,L,Z,Q,ce)=>{if(ce){if(Z>=0)return Z;{const Fe=De(M,(at,tt)=>at+tt-Q,0);return Math.max(-Fe,Z)}}else return Jh(M,L,Z,Q)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(M,L,Z,Q,ce,Fe)=>l(M,Z,Q,ce,Fe),calcRightEdgeDeltas:(M,L,Z,Q,ce,Fe)=>{if(Fe)return Fi(M);{const at=Q/M.length;return Vt(M,Y(at))}},calcRedestributedWidths:(M,L,Z,Q)=>({delta:0,newSizes:M})}},cd=(l,m,p=0)=>ci(l,m).map(y=>parseInt(y,10)).getOr(p),Qh=(l,m)=>cd(l,m,1),im=l=>$c("col")(l)?cd(l,"span",1)>1:Qh(l,"colspan")>1,_3=l=>Qh(l,"rowspan")>1,Ys=(l,m)=>parseInt(uf(l,m),10),Is=Y(10),lm=Y(10),id=(l,m)=>l2(l,m,ve),l2=(l,m,p)=>cs(ia(l),y=>Ca(y,m)?p(y)?[y]:[]:l2(y,m,p)),Kr=(l,m,p=gn)=>{if(p(m))return ne.none();if(Ko(l,Es(m)))return ne.some(m);const y=E=>Ca(E,"table")||p(E);return di(m,l.join(","),y)},u2=(l,m)=>Kr(["td","th"],l,m),um=l=>id(l,"th,td"),a0=l=>Ca(l,"colgroup")?ma(l,"col"):cs(hc(l),m=>ma(m,"col")),zc=(l,m)=>tr(l,"table",m),d2=l=>id(l,"tr"),hc=l=>zc(l).fold(Y([]),m=>ma(m,"colgroup")),ys=$c("th"),c0=l=>So(l,m=>ys(m.element)),kg=(l,m)=>l&&m?"sectionCells":l?"section":"cells",tw=l=>{const m=l.section==="thead",p=Yt(m2(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:kg(m,p)}:{type:"body"}},m2=l=>{const m=Io(l,p=>ys(p.element));return m.length===0?ne.some("td"):m.length===l.length?ne.some("th"):ne.none()},nw=l=>{const m=Vt(l,E=>tw(E).type),p=Ko(m,"header"),y=Ko(m,"footer");if(!p&&!y)return ne.some("body");{const E=Ko(m,"body");return p&&!E&&!y?ne.some("header"):!p&&!E&&y?ne.some("footer"):ne.none()}},ow=l=>_e(l.all,m=>{const p=tw(m);return p.type==="header"?ne.from(p.subType):ne.none()}),i0=(l,m)=>Vt(l,p=>{if(Es(p)==="colgroup"){const y=Vt(a0(p),E=>{const A=cd(E,"span",1);return uc(E,1,A)});return Yd(p,y,"colgroup")}else{const y=Vt(um(p),E=>{const A=cd(E,"rowspan",1),M=cd(E,"colspan",1);return uc(E,A,M)});return Yd(p,y,m(p))}}),_g=l=>q(l).map(m=>{const p=Es(m);return qd(p)?p:"tbody"}).getOr("tbody"),l0=l=>{const m=d2(l),y=[...hc(l),...m];return i0(y,_g)},Ye=(l,m)=>i0(l,()=>m),Za="data-snooker-locked-cols",A3=l=>ci(l,Za).bind(m=>ne.from(m.match(/\d+/g))).map(m=>vt(m,ve)),wa=l=>{const m=De(ls(l).rows,(y,E)=>(Me(E.cells,(A,M)=>{A.isLocked&&(y[M]=!0)}),y),{}),p=ca(m,(y,E)=>parseInt(E,10));return jn(p)},mi=(l,m)=>l+","+m,u0=(l,m,p)=>ne.from(l.access[mi(m,p)]),O3=(l,m,p)=>{const y=dm(l,E=>p(m,E.element));return y.length>0?ne.some(y[0]):ne.none()},dm=(l,m)=>{const p=cs(l.all,y=>y.cells);return Io(p,m)},D3=l=>{const m={};let p=0;return Me(l.cells,y=>{const E=y.colspan;Yo(E,A=>{const M=p+A;m[M]=z1(y.element,E,M)}),p+=E}),m},Wa=l=>{const m={},p=[],E=le(l).map(tt=>tt.element).bind(zc).bind(A3).getOr({});let A=0,M=0,L=0;const{pass:Z,fail:Q}=Qs(l,tt=>tt.section==="colgroup");Me(Q,tt=>{const Le=[];Me(tt.cells,je=>{let Pe=0;for(;m[mi(L,Pe)]!==void 0;)Pe++;const Bt=is(E,Pe.toString()),Qt=Oi(je.element,je.rowspan,je.colspan,L,Pe,Bt);for(let mt=0;mt<je.colspan;mt++)for(let Yn=0;Yn<je.rowspan;Yn++){const qt=L+Yn,no=Pe+mt,Os=mi(qt,no);m[Os]=Qt,M=Math.max(M,no+1)}Le.push(Qt)}),A++,p.push(Yd(tt.element,Le,tt.section)),L++});const{columns:ce,colgroups:Fe}=Bs(Z).map(tt=>{const Le=D3(tt);return{colgroups:[mg(tt.element,Gn(Le))],columns:Le}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:uo(A,M),access:m,all:p,columns:ce,colgroups:Fe}},rn={fromTable:l=>{const m=l0(l);return Wa(m)},generate:Wa,getAt:u0,findItem:O3,filterItems:dm,justCells:l=>cs(l.all,m=>m.cells),justColumns:l=>Gn(l.columns),hasColumns:l=>ge(l.columns).length>0,getColumnAt:(l,m)=>ne.from(l.columns[m])},ld=(l,m,p)=>Tr(p(l.element,m),!0,l.isLocked),Ag=(l,m)=>l.section!==m?ti(l.element,l.cells,m,l.isNew):l,os=()=>({transformRow:Ag,transformCell:(l,m,p)=>{const y=p(l.element,m),E=Es(y)!=="td"?LS(y,"td"):y;return Tr(E,l.isNew,l.isLocked)}}),gi=()=>({transformRow:Ag,transformCell:ld}),ep=()=>({transformRow:(l,m)=>Ag(l,m==="thead"?"tbody":m),transformCell:ld}),ud={getTableSectionType:(l,m)=>{const p=rn.fromTable(l);switch(ow(p).getOr(m)){case"section":return os();case"sectionCells":return gi();case"cells":return ep()}},section:os,sectionCells:gi,cells:ep,fallback:()=>({transformRow:tn,transformCell:ld})},Og=(l,m=ve)=>{const p=l.grid,y=Yo(p.columns,tn),E=Yo(p.rows,tn);return Vt(y,A=>g2(()=>cs(E,Q=>rn.getAt(l,Q,A).filter(ce=>ce.column===A).toArray()),Q=>Q.colspan===1&&m(Q.element),()=>rn.getAt(l,0,A)))},g2=(l,m,p)=>{const y=l();return N(y,m).orThunk(()=>ne.from(y[0]).orThunk(p)).map(M=>M.element)},h2=l=>{const m=l.grid,p=Yo(m.rows,tn),y=Yo(m.columns,tn);return Vt(p,E=>g2(()=>cs(y,Z=>rn.getAt(l,E,Z).filter(Q=>Q.row===E).fold(Y([]),Q=>[Q])),Z=>Z.rowspan===1,()=>rn.getAt(l,E,0)))},hi=(l,m)=>{if(m<0||m>=l.length-1)return ne.none();const p=l[m].fold(()=>{const E=aa(l.slice(0,m));return _e(E,(A,M)=>A.map(L=>({value:L,delta:M+1})))},E=>ne.some({value:E,delta:0})),y=l[m+1].fold(()=>{const E=l.slice(m+1);return _e(E,(A,M)=>A.map(L=>({value:L,delta:M+1})))},E=>ne.some({value:E,delta:1}));return p.bind(E=>y.map(A=>{const M=A.delta+E.delta;return Math.abs(A.value-E.value)/M}))},tp=(l,m)=>({row:l,y:m}),np=(l,m)=>({col:l,x:m}),R3=l=>Cn(l).left+ds(l),rw=l=>Cn(l).left,op=(l,m)=>np(l,rw(m)),p2=(l,m)=>np(l,R3(m)),d0=l=>Cn(l).top,M3=(l,m)=>tp(l,d0(m)),B3=(l,m)=>tp(l,d0(m)+HS(m)),b2=(l,m,p)=>{if(p.length===0)return[];const y=Vt(p.slice(1),(A,M)=>A.map(L=>l(M,L))),E=p[p.length-1].map(A=>m(p.length-1,A));return y.concat([E])},N3=l=>-l,sp={delta:tn,positions:l=>b2(M3,B3,l),edge:d0},kt=Gh({delta:tn,edge:rw,positions:l=>b2(op,p2,l)},{delta:N3,edge:R3,positions:l=>b2(p2,op,l)}),Cs={delta:(l,m)=>kt(m).delta(l,m),positions:(l,m)=>kt(m).positions(l,m),edge:l=>kt(l).edge(l)},Dg=/(\d+(\.\d+)?)%/,aw=/(\d+(\.\d+)?)px|em/,gf=$c("col"),Rg=$c("tr"),v2=(l,m,p)=>{const y=mc(l).getOrThunk(()=>Jv(Z1(l)));return m(l)/p(y)*100},hf=(l,m)=>{Dr(l,"width",m+"px")},cw=(l,m)=>{Dr(l,"width",m+"%")},bu=(l,m)=>{Dr(l,"height",m+"px")},iw=l=>{wl(l,"height")},y2=l=>K1(l)+"px",es=(l,m,p,y)=>{const E=zc(l).map(A=>{const M=p(A);return Math.floor(m/100*M)}).getOr(m);return y(l,E),E},pi=(l,m,p,y)=>{const E=parseFloat(l);return jd(l,"%")&&Es(m)!=="table"?es(m,E,p,y):E},xa=l=>{const m=y2(l);return m?pi(m,l,Fc,bu):Fc(l)},Mg=(l,m,p)=>{const y=p(l),E=Qh(l,m);return y/E},Ea=(l,m)=>Ni(l,m).orThunk(()=>ci(l,m).map(p=>p+"px")),pf=l=>Ea(l,"width"),dr=l=>Ea(l,"height"),Ta=l=>v2(l,Ht,Rr),m0=l=>gf(l)?Math.round(Ht(l)):zo(l),Be=l=>Rg(l)?Fc(l):Mg(l,"rowspan",xa),ja=l=>pf(l).bind(p=>E3(p,["fixed","relative","empty"])),rp=(l,m,p)=>{Dr(l,"width",m+p)},ms=l=>Ht(l)+"px",Hi=l=>Fc(l)+"px",vc=l=>v2(l,Ht,Rr)+"%",P3=l=>pf(l).exists(m=>Dg.test(m)),vu=l=>pf(l).exists(m=>aw.test(m)),lw=l=>pf(l).isNone(),Ga=Y(Dg),to=$c("col"),_l=l=>pf(l).getOrThunk(()=>m0(l)+"px"),Bg=l=>dr(l).getOrThunk(()=>Be(l)+"px"),fs=l=>Vt(rn.justColumns(l),m=>ne.from(m.element)),C2=l=>{const m=bl().browser,p=m.isChromium()||m.isFirefox();return to(l)?p:!0},S2=(l,m,p,y,E,A)=>l.filter(y).fold(()=>A(hi(p,m)),M=>E(M)),zi=(l,m,p,y)=>{const E=Og(l),A=rn.hasColumns(l)?fs(l):E,M=[ne.some(Cs.edge(m))].concat(Vt(Cs.positions(E,m),Z=>Z.map(Q=>Q.x))),L=ie(im);return Vt(A,(Z,Q)=>S2(Z,Q,M,L,ce=>{if(C2(ce))return p(ce);{const Fe=ef(E[Q],tn);return S2(Fe,Q,M,L,at=>y(ne.some(Math.round(Ht(at)))),y)}},y))},f0=l=>l.map(m=>m+"px").getOr(""),qa=(l,m)=>zi(l,m,_l,f0),$3=(l,m,p)=>zi(l,m,Ta,y=>y.fold(()=>p.minCellWidth(),E=>E/p.pixelWidth()*100)),de=(l,m,p)=>zi(l,m,m0,y=>y.getOrThunk(p.minCellWidth)),Vc=(l,m,p,y)=>{const E=h2(l),A=Vt(l.all,L=>ne.some(L.element)),M=[ne.some(sp.edge(m))].concat(Vt(sp.positions(E,m),L=>L.map(Z=>Z.y)));return Vt(A,(L,Z)=>S2(L,Z,M,ve,p,y))},ap=(l,m)=>Vc(l,m,Be,p=>p.getOrThunk(lm)),ss=(l,m)=>Vc(l,m,Bg,f0),ka=(l,m)=>()=>Pt(l)?m(l):parseFloat(Ni(l,"width").getOr("0")),or=l=>{const m=ka(l,Ht),p=Y(0);return{width:m,pixelWidth:m,getWidths:(E,A)=>de(E,l,A),getCellDelta:p,singleColumnWidth:Y([0]),minCellWidth:p,setElementWidth:Rt,adjustTableWidth:Rt,isRelative:!0,label:"none"}},xo=l=>{const m=ka(l,Z=>parseFloat(vc(Z))),p=ka(l,Ht);return{width:m,pixelWidth:p,getWidths:(Z,Q)=>$3(Z,l,Q),getCellDelta:Z=>Z/p()*100,singleColumnWidth:(Z,Q)=>[100-Z],minCellWidth:()=>Is()/p()*100,setElementWidth:cw,adjustTableWidth:Z=>{const Q=m(),ce=Z/100*Q,Fe=Q+ce;cw(l,Fe)},isRelative:!0,label:"percent"}},uw=l=>{const m=ka(l,Ht);return{width:m,pixelWidth:m,getWidths:(M,L)=>de(M,l,L),getCellDelta:tn,singleColumnWidth:(M,L)=>[Math.max(Is(),M+L)-M],minCellWidth:Is,setElementWidth:hf,adjustTableWidth:M=>{const L=m()+M;hf(l,L)},isRelative:!1,label:"pixel"}},mm=(l,m)=>Ga().exec(m)!==null?xo(l):uw(l),Ng={getTableSize:l=>pf(l).fold(()=>or(l),p=>mm(l,p)),pixelSize:uw,percentageSize:xo,noneSize:or},cp=(l,m,p,y)=>{p===y?eo(l,m):er(l,m,p)},w2=(l,m,p)=>{Bs(ma(l,m)).fold(()=>bs(l,p),y=>Cl(y,p))},x2=(l,m)=>{const p=Ts(l,m).getOrThunk(()=>{const y=ot.fromTag(m,Z1(l).dom);return m==="thead"?w2(l,"caption,colgroup",y):m==="colgroup"?w2(l,"caption",y):Qn(l,y),y});return du(p),p},gm=(l,m)=>{const p=[],y=[],E=tt=>Vt(tt,Le=>{Le.isNew&&p.push(Le.element);const je=Le.element;return du(je),Me(Le.cells,Pe=>{Pe.isNew&&y.push(Pe.element),cp(Pe.element,"colspan",Pe.colspan,1),cp(Pe.element,"rowspan",Pe.rowspan,1),Qn(je,Pe.element)}),je}),A=tt=>cs(tt,Le=>Vt(Le.cells,je=>(cp(je.element,"span",je.colspan,1),je.element))),M=(tt,Le)=>{const je=x2(l,Le),Bt=(Le==="colgroup"?A:E)(tt);Ri(je,Bt)},L=tt=>{Ts(l,tt).each(la)},Z=(tt,Le)=>{tt.length>0?M(tt,Le):L(Le)},Q=[],ce=[],Fe=[],at=[];return Me(m,tt=>{switch(tt.section){case"thead":Q.push(tt);break;case"tbody":ce.push(tt);break;case"tfoot":Fe.push(tt);break;case"colgroup":at.push(tt);break}}),Z(at,"colgroup"),Z(Q,"thead"),Z(ce,"tbody"),Z(Fe,"tfoot"),{newRows:p,newCells:y}},Pg=l=>Vt(l,m=>{const p=Bi(m.element);return Me(m.cells,y=>{const E=_r(y.element);cp(E,"colspan",y.colspan,1),cp(E,"rowspan",y.rowspan,1),Qn(p,E)}),p}),dw=(l,m)=>Vt(l,p=>Wt(p,m)),E2=(l,m)=>l[m],I3=(l,m)=>{if(l.length===0)return 0;const p=l[0];return Rc(l,E=>!m(p.element,E.element)).getOr(l.length)},Yr=(l,m,p,y)=>{const E=E2(l,m),A=E.section==="colgroup",M=I3(E.cells.slice(p),y),L=A?1:I3(dw(l.slice(m),p),y);return{colspan:M,rowspan:L}},yc=(l,m)=>{const p=Vt(l,E=>Vt(E.cells,gn)),y=(E,A,M,L)=>{for(let Z=E;Z<E+M;Z++)for(let Q=A;Q<A+L;Q++)p[Z][Q]=!0};return Vt(l,(E,A)=>{const M=cs(E.cells,(L,Z)=>{if(p[A][Z]===!1){const Q=Yr(l,A,Z,m);return y(A,Z,Q.rowspan,Q.colspan),[_s(L.element,Q.rowspan,Q.colspan,L.isNew)]}else return[]});return dc(E.element,M,E.section,E.isNew)})},ks=(l,m,p)=>{const y=[];Me(l.colgroups,E=>{const A=[];for(let M=0;M<l.grid.columns;M++){const L=rn.getColumnAt(l,M).map(Z=>Tr(Z.element,p,!1)).getOrThunk(()=>Tr(m.colGap(),!0,!1));A.push(L)}y.push(ti(E.element,A,"colgroup",p))});for(let E=0;E<l.grid.rows;E++){const A=[];for(let Z=0;Z<l.grid.columns;Z++){const Q=rn.getAt(l,E,Z).map(ce=>Tr(ce.element,p,ce.isLocked)).getOrThunk(()=>Tr(m.gap(),!0,!1));A.push(Q)}const M=l.all[E],L=ti(M.element,A,M.section,p);y.push(L)}return y},hm=(l,m)=>ks(l,m,!1),ip=l=>yc(l,mo),Ka=(l,m)=>_e(l.all,p=>N(p.cells,y=>mo(m,y.element))),$g=(l,m,p)=>{const y=Vt(m.selection,A=>u2(A).bind(M=>Ka(l,M)).filter(p)),E=Xo(y);return Yu(E.length>0,E)},Xs=(l,m,p,y,E,A,M,L,Z)=>{const Q=rn.fromTable(A),ce=ne.from(Z==null?void 0:Z.section).getOrThunk(ud.fallback);return m(Q,M).map(at=>{const tt=hm(Q,L),Le=l(tt,at,mo,E(L),ce),je=wa(Le.grid),Pe=ip(Le.grid);return{info:at,grid:Pe,cursor:Le.cursor,lockedColumns:je}}).bind(at=>{const tt=gm(A,at.grid),Le=ne.from(Z==null?void 0:Z.sizing).getOrThunk(()=>Ng.getTableSize(A)),je=ne.from(Z==null?void 0:Z.resize).getOrThunk(ew);return p(A,at.grid,at.info,{sizing:Le,resize:je,section:ce}),y(A),eo(A,Za),at.lockedColumns.length>0&&er(A,Za,at.lockedColumns.join(",")),ne.some({cursor:at.cursor,newRows:tt.newRows,newCells:tt.newCells})})},g0=(l,m)=>u2(m.element).bind(p=>Ka(l,p).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),Uc=(l,m)=>$g(l,m,ve).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Vi=(l,m)=>m.mergable,T2=(l,m)=>m.unmergable,mr=(l,m)=>$g(l,m,ve),Ig=(l,m)=>$g(l,m,p=>!p.isLocked),Al=(l,m)=>Ka(l,m).exists(p=>!p.isLocked),bf=(l,m)=>So(m,p=>Al(l,p)),vf=(l,m)=>Vi(l,m).filter(p=>bf(l,p.cells)),L3=(l,m)=>T2(l,m).filter(p=>bf(l,p)),dd={...Ur.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},lp=(l,m)=>l.length===0?dd.none():l.length===1?dd.only(0):m===0?dd.left(0,1):m===l.length-1?dd.right(m-1,m):m>0&&m<l.length-1?dd.middle(m-1,m,m+1):dd.none(),Eo=(l,m,p,y,E)=>{const A=l.slice(0),M=lp(l,m),L=Y(Vt(A,Y(0))),Z=at=>y.singleColumnWidth(A[at],p),Q=(at,tt)=>E.calcLeftEdgeDeltas(A,at,tt,p,y.minCellWidth(),y.isRelative),ce=(at,tt,Le)=>E.calcMiddleDeltas(A,at,tt,Le,p,y.minCellWidth(),y.isRelative),Fe=(at,tt)=>E.calcRightEdgeDeltas(A,at,tt,p,y.minCellWidth(),y.isRelative);return M.fold(L,Z,Q,ce,Fe)},mw=(l,m,p)=>{let y=0;for(let E=l;E<m;E++)y+=p[E]!==void 0?p[E]:0;return y},md=(l,m)=>{const p=rn.justCells(l);return Vt(p,y=>{const E=mw(y.column,y.column+y.colspan,m);return{element:y.element,width:E,colspan:y.colspan}})},Lg=(l,m)=>{const p=rn.justColumns(l);return Vt(p,(y,E)=>({element:y.element,width:m[E],colspan:y.colspan}))},p0=(l,m)=>Vt(l.all,(p,y)=>({element:p.element,height:m[y]})),fd=l=>hs(l,(m,p)=>m+p,0),Nr=(l,m)=>rn.hasColumns(l)?Lg(l,m):md(l,m),yf=(l,m,p)=>{const y=Nr(l,m);Me(y,E=>{p.setElementWidth(E.element,E.width)})},Fg=(l,m,p,y,E)=>{const A=rn.fromTable(l),M=E.getCellDelta(m),L=E.getWidths(A,E),Z=p===A.grid.columns-1,Q=y.clampTableDelta(L,p,M,E.minCellWidth(),Z),ce=Eo(L,p,Q,E,y),Fe=Vt(ce,(at,tt)=>at+L[tt]);yf(A,Fe,E),y.resizeTable(E.adjustTableWidth,Q,Z)},b0=(l,m,p)=>{const y=rn.fromTable(l),E=ap(y,l),A=Vt(E,(Z,Q)=>p===Q?Math.max(m+Z,lm()):Z),M=p0(y,A);Me(M,Z=>{bu(Z.element,Z.height)}),Me(rn.justCells(y),Z=>{iw(Z.element)});const L=fd(A);bu(l,L)},v0=(l,m,p,y,E)=>{const A=rn.generate(m),M=y.getWidths(A,y),L=y.pixelWidth(),{newSizes:Z,delta:Q}=E.calcRedestributedWidths(M,L,p.pixelDelta,y.isRelative);yf(A,Z,y),y.adjustTableWidth(Q)},y0=(l,m,p,y)=>{const E=rn.generate(m),A=y.getWidths(E,y);yf(E,A,y)},up=(l,m)=>{im(l)||ja(l).each(y=>{const E=y.value/2;rp(l,E,y.unit),rp(m,E,y.unit)})},fw=(l,m,p)=>{const y=cd(l,m,1);p===1||y<=1?eo(l,m):er(l,m,Math.min(p,y))},k2=(l,m)=>p=>{const y=p.column+p.colspan-1,E=p.column;return y>=l&&E<m},_2=(l,m,p)=>{if(rn.hasColumns(l)){const y=Io(rn.justColumns(l),k2(m,p)),E=Vt(y,M=>{const L=_r(M.element);return fw(L,"span",p-m),L}),A=ot.fromTag("colgroup");return Ri(A,E),[A]}else return[]},Hg=(l,m,p)=>Vt(l.all,y=>{const E=Io(y.cells,k2(m,p)),A=Vt(E,L=>{const Z=_r(L.element);return fw(Z,"colspan",p-m),Z}),M=ot.fromTag("tr");return Ri(M,A),M}),Ol=(l,m)=>{const p=rn.fromTable(l);return Ig(p,m).map(E=>{const A=E[E.length-1],M=E[0].column,L=A.column+A.colspan,Z=_2(p,M,L),Q=Hg(p,M,L);return[...Z,...Q]})},bi=(l,m,p)=>{const y=rn.fromTable(l);return mr(y,m).bind(A=>{const M=ks(y,p,!1),Z=ls(M).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),Q=cs(Z,Fe=>{const at=Io(Fe.cells,tt=>!tt.isLocked);return at.length>0?[{...Fe,cells:at}]:[]}),ce=ip(Q);return Yu(ce.length>0,ce)}).map(A=>Pg(A))},gd=(l,m,p,y,E,A)=>({minRow:l,minCol:m,maxRow:p,maxCol:y,allCells:E,selectedCells:A}),gw=(l,m)=>{const p=l.grid.columns;let E=l.grid.rows,A=p,M=0,L=0;const Z=[],Q=[];return yn(l.access,ce=>{if(Z.push(ce),m(ce)){Q.push(ce);const Fe=ce.row,at=Fe+ce.rowspan-1,tt=ce.column,Le=tt+ce.colspan-1;Fe<E?E=Fe:at>M&&(M=at),tt<A?A=tt:Le>L&&(L=Le)}}),gd(E,A,M,L,Z,Q)},C0=(l,m,p)=>{const y=l[p].element,E=ot.fromTag("td");Qn(E,ot.fromTag("br")),(m?Qn:bs)(y,E)},A2=(l,m,p,y)=>{const E=Io(l,L=>L.section!=="colgroup"),A=m.grid.columns,M=m.grid.rows;for(let L=0;L<M;L++){let Z=!1;for(let Q=0;Q<A;Q++)L<p.minRow||L>p.maxRow||Q<p.minCol||Q>p.maxCol||(rn.getAt(m,L,Q).filter(y).isNone()?C0(E,Z,L):Z=!0)}},hw=(l,m,p,y)=>{yn(p.columns,M=>{(M.column<m.minCol||M.column>m.maxCol)&&la(M.element)});const E=Io(id(l,"tr"),M=>M.dom.childElementCount===0);Me(E,la),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Me(id(l,"th,td"),M=>{eo(M,"rowspan"),eo(M,"colspan")}),eo(l,Za),eo(l,"data-snooker-col-series"),Ng.getTableSize(l).adjustTableWidth(y)},O2=(l,m,p,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const E=de(m,l,p),A=De(E,(Q,ce)=>Q+ce,0),Z=De(E.slice(y.minCol,y.maxCol+1),(Q,ce)=>Q+ce,0)/A*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(Z)},S0=(l,m)=>{const p=at=>Ca(at.element,m),y=_r(l),E=l0(y),A=Ng.getTableSize(l),M=rn.generate(E),L=gw(M,p),Z="th:not("+m+"),td:not("+m+")",Q=l2(y,"th,td",at=>Ca(at,Z));Me(Q,la),A2(E,M,L,p);const ce=rn.fromTable(l),Fe=O2(l,ce,A,L);return hw(y,L,M,Fe),y},w0=$c("col"),x0=$c("colgroup"),Dl=l=>Es(l)==="tr"||x0(l),dp=l=>{const m=cd(l,"colspan",1),p=cd(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},zg=(l,m=dp)=>{const p=L=>w0(L.element)?l.col(L):l.cell(L),y=L=>x0(L.element)?l.colgroup(L):l.row(L),E=L=>{if(Dl(L))return y({element:L});{const Z=L,Q=p(m(Z));return A=ne.some({item:Z,replacement:Q}),Q}};let A=ne.none();return{getOrInit:(L,Z)=>A.fold(()=>E(L),Q=>Z(L,Q.item)?Q.replacement:E(L))}},Cf=l=>m=>{const p=[],y=(M,L)=>N(p,Z=>L(Z.item,M)),E=M=>{const L=l==="td"?{scope:null}:{},Z=m.replace(M,l,L);return p.push({item:M,sub:Z}),Z};return{replaceOrInit:(M,L)=>{if(Dl(M)||w0(M))return M;{const Z=M;return y(Z,L).fold(()=>E(Z),Q=>L(M,Q.item)?Q.sub:E(Z))}}}},pw=l=>ci(l,"scope").map(m=>m.substr(0,3)),_a={modification:zg,transform:Cf,merging:l=>({unmerge:y=>{const E=pw(y);return E.each(A=>er(y,"scope",A)),()=>{const A=l.cell({element:y,colspan:1,rowspan:1});return wl(A,"width"),wl(y,"width"),E.each(M=>er(A,"scope",M)),A}},merge:y=>{const E=()=>{const A=Xo(Vt(y,pw));if(A.length===0)return ne.none();{const M=A[0],L=["row","col"];return Xe(A,Q=>Q!==M&&Ko(L,Q))?ne.none():ne.from(M)}};return wl(y[0],"width"),E().fold(()=>eo(y[0],"scope"),A=>er(y[0],"scope",A+"group")),Y(y[0])}})},F3=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),y=ip(p);return cs(y,E=>{const A=E.cells.slice(0,m[m.length-1].column+1);return Vt(A,M=>M.element)})},D2=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),y=ip(p);return cs(y,E=>{const A=E.cells.slice(m[0].column+m[0].colspan-1,E.cells.length);return Vt(A,M=>M.element)})},R2=(l,m,p)=>{const y=rn.fromTable(l);return mr(y,m).map(A=>{const M=ks(y,p,!1),{rows:L}=ls(M),Z=F3(L,A),Q=D2(L,A);return{upOrLeftCells:Z,downOrRightCells:Q}})},vw={only:(l,m)=>{const p=c3(l)?Vh(l):l;return{parent:Y(p),view:Y(l),dragContainer:Y(p),origin:Y(Qo(0,0)),isResizable:m}},detached:(l,m,p)=>{const y=()=>Cn(m);return{parent:Y(m),view:Y(l),dragContainer:Y(m),origin:y,isResizable:p}},body:(l,m)=>({parent:Y(l),view:Y(l),dragContainer:Y(l),origin:()=>Cn(l),isResizable:m})},mp=Ur.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),M2=(l,m,p)=>{const y=p.substring(0,p.length-l.length),E=parseFloat(y);return y===E.toString()?m(E):mp.invalid(p)},_n={...mp,from:l=>jd(l,"%")?M2("%",mp.percent,l):jd(l,"px")?M2("px",mp.pixels,l):mp.invalid(l)},T0=(l,m)=>Vt(l,p=>_n.from(p).fold(()=>p,E=>E/m*100+"%",E=>E+"%")),Nn=(l,m,p)=>{const y=p/m;return Vt(l,E=>_n.from(E).fold(()=>E,M=>M*y+"px",M=>M/100*p+"px"))},Cc=(l,m)=>{const p=l.fold(()=>Y(""),y=>{const E=y/m;return Y(E+"px")},()=>{const y=100/m;return Y(y+"%")});return Yo(m,p)},pm=(l,m,p)=>l.fold(()=>m,y=>Nn(m,p,y),y=>T0(m,p)),fp=(l,m,p)=>{const y=_n.from(p),E=So(l,A=>A==="0px")?Cc(y,l.length):pm(y,l,m);return H3(E)},Kn=(l,m)=>l.length===0?m:hs(l,(p,y)=>_n.from(y).fold(Y(0),tn,tn)+p,0),Cw=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},Sw=(l,m)=>_n.from(l).fold(Y(l),p=>p+m+"px",p=>p+m+"%"),H3=l=>{if(l.length===0)return l;const m=hs(l,(y,E)=>{const A=_n.from(E).fold(()=>({value:E,remainder:0}),M=>Cw(M,"px"),M=>({value:M+"%",remainder:0}));return{output:[A.value].concat(y.output),remainder:y.remainder+A.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Sw(p[p.length-1],Math.round(m.remainder))])},wf=_n.from,gp=(l,m,p)=>{Me(m,y=>{const E=l.slice(y.column,y.colspan+y.column),A=Kn(E,Is());Dr(y.element,"width",A+p)})},ww=(l,m,p)=>{Me(m,(y,E)=>{const A=Kn([l[E]],Is());Dr(y.element,"width",A+p)})},z3=(l,m,p)=>{Me(p,y=>{wl(y.element,"height")}),Me(m,(y,E)=>{Dr(y.element,"height",l[E])})},V3=l=>wf(l).fold(Y("px"),Y("px"),Y("%")),xw=(l,m,p)=>{const y=rn.fromTable(l),E=y.all,A=rn.justCells(y),M=rn.justColumns(y);m.each(L=>{const Z=V3(L),Q=Ht(l),ce=qa(y,l),Fe=fp(ce,Q,L);rn.hasColumns(y)?ww(Fe,M,Z):gp(Fe,A,Z),Dr(l,"width",L)}),p.each(L=>{const Z=Fc(l),Q=ss(y,l),ce=fp(Q,Z,L);z3(ce,E,A),Dr(l,"height",L)})},Ew=P3,U3=vu,Z3=lw;var xf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Sc=()=>{const l=Q=>ot.fromDom(Q.dom.cloneNode(!1)),m=Q=>Di(Q).dom,p=Q=>jr(Q)?Es(Q)==="body"?!0:Ko(xf,Es(Q)):!1,y=Q=>jr(Q)?Ko(["br","img","hr","input"],Es(Q)):!1,E=Q=>jr(Q)&&Mi(Q,"contenteditable")==="false",A=(Q,ce)=>Q.dom.compareDocumentPosition(ce.dom),M=(Q,ce)=>{const Fe=ii(Q);nd(ce,Fe)},L=Q=>{const ce=Es(Q);return Ko(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ce)},Z=Q=>jr(Q)?ci(Q,"lang"):ne.none();return{up:Y({selector:di,closest:tr,predicate:fo,all:nm}),down:Y({selector:fu,predicate:rm}),styles:Y({get:uf,getRaw:Ni,set:Dr,remove:wl}),attrs:Y({get:Mi,set:er,remove:eo,copyTo:M}),insert:Y({before:yl,after:Cl,afterAll:uu,append:Qn,appendAll:Ri,prepend:bs,wrap:l3}),remove:Y({unwrap:br,remove:la}),create:Y({nu:ot.fromTag,clone:l,text:ot.fromText}),query:Y({comparePosition:A,prevSibling:Zv,nextSibling:vg}),property:Y({children:ia,name:Es,parent:q,document:m,isText:bg,isComment:a3,isElement:jr,isSpecial:L,getLanguage:Z,getText:Wh,setText:jh,isBoundary:p,isEmptyTag:y,isNonEditable:E}),eq:mo,is:Wr}};const sr=(l,m)=>({item:l,mode:m}),bm=(l,m,p,y=Ui)=>l.property().parent(m).map(E=>sr(E,y)),Ui=(l,m,p,y=yu)=>p.sibling(l,m).map(E=>sr(E,y)),yu=(l,m,p,y=yu)=>{const E=l.property().children(m);return p.first(E).map(M=>sr(M,y))},Ug=[{current:bm,next:Ui,fallback:ne.none()},{current:Ui,next:yu,fallback:ne.some(bm)},{current:yu,next:yu,fallback:ne.some(Ui)}],Zg=(l,m,p,y,E=Ug)=>N(E,M=>M.current===p).bind(M=>M.current(l,m,y,M.next).orThunk(()=>M.fallback.bind(L=>Zg(l,m,L,y)))),_0={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?ne.some(p[p.length-1]):ne.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?ne.some(p[0]):ne.none()})},B2=(l,m,p,y,E,A)=>Zg(l,m,y,E).bind(L=>A(L.item)?ne.none():p(L.item)?ne.some(L.item):B2(l,L.item,p,L.mode,E,A)),N2=(l,m,p,y)=>B2(l,m,p,Ui,_0.left(),y),hp=(l,m,p,y)=>B2(l,m,p,Ui,_0.right(),y),hd=(l,m)=>({element:l,offset:m}),A0=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(y=>A0(l,y,p).orThunk(()=>ne.some(y))):ne.none(),pp=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,O0=(l,m)=>{const p=A0(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return hd(p,pp(l,p));const y=l.property().children(p);return y.length>0?O0(l,y[y.length-1]):hd(p,pp(l,p))},Tw=O0,Cu=Sc(),D0=l=>Tw(Cu,l),kw=l=>m=>l.property().children(m).length===0,j3=(l,m,p)=>_w(l,m,kw(l),p),G3=(l,m,p)=>P2(l,m,kw(l),p),_w=N2,P2=hp,Su=Sc(),Aw=(l,m)=>j3(Su,l,m),Zi=(l,m)=>G3(Su,l,m),fa=(l,m,p)=>_w(Su,l,m,p),vi=(l,m,p)=>P2(Su,l,m,p),Aa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],R0=(l,m)=>{const p=l.property().name(m);return Ko(["ol","ul"],p)},Ef=(l,m)=>{const p=l.property().name(m);return Ko(Aa,p)},M0=(l,m)=>Ko(["br","img","hr","input"],l.property().name(m)),$2=(l,m,p,y)=>{const E=p[0],A=p.slice(1);return y(l,m,E,A)},q3=(l,m,p)=>p.length>0?$2(l,m,p,vm):ne.none(),vm=(l,m,p,y)=>{const E=m(l,p);return hs(y,(A,M)=>{const L=m(l,M);return ym(l,A,L)},E)},ym=(l,m,p)=>m.bind(y=>p.filter(dn(l.eq,y))),I2=(l,m)=>dn(l.eq,m),rr=(l,m,p,y=gn)=>{const E=[m].concat(l.up().all(m)),A=[p].concat(l.up().all(p)),M=ce=>Rc(ce,y).fold(()=>ce,at=>ce.slice(0,at+1)),L=M(E),Z=M(A),Q=N(L,ce=>Xe(Z,I2(l,ce)));return{firstpath:L,secondpath:Z,shared:Q}},bp=q3,Ya=rr,B0=Sc(),vo=(l,m)=>bp(B0,(p,y)=>l(y),m),Rl=(l,m,p)=>Ya(B0,l,m,p),pd=Sc(),Ml=l=>Ef(pd,l),Zc=l=>R0(pd,l),N0=l=>M0(pd,l),Ow=l=>{const m=$c("br"),p=Z=>So(Z,Q=>m(Q)||bg(Q)&&Wh(Q).trim().length===0),y=Z=>Es(Z)==="li"||fo(Z,Zc).isSome(),E=Z=>vg(Z).map(Q=>Ml(Q)?!0:N0(Q)?Es(Q)!=="img":!1).getOr(!1),A=Z=>$s(Z).bind(Q=>{const ce=E(Q);return q(Q).map(Fe=>ce===!0||y(Fe)||m(Q)||Ml(Fe)&&!mo(Z,Fe)?[]:[ot.fromTag("br")])}).getOr([]),L=(()=>{const Z=cs(l,Q=>{const ce=ia(Q);return p(ce)?[]:ce.concat(A(Q))});return Z.length===0?[ot.fromTag("br")]:Z})();du(l[0]),Ri(l[0],L)},bd=l=>{eo(l,"width"),eo(l,"height")},Tf=l=>{const m=vc(l);xw(l,ne.some(m),ne.none()),bd(l)},L2=l=>{const m=ms(l);xw(l,ne.some(m),ne.none()),bd(l)},wc=l=>{const m=Hi(l);xw(l,ne.none(),ne.some(m)),bd(l)},Cm=l=>{wl(l,"width");const m=a0(l),p=m.length>0?m:um(l);Me(p,y=>{wl(y,"width"),bd(y)}),bd(l)},Pr={scope:["row","col"]},Wi=l=>()=>{const m=ot.fromTag("td",l.dom);return Qn(m,ot.fromTag("br",l.dom)),m},P0=l=>()=>ot.fromTag("col",l.dom),kf=l=>()=>ot.fromTag("colgroup",l.dom),Sm=l=>()=>ot.fromTag("tr",l.dom),vp=(l,m,p)=>{const y=cf(l,m);return yn(p,(E,A)=>{E===null?eo(y,A):er(y,A,E)}),y},F2=l=>l,$0=(l,m,p)=>Yh(l).map(E=>{const A=p.join(","),M=io(E,A,L=>mo(L,l));return hs(M,(L,Z)=>{const Q=Bi(Z);return Qn(L,Q),Q},m)}).getOr(m),_f=(l,m)=>{yn(Pr,(p,y)=>ci(l,y).filter(E=>Ko(p,E)).each(E=>er(m,y,E)))},wm=(l,m,p)=>{const y=(M,L)=>{Qv(M.element,L),wl(L,"height"),M.colspan!==1&&wl(L,"width")},E=M=>{const L=ot.fromTag(Es(M.element),m.dom),Z=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Q=Z.length>0?$0(M.element,L,Z):L;return Qn(Q,ot.fromTag("br")),y(M,L),_f(M.element,L),l(M.element,L),L};return{col:M=>{const L=ot.fromTag(Es(M.element),m.dom);return y(M,L),l(M.element,L),L},colgroup:kf(m),row:Sm(m),cell:E,replace:vp,colGap:P0(m),gap:Wi(m)}},H2=l=>({col:P0(l),colgroup:kf(l),row:Sm(l),cell:Wi(l),replace:F2,colGap:P0(l),gap:Wi(l)}),yp=l=>rn.fromTable(l).grid,z2=(l,m,p,y)=>{const E=ls(l).rows;if(E.length===0)return l;for(let A=m.startRow;A<=m.finishRow;A++)for(let M=m.startCol;M<=m.finishCol;M++){const L=E[A],Z=Wt(L,M).isLocked;fl(L,M,Tr(y(),!1,Z))}return l},Dw=(l,m,p,y)=>{const E=ls(l).rows;let A=!0;for(let M=0;M<E.length;M++)for(let L=0;L<kr(E[0]);L++){const Z=E[M],Q=Wt(Z,L),ce=Q.element,Fe=p(ce,m);Fe&&!A?fl(Z,L,Tr(y(),!0,Q.isLocked)):Fe&&(A=!1)}return l},ar=(l,m)=>De(l,(p,y)=>Xe(p,E=>m(E.element,y.element))?p:p.concat([y]),[]),xm=(l,m,p,y)=>(m>0&&m<l[0].cells.length&&Me(l,E=>{const A=E.cells[m-1];let M=0;const L=y();for(;E.cells.length>m+M&&p(A.element,E.cells[m+M].element);)fl(E,m+M,Tr(L,!0,E.cells[m+M].isLocked)),M++}),l),Em=(l,m,p,y)=>{const E=ls(l).rows;if(m>0&&m<E.length){const A=E[m-1].cells,M=ar(A,p);Me(M,L=>{let Z=ne.none();for(let Q=m;Q<E.length;Q++)for(let ce=0;ce<kr(E[0]);ce++){const Fe=E[Q],at=Wt(Fe,ce);p(at.element,L.element)&&(Z.isNone()&&(Z=ne.some(y())),Z.each(Le=>{fl(Fe,ce,Tr(Le,!0,at.isLocked))}))}})}return l},Rw=(l,m,p)=>{if(l.row>=m.length||l.column>kr(m[0]))return Mc.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),E=y[0].cells.slice(l.column),A=kr(p[0]),M=p.length;return Mc.value({rowDelta:y.length-M,colDelta:E.length-A})},I0=(l,m)=>{const p=kr(l[0]),y=kr(m[0]);return{rowDelta:0,colDelta:p-y}},V2=(l,m)=>{const p=l.length,y=m.length;return{rowDelta:p-y,colDelta:0}},Cp=(l,m,p,y)=>{const E=m.section==="colgroup"?p.col:p.cell;return Yo(l,A=>Tr(E(),!0,y(A)))},L0=(l,m,p,y)=>{const E=l[l.length-1];return l.concat(Yo(m,()=>{const A=E.section==="colgroup"?p.colgroup:p.row,M=nf(E,A,tn),L=Cp(M.cells.length,M,p,Z=>Lo(y,Z.toString()));return fg(M,L)}))},Mw=(l,m,p,y)=>Vt(l,E=>{const A=Cp(m,E,p,gn);return Bc(E,y,A)}),K3=(l,m,p)=>Vt(l,y=>De(p,(E,A)=>{const M=Cp(1,y,m,ve)[0];return ml(E,A,M)},y)),Sp=(l,m,p)=>{const y=m.colDelta<0?Mw:tn,E=m.rowDelta<0?L0:tn,A=wa(l),M=kr(l[0]),L=Xe(A,ce=>ce===M-1),Z=y(l,Math.abs(m.colDelta),p,L?M-1:M),Q=wa(Z);return E(Z,Math.abs(m.rowDelta),p,vt(Q,ve))},Js=(l,m,p,y)=>{const E=Wt(l[m],p),A=dn(y,E.element),M=l[m];return l.length>1&&kr(M)>1&&(p>0&&A(Zr(M,p-1))||p<M.cells.length-1&&A(Zr(M,p+1))||m>0&&A(Zr(l[m-1],p))||m<l.length-1&&A(Zr(l[m+1],p)))},Ls=(l,m,p,y,E,A)=>{const M=l.row,L=l.column,Z=p.length,Q=kr(p[0]),ce=M+Z,Fe=L+Q+A.length,at=vt(A,ve);for(let tt=M;tt<ce;tt++){let Le=0;for(let je=L;je<Fe;je++){if(at[je]){Le++;continue}Js(m,tt,je,E)&&Dw(m,Zr(m[tt],je),E,y.cell);const Pe=je-L-Le,Bt=Wt(p[tt-M],Pe),Qt=Bt.element,mt=y.replace(Qt);fl(m[tt],je,Tr(mt,!0,Bt.isLocked))}}return m},$r=(l,m,p)=>{const y=kr(m[0]),E=ls(m).cols.length+l.row,A=Yo(y-l.column,L=>L+l.column),M=N(A,L=>So(p,Z=>Z!==L)).getOr(y-1);return{row:E,column:M}},vr=(l,m,p)=>Io(p,y=>y>=l.column&&y<=kr(m[0])+l.column),Wo=(l,m,p,y,E)=>{const A=wa(m),M=$r(l,m,A),L=ls(p).rows,Z=vr(M,L,A);return Rw(M,m,L).map(ce=>{const Fe={...ce,colDelta:ce.colDelta-Z.length},at=Sp(m,Fe,y),tt=wa(at),Le=vr(M,L,tt);return Ls(M,at,L,y,E,Le)})},Fs=(l,m,p,y,E)=>{xm(m,l,E,y.cell);const A=V2(p,m),M=Sp(p,A,y),L=V2(m,M),Z=Sp(m,L,y);return Vt(Z,(Q,ce)=>Bc(Q,l,M[ce].cells))},Wg=(l,m,p,y,E)=>{Em(m,l,E,y.cell);const A=wa(m),M=I0(m,p),L={...M,colDelta:M.colDelta-A.length},Z=Sp(m,L,y),{cols:Q,rows:ce}=ls(Z),Fe=wa(Z),at=I0(p,m),tt={...at,colDelta:at.colDelta+Fe.length},Le=K3(p,y,Fe),je=Sp(Le,tt,y);return[...Q,...ce.slice(0,l),...je,...ce.slice(l,ce.length)]},U2=(l,m,p,y)=>nf(l,E=>y(E,p),m),Z2=(l,m,p,y,E)=>{const{rows:A,cols:M}=ls(l),L=A.slice(0,m),Z=A.slice(m),Q=U2(A[p],(ce,Fe)=>m>0&&m<A.length&&y(Zr(A[m-1],Fe),Zr(A[m],Fe))?Wt(A[m],Fe):Tr(E(ce.element,y),!0,ce.isLocked),y,E);return[...M,...L,Q,...Z]},Bw=(l,m,p,y,E,A,M)=>{if(p==="colgroup"||!y){const L=Wt(l,E);return Tr(M(L.element,A),!0,!1)}else return Wt(l,m)},F0=(l,m,p,y,E)=>Vt(l,A=>{const M=m>0&&m<kr(A)&&y(Zr(A,m-1),Zr(A,m)),L=Bw(A,m,A.section,M,p,y,E);return ml(A,m,L)}),W2=(l,m)=>cs(l,p=>{const y=p.cells,E=hs(m,(A,M)=>M>=0&&M<A.length?A.slice(0,M).concat(A.slice(M+1)):A,y);return E.length>0?[ti(p.element,E,p.section,p.isNew)]:[]}),j2=(l,m,p)=>{const{rows:y,cols:E}=ls(l);return[...E,...y.slice(0,m),...y.slice(p+1)]},H0=(l,m,p,y)=>Zr(l[m],p)!==void 0&&m>0&&y(Zr(l[m-1],p),Zr(l[m],p)),G2=(l,m,p)=>m>0&&p(Zr(l,m-1),Zr(l,m)),jg=(l,m,p,y)=>H0(l,m,p,y)||G2(l[m],p,y),Nw=(l,m)=>So(m,tn)&&c0(l.cells)?ve:(y,E,A)=>!(Es(y.element)==="th"&&m[A]),wp=(l,m)=>So(m,tn)&&c0(l)?ve:(y,E,A)=>!(Es(y.element)==="th"&&m[E]),Bl=(l,m,p,y)=>{const E=M=>M==="row"?_3(m):im(m),A=M=>E(M)?`${M}group`:M;return l?ys(m)?A(p):null:y&&ys(m)?A(p==="row"?"col":"row"):null},z0=(l,m)=>(p,y,E)=>ne.some(Bl(l,p.element,"col",m[E])),xp=(l,m)=>(p,y)=>ne.some(Bl(l,p.element,"row",m[y])),Gg=(l,m,p)=>Tr(p(l.element,m),!0,l.isLocked),Af=(l,m,p,y,E,A,M)=>{const L=Z=>Xe(m,Q=>p(Z.element,Q.element));return Vt(l,(Z,Q)=>xs(Z,(ce,Fe)=>{if(L(ce)){const at=M(ce,Q,Fe)?E(ce,p,y):ce;return A(at,Q,Fe).each(tt=>{Lc(at.element,{scope:ne.from(tt)})}),at}else return ce}))},Ep=(l,m,p)=>cs(l,(y,E)=>jg(l,E,m,p)?[]:[Wt(y,m)]),V0=(l,m,p)=>{const y=l[m];return cs(y.cells,(E,A)=>jg(l,m,A,p)?[]:[E])},Tp=(l,m,p,y,E)=>{const A=ls(l).rows,M=cs(m,ce=>Ep(A,ce,y)),L=Vt(A,ce=>c0(ce.cells)),Z=wp(M,L),Q=xp(p,L);return Af(l,M,y,E,Gg,Q,Z)},U0=(l,m,p,y,E,A,M)=>{const{cols:L,rows:Z}=ls(l),Q=Z[m[0]],ce=cs(m,Pe=>V0(Z,Pe,E)),Fe=Vt(Q.cells,(Pe,Bt)=>c0(Ep(Z,Bt,E))),at=[...Z];Me(m,Pe=>{at[Pe]=M.transformRow(Z[Pe],p)});const tt=[...L,...at],Le=Nw(Q,Fe),je=z0(y,Fe);return Af(tt,ce,E,A,M.transformCell,je,Le)},Of=(l,m,p,y)=>{const E=ls(l).rows,A=Vt(m,M=>Wt(E[M.row],M.column));return Af(l,A,p,y,Gg,ne.none,ve)},Oa=l=>De(l,(p,y)=>Xe(p,A=>A.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),Xr=l=>qh(l,!0),qg=l=>{um(l).length===0&&la(l)},Ce=(l,m)=>({grid:l,cursor:m}),kp=l=>_e(l,m=>_e(m.cells,p=>{const y=p.element;return Yu(Xr(y),y)})),Y3=(l,m,p)=>{var E,A;const y=ls(l).rows;return ne.from((A=(E=y[m])==null?void 0:E.cells[p])==null?void 0:A.element).filter(Xr).orThunk(()=>kp(y))},Da=(l,m,p)=>{const y=Y3(l,m,p);return Ce(l,y)},Kg=l=>De(l,(p,y)=>Xe(p,A=>A.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),Nl=(l,m,p,y)=>{const E=m[0].row,A=Kg(m),M=hs(A,(L,Z)=>({grid:Z2(L.grid,E,Z.row+L.delta,p,y.getOrInit),delta:L.delta+1}),{grid:l,delta:0}).grid;return Da(M,E,m[0].column)},q2=(l,m,p,y)=>{const E=Kg(m),A=E[E.length-1],M=A.row+A.rowspan,L=hs(E,(Z,Q)=>Z2(Z,M,Q.row,p,y.getOrInit),l);return Da(L,M,m[0].column)},K2=(l,m,p,y)=>{const E=m.details,A=Oa(E),M=A[0].column,L=hs(A,(Z,Q)=>({grid:F0(Z.grid,M,Q.column+Z.delta,p,y.getOrInit),delta:Z.delta+1}),{grid:l,delta:0}).grid;return Da(L,E[0].row,M)},Df=(l,m,p,y)=>{const E=m.details,A=E[E.length-1],M=A.column+A.colspan,L=Oa(E),Z=hs(L,(Q,ce)=>F0(Q,M,ce.column,p,y.getOrInit),l);return Da(Z,E[0].row,M)},_p=(l,m,p,y)=>{const E=Oa(m),A=Vt(E,L=>L.column),M=Tp(l,A,!0,p,y.replaceOrInit);return Da(M,m[0].row,m[0].column)},vd=(l,m,p,y)=>{const E=Of(l,m,p,y.replaceOrInit);return Da(E,m[0].row,m[0].column)},Z0=(l,m,p,y)=>{const E=Oa(m),A=Vt(E,L=>L.column),M=Tp(l,A,!1,p,y.replaceOrInit);return Da(M,m[0].row,m[0].column)},X3=(l,m,p,y)=>{const E=Of(l,m,p,y.replaceOrInit);return Da(E,m[0].row,m[0].column)},Jr=(l,m)=>(p,y,E,A,M)=>{const L=Kg(y),Z=Vt(L,ce=>ce.row),Q=U0(p,Z,l,m,E,A.replaceOrInit,M);return Da(Q,y[0].row,y[0].column)},Pl=Jr("thead",!0),xc=Jr("tbody",!1),J3=Jr("tfoot",!1),Yg=(l,m,p,y)=>{const E=Oa(m.details),A=W2(l,Vt(E,L=>L.column)),M=A.length>0?A[0].cells.length-1:0;return Da(A,E[0].row,Math.min(E[0].column,M))},Pw=(l,m,p,y)=>{const E=Kg(m),A=j2(l,E[0].row,E[E.length-1].row),M=Math.max(ls(A).rows.length-1,0);return Da(A,Math.min(m[0].row,M),m[0].column)},W0=(l,m,p,y)=>{const E=m.cells;Ow(E);const A=z2(l,m.bounds,p,y.merge(E));return Ce(A,ne.from(E[0]))},Q3=(l,m,p,y)=>{const A=hs(m,(M,L)=>Dw(M,L,p,y.unmerge(L)),l);return Ce(A,ne.from(m[0]))},$w=(l,m,p,y)=>{const A=((Z,Q)=>{const ce=rn.fromTable(Z);return ks(ce,Q,!0)})(m.clipboard,m.generators),M=Kd(m.row,m.column);return Wo(M,l,A,m.generators,p).fold(()=>Ce(l,ne.some(m.element)),Z=>Da(Z,m.row,m.column))},fn=(l,m,p)=>{const y=Ye(l,p.section),E=rn.generate(y);return ks(E,m,!0)},xt=(l,m,p,y)=>{const E=ls(l).rows,A=m.cells[0].column,M=E[m.cells[0].row],L=fn(m.clipboard,m.generators,M),Z=Fs(A,l,L,m.generators,p);return Da(Z,m.cells[0].row,m.cells[0].column)},Xg=(l,m,p,y)=>{const E=ls(l).rows,A=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,M=E[m.cells[0].row],L=fn(m.clipboard,m.generators,M),Z=Fs(A,l,L,m.generators,p);return Da(Z,m.cells[0].row,A)},j0=(l,m,p,y)=>{const E=ls(l).rows,A=m.cells[0].row,M=E[A],L=fn(m.clipboard,m.generators,M),Z=Wg(A,l,L,m.generators,p);return Da(Z,m.cells[0].row,m.cells[0].column)},G0=(l,m,p,y)=>{const E=ls(l).rows,A=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,M=E[m.cells[0].row],L=fn(m.clipboard,m.generators,M),Z=Wg(A,l,L,m.generators,p);return Da(Z,A,m.cells[0].column)},ek=(l,m)=>{const p=rn.fromTable(l);return mr(p,m).bind(E=>{const A=E[E.length-1],M=E[0].column,L=A.column+A.colspan,Z=co(Vt(p.all,Q=>Io(Q.cells,ce=>ce.column>=M&&ce.column<L)));return m2(Z)}).getOr("")},Y2=(l,m)=>{const p=rn.fromTable(l);return mr(p,m).bind(m2).getOr("")},Uo=(l,m)=>{const p=rn.fromTable(l);return mr(p,m).bind(E=>{const A=E[E.length-1],M=E[0].row,L=A.row+A.rowspan,Z=p.all.slice(M,L);return nw(Z)}).getOr("")},q0=(l,m,p,y)=>y0(l,m,p,y.sizing),K0=(l,m,p,y)=>v0(l,m,p,y.sizing,y.resize),X2=(l,m)=>Xe(m,p=>p.column===0&&p.isLocked),Te=(l,m)=>Xe(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),Jg=(l,m)=>{const p=Og(l),y=Oa(m);return De(y,(E,A)=>{const L=p[A.column].map(ds).getOr(0);return E+L},0)},Rf=l=>(m,p)=>mr(m,p).filter(y=>!(l?X2:Te)(m,y)).map(y=>({details:y,pixelDelta:Jg(m,y)})),wu=(l,m)=>Ig(l,m).map(p=>({details:p,pixelDelta:-Jg(l,p)})),ji=l=>(m,p)=>Uc(m,p).filter(y=>!(l?X2:Te)(m,y.cells)),xu=_a.transform("th"),Qg=_a.transform("td"),Mf=(l,m,p,y)=>Xs(Nl,mr,Rt,Rt,_a.modification,l,m,p,y),tk=(l,m,p,y)=>Xs(q2,mr,Rt,Rt,_a.modification,l,m,p,y),eh=(l,m,p,y)=>Xs(K2,Rf(!0),K0,Rt,_a.modification,l,m,p,y),Oo=(l,m,p,y)=>Xs(Df,Rf(!1),K0,Rt,_a.modification,l,m,p,y),Gi=(l,m,p,y)=>Xs(Yg,wu,K0,qg,_a.modification,l,m,p,y),J2=(l,m,p,y)=>Xs(Pw,mr,Rt,qg,_a.modification,l,m,p,y),Tm=(l,m,p,y)=>Xs(_p,Ig,Rt,Rt,xu,l,m,p,y),$l=(l,m,p,y)=>Xs(Z0,Ig,Rt,Rt,Qg,l,m,p,y),Qr=(l,m,p,y)=>Xs(Pl,mr,Rt,Rt,xu,l,m,p,y),Iw=(l,m,p,y)=>Xs(xc,mr,Rt,Rt,Qg,l,m,p,y),Q2=(l,m,p,y)=>Xs(J3,mr,Rt,Rt,Qg,l,m,p,y),Lw=(l,m,p,y)=>Xs(vd,Ig,Rt,Rt,xu,l,m,p,y),nk=(l,m,p,y)=>Xs(X3,Ig,Rt,Rt,Qg,l,m,p,y),ok=(l,m,p,y)=>Xs(W0,vf,q0,Rt,_a.merging,l,m,p,y),ey=(l,m,p,y)=>Xs(Q3,L3,q0,Rt,_a.merging,l,m,p,y),Fw=(l,m,p,y)=>Xs($w,g0,q0,Rt,_a.modification,l,m,p,y),Ve=(l,m,p,y)=>Xs(xt,ji(!0),Rt,Rt,_a.modification,l,m,p,y),ty=(l,m,p,y)=>Xs(Xg,ji(!1),Rt,Rt,_a.modification,l,m,p,y),yr=(l,m,p,y)=>Xs(j0,Uc,Rt,Rt,_a.modification,l,m,p,y),ny=(l,m,p,y)=>Xs(G0,Uc,Rt,Rt,_a.modification,l,m,p,y),oy=ek,sy=Y2,sk=Uo,Ut=(l,m)=>{const p=m.column,y=m.column+m.colspan-1,E=m.row,A=m.row+m.rowspan-1;return p<=l.finishCol&&y>=l.startCol&&E<=l.finishRow&&A>=l.startRow},Hw=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,zw=(l,m)=>{let p=!0;const y=dn(Hw,m);for(let E=m.startRow;E<=m.finishRow;E++)for(let A=m.startCol;A<=m.finishCol;A++)p=p&&rn.getAt(l,E,A).exists(y);return p?ne.some(m):ne.none()},rk=(l,m)=>va(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),ak=(l,m,p)=>{const y=rn.findItem(l,m,mo),E=rn.findItem(l,p,mo);return y.bind(A=>E.map(M=>rk(A,M)))},Vw=(l,m,p)=>ak(l,m,p).bind(y=>zw(l,y)),JL=(l,m,p,y)=>rn.findItem(l,m,mo).bind(E=>{const A=p>0?E.row+E.rowspan-1:E.row,M=y>0?E.column+E.colspan-1:E.column;return rn.getAt(l,A+p,M+y).map(Z=>Z.element)}),U5=(l,m,p)=>ak(l,m,p).map(y=>{const E=rn.filterItems(l,dn(Ut,y));return Vt(E,A=>A.element)}),Uw=(l,m)=>{const p=(y,E)=>tm(E,y);return rn.findItem(l,m,p).map(y=>y.element)},ck=(l,m,p)=>zc(l).bind(y=>{const E=yi(y);return JL(E,l,m,p)}),Zt=(l,m,p)=>{const y=yi(l);return U5(y,m,p)},ry=(l,m,p,y,E)=>{const A=yi(l),M=mo(l,p)?ne.some(m):Uw(A,m),L=mo(l,E)?ne.some(y):Uw(A,y);return M.bind(Z=>L.bind(Q=>U5(A,Z,Q)))},yd=(l,m,p)=>{const y=yi(l);return Vw(y,m,p)},yi=rn.fromTable,Y0={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ra=()=>ot.fromTag("th"),th=()=>ot.fromTag("td"),Ap=()=>ot.fromTag("col"),X0=(l,m,p,y)=>{const E=ot.fromTag("tr");for(let A=0;A<l;A++){const M=y<m||A<p?Ra():th();A<p&&er(M,"scope","row"),y<m&&er(M,"scope","col"),Qn(M,ot.fromTag("br")),Qn(E,M)}return E},nh=l=>{const m=ot.fromTag("colgroup");return Yo(l,()=>Qn(m,Ap())),m},oh=(l,m,p,y)=>Yo(l,E=>X0(m,p,y,E)),Eu=(l,m,p,y,E,A=Y0)=>{const M=ot.fromTag("table"),L=E!=="cells";Ho(M,A.styles),nd(M,A.attributes),A.colGroups&&Qn(M,nh(m));const Z=Math.min(l,p);if(L&&p>0){const tt=ot.fromTag("thead");Qn(M,tt);const je=oh(p,m,E==="sectionCells"?Z:0,y);Ri(tt,je)}const Q=ot.fromTag("tbody");Qn(M,Q);const ce=L?l-Z:l,at=oh(ce,m,L?0:p,y);return Ri(Q,at),M},Hs=l=>{let m=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");m.push(A)},unbind:A=>{m=Io(m,M=>M!==A)},trigger:(...A)=>{const M={};Me(l,(L,Z)=>{M[L]=A[Z]}),Me(m,L=>{L(M)})}}},Cd=l=>{const m=cn(l,y=>({bind:y.bind,unbind:y.unbind})),p=cn(l,y=>y.trigger);return{registry:m,trigger:p}},Zw=pt(["compare","extract","mutate","sink"]),ay=pt(["element","start","stop","destroy"]),Ww=pt(["forceDrop","drop","move","delayDrop"]),ik=()=>{let l=ne.none();const m=()=>{l=ne.none()},p=(A,M)=>{const L=l.map(Z=>A.compare(Z,M));return l=ne.some(M),L},y=(A,M)=>{M.extract(A).each(Z=>{p(M,Z).each(ce=>{E.trigger.move(ce)})})},E=Cd({move:Hs(["info"])});return{onEvent:y,reset:m,events:E.registry}},An=()=>{const l=Cd({move:Hs(["info"])});return{onEvent:Rt,reset:Rt,events:l.registry}},qi=()=>{const l=An(),m=ik();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(L,Z)=>{p.onEvent(L,Z)},events:m.events}},km=(l,m,p)=>{let y=!1;const E=Cd({start:Hs([]),stop:Hs([])}),A=qi(),M=()=>{Le.stop(),A.isOn()&&(A.off(),E.trigger.stop())},L=dg(M,200),Z=Pe=>{Le.start(Pe),A.on(),E.trigger.start()},Q=Pe=>{L.cancel(),A.onEvent(Pe,m)};A.events.move.bind(Pe=>{m.mutate(l,Pe.info)});const ce=()=>{y=!0},Fe=()=>{y=!1},at=()=>y,tt=Pe=>(...Bt)=>{y&&Pe.apply(null,Bt)},Le=m.sink(Ww({forceDrop:M,drop:tt(M),move:tt(Q),delayDrop:tt(L.throttle)}),p),je=()=>{Le.destroy()};return{element:Le.element,go:Z,on:ce,off:Fe,isActive:at,destroy:je,events:E.registry}},sh=wo("ephox-dragster").resolve,Rn=l=>{const m={layerClass:sh("blocker"),...l},p=ot.fromTag("div");return er(p,"role","presentation"),er(p,"data-mce-bogus","all"),Ho(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Tl(p,sh("blocker")),Tl(p,m.layerClass),{element:Y(p),destroy:()=>{la(p)}}};var Op=Zw({compare:(l,m)=>Qo(m.left-l.left,m.top-l.top),extract:l=>ne.some(Qo(l.x,l.y)),sink:(l,m)=>{const p=Rn(m),y=td(p.element(),"mousedown",l.forceDrop),E=td(p.element(),"mouseup",l.drop),A=td(p.element(),"mousemove",l.move),M=td(p.element(),"mouseout",l.delayDrop),L=()=>{p.destroy(),E.unbind(),A.unbind(),M.unbind(),y.unbind()},Z=ce=>{Qn(ce,p.element())},Q=()=>{la(p.element())};return ay({element:p.element,start:Z,stop:Q,destroy:L})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const dk=(l,m={})=>{const p=m.mode??Op;return km(l,p,m)},Dp=wo("ephox-snooker").resolve,fk=()=>{const l=Cd({drag:Hs(["xDelta","yDelta"])});return{mutate:(p,y)=>{l.trigger.drag(p,y)},events:l.registry}},Rp=()=>{const l=Cd({drag:Hs(["xDelta","yDelta","target"])});let m=ne.none();const p=fk();return p.events.drag.bind(A=>{m.each(M=>{l.trigger.drag(A.xDelta,A.yDelta,M)})}),{assign:A=>{m=ne.some(A)},get:()=>m,mutate:p.mutate,events:l.registry}},jw=(l,m,p,y,E)=>{const A=ot.fromTag("div");return Ho(A,{position:"absolute",left:m-y/2+"px",top:p+"px",height:E+"px",width:y+"px"}),nd(A,{"data-mce-bogus":"all","data-column":l,role:"presentation"}),A},gk=(l,m,p,y,E)=>{const A=ot.fromTag("div");return Ho(A,{position:"absolute",left:m+"px",top:p-E/2+"px",height:E+"px",width:y+"px"}),nd(A,{"data-mce-bogus":"all","data-row":l,role:"presentation"}),A},J0=Dp("resizer-bar"),cy=Dp("resizer-rows"),iy=Dp("resizer-cols"),Gw=7,hk=(l,m)=>cs(l.all,(p,y)=>m(p.element)?[y]:[]),qw=(l,m)=>{const p=[];return Yo(l.grid.columns,y=>{rn.getColumnAt(l,y).map(A=>A.element).forall(m)&&p.push(y)}),Io(p,y=>{const E=rn.filterItems(l,A=>A.column===y);return So(E,A=>m(A.element))})},ly=l=>{const m=fu(l.parent(),"."+J0);Me(m,la)},Kw=(l,m,p)=>{const y=l.origin();Me(m,E=>{E.each(A=>{const M=p(y,A);Tl(M,J0),Qn(l.parent(),M)})})},zn=(l,m,p,y)=>{Kw(l,m,(E,A)=>{const M=jw(A.col,A.x-E.left,p.top-E.top,Gw,y);return Tl(M,iy),M})},Yw=(l,m,p,y)=>{Kw(l,m,(E,A)=>{const M=gk(A.row,p.left-E.left,A.y-E.top,y,Gw);return Tl(M,cy),M})},uy=(l,m,p,y,E)=>{const A=Cn(p),M=m.isResizable,L=y.length>0?sp.positions(y,p):[],Z=L.length>0?hk(l,M):[],Q=Io(L,(tt,Le)=>Xe(Z,je=>Le===je));Yw(m,Q,A,ds(p));const ce=E.length>0?Cs.positions(E,p):[],Fe=ce.length>0?qw(l,M):[],at=Io(ce,(tt,Le)=>Xe(Fe,je=>Le===je));zn(m,at,A,HS(p))},Q0=(l,m)=>{if(ly(l),l.isResizable(m)){const p=rn.fromTable(m),y=h2(p),E=Og(p);uy(p,l,m,y,E)}},Sd=(l,m)=>{const p=fu(l.parent(),"."+J0);Me(p,m)},dy=l=>{Sd(l,m=>{Dr(m,"display","none")})},pk=l=>{Sd(l,m=>{Dr(m,"display","block")})},Xw=l=>kl(l,cy),rh=l=>kl(l,iy),Jw=Dp("resizer-bar-dragging"),Mp=l=>{const m=Rp(),p=dk(m,{});let y=ne.none();const E=(je,Pe)=>ne.from(Mi(je,Pe));m.events.drag.bind(je=>{E(je.target,"data-row").each(Pe=>{const Bt=Ys(je.target,"top");Dr(je.target,"top",Bt+je.yDelta+"px")}),E(je.target,"data-column").each(Pe=>{const Bt=Ys(je.target,"left");Dr(je.target,"left",Bt+je.xDelta+"px")})});const A=(je,Pe)=>{const Bt=Ys(je,Pe),Qt=cd(je,"data-initial-"+Pe,0);return Bt-Qt};p.events.stop.bind(()=>{m.get().each(je=>{y.each(Pe=>{E(je,"data-row").each(Bt=>{const Qt=A(je,"top");eo(je,"data-initial-top"),Le.trigger.adjustHeight(Pe,Qt,parseInt(Bt,10))}),E(je,"data-column").each(Bt=>{const Qt=A(je,"left");eo(je,"data-initial-left"),Le.trigger.adjustWidth(Pe,Qt,parseInt(Bt,10))}),Q0(l,Pe)})})});const M=(je,Pe)=>{Le.trigger.startAdjust(),m.assign(je),er(je,"data-initial-"+Pe,Ys(je,Pe)),Tl(je,Jw),Dr(je,"opacity","0.2"),p.go(l.dragContainer())},L=td(l.parent(),"mousedown",je=>{Xw(je.target)&&M(je.target,"top"),rh(je.target)&&M(je.target,"left")}),Z=je=>mo(je,l.view()),Q=je=>tr(je,"table",Z).filter(qh),ce=je=>kl(je,"ephox-snooker-resizer-bar")||kl(je,"ephox-dragster-blocker"),Fe=td(l.view(),"mouseover",je=>{Q(je.target).fold(()=>{Pt(je.target)&&!ce(je.target)&&ly(l)},Pe=>{p.isActive()&&(y=ne.some(Pe),Q0(l,Pe))})}),at=()=>{L.unbind(),Fe.unbind(),p.destroy(),ly(l)},tt=je=>{Q0(l,je)},Le=Cd({adjustHeight:Hs(["table","delta","row"]),adjustWidth:Hs(["table","delta","column"]),startAdjust:Hs([])});return{destroy:at,refresh:tt,on:p.on,off:p.off,hideBars:dn(dy,l),showBars:dn(pk,l),events:Le.registry}},my={create:(l,m,p)=>{const y=sp,E=Cs,A=Mp(l),M=Cd({beforeResize:Hs(["table","type"]),afterResize:Hs(["table","type"]),startDrag:Hs([])});return A.events.adjustHeight.bind(L=>{const Z=L.table;M.trigger.beforeResize(Z,"row");const Q=y.delta(L.delta,Z);b0(Z,Q,L.row),M.trigger.afterResize(Z,"row")}),A.events.startAdjust.bind(L=>{M.trigger.startDrag()}),A.events.adjustWidth.bind(L=>{const Z=L.table;M.trigger.beforeResize(Z,"col");const Q=E.delta(L.delta,Z),ce=p(Z);Fg(Z,Q,L.column,m,ce),M.trigger.afterResize(Z,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:M.registry}}},_m=l=>m=>m.options.get(l),Qw="100%",ex=l=>{const m=l.dom,p=m.getParent(l.selection.getStart(),m.isBlock)??l.getBody();return Rr(ot.fromDom(p))+"px"},tx=(l,m)=>Pp(l)||!fy(l)?m:Tu(l)?{...m,width:ex(l)}:{...m,width:Qw},nx=(l,m)=>Pp(l)||fy(l)?m:Tu(l)?{...m,width:ex(l)}:{...m,width:Qw},G5=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const y=Ko(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const y=Ko(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},ox=l=>ne.from(l.options.get("table_clone_elements")),eb=l=>{const m=l.options.get("object_resizing");return Ko(m.split(","),"table")},tb=_m("table_header_type"),Np=_m("table_column_resizing"),nb=l=>Np(l)==="preservetable",ob=l=>Np(l)==="resizetable",lt=_m("table_sizing_mode"),Am=l=>lt(l)==="relative",Tu=l=>lt(l)==="fixed",Pp=l=>lt(l)==="responsive",sx=_m("table_resize_bars"),fy=_m("table_style_by_css"),gy=_m("table_merge_content_on_paste"),rx=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:nx(l,p)},ax=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:tx(l,p)},cx=_m("table_use_colgroups"),sb=l=>ot.fromDom(l.getBody()),zs=l=>m=>mo(m,sb(l)),Ki=l=>{eo(l,"data-mce-style");const m=p=>eo(p,"data-mce-style");Me(um(l),m),Me(a0(l),m),Me(d2(l),m)},rb=l=>ot.fromDom(l.selection.getStart()),ix=l=>l.getBoundingClientRect().width,lx=l=>l.getBoundingClientRect().height,ux=l=>(m,p)=>{const y=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return ne.from(y).filter(Ns)},ab=ux("width"),hy=ux("height"),dx=l=>/^(\d+(\.\d+)?)%$/.test(l),mx=l=>/^(\d+(\.\d+)?)px$/.test(l),$p=l=>Y1(l,$c("table")).exists(qh),py=l=>di(l,"table"),cb=(l,m,p)=>{const y=E=>A=>p!==void 0&&p(A)||mo(A,E);return mo(l,m)?ne.some({boxes:ne.some([l]),start:l,finish:m}):py(l).bind(E=>py(m).bind(A=>{if(mo(E,A))return ne.some({boxes:Zt(E,l,m),start:l,finish:m});if(tm(E,A)){const M=io(m,"td,th",y(E)),L=M.length>0?M[M.length-1]:m;return ne.some({boxes:ry(E,l,E,m,A),start:l,finish:L})}else if(tm(A,E)){const M=io(l,"td,th",y(A)),L=M.length>0?M[M.length-1]:l;return ne.some({boxes:ry(A,l,E,m,A),start:l,finish:L})}else return Rl(l,m).shared.bind(M=>tr(M,"table",p).bind(L=>{const Z=io(m,"td,th",y(L)),Q=Z.length>0?Z[Z.length-1]:m,ce=io(l,"td,th",y(L)),Fe=ce.length>0?ce[ce.length-1]:l;return ne.some({boxes:ry(L,l,E,m,A),start:Fe,finish:Q})}))}))},by=(l,m)=>{const p=fu(l,m);return p.length>0?ne.some(p):ne.none()},bk=(l,m)=>N(l,p=>Ca(p,m)),fx=(l,m,p)=>sm(l,m).bind(y=>sm(l,p).bind(E=>vo(py,[y,E]).map(A=>({first:y,last:E,table:A})))),gx=(l,m)=>di(l,"table").bind(p=>sm(p,m).bind(y=>cb(y,l).bind(E=>E.boxes.map(A=>({boxes:A,start:E.start,finish:E.finish}))))),ib=(l,m,p,y,E)=>bk(l,E).bind(A=>ck(A,m,p).bind(M=>gx(M,y))),Bf=(l,m)=>by(l,m),hx=(l,m,p)=>fx(l,m,p).bind(y=>{const E=Z=>mo(l,Z),A="thead,tfoot,tbody,table",M=di(y.first,A,E),L=di(y.last,A,E);return M.bind(Z=>L.bind(Q=>mo(Z,Q)?yd(y.table,y.first,y.last):ne.none()))}),px=tn,lb=l=>{const m=(y,E)=>ci(y,E).exists(A=>parseInt(A,10)>1),p=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&So(l,p)?ne.some(l):ne.none()},vk=(l,m,p)=>m.length<=1?ne.none():hx(l,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:m})),Nf={create:(l,m)=>({selection:l,kill:m})},vy=(l,m,p,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return p(l.elements)}},Ck=()=>({tag:"none"}),Sk=l=>({tag:"multiple",elements:l}),bx=l=>({tag:"single",element:l}),wk=(l,m,p)=>({get:()=>Bf(l(),p).fold(()=>m().fold(Ck,bx),Sk)}),ub={create:(l,m,p,y)=>({start:ur.on(l,m),finish:ur.on(p,y)})},Cy=(l,m)=>{const p=We(l,m);return rd.create(ot.fromDom(p.startContainer),p.startOffset,ot.fromDom(p.endContainer),p.endOffset)},ku=ub.create,vx=(l,m,p,y,E,A,M)=>mo(p,E)&&y===A?ne.none():tr(p,"td,th",m).bind(L=>tr(E,"td,th",m).bind(Z=>db(l,m,L,Z,M))),db=(l,m,p,y,E)=>mo(p,y)?ne.none():cb(p,y,m).bind(A=>{const M=A.boxes.getOr([]);return M.length>1?(E(l,M,A.start,A.finish),ne.some(Nf.create(ne.some(ku(p,0,p,gu(p))),!0))):ne.none()}),xk=(l,m,p,y,E)=>{const A=M=>(E.clearBeforeUpdate(p),E.selectRange(p,M.boxes,M.start,M.finish),M.boxes);return ib(y,l,m,E.firstSelectedSelector,E.lastSelectedSelector).map(A)},Om=Ur.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ek=(l,m,p)=>{const y=l.getRect(m),E=l.getRect(p);return E.right>y.left&&E.left<y.right},Tk=l=>tr(l,"tr"),ah={...Om,verify:(l,m,p,y,E,A,M)=>tr(y,"td,th",M).bind(L=>tr(m,"td,th",M).map(Z=>mo(L,Z)?mo(y,L)&&gu(L)===E?A(Z):Om.none("in same cell"):vo(Tk,[L,Z]).fold(()=>Ek(l,Z,L)?Om.success():A(Z),Q=>A(Z)))).getOr(Om.none("default")),cata:(l,m,p,y,E)=>l.fold(m,p,y,E)},Ip=$c("br"),Sy=(l,m,p)=>m(l,p).bind(y=>bg(y)&&Wh(y).trim().length===0?Sy(y,m,p):ne.some(y)),kk=(l,m,p)=>p.traverse(m).orThunk(()=>Sy(m,p.gather,l)).map(p.relative),_k=(l,m)=>fc(l,m).filter(Ip).orThunk(()=>fc(l,m-1).filter(Ip)),mb=(l,m,p,y)=>_k(m,p).bind(E=>y.traverse(E).fold(()=>Sy(E,y.gather,l).map(y.relative),A=>am(A).map(M=>ur.on(M.parent,M.index)))),yx=(l,m,p,y)=>(Ip(m)?kk(l,m,y):mb(l,m,p,y)).map(A=>({start:A,finish:A})),Cx=l=>ah.cata(l,m=>ne.none(),()=>ne.none(),m=>ne.some(hd(m,0)),m=>ne.some(hd(m,gu(m)))),Lp=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),fb=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),wy=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),Fp=l=>l.top,xy=l=>l.bottom,Ak=(l,m,p)=>p>=0&&p<gu(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):ne.none(),Hp=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Sx=(l,m)=>ne.some(l.getRect(m)),gb=(l,m,p)=>jr(m)?Sx(l,m).map(Hp):bg(m)?Ak(l,m,p).map(Hp):ne.none(),hb=(l,m)=>jr(m)?Sx(l,m).map(Hp):bg(m)?l.getRangedRect(m,0,m,gu(m)).map(Hp):ne.none(),Pf=5,Ok=100,_u=Ur.generate([{none:[]},{retry:["caret"]}]),Dk=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,wx=(l,m,p)=>Y1(m,Ml).fold(gn,y=>hb(l,y).exists(E=>Dk(p,E))),Rk=(l,m,p,y,E)=>{const A=Lp(E,Pf);return Math.abs(p.bottom-y.bottom)<1||p.top>E.bottom?_u.retry(A):p.top===E.bottom?_u.retry(Lp(E,1)):wx(l,m,E)?_u.retry(wy(A,Pf,0)):_u.none()},pb={point:Fp,adjuster:(l,m,p,y,E)=>{const A=fb(E,Pf);return Math.abs(p.top-y.top)<1||p.bottom<E.top?_u.retry(A):p.bottom===E.top?_u.retry(fb(E,1)):wx(l,m,E)?_u.retry(wy(A,Pf,0)):_u.none()},move:fb,gather:Aw},Mk={point:xy,adjuster:Rk,move:Lp,gather:Zi},Bk=(l,m,p)=>l.elementFromPoint(m,p).filter(y=>Es(y)==="table").isSome(),Nk=(l,m,p,y,E)=>Ey(l,m,p,m.move(y,Pf),E),Ey=(l,m,p,y,E)=>E===0?ne.some(y):Bk(l,y.left,m.point(y))?Nk(l,m,p,y,E-1):l.situsFromPoint(y.left,m.point(y)).bind(A=>A.start.fold(ne.none,M=>hb(l,M).bind(L=>m.adjuster(l,M,L,p,y).fold(ne.none,Z=>Ey(l,m,p,Z,E-1))).orThunk(()=>ne.some(y)),ne.none)),Pk=(l,m,p)=>l.point(m)>p.getInnerHeight()?ne.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?ne.some(-l.point(m)):ne.none(),xx=(l,m,p)=>{const y=l.move(p,Pf),E=Ey(m,l,p,y,Ok).getOr(y);return Pk(l,E,m).fold(()=>m.situsFromPoint(E.left,l.point(E)),A=>(m.scrollBy(0,A),m.situsFromPoint(E.left,l.point(E)-A)))},Ty={tryUp:dn(xx,pb),tryDown:dn(xx,Mk),getJumpSize:Y(Pf)},$k=20,Ik=(l,m,p)=>l.getSelection().bind(y=>yx(m,y.finish,y.foffset,p).fold(()=>ne.some(hd(y.finish,y.foffset)),E=>{const A=l.fromSitus(E),M=ah.verify(l,y.finish,y.foffset,A.finish,A.foffset,p.failure,m);return Cx(M)})),ky=(l,m,p,y,E,A)=>A===0?ne.none():zp(l,m,p,y,E).bind(M=>{const L=l.fromSitus(M),Z=ah.verify(l,p,y,L.finish,L.foffset,E.failure,m);return ah.cata(Z,()=>ne.none(),()=>ne.some(M),Q=>mo(p,Q)&&y===0?Ex(l,p,y,fb,E):ky(l,m,Q,0,E,A-1),Q=>mo(p,Q)&&y===gu(Q)?Ex(l,p,y,Lp,E):ky(l,m,Q,gu(Q),E,A-1))}),Ex=(l,m,p,y,E)=>gb(l,m,p).bind(A=>wt(l,E,y(A,Ty.getJumpSize()))),wt=(l,m,p)=>{const y=bl().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,p):ne.none()},zp=(l,m,p,y,E)=>gb(l,p,y).bind(A=>wt(l,E,A)),Tx=(l,m,p)=>Ik(l,m,p).bind(y=>ky(l,m,y.element,y.offset,p,$k).map(l.fromSitus)),Lk=(l,m)=>WS(l,p=>q(p).exists(y=>mo(y,m))),_y=(l,m,p,y,E)=>tr(y,"td,th",m).bind(A=>tr(A,"table",m).bind(M=>Lk(E,M)?Tx(l,m,p).bind(L=>tr(L.finish,"td,th",m).map(Z=>({start:A,finish:Z,range:L}))):ne.none())),Vp=(l,m,p,y,E,A)=>A(y,m).orThunk(()=>_y(l,m,p,y,E).map(M=>{const L=M.range;return Nf.create(ne.some(ku(L.start,L.soffset,L.finish,L.foffset)),!0)})),bb=(l,m)=>tr(l,"tr",m).bind(p=>tr(p,"table",m).bind(y=>{const E=fu(y,"tr");return mo(p,E[0])?fa(y,A=>$s(A).isSome(),m).map(A=>{const M=gu(A);return Nf.create(ne.some(ku(A,M,A,M)),!0)}):ne.none()})),Up=(l,m)=>tr(l,"tr",m).bind(p=>tr(p,"table",m).bind(y=>{const E=fu(y,"tr");return mo(p,E[E.length-1])?vi(y,A=>Yh(A).isSome(),m).map(A=>Nf.create(ne.some(ku(A,0,A,0)),!0)):ne.none()})),ch=(l,m,p,y,E,A,M)=>_y(l,p,y,E,A).bind(L=>db(m,p,L.start,L.finish,M)),Ay=(l,m)=>tr(l,"td,th",m),Oy=l=>mc(l).exists(qh),kx=(l,m,p,y)=>{const E=ul(),A=E.clear,M=ce=>{E.on(Fe=>{y.clearBeforeUpdate(m),Ay(ce.target,p).each(at=>{cb(Fe,at,p).each(tt=>{const Le=tt.boxes.getOr([]);if(Le.length===1){const je=Le[0],Pe=Kh(je)==="false",Bt=Yt(Sg(ce.target),je,mo);Pe&&Bt&&y.selectRange(m,Le,je,je)}else Le.length>1&&(y.selectRange(m,Le,tt.start,tt.finish),l.selectContents(at))})})})};return{clearstate:A,mousedown:ce=>{y.clear(m),Ay(ce.target,p).filter(Oy).each(E.set)},mouseover:ce=>{M(ce)},mouseup:ce=>{M(ce),A()}}},Dy={traverse:vg,gather:Zi,relative:ur.before,retry:Ty.tryDown,failure:ah.failedDown},_x={traverse:Zv,gather:Aw,relative:ur.before,retry:Ty.tryUp,failure:ah.failedUp},ih=l=>m=>m===l,wd=ih(38),lh=ih(40),xd=l=>l>=37&&l<=40,Ed={isBackward:ih(37),isForward:ih(39)},Ax={isBackward:ih(39),isForward:ih(37)},Zp=l=>({elementFromPoint:(Pe,Bt)=>ot.fromPoint(ot.fromDom(l.document),Pe,Bt),getRect:Pe=>Pe.dom.getBoundingClientRect(),getRangedRect:(Pe,Bt,Qt,mt)=>{const Yn=ad.exact(Pe,Bt,Qt,mt);return c2(l,Yn)},getSelection:()=>C3(l).map(Pe=>Cy(l,Pe)),fromSitus:Pe=>{const Bt=ad.relative(Pe.start,Pe.finish);return Cy(l,Bt)},situsFromPoint:(Pe,Bt)=>i2(l,Pe,Bt).map(Qt=>ub.create(Qt.start,Qt.soffset,Qt.finish,Qt.foffset)),clearSelection:()=>{S3(l)},collapseSelection:(Pe=!1)=>{C3(l).each(Bt=>Bt.fold(Qt=>Qt.collapse(Pe),(Qt,mt)=>{const Yn=Pe?Qt:mt;QS(l,Yn,Yn)},(Qt,mt,Yn,qt)=>{const no=Pe?Qt:Yn,Os=Pe?mt:qt;o0(l,no,Os,no,Os)}))},setSelection:Pe=>{o0(l,Pe.start,Pe.soffset,Pe.finish,Pe.foffset)},setRelativeSelection:(Pe,Bt)=>{QS(l,Pe,Bt)},selectNode:Pe=>{a2(l,Pe,!1)},selectContents:Pe=>{a2(l,Pe)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Ao(ot.fromDom(l.document)).top,scrollBy:(Pe,Bt)=>{ui(Pe,Bt,ot.fromDom(l.document))}}),Yi=(l,m)=>({rows:l,cols:m}),Ox=(l,m,p,y)=>{const E=Zp(l),A=kx(E,m,p,y);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},Dx=l=>Y1(l,Vv).exists(qh),Ry=(l,m)=>Dx(l)||Dx(m),My=(l,m,p,y)=>{const E=Zp(l),A=()=>(y.clear(m),ne.none());return{keydown:(Z,Q,ce,Fe,at,tt)=>{const Le=Z.raw,je=Le.which,Pe=Le.shiftKey===!0;return by(m,y.selectedSelector).fold(()=>(xd(je)&&!Pe&&y.clearBeforeUpdate(m),xd(je)&&Pe&&!Ry(Q,Fe)?ne.none:lh(je)&&Pe?dn(ch,E,m,p,Dy,Fe,Q,y.selectRange):wd(je)&&Pe?dn(ch,E,m,p,_x,Fe,Q,y.selectRange):lh(je)?dn(Vp,E,p,Dy,Fe,Q,Up):wd(je)?dn(Vp,E,p,_x,Fe,Q,bb):ne.none),Qt=>{const mt=Yn=>()=>_e(Yn,no=>xk(no.rows,no.cols,m,Qt,y)).fold(()=>fx(m,y.firstSelectedSelector,y.lastSelectedSelector).map(no=>{const Os=lh(je)||tt.isForward(je)?ur.after:ur.before;return E.setRelativeSelection(ur.on(no.first,0),Os(no.table)),y.clear(m),Nf.create(ne.none(),!0)}),no=>ne.some(Nf.create(ne.none(),!0)));return xd(je)&&Pe&&!Ry(Q,Fe)?ne.none:lh(je)&&Pe?mt([Yi(1,0)]):wd(je)&&Pe?mt([Yi(-1,0)]):tt.isBackward(je)&&Pe?mt([Yi(0,-1),Yi(-1,0)]):tt.isForward(je)&&Pe?mt([Yi(0,1),Yi(1,0)]):xd(je)&&!Pe?A:ne.none})()},keyup:(Z,Q,ce,Fe,at)=>by(m,y.selectedSelector).fold(()=>{const tt=Z.raw,Le=tt.which;return tt.shiftKey===!0&&xd(Le)&&Ry(Q,Fe)?vx(m,p,Q,ce,Fe,at,y.selectRange):ne.none()},ne.none)}},Rx=(l,m,p,y)=>{const E=Zp(l);return(A,M)=>{y.clearBeforeUpdate(m),cb(A,M,p).each(L=>{const Z=L.boxes.getOr([]);y.selectRange(m,Z,L.start,L.finish),E.selectContents(M),E.collapseSelection()})}},Bx={byClass:l=>{const m=t2(l.selected),p=ZS([l.selected,l.lastSelected,l.firstSelected]),y=A=>{const M=fu(A,l.selectedSelector);Me(M,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(A,M,L,Z)=>{y(A),Me(M,m),Tl(L,l.firstSelected),Tl(Z,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const y=Z=>{eo(Z,l.selected),eo(Z,l.firstSelected),eo(Z,l.lastSelected)},E=Z=>{er(Z,l.selected,"1")},A=Z=>{M(Z),p()},M=Z=>{const Q=fu(Z,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Me(Q,y)};return{clearBeforeUpdate:M,clear:A,selectRange:(Z,Q,ce,Fe)=>{A(Z),Me(Q,E),er(ce,l.firstSelected,"1"),er(Fe,l.lastSelected,"1"),m(Q,ce,Fe)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},$f="data-mce-selected",By="td["+$f+"],th["+$f+"]",Nx="["+$f+"]",Ny="data-mce-first-selected",Py="td["+Ny+"],th["+Ny+"]",$y="data-mce-last-selected",Hk="td["+$y+"],th["+$y+"]",If=Nx,Lf={selected:$f,selectedSelector:By,firstSelected:Ny,firstSelectedSelector:Py,lastSelected:$y,lastSelectedSelector:Hk},vb=(l,m,p)=>({element:p,mergable:vk(m,l,Lf),unmergable:lb(l),selection:px(l)}),yb=(l,m,p)=>({element:l,clipboard:m,generators:p}),Px=(l,m,p,y)=>({selection:px(l),clipboard:p,generators:y}),zk=l=>zc(l).bind(m=>Bf(m,Lf.firstSelectedSelector)).fold(Y(l),m=>m[0]),$x=l=>(m,p)=>{const y=Es(m),E=y==="col"||y==="colgroup"?zk(m):m;return tr(E,l,p)},Gt=$x("th,td,caption"),Cb=$x("th,td"),Wc=l=>Ar(l.model.table.getSelectedCells()),Wp=l=>Io(Wc(l),m=>Ca(m,Lf.selectedSelector)),Vk=l=>zc(l[0]).map(m=>{const p=S0(m,If);return Ki(p),[p]}),Sb=(l,m)=>Vt(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),Uk=(l,m)=>{const p=l.getDoc(),y=Gv(ot.fromDom(l.getBody())),E=ot.fromTag("div",p);er(E,"data-mce-bogus","all"),Ho(E,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const A=lu(y);Ri(E,m),Qn(A,E);const M=E.dom.innerText;return la(E),M},Iy=(l,m)=>{l.on("BeforeGetContent",p=>{const y=E=>{p.preventDefault(),Vk(E).each(A=>{const M=p.format==="text"?Uk(l,A):Sb(l,A);p.content=M})};if(p.selection===!0){const E=Wp(l);E.length>=1&&y(E)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=Wc(l);le(y).each(E=>{zc(E).each(A=>{const M=Io(Yv(p.content),Z=>Es(Z)!=="meta"),L=$c("table");if(gy(l)&&M.length===1&&L(M[0])){p.preventDefault();const Z=ot.fromDom(l.getDoc()),Q=H2(Z),ce=yb(E,M[0],Q);m.pasteCells(A,ce).each(()=>{l.focus()})}})})}})},Ly=(l,m)=>l.dispatch("NewRow",{node:m}),jp=(l,m)=>l.dispatch("NewCell",{node:m}),Il=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},uh=(l,m,p,y,E)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:y,otherCells:E})},Zk=l=>{l.dispatch("TableSelectionClear")},Ff=(l,m,p,y,E)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:y,origin:E})},Gp=(l,m,p,y,E)=>{l.dispatch("ObjectResized",{target:m,width:p,height:y,origin:E})},wb={structure:!1,style:!0},cr={structure:!0,style:!1},Wk={structure:!0,style:!0},Fy=(l,m)=>Am(l)?Ng.percentageSize(m):Tu(l)?Ng.pixelSize(m):Ng.getTableSize(m),Dm=(l,m,p)=>{const y=ga=>Es(sb(ga))==="table",E=ga=>!y(l)||yp(ga).rows>1,A=ga=>!y(l)||yp(ga).columns>1,M=ox(l),L=ob(l)?Rt:up,Z=ga=>{switch(tb(l)){case"section":return ud.section();case"sectionCells":return ud.sectionCells();case"cells":return ud.cells();default:return ud.getTableSectionType(ga,"section")}},Q=(ga,Wy)=>Wy.cursor.fold(()=>{const Db=um(ga);return le(Db).filter(Pt).map(kd=>{p.clearSelectedCells(ga.dom);const ea=l.dom.createRng();return ea.selectNode(kd.dom),l.selection.setRng(ea),er(kd,"data-mce-selected","1"),ea})},Db=>{const kd=D0(Db),ea=l.dom.createRng();return ea.setStart(kd.element.dom,kd.offset),ea.setEnd(kd.element.dom,kd.offset),l.selection.setRng(ea),p.clearSelectedCells(ga.dom),ne.some(ea)}),ce=(ga,Wy,Db,kd)=>(ea,Ux,ft=!1)=>{Ki(ea);const Ja=ot.fromDom(l.getDoc()),Xk=wm(Db,Ja,M),Zx={sizing:Fy(l,ea),resize:ob(l)?k3():ew(),section:Z(ea)};return Wy(ea)?ga(ea,Ux,Xk,Zx).bind(Rb=>{m.refresh(ea.dom),Me(Rb.newRows,Vf=>{Ly(l,Vf.dom)}),Me(Rb.newCells,Vf=>{jp(l,Vf.dom)});const jy=Q(ea,Rb);return Pt(ea)&&(Ki(ea),ft||Il(l,ea.dom,kd)),jy.map(Vf=>({rng:Vf,effect:kd}))}):ne.none()},Fe=ce(J2,E,Rt,cr),at=ce(Gi,A,Rt,cr),tt=ce(Mf,ve,Rt,cr),Le=ce(tk,ve,Rt,cr),je=ce(eh,ve,L,cr),Pe=ce(Oo,ve,L,cr),Bt=ce(ok,ve,Rt,cr),Qt=ce(ey,ve,Rt,cr),mt=ce(Ve,ve,Rt,cr),Yn=ce(ty,ve,Rt,cr),qt=ce(yr,ve,Rt,cr),no=ce(ny,ve,Rt,cr),Os=ce(Fw,ve,Rt,Wk),Gc=ce(Lw,ve,Rt,cr),Hf=ce(nk,ve,Rt,cr),Bm=ce(Tm,ve,Rt,cr),zf=ce($l,ve,Rt,cr),go=ce(Qr,ve,Rt,cr),gs=ce(Iw,ve,Rt,cr),Xa=ce(Q2,ve,Rt,cr);return{deleteRow:Fe,deleteColumn:at,insertRowsBefore:tt,insertRowsAfter:Le,insertColumnsBefore:je,insertColumnsAfter:Pe,mergeCells:Bt,unmergeCells:Qt,pasteColsBefore:mt,pasteColsAfter:Yn,pasteRowsBefore:qt,pasteRowsAfter:no,pasteCells:Os,makeCellsHeader:Gc,unmakeCellsHeader:Hf,makeColumnsHeader:Bm,unmakeColumnsHeader:zf,makeRowsHeader:go,makeRowsBody:gs,makeRowsFooter:Xa,getTableRowType:sk,getTableCellType:sy,getTableColType:oy}},Au=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},Hy=(l,m)=>{sm(m,"td,th").each(dn(Au,l))},Ix=(l,m)=>{Me(fu(m,"tr"),p=>{Ly(l,p.dom),Me(fu(p,"th,td"),y=>{jp(l,y.dom)})})},jk=l=>ws(l)&&l.indexOf("%")!==-1,xb=(l,m,p,y,E)=>{const A=ax(l),M={styles:A,attributes:rx(l),colGroups:cx(l)};return l.undoManager.ignore(()=>{const L=Eu(p,m,E,y,tb(l),M);er(L,"data-mce-id","__mce");const Z=FS(L);l.insertContent(Z),l.addVisual()}),sm(sb(l),'table[data-mce-id="__mce"]').map(L=>(Tu(l)?L2(L):Pp(l)?Cm(L):(Am(l)||jk(A.width))&&Tf(L),Ki(L),eo(L,"data-mce-id"),Ix(l,L),Hy(l,L),L.dom)).getOrNull()},qp=(l,m,p,y={})=>{const E=A=>oo(A)&&A>0;if(E(m)&&E(p)){const A=y.headerRows||0,M=y.headerColumns||0;return xb(l,p,m,M,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Rm=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Eb="x-tinymce/dom-table-",Tb=Eb+"rows",Mm=Eb+"columns",Kp=l=>{const m=Rm.FakeClipboardItem(l);Rm.write([m])},zy=l=>{const m=Rm.read()??[];return _e(m,p=>ne.from(p.getType(l)))},kb=l=>{zy(l).isSome()&&Rm.clear()},Ll=l=>{l.fold(Ou,m=>Kp({[Tb]:m}))},Lx=()=>zy(Tb),Ou=()=>kb(Tb),Vy=l=>{l.fold(dh,m=>Kp({[Mm]:m}))},_b=()=>zy(Mm),dh=()=>kb(Mm),Yp=l=>Gt(rb(l),zs(l)).filter($p),Ab=l=>Cb(rb(l),zs(l)).filter($p),Gk=(l,m)=>{const p=zs(l),y=()=>Yp(l).each(Pe=>{zc(Pe,p).filter(ie(p)).each(Bt=>{const Qt=ot.fromText("");if(Cl(Bt,Qt),la(Bt),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const mt=l.dom.createRng();mt.setStart(Qt.dom,0),mt.setEnd(Qt.dom,0),l.selection.setRng(mt),l.nodeChanged()}})}),E=Pe=>Yp(l).each(Bt=>{Pp(l)||Tu(l)||Am(l)||zc(Bt,p).each(mt=>{Pe==="relative"&&!Ew(mt)?Tf(mt):Pe==="fixed"&&!U3(mt)?L2(mt):Pe==="responsive"&&!Z3(mt)&&Cm(mt),Ki(mt),Il(l,mt.dom,cr)})}),A=Pe=>zc(Pe,p),M=Pe=>Ab(l).bind(Bt=>A(Bt).map(Qt=>Pe(Qt,Bt))),L=(Pe,Bt)=>{M(Qt=>{l.formatter.toggle("tableclass",{value:Bt},Qt.dom),Il(l,Qt.dom,wb)})},Z=(Pe,Bt)=>{M(Qt=>{const mt=Wc(l),qt=So(mt,no=>l.formatter.match("tablecellclass",{value:Bt},no.dom))?l.formatter.remove:l.formatter.apply;Me(mt,no=>qt("tablecellclass",{value:Bt},no.dom)),Il(l,Qt.dom,wb)})},Q=()=>{Yp(l).each(Pe=>{zc(Pe,p).each(Bt=>{Ts(Bt,"caption").fold(()=>{const Qt=ot.fromTag("caption");Qn(Qt,ot.fromText("Caption")),i3(Bt,Qt,0),l.selection.setCursorLocation(Qt.dom,0)},Qt=>{$c("caption")(Pe)&&pl("td",Bt).each(mt=>l.selection.setCursorLocation(mt.dom,0)),la(Qt)}),Il(l,Bt.dom,cr)})})},ce=Pe=>{l.focus()},Fe=(Pe,Bt=!1)=>M((Qt,mt)=>{const Yn=vb(Wc(l),Qt,mt);Pe(Qt,Yn,Bt).each(ce)}),at=()=>M((Pe,Bt)=>{const Qt=vb(Wc(l),Pe,Bt),mt=wm(Rt,ot.fromDom(l.getDoc()),ne.none());return bi(Pe,Qt,mt)}),tt=()=>M((Pe,Bt)=>{const Qt=vb(Wc(l),Pe,Bt);return Ol(Pe,Qt)}),Le=(Pe,Bt)=>Bt().each(Qt=>{const mt=Vt(Qt,Yn=>_r(Yn));M((Yn,qt)=>{const no=H2(ot.fromDom(l.getDoc())),Os=Px(Wc(l),qt,mt,no);Pe(Yn,Os).each(ce)})}),je=Pe=>(Bt,Qt)=>Ha(Qt,"type").each(mt=>{Fe(Pe(mt),Qt.no_events)});yn({mceTableSplitCells:()=>Fe(m.unmergeCells),mceTableMergeCells:()=>Fe(m.mergeCells),mceTableInsertRowBefore:()=>Fe(m.insertRowsBefore),mceTableInsertRowAfter:()=>Fe(m.insertRowsAfter),mceTableInsertColBefore:()=>Fe(m.insertColumnsBefore),mceTableInsertColAfter:()=>Fe(m.insertColumnsAfter),mceTableDeleteCol:()=>Fe(m.deleteColumn),mceTableDeleteRow:()=>Fe(m.deleteRow),mceTableCutCol:()=>tt().each(Pe=>{Vy(Pe),Fe(m.deleteColumn)}),mceTableCutRow:()=>at().each(Pe=>{Ll(Pe),Fe(m.deleteRow)}),mceTableCopyCol:()=>tt().each(Pe=>Vy(Pe)),mceTableCopyRow:()=>at().each(Pe=>Ll(Pe)),mceTablePasteColBefore:()=>Le(m.pasteColsBefore,_b),mceTablePasteColAfter:()=>Le(m.pasteColsAfter,_b),mceTablePasteRowBefore:()=>Le(m.pasteRowsBefore,Lx),mceTablePasteRowAfter:()=>Le(m.pasteRowsAfter,Lx),mceTableDelete:y,mceTableCellToggleClass:Z,mceTableToggleClass:L,mceTableToggleCaption:Q,mceTableSizingMode:(Pe,Bt)=>E(Bt),mceTableCellType:je(Pe=>Pe==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:je(Pe=>Pe==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:je(Pe=>{switch(Pe){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Pe,Bt)=>l.addCommand(Bt,Pe)),l.addCommand("mceInsertTable",(Pe,Bt)=>{qp(l,Bt.rows,Bt.columns,Bt.options)}),l.addCommand("mceTableApplyCellStyle",(Pe,Bt)=>{const Qt=qt=>"tablecell"+qt.toLowerCase().replace("-","");if(!Et(Bt))return;const mt=Io(Wc(l),$p);if(mt.length===0)return;const Yn=Lh(Bt,(qt,no)=>l.formatter.has(Qt(no))&&ws(qt));Ku(Yn)||(yn(Yn,(qt,no)=>{const Os=Qt(no);Me(mt,Gc=>{qt===""?l.formatter.remove(Os,{value:null},Gc.dom,!0):l.formatter.apply(Os,{value:qt},Gc.dom)})}),A(mt[0]).each(qt=>Il(l,qt.dom,wb)))})},Fx=(l,m)=>{const p=zs(l),y=E=>Cb(rb(l)).bind(A=>zc(A,p).map(M=>{const L=vb(Wc(l),M,A);return E(M,L)})).getOr("");yn({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(E,A)=>l.addQueryValueHandler(A,E))},Ob=l=>!kl(ot.fromDom(l.target),"ephox-snooker-resizer-bar"),qk=(l,m)=>{const p=wk(()=>ot.fromDom(l.getBody()),()=>Cb(rb(l),zs(l)),Lf.selectedSelector),y=(Z,Q,ce)=>{zc(Q).each(at=>{const tt=Vt(Z,Qt=>Qt.dom),Le=ox(l),je=wm(Rt,ot.fromDom(l.getDoc()),Le),Pe=Wc(l),Bt=R2(at,{selection:Pe},je).map(Qt=>cn(Qt,mt=>Vt(mt,Yn=>Yn.dom))).getOrUndefined();uh(l,tt,Q.dom,ce.dom,Bt)})},E=()=>Zk(l),A=Bx.byAttr(Lf,y,E);return l.on("init",Z=>{const Q=l.getWin(),ce=sb(l),Fe=zs(l),at=()=>{const go=l.selection,gs=ot.fromDom(go.getStart()),Xa=ot.fromDom(go.getEnd());vo(zc,[gs,Xa]).fold(()=>A.clear(ce),Rt)},tt=Ox(Q,ce,Fe,A),Le=My(Q,ce,Fe,A),je=Rx(Q,ce,Fe,A),Pe=go=>go.raw.shiftKey===!0;l.on("TableSelectorChange",go=>je(go.start,go.finish));const Bt=(go,gs)=>{Pe(go)&&(gs.kill&&go.kill(),gs.selection.each(Xa=>{const Ma=ad.relative(Xa.start,Xa.finish),Cr=We(Q,Ma);l.selection.setRng(Cr)}))},Qt=go=>{const gs=Gs(go);if(gs.raw.shiftKey&&xd(gs.raw.which)){const Xa=l.selection.getRng(),Ma=ot.fromDom(Xa.startContainer),Cr=ot.fromDom(Xa.endContainer);Le.keyup(gs,Ma,Xa.startOffset,Cr,Xa.endOffset).each(Td=>{Bt(gs,Td)})}},mt=go=>{const gs=Gs(go);m.hide();const Xa=l.selection.getRng(),Ma=ot.fromDom(Xa.startContainer),Cr=ot.fromDom(Xa.endContainer),Td=Gh(Ed,Ax)(ot.fromDom(l.selection.getStart()));Le.keydown(gs,Ma,Xa.startOffset,Cr,Xa.endOffset,Td).each(ga=>{Bt(gs,ga)}),m.show()},Yn=go=>go.button===0,qt=go=>go.buttons===void 0?!0:(go.buttons&1)!==0,no=go=>{tt.clearstate()},Os=go=>{Yn(go)&&Ob(go)&&tt.mousedown(Gs(go))},Gc=go=>{qt(go)&&Ob(go)&&tt.mouseover(Gs(go))},Hf=go=>{Yn(go)&&Ob(go)&&tt.mouseup(Gs(go))},zf=(()=>{const go=ps(ot.fromDom(ce)),gs=ps(0);return{touchEnd:Ma=>{const Cr=ot.fromDom(Ma.target);if($c("td")(Cr)||$c("th")(Cr)){const Td=go.get(),ga=gs.get();mo(Td,Cr)&&Ma.timeStamp-ga<300&&(Ma.preventDefault(),je(Cr,Cr))}go.set(Cr),gs.set(Ma.timeStamp)}}})();l.on("dragstart",no),l.on("mousedown",Os),l.on("mouseover",Gc),l.on("mouseup",Hf),l.on("touchend",zf.touchEnd),l.on("keyup",Qt),l.on("keydown",mt),l.on("NodeChange",at)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Lf.firstSelected),l.serializer.addTempAttr(Lf.lastSelected)}),{getSelectedCells:()=>vy(p.get(),Y([]),Z=>Vt(Z,Q=>Q.dom),Z=>[Z.dom]),clearSelectedCells:Z=>A.clear(ot.fromDom(Z))}},Uy=(l,m)=>{const p=ot.fromDom(l.getBody());return vw.body(p,m)},Fl=l=>Zs(l)&&l.nodeName==="TABLE",Zy="bar-",Kk=l=>Mi(l,"data-mce-resize")!=="false",Hx=l=>{const m=rn.fromTable(l);rn.hasColumns(m)||Me(um(l),p=>{const y=uf(p,"width");Dr(p,"width",y),eo(p,"width")})},zx=l=>Wd(l,"corner-"),Vx=l=>tf(l,"corner-"),Yk=l=>{const m=ul(),p=ul(),y=ul();let E,A,M,L;const Z=mt=>Fy(l,mt),Q=()=>nb(l)?ew():k3(),ce=mt=>yp(mt).columns,Fe=mt=>yp(mt).rows,at=(mt,Yn,qt,no)=>{const Os=Vx(Yn),Gc=jd(Os,"e"),Hf=Wd(Os,"n");if(A===""&&Tf(mt),L===""&&wc(mt),qt!==E&&A!==""){Dr(mt,"width",A);const Bm=Q(),zf=Z(mt),go=nb(l)||Gc?ce(mt)-1:0;Fg(mt,qt-E,go,Bm,zf)}else if(dx(A)){const Bm=parseFloat(A.replace("%","")),zf=qt*Bm/E;Dr(mt,"width",zf+"%")}if(mx(A)&&Hx(mt),no!==M&&L!==""){Dr(mt,"height",L);const Bm=Hf?0:Fe(mt)-1;b0(mt,no-M,Bm)}},tt=()=>{p.on(mt=>{mt.destroy()})};l.on("init",()=>{const mt=Uy(l,Kk);if(y.set(mt),eb(l)&&sx(l)){const Yn=Q(),qt=my.create(mt,Yn,Z);l.mode.isReadOnly()||qt.on(),qt.events.startDrag.bind(no=>{m.set(l.selection.getRng())}),qt.events.beforeResize.bind(no=>{const Os=no.table.dom;Ff(l,Os,ix(Os),lx(Os),Zy+no.type)}),qt.events.afterResize.bind(no=>{const Os=no.table,Gc=Os.dom;Ki(Os),m.on(Hf=>{l.selection.setRng(Hf),l.focus()}),Gp(l,Gc,ix(Gc),lx(Gc),Zy+no.type),l.undoManager.add()}),p.set(qt)}}),l.on("ObjectResizeStart",mt=>{const Yn=mt.target;if(Fl(Yn)&&!l.mode.isReadOnly()){const qt=ot.fromDom(Yn);Me(l.dom.select(".mce-clonedresizable"),no=>{l.dom.addClass(no,"mce-"+Np(l)+"-columns")}),!U3(qt)&&Tu(l)?L2(qt):!Ew(qt)&&Am(l)&&Tf(qt),Z3(qt)&&Wd(mt.origin,Zy)&&Tf(qt),E=mt.width,A=Pp(l)?"":ab(l,Yn).getOr(""),M=mt.height,L=hy(l,Yn).getOr("")}}),l.on("ObjectResized",mt=>{const Yn=mt.target;if(Fl(Yn)){const qt=ot.fromDom(Yn),no=mt.origin;zx(no)&&at(qt,no,mt.width,mt.height),Ki(qt),Il(l,qt.dom,wb)}});const Le=()=>{p.on(mt=>{mt.on(),mt.showBars()})},je=()=>{p.on(mt=>{mt.off(),mt.hideBars()})};return l.on("DisabledStateChange",mt=>{mt.state?je():Le()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?je():Le()}),l.on("dragstart dragend",mt=>{mt.type==="dragstart"?je():Le()}),l.on("remove",()=>{tt()}),{refresh:mt=>{p.on(Yn=>Yn.refreshBars(ot.fromDom(mt)))},hide:()=>{p.on(mt=>mt.hideBars())},show:()=>{p.on(mt=>mt.showBars())}}},$o=l=>{G5(l);const m=Yk(l),p=qk(l,m),y=Dm(l,m,p);return Gk(l,y),Fx(l,y),Iy(l,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},jc=l=>({table:$o(l)});var mh=()=>{xn.add("dom",jc)};mh()})();(function(){var xn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Tn=($,K,te)=>{var we;return te($,K.prototype)?!0:((we=$.constructor)==null?void 0:we.name)===K.name},Bn=$=>{const K=typeof $;return $===null?"null":K==="object"&&Array.isArray($)?"array":K==="object"&&Tn($,String,(te,we)=>we.isPrototypeOf(te))?"string":K},Ln=$=>K=>Bn(K)===$,No=$=>K=>typeof K===$,_o=$=>K=>$===K,ws=Ln("string"),Et=Ln("object"),Dn=Ln("array"),ki=_o(null),ra=No("boolean"),sc=$=>$==null,xr=$=>!sc($),Zs=No("function"),rc=($,K)=>{if(Dn($)){for(let te=0,we=$.length;te<we;++te)if(!K($[te]))return!1;return!0}return!1},oo=()=>{},Rt=$=>()=>$,Fa=$=>$,ac=($,K)=>$===K,un=class un{constructor(K,te){Ie(this,"tag");Ie(this,"value");this.tag=K,this.value=te}static some(K){return new un(!0,K)}static none(){return un.singletonNone}fold(K,te){return this.tag?te(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?un.some(K(this.value)):un.none()}bind(K){return this.tag?K(this.value):un.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:un.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K??"Called getOrDie on None")}static from(K){return xr(K)?un.some(K):un.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(un,"singletonNone",new un(!1));let Y=un;const tn=Array.prototype.indexOf,Qc=Array.prototype.push,dn=($,K)=>tn.call($,K),ie=($,K)=>dn($,K)>-1,an=($,K)=>{const te=$.length,we=new Array(te);for(let Ue=0;Ue<te;Ue++){const dt=$[Ue];we[Ue]=K(dt,Ue)}return we},as=($,K)=>{for(let te=0,we=$.length;te<we;te++){const Ue=$[te];K(Ue,te)}},gn=($,K,te)=>(as($,(we,Ue)=>{te=K(te,we,Ue)}),te),ve=$=>{const K=[];for(let te=0,we=$.length;te<we;++te){if(!Dn($[te]))throw new Error("Arr.flatten item "+te+" was not an array, input: "+$);Qc.apply(K,$[te])}return K},ne=($,K)=>ve(an($,K)),pr=($,K)=>K>=0&&K<$.length?Y.some($[K]):Y.none(),Vn=$=>pr($,0),Dt=($,K)=>{for(let te=0;te<$.length;te++){const we=K($[te],te);if(we.isSome())return we}return Y.none()},T=Object.keys,Ko=Object.hasOwnProperty,Xe=($,K)=>{const te=T($);for(let we=0,Ue=te.length;we<Ue;we++){const dt=te[we],on=$[dt];K(on,dt)}},Yo=$=>(K,te)=>{$[te]=K},Vt=($,K,te,we)=>{Xe($,(Ue,dt)=>{(K(Ue,dt)?te:we)(Ue,dt)})},Me=($,K)=>{const te={};return Vt($,K,Yo(te),oo),te},ao=($,K)=>Ko.call($,K),Qs=($,K)=>ao($,K)&&$[K]!==void 0&&$[K]!==null,Io=$=>{let K=$;return{get:()=>K,set:Ue=>{K=Ue}}},hs=($,K,te=ac)=>$.exists(we=>te(we,K)),De=$=>{const K=[],te=we=>{K.push(we)};for(let we=0;we<$.length;we++)$[we].each(te);return K},et=($,K)=>$?Y.some(K):Y.none(),N=$=>{const K=Io(Y.none()),te=()=>K.get().each($);return{clear:()=>{te(),K.set(Y.none())},isSet:()=>K.get().isSome(),get:()=>K.get(),set:Jn=>{te(),K.set(Y.some(Jn))}}},Rc=()=>{const $=N(oo);return{...$,on:te=>$.get().each(te)}},co=($,K)=>$.substring(K),cs=($,K,te)=>K===""||$.length>=K.length&&$.substr(te,te+K.length)===K,So=($,K)=>aa($,K)?co($,K.length):$,aa=($,K)=>cs($,K,0),vt=$=>K=>K.options.get($),jn=$=>{const K=$.options.register;K("link_assume_external_targets",{processor:te=>{const we=ws(te)||ra(te);return we?te===!0?{value:1,valid:we}:te==="http"||te==="https"?{value:te,valid:we}:{value:0,valid:we}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),K("link_context_toolbar",{processor:"boolean",default:!1}),K("link_list",{processor:te=>ws(te)||Zs(te)||rc(te,Et)}),K("link_default_target",{processor:"string"}),K("link_default_protocol",{processor:"string",default:"https"}),K("link_target_list",{processor:te=>ra(te)||rc(te,Et),default:!0}),K("link_rel_list",{processor:"object[]",default:[]}),K("link_class_list",{processor:"object[]",default:[]}),K("link_title",{processor:"boolean",default:!0}),K("allow_unsafe_link_target",{processor:"boolean",default:!1}),K("link_quicklink",{processor:"boolean",default:!1}),K("link_attributes_postprocess",{processor:"function"}),K("files_upload_handler",{processor:"function"}),K("link_uploadtab",{processor:"boolean",default:!0})},Mt=vt("link_assume_external_targets"),le=vt("link_context_toolbar"),Bs=vt("link_list"),_e=vt("link_default_target"),ge=vt("link_default_protocol"),nn=vt("link_target_list"),yn=vt("link_rel_list"),cn=vt("link_class_list"),Ws=vt("link_title"),so=vt("allow_unsafe_link_target"),il=vt("link_quicklink"),Lh=vt("link_attributes_postprocess"),ca=vt("files_upload_handler"),Gn=vt("link_uploadtab"),Ha=vt("documents_file_types"),Lo=$=>xr($.options.get("files_upload_handler")),is=$=>xr($.options.get("documents_file_types"));var Ku=tinymce.util.Tools.resolve("tinymce.util.URI"),_i=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ur=tinymce.util.Tools.resolve("tinymce.util.Tools");const ps=$=>xr($)&&$.nodeName.toLowerCase()==="a",js=$=>ps($)&&!!ic($),Fo=($,K)=>{if($.collapsed)return[];{const te=$.cloneContents(),we=te.firstChild,Ue=new _i(we,te),dt=[];let on=we;do K(on)&&dt.push(on);while(on=Ue.next());return dt}},cc=$=>/^\w+:/i.test($),ic=$=>$.getAttribute("data-mce-href")??$.getAttribute("href")??"",bt=($,K)=>{const te=["noopener"],we=$?$.split(/\s+/):[],Ue=qn=>Ur.trim(qn.sort().join(" ")),dt=qn=>(qn=on(qn),qn.length>0?qn.concat(te):te),on=qn=>qn.filter(Ps=>Ur.inArray(te,Ps)===-1),Jn=K?dt(we):on(we);return Jn.length>0?Ue(Jn):""},$n=$=>$.replace(/\uFEFF/g,""),hn=($,K)=>(K=K||pt($.selection.getRng())[0]||$.selection.getNode(),za(K)?Y.from($.dom.select("a[href]",K)[0]):Y.from($.dom.getParent(K,"a[href]"))),lc=($,K)=>hn($,K).isSome(),pa=($,K)=>{const te=K.fold(()=>$.getContent({format:"text"}),we=>we.innerText||we.textContent||"");return $n(te)},pt=$=>Fo($,js),ll=$=>Ur.grep($,js),Qm=$=>ll($).length>0,nu=$=>pt($).length>0,Mc=$=>{const K=$.schema.getTextInlineElements(),te=dt=>dt.nodeType===1&&!ps(dt)&&!ao(K,dt.nodeName.toLowerCase());if(hn($).exists(dt=>dt.hasAttribute("data-mce-block")))return!1;const Ue=$.selection.getRng();return Ue.collapsed?!0:Fo(Ue,te).length===0},za=$=>xr($)&&$.nodeName==="FIGURE"&&/\bimage\b/i.test($.className),wo=$=>new Promise((K,te)=>{const we=new FileReader;we.onload=()=>{K(we.result)},we.onerror=()=>{var Ue;te(new Error(((Ue=we.error)==null?void 0:Ue.message)??"Failed to convert blob to a data url"))},we.readAsDataURL($)}),Yt=$=>gn(["title","rel","class","target"],(te,we)=>($[we].each(Ue=>{te[we]=Ue.length>0?Ue:null}),te),{href:$.href}),Xo=($,K)=>(K==="http"||K==="https")&&!cc($)?K+"://"+$:$,ef=($,K)=>{const te={...K};if(yn($).length===0&&!so($)){const we=bt(te.rel,te.target==="_blank");te.rel=we||null}return Y.from(te.target).isNone()&&nn($)===!1&&(te.target=_e($)),te.href=Xo(te.href,Mt($)),te},Yu=($,K,te,we)=>{te.each(dt=>{ao(K,"innerText")?K.innerText=dt:K.textContent=dt}),$.dom.setAttribs(K,we);const Ue=$.dom.createRng();Ue.setStartAfter(K),Ue.setEndAfter(K),$.selection.setRng(Ue)},ei=($,K,te,we)=>{const Ue=$.dom;za(K)?jd(Ue,K,we):te.fold(()=>{$.execCommand("mceInsertLink",!1,we);const dt=$.selection.getEnd(),on=Ue.createRng();on.setStartAfter(dt),on.setEndAfter(dt),$.selection.setRng(on)},dt=>{$.insertContent(Ue.createHTML("a",we,Ue.encode(dt)))})},Nt=($,K,te)=>{const we=$.selection.getNode(),Ue=hn($,we),dt=ef($,Yt(te)),on=Lh($);xr(on)&&on(dt),$.undoManager.transact(()=>{te.href===K.href&&K.attach(),Ue.fold(()=>{ei($,we,te.text,dt)},Jn=>{$.focus(),Yu($,Jn,te.text,dt)})})},ba=$=>{const K=$.dom,te=$.selection,we=te.getBookmark(),Ue=te.getRng().cloneRange(),dt=K.getParent(Ue.startContainer,"a[href]",$.getBody()),on=K.getParent(Ue.endContainer,"a[href]",$.getBody());dt&&Ue.setStartBefore(dt),on&&Ue.setEndAfter(on),te.setRng(Ue),$.execCommand("unlink"),te.moveToBookmark(we)},ul=$=>{$.undoManager.transact(()=>{const K=$.selection.getNode();za(K)?Wd($,K):ba($),$.focus()})},Fh=$=>{const{class:K,href:te,rel:we,target:Ue,text:dt,title:on}=$;return Me({class:K.getOrNull(),href:te,rel:we.getOrNull(),target:Ue.getOrNull(),text:dt.getOrNull(),title:on.getOrNull()},(Jn,qn)=>ki(Jn)===!1)},Er=($,K)=>{const te=$.options.get,we={allow_html_data_urls:te("allow_html_data_urls"),allow_script_urls:te("allow_script_urls"),allow_svg_data_urls:te("allow_svg_data_urls")},Ue=K.href;return{...K,href:Ku.isDomSafe(Ue,"a",we)?Ue:""}},tf=($,K,te)=>{const we=Er($,te);$.hasPlugin("rtc",!0)?$.execCommand("createlink",!1,Fh(we)):Nt($,K,we)},ts=$=>{$.hasPlugin("rtc",!0)?$.execCommand("unlink"):ul($)},Wd=($,K)=>{var we;const te=$.dom.select("img",K)[0];if(te){const Ue=$.dom.getParents(te,"a[href]",K)[0];Ue&&((we=Ue.parentNode)==null||we.insertBefore(te,Ue),$.dom.remove(Ue))}},jd=($,K,te)=>{var Ue;const we=$.select("img",K)[0];if(we){const dt=$.create("a",te);(Ue=we.parentNode)==null||Ue.insertBefore(dt,we),dt.appendChild(we)}},dl=$=>ws($.value)?$.value:"",Ai=$=>ws($.text)?$.text:ws($.title)?$.title:"",Ns=($,K)=>{const te=[];return Ur.each($,we=>{const Ue=Ai(we);if(we.menu!==void 0){const dt=Ns(we.menu,K);te.push({text:Ue,items:dt})}else{const dt=K(we);te.push({text:Ue,value:dt})}}),te},ou=($=dl)=>K=>Y.from(K).map(te=>Ns(te,$)),Va={sanitize:$=>ou(dl)($),sanitizeWith:ou,createUi:($,K)=>te=>({name:$,type:"listbox",label:K,items:te}),getValue:dl},Gd=$=>Qs($,"items"),qd=($,K)=>Dt(K,te=>Gd(te)?qd($,te.items):et(te.value===$,te)),uo=($,K,te,we)=>{const Ue=we[K],dt=$.length>0;return Ue!==void 0?qd(Ue,te).map(on=>({url:{value:on.value,meta:{text:dt?$:on.text,attach:oo}},text:dt?$:on.text})):Y.none()},Kd=($,K)=>K==="link"?$.link:K==="anchor"?$.anchor:Y.none(),_s={init:($,K)=>{const te={text:$.text,title:$.title},we=qn=>{var Ps;return et(te.title.length<=0,Y.from((Ps=qn.meta)==null?void 0:Ps.title).getOr(""))},Ue=qn=>{var Ps;return et(te.text.length<=0,Y.from((Ps=qn.meta)==null?void 0:Ps.text).getOr(qn.value))},dt=qn=>{const Ps=Ue(qn.url),As=we(qn.url);return Ps.isSome()||As.isSome()?Y.some({...Ps.map(sf=>({text:sf})).getOr({}),...As.map(sf=>({title:sf})).getOr({})}):Y.none()},on=(qn,Ps)=>{const As=Kd(K,Ps).getOr([]);return uo(te.text,Ps,As,qn)};return{onChange:(qn,Ps)=>{const As=Ps.name;return As==="url"?dt(qn()):ie(["anchor","link"],As)?on(qn(),As):((As==="text"||As==="title")&&(te[As]=qn()[As]),Y.none())}}},getDelta:uo};var Oi=tinymce.util.Tools.resolve("tinymce.util.Delay");const Yd=($,K,te)=>{const we=$.selection.getRng();Oi.setEditorTimeout($,()=>{$.windowManager.confirm(K,Ue=>{$.selection.setRng(we),te(Ue)})})},dc=$=>{const K=$.href;return K.indexOf("@")>0&&K.indexOf("/")===-1&&K.indexOf("mailto:")===-1?Y.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:we=>({...we,href:"mailto:"+K})}):Y.none()},Tr=($,K)=>te=>{const we=te.href;return $===1&&!cc(we)||$===0&&/^\s*www(\.|\d\.)/i.test(we)?Y.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${K}:// prefix?`,preprocess:dt=>({...dt,href:K+"://"+we})}):Y.none()},va={preprocess:($,K)=>Dt([dc,Tr(Mt($),ge($))],te=>te(K)).fold(()=>Promise.resolve(K),te=>new Promise(we=>{Yd($,te.message,Ue=>{we(Ue?te.preprocess(K):K)})}))},mg={getAnchors:$=>{const K=$.dom.select("a:not([href])"),te=ne(K,we=>{const Ue=we.name||we.id;return Ue?[{text:Ue,value:"#"+Ue}]:[]});return te.length>0?Y.some([{text:"None",value:""}].concat(te)):Y.none()}},ml={getClasses:$=>{const K=cn($);return K.length>0?Va.sanitize(K):Y.none()}},fl=$=>{try{return Y.some(JSON.parse($))}catch{return Y.none()}},xs={getLinks:$=>{const K=we=>$.convertURL(we.value||we.url||"","href"),te=Bs($);return new Promise(we=>{ws(te)?fetch(te).then(Ue=>Ue.ok?Ue.text().then(fl):Promise.reject()).then(we,()=>we(Y.none())):Zs(te)?te(Ue=>we(Y.some(Ue))):we(Y.from(te))}).then(we=>we.bind(Va.sanitizeWith(K)).map(Ue=>Ue.length>0?[{text:"None",value:""}].concat(Ue):Ue))}},Zr={getRels:($,K)=>{const te=yn($);if(te.length>0){const we=hs(K,"_blank"),Ue=so($)===!1,dt=Jn=>bt(Va.getValue(Jn),we);return(Ue?Va.sanitizeWith(dt):Va.sanitize)(te)}return Y.none()}},kr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],nf={getTargets:$=>{const K=nn($);return Dn(K)?Va.sanitize(K).orThunk(()=>Y.some(kr)):K===!1?Y.none():Y.some(kr)}},Xd=($,K,te)=>{const we=$.getAttrib(K,te);return we!==null&&we.length>0?Y.some(we):Y.none()},Jo=($,K)=>{const te=$.dom,Ue=Mc($)?Y.some(pa($.selection,K)):Y.none(),dt=K.bind(As=>Y.from(te.getAttrib(As,"href"))),on=K.bind(As=>Y.from(te.getAttrib(As,"target"))),Jn=K.bind(As=>Xd(te,As,"rel")),qn=K.bind(As=>Xd(te,As,"class")),Ps=K.bind(As=>Xd(te,As,"title"));return{url:dt,text:Ue,title:Ps,target:on,rel:Jn,linkClass:qn}},ni={collect:($,K)=>xs.getLinks($).then(te=>{const we=Lo($)&&is($)&&Gn($),Ue=Jo($,K);return{anchor:Ue,catalogs:{targets:nf.getTargets($),rels:Zr.getRels($,Ue.target),classes:ml.getClasses($),anchor:mg.getAnchors($),link:te},hasUploadPanel:we,optNode:K,flags:{titleEnabled:Ws($)}}})},ot={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput",buttonLabel:"Browse for a file",dropAreaLabel:"Drop a file here",allowedFileTypes:$.map(te=>te.mimeType).join(","),allowedFileExtensions:ve($.map(te=>te.extensions))}]})},su=($,K)=>te=>{const we=te.getData();if(!we.url.value){ts($),te.close();return}const Ue=Jn=>Y.from(we[Jn]).filter(qn=>!hs(K.anchor[Jn],qn)),dt={href:we.url.value,text:Ue("text"),target:Ue("target"),rel:Ue("rel"),class:Ue("linkClass"),title:Ue("title")},on={href:we.url.value,attach:we.url.meta!==void 0&&we.url.meta.attach?we.url.meta.attach:oo};va.preprocess($,dt).then(Jn=>{tf($,on,Jn)}),te.close()},ya=$=>(K,te)=>ca($)(K,te),Ju=$=>Y.from($.split(",")[1]).getOr(""),us=($,K)=>{const te=K.getData();K.block("Uploading file"),Vn(te.fileinput).fold(()=>{K.unblock()},we=>{const Ue=URL.createObjectURL(we),dt=({url:Jn,fileName:qn})=>{K.setData({text:qn,title:qn,url:{value:Jn,meta:{}}}),K.showTab("general"),K.focus("url")},on=()=>{K.unblock(),URL.revokeObjectURL(Ue)};wo(we).then(Jn=>{const qn=$.getExistingBlobInfo(Ju(Jn),we.type),Ps=qn&&qn.filename()===we.name?qn:$.createBlobCache(we,Ue,Jn);return $.addToBlobCache(Ps),$.uploadFile(Ps,Fa)}).then(Jn=>{dt(Jn),on()}).catch(Jn=>{on(),$.alertErr(Jn,()=>{K.focus("fileinput")})})})},zh=$=>(K,te,we)=>{var Ue;return $.editorUpload.blobCache.create({blob:K,blobUri:te,name:(Ue=K.name)==null?void 0:Ue.replace(/\.[^\.]+$/,""),filename:K.name,base64:we.split(",")[1]})},oi=$=>K=>{$.editorUpload.blobCache.add(K)},Nc=$=>(K,te)=>$.editorUpload.blobCache.getByData(K,te),gg=$=>(K,te)=>{$.windowManager.alert(K,te)},hg=$=>{const K=hn($);return ni.collect($,K)},gl=($,K)=>{const te=$.anchor,we=te.url.getOr("");return{url:{value:we,meta:{original:{value:we}}},text:te.text.getOr(""),title:te.title.getOr(""),anchor:we,link:we,rel:te.rel.getOr(""),target:te.target.or(K).getOr(""),linkClass:te.linkClass.getOr(""),fileinput:[]}},pg=($,K,te,we,Ue,dt)=>{const on=ve([$,K,te,De([we.anchor.map(Va.createUi("anchor","Anchors")),we.rels.map(Va.createUi("rel","Rel")),we.targets.map(Va.createUi("target","Open link in...")),we.link.map(Va.createUi("link","Link list")),we.classes.map(Va.createUi("linkClass","Class"))])]);return Ue?{type:"tabpanel",tabs:ve([[{title:"General",name:"general",items:on}],[ot.makeTab(dt)]])}:{type:"panel",items:on}},Jd=($,K,te)=>{const we=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Ue=$.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),dt=$.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],on=Y.from(_e(te)),Jn=gl($,on),qn=$.catalogs,Ps=_s.init(Jn,qn),As=pg(we,Ue,dt,qn,$.hasUploadPanel,Ha(te)),sf={addToBlobCache:oi(te),createBlobCache:zh(te),alertErr:gg(te),uploadFile:ya(te),getExistingBlobInfo:Nc(te)};return{title:"Insert/Edit Link",size:"normal",body:As,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Jn,onChange:(rf,{name:ri})=>{ri==="fileinput"?us(sf,rf):Ps.onChange(rf.getData,{name:ri}).each(V1=>{rf.setData(V1)})},onSubmit:K}},hl=$=>{hg($).then(te=>{const we=su($,te);return Jd(te,we,$)}).then(te=>{$.windowManager.open(te)})},Qu=$=>{$.addCommand("mceLink",(K,te)=>{(te==null?void 0:te.dialog)===!0||!il($)?hl($):$.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},We=$=>{$.addShortcut("Meta+K","",()=>{$.execCommand("mceLink")})};var Qd=tinymce.util.Tools.resolve("tinymce.util.VK");const of=($,K)=>{document.body.appendChild($),$.dispatchEvent(K),document.body.removeChild($)},si=$=>{const K=document.createElement("a");K.target="_blank",K.href=$,K.rel="noreferrer noopener";const te=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(te),of(K,te)},ru=$=>$.altKey===!0&&$.shiftKey===!1&&$.ctrlKey===!1&&$.metaKey===!1,em=($,K)=>{if(K){const te=ic(K);if(/^#/.test(te)){const we=$.dom.select(`${te},[name="${So(te,"#")}"]`);we.length&&$.selection.scrollIntoView(we[0],!0)}else si(K.href)}},Ca=$=>{const K=$.selection.getRng(),te=K.startContainer;return js(te)&&K.startContainer===K.endContainer&&$.dom.select("img",te).length===1},ed=($,K)=>{const te=ll($.dom.getParents(K));return et(te.length===1,te[0])},au=$=>{const K=pt($.selection.getRng());return et(K.length>0,K[0]).or(ed($,$.selection.getNode()))},pl=$=>$.selection.isCollapsed()||Ca($)?ed($,$.selection.getStart()):au($),mo=$=>{const K=Rc(),te=()=>K.get().or(pl($)),we=()=>te().each(Ue=>em($,Ue));return $.on("contextmenu",Ue=>{ed($,Ue.target).each(K.set)}),$.on("SelectionChange",()=>{K.isSet()||pl($).each(K.set)}),$.on("click",Ue=>{K.clear();const dt=ll($.dom.getParents(Ue.target));dt.length===1&&Qd.metaKeyPressed(Ue)&&(Ue.preventDefault(),em($,dt[0]))}),$.on("keydown",Ue=>{K.clear(),!Ue.isDefaultPrevented()&&Ue.keyCode===13&&ru(Ue)&&te().each(dt=>{Ue.preventDefault(),em($,dt)})}),{gotoSelectedLink:we}},tm=$=>()=>{$.execCommand("mceLink",!1,{dialog:!0})},Wr=($,K)=>($.on("NodeChange",K),()=>$.off("NodeChange",K)),B=$=>K=>{const te=()=>{K.setActive(!$.mode.isReadOnly()&&lc($,$.selection.getNode())),K.setEnabled($.selection.isEditable())};return te(),Wr($,te)},V=$=>K=>{const te=()=>{K.setEnabled($.selection.isEditable())};return te(),Wr($,te)},X=$=>K=>{const te=dt=>Qm(dt)||nu($.selection.getRng()),we=$.dom.getParents($.selection.getStart()),Ue=dt=>{K.setEnabled(te(dt)&&$.selection.isEditable())};return Ue(we),Wr($,dt=>Ue(dt.parents))},ye=($,K)=>{$.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:tm($),onSetup:B($)}),$.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:K.gotoSelectedLink,onSetup:X($)}),$.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ts($),onSetup:X($)})},yt=($,K)=>{$.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:K.gotoSelectedLink,onSetup:X($)}),$.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:tm($),onSetup:V($)}),$.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ts($),onSetup:X($)})},ln=$=>{const K="link unlink openlink",te="link";$.ui.registry.addContextMenu("link",{update:we=>$.dom.isEditable(we)?Qm($.dom.getParents(we,"a"))?K:te:""})},Po=($,K)=>{const te=dt=>{dt.selection.collapse(!1)},we=dt=>{const on=$.selection.getNode();return dt.setEnabled(lc($,on)&&$.selection.isEditable()),oo},Ue=dt=>{const on=hn($),Jn=Mc($);if(on.isNone()&&Jn){const qn=pa($.selection,on);return et(qn.length===0,dt)}else return Y.none()};$.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:B($)},label:"Link",predicate:dt=>le($)&&lc($,dt),initValue:()=>hn($).fold(Rt(""),ic),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:dt=>{const on=$.selection.getNode();return dt.setActive(lc($,on)),B($)(dt)},onAction:dt=>{const on=dt.getValue(),Jn=Ue(on);tf($,{href:on,attach:oo},{href:on,text:Jn,title:Y.none(),rel:Y.none(),target:Y.from(_e($)),class:Y.none()}),te($),dt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:we,onAction:dt=>{ts($),dt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:we,onAction:dt=>{K.gotoSelectedLink(),dt.hide()}}]})},Sa=$=>{const K=mo($);ye($,K),yt($,K),ln($),Po($,K)};var Pc=()=>{xn.add("link",$=>{jn($),Qu($),Sa($),We($)})};Pc()})();(function(){var xn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Tn=Object.getPrototypeOf,Bn=(B,V,X)=>{var ye;return X(B,V.prototype)?!0:((ye=B.constructor)==null?void 0:ye.name)===V.name},Ln=B=>{const V=typeof B;return B===null?"null":V==="object"&&Array.isArray(B)?"array":V==="object"&&Bn(B,String,(X,ye)=>ye.isPrototypeOf(X))?"string":V},No=B=>V=>Ln(V)===B,_o=B=>V=>typeof V===B,ws=B=>V=>B===V,Et=(B,V)=>ki(B)&&Bn(B,V,(X,ye)=>Tn(X)===ye),Dn=No("string"),ki=No("object"),ra=B=>Et(B,Object),sc=No("array"),xr=ws(null),Zs=_o("boolean"),rc=B=>B==null,oo=B=>!rc(B),Rt=_o("function"),Fa=_o("number"),ac=(B,V)=>{if(sc(B)){for(let X=0,ye=B.length;X<ye;++X)if(!V(B[X]))return!1;return!0}return!1},Y=()=>{},Wr=class Wr{constructor(V,X){Ie(this,"tag");Ie(this,"value");this.tag=V,this.value=X}static some(V){return new Wr(!0,V)}static none(){return Wr.singletonNone}fold(V,X){return this.tag?X(this.value):V()}isSome(){return this.tag}isNone(){return!this.tag}map(V){return this.tag?Wr.some(V(this.value)):Wr.none()}bind(V){return this.tag?V(this.value):Wr.none()}exists(V){return this.tag&&V(this.value)}forall(V){return!this.tag||V(this.value)}filter(V){return!this.tag||V(this.value)?this:Wr.none()}getOr(V){return this.tag?this.value:V}or(V){return this.tag?this:V}getOrThunk(V){return this.tag?this.value:V()}orThunk(V){return this.tag?this:V()}getOrDie(V){if(this.tag)return this.value;throw new Error(V??"Called getOrDie on None")}static from(V){return oo(V)?Wr.some(V):Wr.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(V){this.tag&&V(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Wr,"singletonNone",new Wr(!1));let tn=Wr;const Qc=Array.prototype.push,dn=B=>{const V=[];for(let X=0,ye=B.length;X<ye;++X){if(!sc(B[X]))throw new Error("Arr.flatten item "+X+" was not an array, input: "+B);Qc.apply(V,B[X])}return V},ie=(B,V)=>V>=0&&V<B.length?tn.some(B[V]):tn.none(),an=B=>ie(B,0),as=(B,V)=>{for(let X=0;X<B.length;X++){const ye=V(B[X],X);if(ye.isSome())return ye}return tn.none()},gn=Object.keys,ve=Object.hasOwnProperty,ne=(B,V)=>{const X=gn(B);for(let ye=0,yt=X.length;ye<yt;ye++){const ln=X[ye],Po=B[ln];V(Po,ln)}},pr=B=>(V,X)=>{B[X]=V},Vn=(B,V,X,ye)=>{ne(B,(yt,ln)=>{(V(yt,ln)?X:ye)(yt,ln)})},Dt=(B,V)=>{const X={};return Vn(B,V,pr(X),Y),X},T=(B,V)=>ve.call(B,V),Ko=(B,V)=>T(B,V)&&B[V]!==void 0&&B[V]!==null,Vt=(B=>(...V)=>{if(V.length===0)throw new Error("Can't merge zero objects");const X={};for(let ye=0;ye<V.length;ye++){const yt=V[ye];for(const ln in yt)T(yt,ln)&&(X[ln]=B(X[ln],yt[ln]))}return X})((B,V)=>ra(B)&&ra(V)?Vt(B,V):V),Me=B=>B.length>0,ao=(B,V)=>{const ye=(V||document).createElement("div");if(ye.innerHTML=B,!ye.hasChildNodes()||ye.childNodes.length>1){const yt="HTML does not have a single root node";throw console.error(yt,B),new Error(yt)}return hs(ye.childNodes[0])},Qs=(B,V)=>{const ye=(V||document).createElement(B);return hs(ye)},Io=(B,V)=>{const ye=(V||document).createTextNode(B);return hs(ye)},hs=B=>{if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},et={fromHtml:ao,fromTag:Qs,fromText:Io,fromDom:hs,fromPoint:(B,V,X)=>tn.from(B.dom.elementFromPoint(V,X)).map(hs)},N=(B,V,X)=>{if(Dn(X)||Zs(X)||Fa(X))B.setAttribute(V,X+"");else throw console.error("Invalid call to Attribute.set. Key ",V,":: Value ",X,":: Element ",B),new Error("Attribute value was not simple")},Rc=(B,V,X)=>{N(B.dom,V,X)},co=(B,V)=>{B.dom.removeAttribute(V)};var cs=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),So=tinymce.util.Tools.resolve("tinymce.util.URI");const aa=B=>V=>V.options.get(B),vt=B=>{const V=B.options.register;V("image_dimensions",{processor:"boolean",default:!0}),V("image_advtab",{processor:"boolean",default:!1}),V("image_uploadtab",{processor:"boolean",default:!0}),V("image_prepend_url",{processor:"string",default:""}),V("image_class_list",{processor:"object[]"}),V("image_description",{processor:"boolean",default:!0}),V("image_title",{processor:"boolean",default:!1}),V("image_caption",{processor:"boolean",default:!1}),V("image_list",{processor:X=>{const ye=X===!1||Dn(X)||ac(X,ki)||Rt(X);return ye?{value:X,valid:ye}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},jn=aa("image_dimensions"),Mt=aa("image_advtab"),le=aa("image_uploadtab"),Bs=aa("image_prepend_url"),_e=aa("image_class_list"),ge=aa("image_description"),nn=aa("image_title"),yn=aa("image_caption"),cn=aa("image_list"),Ws=aa("a11y_advanced_options"),so=aa("automatic_uploads"),il=B=>Me(B.options.get("images_upload_url")),Lh=B=>oo(B.options.get("images_upload_handler")),ca=(B,V)=>Math.max(parseInt(B,10),parseInt(V,10)),Gn=B=>new Promise(V=>{const X=document.createElement("img"),ye=ln=>{X.parentNode&&X.parentNode.removeChild(X),V(ln)};X.addEventListener("load",()=>{const ln=ca(X.width,X.clientWidth),Po=ca(X.height,X.clientHeight),Sa={width:ln,height:Po};ye(Promise.resolve(Sa))}),X.addEventListener("error",()=>{ye(Promise.reject(`Failed to get image dimensions for: ${B}`))});const yt=X.style;yt.visibility="hidden",yt.position="fixed",yt.bottom=yt.left="0px",yt.width=yt.height="auto",document.body.appendChild(X),X.src=B}),Ha=B=>(B&&(B=B.replace(/px$/,"")),B),Lo=B=>(B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B),is=B=>{if(B.margin){const V=String(B.margin).split(" ");switch(V.length){case 1:B["margin-top"]=B["margin-top"]||V[0],B["margin-right"]=B["margin-right"]||V[0],B["margin-bottom"]=B["margin-bottom"]||V[0],B["margin-left"]=B["margin-left"]||V[0];break;case 2:B["margin-top"]=B["margin-top"]||V[0],B["margin-right"]=B["margin-right"]||V[1],B["margin-bottom"]=B["margin-bottom"]||V[0],B["margin-left"]=B["margin-left"]||V[1];break;case 3:B["margin-top"]=B["margin-top"]||V[0],B["margin-right"]=B["margin-right"]||V[1],B["margin-bottom"]=B["margin-bottom"]||V[2],B["margin-left"]=B["margin-left"]||V[1];break;case 4:B["margin-top"]=B["margin-top"]||V[0],B["margin-right"]=B["margin-right"]||V[1],B["margin-bottom"]=B["margin-bottom"]||V[2],B["margin-left"]=B["margin-left"]||V[3]}delete B.margin}return B},Ku=(B,V)=>{const X=cn(B);Dn(X)?fetch(X).then(ye=>{ye.ok&&ye.json().then(V)}):Rt(X)?X(V):V(X)},_i=(B,V,X)=>{const ye=()=>{X.onload=X.onerror=null,B.selection&&(B.selection.select(X),B.nodeChanged())};X.onload=()=>{!V.width&&!V.height&&jn(B)&&B.dom.setAttribs(X,{width:String(X.clientWidth),height:String(X.clientHeight)}),ye()},X.onerror=ye},Ur=B=>new Promise((V,X)=>{const ye=new FileReader;ye.onload=()=>{V(ye.result)},ye.onerror=()=>{var yt;X((yt=ye.error)==null?void 0:yt.message)},ye.readAsDataURL(B)}),ps=B=>B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder")),js=(B,V)=>{const X=B.options.get;return So.isDomSafe(V,"img",{allow_html_data_urls:X("allow_html_data_urls"),allow_script_urls:X("allow_script_urls"),allow_svg_data_urls:X("allow_svg_data_urls")})},Fo=cs.DOM,cc=B=>B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?Ha(B.style.marginLeft):"",ic=B=>B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?Ha(B.style.marginTop):"",bt=B=>B.style.borderWidth?Ha(B.style.borderWidth):"",$n=(B,V)=>B.hasAttribute(V)?B.getAttribute(V)??"":"",hn=B=>B.parentNode!==null&&B.parentNode.nodeName==="FIGURE",lc=(B,V,X)=>{X===""||X===null?B.removeAttribute(V):B.setAttribute(V,X)},pa=B=>{const V=Fo.create("figure",{class:"image"});Fo.insertAfter(V,B),V.appendChild(B),V.appendChild(Fo.create("figcaption",{contentEditable:"true"},"Caption")),V.contentEditable="false"},pt=B=>{const V=B.parentNode;oo(V)&&(Fo.insertAfter(B,V),Fo.remove(V))},ll=B=>{hn(B)?pt(B):pa(B)},Qm=(B,V)=>{const X=B.getAttribute("style"),ye=V(X!==null?X:"");ye.length>0?(B.setAttribute("style",ye),B.setAttribute("data-mce-style",ye)):B.removeAttribute("style")},nu=(B,V)=>(X,ye,yt)=>{const ln=X.style;ln[ye]?(ln[ye]=Lo(yt),Qm(X,V)):lc(X,ye,yt)},Mc=(B,V)=>B.style[V]?Ha(B.style[V]):$n(B,V),za=(B,V)=>{const X=Lo(V);B.style.marginLeft=X,B.style.marginRight=X},wo=(B,V)=>{const X=Lo(V);B.style.marginTop=X,B.style.marginBottom=X},Yt=(B,V)=>{const X=Lo(V);B.style.borderWidth=X},Xo=(B,V)=>{B.style.borderStyle=V},ef=B=>B.style.borderStyle??"",Yu=B=>oo(B)&&B.nodeName==="FIGURE",ei=B=>B.nodeName==="IMG",Nt=B=>{const V=Fo.getAttrib(B,"alt"),X=Fo.getAttrib(B,"role");return B.hasAttribute("alt")&&V.length===0||X==="presentation"||X==="none"},ba=B=>Nt(B)?"":$n(B,"alt"),ul=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Fh=(B,V)=>{const X=document.createElement("img");return lc(X,"style",V.style),(cc(X)||V.hspace!=="")&&za(X,V.hspace),(ic(X)||V.vspace!=="")&&wo(X,V.vspace),(bt(X)||V.border!=="")&&Yt(X,V.border),(ef(X)||V.borderStyle!=="")&&Xo(X,V.borderStyle),B(X.getAttribute("style")??"")},Er=(B,V)=>{const X=document.createElement("img");if(Ai(B,{...V,caption:!1},X),Wd(X,V.alt,V.isDecorative),V.caption){const ye=Fo.create("figure",{class:"image"});return ye.appendChild(X),ye.appendChild(Fo.create("figcaption",{contentEditable:"true"},"Caption")),ye.contentEditable="false",ye}else return X},tf=(B,V)=>({src:$n(V,"src"),alt:ba(V),title:$n(V,"title"),width:Mc(V,"width"),height:Mc(V,"height"),class:$n(V,"class"),style:B($n(V,"style")),caption:hn(V),hspace:cc(V),vspace:ic(V),border:bt(V),borderStyle:ef(V),isDecorative:Nt(V)}),ts=(B,V,X,ye,yt)=>{X[ye]!==V[ye]&&yt(B,ye,String(X[ye]))},Wd=(B,V,X)=>{if(X){Fo.setAttrib(B,"role","presentation");const ye=et.fromDom(B);Rc(ye,"alt","")}else{if(xr(V)){const ye=et.fromDom(B);co(ye,"alt")}else{const ye=et.fromDom(B);Rc(ye,"alt",V)}Fo.getAttrib(B,"role")==="presentation"&&Fo.setAttrib(B,"role","")}},jd=(B,V,X)=>{(X.alt!==V.alt||X.isDecorative!==V.isDecorative)&&Wd(B,X.alt,X.isDecorative)},dl=(B,V)=>(X,ye,yt)=>{B(X,yt),Qm(X,V)},Ai=(B,V,X)=>{const ye=tf(B,X);ts(X,ye,V,"caption",(yt,ln,Po)=>ll(yt)),ts(X,ye,V,"src",lc),ts(X,ye,V,"title",lc),ts(X,ye,V,"width",nu("width",B)),ts(X,ye,V,"height",nu("height",B)),ts(X,ye,V,"class",lc),ts(X,ye,V,"style",dl((yt,ln)=>lc(yt,"style",ln),B)),ts(X,ye,V,"hspace",dl(za,B)),ts(X,ye,V,"vspace",dl(wo,B)),ts(X,ye,V,"border",dl(Yt,B)),ts(X,ye,V,"borderStyle",dl(Xo,B)),jd(X,ye,V)},Ns=(B,V)=>{const X=B.dom.styles.parse(V),ye=is(X),yt=B.dom.styles.parse(B.dom.styles.serialize(ye));return B.dom.styles.serialize(yt)},ou=B=>{const V=B.selection.getNode(),X=B.dom.getParent(V,"figure.image");return X?B.dom.select("img",X)[0]:V&&(V.nodeName!=="IMG"||ps(V))?null:V},dg=(B,V)=>{const X=B.dom,ye=Dt(B.schema.getTextBlockElements(),(ln,Po)=>!B.schema.isValidChild(Po,"figure")),yt=X.getParent(V.parentNode,ln=>Ko(ye,ln.nodeName),B.getBody());return yt?X.split(yt,V)??V:V},st=B=>{const V=ou(B);return V?tf(X=>Ns(B,X),V):ul()},Va=(B,V)=>{const X=Er(yt=>Ns(B,yt),V);B.dom.setAttrib(X,"data-mce-id","__mcenew"),B.focus(),B.insertContent(X.outerHTML);const ye=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(ye,"data-mce-id",null),Yu(ye)){const yt=dg(B,ye);B.selection.select(yt)}else B.selection.select(ye)},Gd=(B,V)=>{B.dom.setAttrib(V,"src",V.getAttribute("src"))},qd=(B,V)=>{if(V){const X=B.dom.is(V.parentNode,"figure.image")?V.parentNode:V;B.dom.remove(X),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},uo=(B,V)=>{const X=ou(B);if(X)if(Ai(ye=>Ns(B,ye),V,X),Gd(B,X),Yu(X.parentNode)){B.dom.setStyle(X,"float","");const ye=X.parentNode;dg(B,ye),B.selection.select(X.parentNode)}else B.selection.select(X),_i(B,V,X)},Kd=(B,V)=>{const X=V.src;return{...V,src:js(B,X)?X:""}},uc=(B,V)=>{const X=ou(B);if(X){const yt={...tf(Po=>Ns(B,Po),X),...V},ln=Kd(B,yt);yt.src?uo(B,ln):qd(B,X)}else V.src&&Va(B,{...ul(),...V})};var _s=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Oi=tinymce.util.Tools.resolve("tinymce.util.Tools");const Yd=B=>Dn(B.value)?B.value:"",dc=B=>Dn(B.text)?B.text:Dn(B.title)?B.title:"",Tr=(B,V)=>{const X=[];return Oi.each(B,ye=>{const yt=dc(ye);if(ye.menu!==void 0){const ln=Tr(ye.menu,V);X.push({text:yt,items:ln})}else{const ln=V(ye);X.push({text:yt,value:ln})}}),X},ti=(B=Yd)=>V=>V?tn.from(V).map(X=>Tr(X,B)):tn.none(),va=B=>ti(Yd)(B),z1=B=>T(B,"items"),mg=(B,V)=>as(B,X=>z1(X)?mg(X.items,V):X.value===V?tn.some(X):tn.none()),ml={sanitizer:ti,sanitize:va,findEntry:(B,V)=>B.bind(X=>mg(X,V))},fg={makeTab:B=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},xs=B=>{const V=ml.sanitizer(on=>B.convertURL(on.value||on.url||"","src")),X=new Promise(on=>{Ku(B,Jn=>{on(V(Jn).map(qn=>dn([[{text:"None",value:""}],qn])))})}),ye=ml.sanitize(_e(B)),yt=Mt(B),ln=le(B),Po=il(B),Sa=Lh(B),Pc=st(B),un=ge(B),$=nn(B),K=jn(B),te=yn(B),we=Ws(B),Ue=so(B),dt=tn.some(Bs(B)).filter(on=>Dn(on)&&on.length>0);return X.then(on=>({image:Pc,imageList:on,classList:ye,hasAdvTab:yt,hasUploadTab:ln,hasUploadUrl:Po,hasUploadHandler:Sa,hasDescription:un,hasImageTitle:$,hasDimensions:K,hasImageCaption:te,prependURL:dt,hasAccessibilityOptions:we,automaticUploads:Ue}))},Wt=B=>{const V={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},X=B.imageList.map($=>({name:"images",type:"listbox",label:"Image list",items:$})),ye={name:"alt",type:"input",label:"Alternative description",enabled:!(B.hasAccessibilityOptions&&B.image.isDecorative)},yt={name:"title",type:"input",label:"Image title"},ln={name:"dimensions",type:"sizeinput"},Po={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Sa=B.classList.map($=>({name:"classes",type:"listbox",label:"Class",items:$})),Pc={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},un=$=>$?{type:"grid",columns:2}:{type:"panel"};return dn([[V],X.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[Po]:[],B.hasDescription?[ye]:[],B.hasImageTitle?[yt]:[],B.hasDimensions?[ln]:[],[{...un(B.classList.isSome()&&B.hasImageCaption),items:dn([Sa.toArray(),B.hasImageCaption?[Pc]:[]])}]])},kr={makeTab:B=>({title:"General",name:"general",items:Wt(B)}),makeItems:Wt},nf={makeTab:B=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Xd=B=>({prevImage:ml.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}),Jo=B=>({src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}),Xu=(B,V)=>({src:B.src.value,alt:(B.alt===null||B.alt.length===0)&&V?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}),ni=(B,V)=>/^(?:[a-zA-Z]+:)?\/\//.test(V)?tn.none():B.prependURL.bind(X=>V.substring(0,X.length)!==X?tn.some(X+V):tn.none()),Hh=(B,V)=>{const X=V.getData();ni(B,X.src.value).each(ye=>{V.setData({src:{value:ye,meta:X.src.meta}})})},ot=(B,V,X)=>{B.hasDescription&&Dn(X.alt)&&(V.alt=X.alt),B.hasAccessibilityOptions&&(V.isDecorative=X.isDecorative||V.isDecorative||!1),B.hasImageTitle&&Dn(X.title)&&(V.title=X.title),B.hasDimensions&&(Dn(X.width)&&(V.dimensions.width=X.width),Dn(X.height)&&(V.dimensions.height=X.height)),Dn(X.class)&&ml.findEntry(B.classList,X.class).each(ye=>{V.classes=ye.value}),B.hasImageCaption&&Zs(X.caption)&&(V.caption=X.caption),B.hasAdvTab&&(Dn(X.style)&&(V.style=X.style),Dn(X.vspace)&&(V.vspace=X.vspace),Dn(X.border)&&(V.border=X.border),Dn(X.hspace)&&(V.hspace=X.hspace),Dn(X.borderstyle)&&(V.borderstyle=X.borderstyle))},su=(B,V)=>{const X=V.getData(),ye=X.src.meta;if(ye!==void 0){const yt=Vt({},X);ot(B,yt,ye),V.setData(yt)}},ya=(B,V,X,ye)=>{const yt=ye.getData(),ln=yt.src.value,Po=yt.src.meta||{};!Po.width&&!Po.height&&V.hasDimensions&&(Me(ln)?B.imageSize(ln).then(Sa=>{X.open&&ye.setData({dimensions:Sa})}).catch(Sa=>console.error(Sa)):ye.setData({dimensions:{width:"",height:""}}))},Ju=(B,V,X)=>{const ye=X.getData(),yt=ml.findEntry(B.imageList,ye.src.value);V.prevImage=yt,X.setData({images:yt.map(ln=>ln.value).getOr("")})},us=(B,V,X,ye)=>{Hh(V,ye),su(V,ye),ya(B,V,X,ye),Ju(V,X,ye)},zh=(B,V,X,ye)=>{const yt=ye.getData(),ln=ml.findEntry(V.imageList,yt.images);ln.each(Po=>{yt.alt===""||X.prevImage.map(Pc=>Pc.text===yt.alt).getOr(!1)?Po.value===""?ye.setData({src:Po,alt:X.prevAlt}):ye.setData({src:Po,alt:Po.text}):ye.setData({src:Po})}),X.prevImage=ln,us(B,V,X,ye)},oi=(B,V,X,ye)=>{const yt=ye.getData();ye.block("Uploading image"),an(yt.fileinput).fold(()=>{ye.unblock()},ln=>{const Po=URL.createObjectURL(ln),Sa=()=>{ye.unblock(),URL.revokeObjectURL(Po)},Pc=un=>{ye.setData({src:{value:un,meta:{}}}),ye.showTab("general"),us(B,V,X,ye),ye.focus("src")};Ur(ln).then(un=>{const $=B.createBlobCache(ln,Po,un);V.automaticUploads?B.uploadImage($).then(K=>{Pc(K.url),Sa()}).catch(K=>{Sa(),B.alertErr(K,()=>{ye.focus("fileinput")})}):(B.addToBlobCache($),Pc($.blobUri()),ye.unblock())})})},Nc=(B,V,X)=>(ye,yt)=>{yt.name==="src"?us(B,V,X,ye):yt.name==="images"?zh(B,V,X,ye):yt.name==="alt"?X.prevAlt=ye.getData().alt:yt.name==="fileinput"?oi(B,V,X,ye):yt.name==="isDecorative"&&ye.setEnabled("alt",!ye.getData().isDecorative)},gg=B=>()=>{B.open=!1},hg=B=>B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler?{type:"tabpanel",tabs:dn([[kr.makeTab(B)],B.hasAdvTab?[fg.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[nf.makeTab(B)]:[]])}:{type:"panel",items:kr.makeItems(B)},gl=(B,V,X)=>ye=>{const yt=Vt(Jo(V.image),ye.getData()),ln={...yt,style:Fh(X.normalizeCss,Xu(yt,!1))};B.execCommand("mceUpdateImage",!1,Xu(ln,V.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),ye.close()},pg=B=>V=>js(B,V)?Gn(B.documentBaseURI.toAbsolute(V)).then(X=>({width:String(X.width),height:String(X.height)})):Promise.resolve({width:"",height:""}),Jd=B=>(V,X,ye)=>{var yt;return B.editorUpload.blobCache.create({blob:V,blobUri:X,name:(yt=V.name)==null?void 0:yt.replace(/\.[^\.]+$/,""),filename:V.name,base64:ye.split(",")[1]})},hl=B=>V=>{B.editorUpload.blobCache.add(V)},Qu=B=>(V,X)=>{B.windowManager.alert(V,X)},We=B=>V=>Ns(B,V),Qd=B=>V=>B.dom.parseStyle(V),of=B=>(V,X)=>B.dom.serializeStyle(V,X),si=B=>V=>_s(B).upload([V],!1).then(X=>{var ye;return X.length===0?Promise.reject("Failed to upload image"):X[0].status===!1?Promise.reject((ye=X[0].error)==null?void 0:ye.message):X[0]}),ru=B=>{const V={imageSize:pg(B),addToBlobCache:hl(B),createBlobCache:Jd(B),alertErr:Qu(B),normalizeCss:We(B),parseStyle:Qd(B),serializeStyle:of(B),uploadImage:si(B)};return{open:()=>{xs(B).then(ye=>{const yt=Xd(ye);return{title:"Insert/Edit Image",size:"normal",body:hg(ye),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Jo(ye.image),onSubmit:gl(B,ye,V),onChange:Nc(V,ye,yt),onClose:gg(yt)}}).then(B.windowManager.open)}}},em=B=>{B.addCommand("mceImage",ru(B).open),B.addCommand("mceUpdateImage",(V,X)=>{B.undoManager.transact(()=>uc(B,X))})},Ca=B=>{const V=B.attr("class");return oo(V)&&/\bimage\b/.test(V)},ed=B=>V=>{let X=V.length;const ye=yt=>{yt.attr("contenteditable",B?"true":null)};for(;X--;){const yt=V[X];Ca(yt)&&(yt.attr("contenteditable",B?"false":null),Oi.each(yt.getAll("figcaption"),ye))}},au=B=>{B.on("PreInit",()=>{B.parser.addNodeFilter("figure",ed(!0)),B.serializer.addNodeFilter("figure",ed(!1))})},pl=B=>V=>{const X=()=>{V.setEnabled(B.selection.isEditable())};return B.on("NodeChange",X),X(),()=>{B.off("NodeChange",X)}},mo=B=>{B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ru(B).open,onSetup:V=>{V.setActive(oo(ou(B)));const X=B.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",V.setActive).unbind,ye=pl(B)(V);return()=>{X(),ye()}}}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ru(B).open,onSetup:pl(B)}),B.ui.registry.addContextMenu("image",{update:V=>B.selection.isEditable()&&(Yu(V)||ei(V)&&!ps(V))?["image"]:[]})};var tm=()=>{xn.add("image",B=>{vt(B),au(B),mo(B),em(B)})};tm()})();(function(){var xn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Tn=_e=>({backspaceDelete:ge=>{_e.execCommand("mceListBackspaceDelete",!1,ge)}}),Bn=_e=>_e==null,Ln=_e=>!Bn(_e),No=_e=>()=>_e,_o=(_e,ge)=>_e===ge,ws=No(!1),Bs=class Bs{constructor(ge,nn){Ie(this,"tag");Ie(this,"value");this.tag=ge,this.value=nn}static some(ge){return new Bs(!0,ge)}static none(){return Bs.singletonNone}fold(ge,nn){return this.tag?nn(this.value):ge()}isSome(){return this.tag}isNone(){return!this.tag}map(ge){return this.tag?Bs.some(ge(this.value)):Bs.none()}bind(ge){return this.tag?ge(this.value):Bs.none()}exists(ge){return this.tag&&ge(this.value)}forall(ge){return!this.tag||ge(this.value)}filter(ge){return!this.tag||ge(this.value)?this:Bs.none()}getOr(ge){return this.tag?this.value:ge}or(ge){return this.tag?this:ge}getOrThunk(ge){return this.tag?this.value:ge()}orThunk(ge){return this.tag?this:ge()}getOrDie(ge){if(this.tag)return this.value;throw new Error(ge??"Called getOrDie on None")}static from(ge){return Ln(ge)?Bs.some(ge):Bs.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ge){this.tag&&ge(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Bs,"singletonNone",new Bs(!1));let Et=Bs;const Dn=Array.prototype.slice,ki=(_e,ge)=>{for(let nn=0,yn=_e.length;nn<yn;nn++){const cn=_e[nn];if(ge(cn,nn))return!0}return!1},ra=(_e,ge)=>{const nn=_e.length,yn=new Array(nn);for(let cn=0;cn<nn;cn++){const Ws=_e[cn];yn[cn]=ge(Ws,cn)}return yn},sc=(_e,ge)=>{for(let nn=0,yn=_e.length;nn<yn;nn++){const cn=_e[nn];ge(cn,nn)}},xr=(_e,ge,nn)=>(sc(_e,(yn,cn)=>{nn=ge(nn,yn,cn)}),nn),Zs=(_e,ge,nn)=>{for(let yn=0,cn=_e.length;yn<cn;yn++){const Ws=_e[yn];if(ge(Ws,yn))return Et.some(Ws);if(nn(Ws,yn))break}return Et.none()},rc=(_e,ge)=>Zs(_e,ge,ws),oo=_e=>{const ge=Dn.call(_e,0);return ge.reverse(),ge},Rt=(_e,ge,nn=_o)=>_e.exists(yn=>nn(yn,ge)),ac=(_e=>ge=>ge.replace(_e,""))(/^\s+|\s+$/g),Y=_e=>_e.length>0,tn=_e=>!Y(_e),Qc=_e=>{const ge=oo(ac(_e).split("")),nn=ra(ge,(yn,cn)=>{const Ws=yn.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,cn)*Ws});return xr(nn,(yn,cn)=>yn+cn,0)},dn=_e=>{if(_e--,_e<0)return"";{const ge=_e%26,nn=Math.floor(_e/26),yn=dn(nn),cn=String.fromCharCode(65+ge);return yn+cn}},ie=_e=>/^[A-Z]+$/.test(_e),an=_e=>/^[a-z]+$/.test(_e),as=_e=>/^[0-9]+$/.test(_e),gn=_e=>as(_e)?2:ie(_e)?0:an(_e)?1:tn(_e)?3:4,ve=_e=>{switch(gn(_e)){case 2:return Et.some({listStyleType:Et.none(),start:_e});case 0:return Et.some({listStyleType:Et.some("upper-alpha"),start:Qc(_e).toString()});case 1:return Et.some({listStyleType:Et.some("lower-alpha"),start:Qc(_e).toString()});case 3:return Et.some({listStyleType:Et.none(),start:""});case 4:return Et.none()}},ne=_e=>{const ge=parseInt(_e.start,10);return Rt(_e.listStyleType,"upper-alpha")?dn(ge):Rt(_e.listStyleType,"lower-alpha")?dn(ge).toLowerCase():_e.start},Vn=(_e=>ge=>ge.options.get(_e))("forced_root_block"),Dt=_e=>/\btox\-/.test(_e.className),T=_e=>ge=>Ln(ge)&&_e.test(ge.nodeName),Ko=_e=>ge=>Ln(ge)&&ge.nodeName.toLowerCase()===_e,Xe=T(/^(OL|UL|DL)$/),Yo=T(/^(TH|TD)$/),Vt=T(/^(LI|DT|DD)$/),Me=(_e,ge)=>Zs(_e,Xe,Yo).exists(nn=>nn.nodeName===ge&&!Dt(nn)),ao=(_e,ge)=>{const nn=_e.selection.getNode();return ge({parents:_e.dom.getParents(nn),element:nn}),_e.on("NodeChange",ge),()=>_e.off("NodeChange",ge)},Qs=(_e,ge)=>ge!==null&&!_e.dom.isEditable(ge),Io=(_e,ge)=>{const nn=_e.dom.getParent(ge,"ol,ul,dl");return Qs(_e,nn)||!_e.selection.isEditable()},hs=Ko("ol"),De=["OL","UL","DL"],et=De.join(","),N=(_e,ge)=>{const nn=ge||_e.selection.getStart(!0);return _e.dom.getParent(nn,et,Rc(_e,nn))},Rc=(_e,ge)=>{const nn=_e.dom.getParents(ge,_e.dom.isBlock),yn=Ws=>Ws.nodeName.toLowerCase()!==Vn(_e);return rc(nn,Ws=>yn(Ws)&&co(_e.schema,Ws)).getOr(_e.getBody())},co=(_e,ge)=>!Xe(ge)&&!Vt(ge)&&ki(De,nn=>_e.isValidChild(ge.nodeName,nn)),cs=_e=>{const ge=N(_e);!hs(ge)||Io(_e,ge)||_e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:ne({start:_e.dom.getAttrib(ge,"start","1"),listStyleType:Et.from(_e.dom.getStyle(ge,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:nn=>{const yn=nn.getData();ve(yn.start).each(cn=>{_e.execCommand("mceListUpdate",!1,{attrs:{start:cn.start==="1"?"":cn.start},styles:{"list-style-type":cn.listStyleType.getOr("")}})}),nn.close()}})},So=_e=>{_e.addCommand("mceListProps",()=>{cs(_e)})},aa=(_e,ge)=>nn=>{const yn=cn=>{nn.setActive(Me(cn.parents,ge)),nn.setEnabled(!Io(_e,cn.element)&&_e.selection.isEditable())};return nn.setEnabled(_e.selection.isEditable()),ao(_e,yn)},vt=_e=>{const ge=nn=>()=>_e.execCommand(nn);_e.hasPlugin("advlist")||(_e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:ge("InsertOrderedList"),onSetup:aa(_e,"OL")}),_e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:ge("InsertUnorderedList"),onSetup:aa(_e,"UL")}))},jn=(_e,ge)=>nn=>ao(_e,cn=>nn.setEnabled(Me(cn.parents,ge)&&!Io(_e,cn.element))),Mt=_e=>{const ge={text:"List properties...",icon:"ordered-list",onAction:()=>_e.execCommand("mceListProps"),onSetup:jn(_e,"OL")};_e.ui.registry.addMenuItem("listprops",ge),_e.ui.registry.addContextMenu("lists",{update:nn=>{const yn=N(_e,nn);return hs(yn)?["listprops"]:[]}})};var le=()=>{xn.add("lists",_e=>(So(_e),vt(_e),Mt(_e),Tn(_e)))};le()})();(function(){var xn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Tn=(Et,Dn)=>{Et.focus(),Et.undoManager.transact(()=>{Et.setContent(Dn)}),Et.selection.setCursorLocation(),Et.nodeChanged()},Bn=Et=>Et.getContent({source_view:!0}),Ln=Et=>{const Dn=Bn(Et);Et.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Dn},onSubmit:ki=>{Tn(Et,ki.getData().code),ki.close()}})},No=Et=>{Et.addCommand("mceCodeEditor",()=>{Ln(Et)})},_o=Et=>{const Dn=()=>Et.execCommand("mceCodeEditor");Et.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Dn}),Et.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Dn})};var ws=()=>{xn.add("code",Et=>(No(Et),_o(Et),{}))};ws()})();console.log("Admin panel loaded");document.addEventListener("DOMContentLoaded",()=>{var Tn;const xn=(Tn=document.querySelector('meta[name="csrf-token"]'))==null?void 0:Tn.content;xn&&document.querySelectorAll("form").forEach(Bn=>{if(!Bn.querySelector('input[name="_token"]')){const Ln=document.createElement("input");Ln.type="hidden",Ln.name="_token",Ln.value=xn,Bn.appendChild(Ln)}})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('textarea[data-wysiwyg="1"]').forEach(xn=>{(xn.dataset.wysiwygType||"tinymce")==="tinymce"&&$X.init({target:xn,menubar:!1,plugins:"link image lists code",toolbar:"undo redo | bold italic | bullist numlist | link image | code",height:300,branding:!1,promotion:!1,license_key:"gpl",skin:!1,content_css:!1,images_upload_url:"/admin/upload-image",automatic_uploads:!0,file_picker_types:"image",file_picker_callback:(Bn,Ln,No)=>{if(No.filetype==="image"){const _o=document.createElement("input");_o.setAttribute("type","file"),_o.setAttribute("accept","image/*"),_o.onchange=function(){const ws=this.files[0],Et=new FormData;Et.append("file",ws),fetch("/admin/upload-image",{method:"POST",body:Et}).then(Dn=>Dn.json()).then(Dn=>{Dn&&Dn.location?Bn(Dn.location,{alt:ws.name}):alert("Échec de l'upload de l'image.")}).catch(()=>{alert("Erreur lors de l'upload de l'image.")})},_o.click()}}})})});
//# sourceMappingURL=admin.js.map
